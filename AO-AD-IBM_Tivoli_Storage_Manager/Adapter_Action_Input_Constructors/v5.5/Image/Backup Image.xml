<process draft="false" dev-studio-version="7.6.01.02">
  <process-def name=":AO-AD-IBM_Tivoli_Storage_Manager:Adapter_Action_Input_Constructors:v5.5:Image:Backup Image">
    <parameters>
      <input global="false" required="false">
        <description>The compressalways option specifies whether to continue compressing an object if it grows during compression. Valid values-Yes(Default),No.</description>
        <from>compressalways</from>
        <to>compressalways</to>
      </input>
      <input global="false" required="false">
        <description>The compression option compresses files before you send them to the server.Valid values - yes,no(default)</description>
        <from>compression</from>
        <to>compression</to>
      </input>
      <input global="false" required="false">
        <description>The timeout value is seconds. This is the time after which the command will timeout regardless of whether the command execution is complete or not.</description>
        <from>timeout secs</from>
        <to>timeout secs</to>
      </input>
      <input global="false" required="true">
        <description>Specifies the name of one or more logical volumes. Image backup is only supported on a volume that has a mount point assigned or a drive letter assigned. A volume without a drive letter or mount point cannot be backed up. If you want to back up more than one file system, separate their names with spaces. Do not use pattern matching characters.</description>
        <from>volume list</from>
        <to>volume list</to>
      </input>
      <input global="false" required="false">
        <description>Use the imagegapsize option to specify the minimum size of empty regions on a volume that you want to skip during backup. For example, if you specify a gap size of 10, this means that an empty region on the disk that is larger than 10k in size will not be backed up. Gaps that are exactly 10k will be backed up. However, an empty region that is smaller than 10k will be backed up, even though it does not contain data.

You can specify k (kilobytes) m (megabytes) or g (gigabytes) qualifiers with the value. Without a qualifier, the value is interpreted in kilobytes. Valid values are zero through 4294967295. If you specify a value of 0, all blocks, including unused blocks at the end of the volume, will be backed up. If you specify any value other than 0, unused blocks at the end of the volume will not be backed up. For LAN-based and LAN-free image backup the value is 32k.

Note: Because of operating system limitations, use this option for NTFS file systems only. If you specify imagegapsize &gt; 0 for a file system other than NTFS, the error log receives a warning message.
</description>
        <from>imagegapsize</from>
        <to>imagegapsize</to>
      </input>
      <input global="false" required="false">
        <description>To specify whether to perform a selective or incremental image backup of client file systems.
Valid values â€“ Selective, Incremental
</description>
        <from>mode</from>
        <to>mode</to>
      </input>
      <input global="false" required="false">
        <description>The postsnapshotcmd option allows you to run a command or script after a snapshot is started. This option can be used in conjunction with the presnapshotcmd option to allow you to quiesce an application while a snapshot is created, and then to restart that application after the snapshot is started. This option is only valid if OFS or online image backup has been configured.

For an online image backup, use this option with the backup image command. If the command string contains blanks, enclose the command string in double quotes.
</description>
        <from>postsnapshotcmd</from>
        <to>postsnapshotcmd</to>
      </input>
      <input global="false" required="false">
        <description>The presnapshotcmd option allows you to run a command or script before a snapshot is started. This option can be used in conjunction with the postsnapshotcmd option to allow you to quiesce an application while a snapshot is created, and then to
restart that application after the snapshot is started. This option is only valid if OFS or online image backup has been configured.

For an online image backup, use this option with the backup image command. If the command string contains blanks, enclose the command string in double quotes.
</description>
        <from>presnapshotcmd</from>
        <to>presnapshotcmd</to>
      </input>
      <input global="false" required="false">
        <description>Use the snapshotcachelocation option during an online image backup or open file support operation to specify the location where the LVSA places the cache files. The cache files contain changes made to a volume by other system applications during an online image backup or open file support operation. For an online image backup, the cache files are backed up to the server and the changes are applied to the volume image when you restore the volume. This option is only valid if OFS or online image backup has been configured and the LVSA has been selected as the snapshot provider.

Recommendation: Do not specify the snapshotcachelocation option on a different volume than the target. For example, do not use non-resident cache.

For an online image backup, use the snapshotcachelocation option with the backup image command.
</description>
        <from>snapshotcachelocation</from>
        <to>snapshotcachelocation</to>
      </input>
      <input global="false" required="false">
        <description>Use the snapshotcachesize option to determine the size of the cache file containing the original data for blocks that change during an online image backup or open file support operation. The value is the percent of the used space on the volume on which the snapshot is taken. On a volume with high file system write activity, this value can be increased to remove the condition where the snapshot cache fills up during the operation. The snapshot cache location is specified with the snapshotcachelocation option. This option is only valid if OFS or online image backup has been configured and the LVSA has been selected as the snapshot provider.

For online image backups, use the snapshotcachesize option with the backup image command.
</description>
        <from>snapshotcachesize</from>
        <to>snapshotcachesize</to>
      </input>
      <input global="false" required="false">
        <description>Use the snapshotfsidleretries option to specify the number of additional times the LVSA should try to achieve the snapshot file system idle wait time before the online image backup or open file support operation fails. This option is only valid if OFS or
online image backup has been configured, and the LVSA has been selected as the snapshot provider.
Valid values - The range of values is zero through 99; the default is 99.
</description>
        <from>snapshotfsidleretries</from>
        <to>snapshotfsidleretries</to>
      </input>
      <input global="false" required="false">
        <description>Use the snapshotfsidlewait option during an online image backup or open file support operation to specify the amount of time that must pass in which there is no write activity (read activity is ignored) on a volume before a snapshot can be taken. This allows
the disk to reach an idle state. This option is only valid if OFS or online image backup has been configured, and the LVSA has been selected as the snapshot provider.
Parameters

   maximum wait time
      Specifies the maximum amount of time that must pass during which there is no write activity on a volume before a snapshot can be taken. You can specify ms (milliseconds) or s (seconds) qualifiers with the value. If you do not specify a qualifier, the value you specify is interpreted as seconds. The range of values is zero through 999; the default value is 2 s. A value of zero (0) indicates that the snapshot will occur immediately  without waiting for a period of inactivity. You can specify a maximum wait time value without specifying a minimum wait time value.

   minimum wait time
      Specifies the minimum amount of time that must pass during which there is no write activity on a volume before a snapshot can be taken. You can specify ms (milliseconds) or s (seconds) qualifiers with the value. If you do not specify a qualifier, the value you specify is interpreted as seconds. The range of values is zero through 999; the default value is 50 ms.

Sample: 4s,500ms
</description>
        <from>snapshotfsidlewait</from>
        <to>snapshotfsidlewait</to>
      </input>
      <output global="false" required="false">
        <to>items</to>
        <from>final items</from>
      </output>
    </parameters>
    <access />
    <sequence>
      <assign>
        <assignment>
          <output>
            <to>final items</to>
            <value>
              <root />
            </value>
          </output>
          <xslt-stylesheet>
            <stylesheet-replacement-tokens>
              <replacement-token name="compressalways">
                <input global="false">
                  <from>compressalways</from>
                </input>
              </replacement-token>
              <replacement-token name="compression">
                <input global="false">
                  <from>compression</from>
                </input>
              </replacement-token>
              <replacement-token name="timeout secs">
                <input global="false">
                  <from>timeout secs</from>
                </input>
              </replacement-token>
              <replacement-token name="imagegapsize">
                <input global="false">
                  <from>imagegapsize</from>
                </input>
              </replacement-token>
              <replacement-token name="mode">
                <input global="false">
                  <from>mode</from>
                </input>
              </replacement-token>
              <replacement-token name="postsnapshotcmd">
                <input global="false">
                  <from>postsnapshotcmd</from>
                </input>
              </replacement-token>
              <replacement-token name="presnapshotcmd">
                <input global="false">
                  <from>presnapshotcmd</from>
                </input>
              </replacement-token>
              <replacement-token name="snapshotcachelocation">
                <input global="false">
                  <from>snapshotcachelocation</from>
                </input>
              </replacement-token>
              <replacement-token name="snapshotcachesize">
                <input global="false">
                  <from>snapshotcachesize</from>
                </input>
              </replacement-token>
              <replacement-token name="snapshotfsidleretries">
                <input global="false">
                  <from>snapshotfsidleretries</from>
                </input>
              </replacement-token>
              <replacement-token name="snapshotfsidlewait">
                <input global="false">
                  <from>snapshotfsidlewait</from>
                </input>
              </replacement-token>
              <replacement-token name="volume list">
                <input global="false">
                  <from>volume list</from>
                </input>
              </replacement-token>
            </stylesheet-replacement-tokens>
            <stylesheet><![CDATA[<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="1.0">
  <xsl:output indent="no" omit-xml-declaration="yes" />
  <xsl:template match="/">
    <items>
      <item>
        <operation-name>
          <xsl:text disable-output-escaping="no">backup-image</xsl:text>
        </operation-name>
        <xsl:if test="string('${timeout secs}')!=''">
          <timeout-secs>
            <xsl:value-of select="'${timeout secs}'" disable-output-escaping="no" />
          </timeout-secs>
        </xsl:if>
        <command-options>
          <xsl:if test="string('${compressalways}')!=''">
            <compressalways>
              <xsl:value-of select="'${compressalways}'" disable-output-escaping="no" />
            </compressalways>
          </xsl:if>
          <xsl:if test="string('${compression}')!=''">
            <compression>
              <xsl:value-of select="'${compression}'" disable-output-escaping="no" />
            </compression>
          </xsl:if>
          <xsl:if test="string('${imagegapsize}')!=''">
            <imagegapsize>
              <xsl:value-of select="'${imagegapsize}'" disable-output-escaping="no" />
            </imagegapsize>
          </xsl:if>
          <xsl:if test="string('${mode}')!=''">
            <mode>
              <xsl:value-of select="'${mode}'" disable-output-escaping="no" />
            </mode>
          </xsl:if>
          <xsl:if test="string('${postsnapshotcmd}')!=''">
            <postsnapshotcmd>
              <xsl:value-of select="'${postsnapshotcmd}'" disable-output-escaping="no" />
            </postsnapshotcmd>
          </xsl:if>
          <xsl:if test="string('${presnapshotcmd}')!=''">
            <presnapshotcmd>
              <xsl:value-of select="'${presnapshotcmd}'" disable-output-escaping="no" />
            </presnapshotcmd>
          </xsl:if>
          <xsl:if test="string('${snapshotcachelocation}')!=''">
            <snapshotcachelocation>
              <xsl:value-of select="'${snapshotcachelocation}'" disable-output-escaping="no" />
            </snapshotcachelocation>
          </xsl:if>
          <xsl:if test="string('${snapshotcachesize}')!=''">
            <snapshotcachesize>
              <xsl:value-of select="'${snapshotcachesize}'" disable-output-escaping="no" />
            </snapshotcachesize>
          </xsl:if>
          <xsl:if test="string('${snapshotfsidleretries}')!=''">
            <snapshotfsidleretries>
              <xsl:value-of select="'${snapshotfsidleretries}'" disable-output-escaping="no" />
            </snapshotfsidleretries>
          </xsl:if>
          <xsl:if test="string('${snapshotfsidlewait}')!=''">
            <snapshotfsidlewait>
              <xsl:value-of select="'${snapshotfsidlewait}'" disable-output-escaping="no" />
            </snapshotfsidlewait>
          </xsl:if>
        </command-options>
        <command-arguments>
          <xsl:if test="string('${volume list}')!=''">
            <volume-list>
              <xsl:value-of select="'${volume list}'" disable-output-escaping="no" />
            </volume-list>
          </xsl:if>
        </command-arguments>
      </item>
    </items>
  </xsl:template>
</xsl:stylesheet>]]></stylesheet>
          </xslt-stylesheet>
        </assignment>
        <meta>
          <documentation />
          <checkpoint>false</checkpoint>
        </meta>
        <after-execution>
          <log>
            <level>debug</level>
            <parameters>
              <input>
                <value>FINAL ITEMS: </value>
              </input>
              <input>
                <from>final items</from>
              </input>
            </parameters>
          </log>
        </after-execution>
        <location>:assign[1]</location>
      </assign>
    </sequence>
    <meta>
      <expose-to>
        <consumer>RULE</consumer>
        <consumer>SCHEDULE</consumer>
      </expose-to>
      <documentation>
        <description>Utility to create items xml for Backup Image process.</description>
        <version></version>
      </documentation>
      <peer-location>
        <location>any</location>
      </peer-location>
      <record-metrics>false</record-metrics>
      <process-id>4244bc04-bff4-315c-bcd6-5c7ed66f416e</process-id>
      <author />
      <category />
      <status />
      <keywords />
      <systems />
      <last-modified-by />
      <last-modified>1290596963229</last-modified>
    </meta>
  </process-def>
</process>