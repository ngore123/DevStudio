<process draft="false" dev-studio-version="7.6.01.02">
  <process-def name=":AO-AD-IBM_Tivoli_Storage_Manager:Adapter_Action_Input_Constructors:v5.5:Backup:Query Backup">
    <parameters>
      <input global="false" required="false">
        <description>The Tivoli Storage Manager client opens the file you specify with this option and processes the list of files within according to the specific command. With the exception of the restore and retrieve commands, when you use the filelist option, Tivoli Storage Manager ignores all other file specifications on the command line.
Note: The &lt;FILELIST&gt; option does not support the wildcard characters.
</description>
        <from>filelist</from>
        <to>filelist</to>
      </input>
      <input global="false" required="false">
        <description>The subdir option specifies whether you want to include subdirectories of named directories for processing. Valid values-yes,no
Note: SUBDIR is not a valid option when using FILELIST option.
</description>
        <from>subdir</from>
        <to>subdir</to>
      </input>
      <input global="false" required="false">
        <description>Specifies the path and file name that you want to query. Use wildcard characters to specify a group of files or all the files in a directory. Do not use wild cards when you query NAS file system images with -class=nas option.
Note: On Unix if the expression contains wildcards then they must be enclosed in quotes.</description>
        <from>filespec</from>
        <to>filespec</to>
      </input>
      <input global="false" required="false">
        <description>The timeout value is seconds. This is the time after which the command will timeout regardless of whether the command execution is complete or not.</description>
        <from>timeout secs</from>
        <to>timeout secs</to>
      </input>
      <input global="false" required="false">
        <description>The dateformat option specifies the format you want to use to display dates. Valid values - MM/DD/YYYY, DD-MM-YYYY, DD.MM.YYYY, YYYY.MM.DD, YYYY-MM-DD</description>
        <from>dateformat</from>
        <to>dateformat</to>
      </input>
      <input global="false" required="false">
        <description>The numberformat option specifies the format you want to use to display numbers. Valid values – 
1. d,ddd.dd
2. d,ddd,dd
3. d ddd,dd
4. d ddd.dd
5. d.ddd,dd
6. d'ddd,dd</description>
        <from>numberformat</from>
        <to>numberformat</to>
      </input>
      <input global="false" required="false">
        <description>The timeformat option specifies the format in which you want to display system time. Valid values – 1) HH:MM:SS 2) HH,MM,SS 3)HH.MM.SS 4) hh:mm:ssAM/PM.  The formats 1,2 and 3 follow 0-23 hour format.</description>
        <from>timeformat</from>
        <to>timeformat</to>
      </input>
      <input global="false" required="false">
        <description>Use the detail option to display management class, file space, backup, and archive information depending on the command with which it is used.</description>
        <from>detail</from>
        <to>detail</to>
      </input>
      <input global="false" required="false">
        <description>The filesonly option restricts backup, restore, retrieve, or query processing to files only. You cannot restore or retrieve directories from the Tivoli Storage Manager server when using the filesonly option with the restore or retrieve commands. However,directories with default attributes are created, if required, as placeholders for files that you restore or retrieve.
Valid values-true,false.</description>
        <from>filesonly</from>
        <to>filesonly</to>
      </input>
      <input global="false" required="false">
        <description>The dirsonly option processes directories only. The client does not process files.
Vali values - true,false.</description>
        <from>dirsonly</from>
        <to>dirsonly</to>
      </input>
      <input global="false" required="false">
        <description>Use the fromdate option with the fromtime option to specify a date and time from which you want to search for backups or archives during a restore, retrieve, or query operation. Files that were backed up or archived before this date and time are not included, although older directories might be included, if necessary, to restore or retrieve the files.</description>
        <from>fromdate</from>
        <to>fromdate</to>
      </input>
      <input global="false" required="false">
        <description>Use the todate option with the totime option to specify an ending date and time to which you want to search for backups or archives during a restore, retrieve, or query operation. For example, you might request a list of files that were backed up before 11:59 PM on June 30, 2002.</description>
        <from>todate</from>
        <to>todate</to>
      </input>
      <input global="false" required="false">
        <description>Use the fromtime option with the fromdate option to specify a beginning time from which you want to search for backups or archives during a restore, retrieve, or query operation. Tivoli Storage Manager ignores this option if you do not specify the fromdate option.</description>
        <from>fromtime</from>
        <to>fromtime</to>
      </input>
      <input global="false" required="false">
        <description>Use the totime option with the todate option to specify an ending date and time to which you want to search for backups or archives during a restore, retrieve, or query operation. For example, you might request a list of files that were backed up before 11:59 PM on June 30, 2003. Tivoli Storage Manager ignores this option if you do not specify the todate option.</description>
        <from>totime</from>
        <to>totime</to>
      </input>
      <input global="false" required="false">
        <description>The class option specifies whether to display a list of NAS or client objects. 
Valid values – client, nas
</description>
        <from>class</from>
        <to>class</to>
      </input>
      <input global="false" required="false">
        <description>The fromnode option permits one node to perform commands for another node. A user on another node must use the set access command to permit you to query, restore, or retrieve files or images for the other node.</description>
        <from>fromnode</from>
        <to>fromnode</to>
      </input>
      <input global="false" required="false">
        <description>Use the inactive option to display both active and inactive objects.
Valid values-true,false.</description>
        <from>inactive</from>
        <to>inactive</to>
      </input>
      <input global="false" required="false">
        <description>Use the pitdate option with the pittime option to establish a point in time for which you want to display or restore the latest version of your backups. Files or images that were backed up on or before the date and time you specified, and which were not deleted before the date and time you specified, are processed. Backup versions that you create after this date and time are ignored.
Note: When pitdate is used, the inactive option is implicit.</description>
        <from>pitdate</from>
        <to>pitdate</to>
      </input>
      <input global="false" required="false">
        <description>Use the pittime option with the pitdate option to establish a point in time for which you want to display or restore the latest version of your backups. Files or images that were backed up on or before the date and time you specify, and which were not deleted before the date and time you specify, are processed. Backup versions that you create after this date and time are ignored. This option is ignored if you do not specify pitdate option
Note: pitdate/pittime options can not be used with fromdate/fromtime options.
Note: The PITTIME option cannot be used without specifying the PITDATE option
</description>
        <from>pittime</from>
        <to>pittime</to>
      </input>
      <input global="false" required="false">
        <description>The nasnodename option specifies the node name for the NAS file server when processing NAS file systems. The node name identifies the NAS file server to the Tivoli Storage Manager server. The server must register the NAS file server.
Note: This tag is required when ‘NAS’ is provided as value for ‘class’ tag.
</description>
        <from>nasnodename</from>
        <to>nasnodename</to>
      </input>
      <output global="false" required="false">
        <to>items</to>
        <from>final items</from>
      </output>
    </parameters>
    <access />
    <sequence>
      <assign>
        <assignment>
          <output>
            <to>final items</to>
            <value>
              <root />
            </value>
          </output>
          <xslt-stylesheet>
            <stylesheet-replacement-tokens>
              <replacement-token name="filelist">
                <input global="false">
                  <from>filelist</from>
                </input>
              </replacement-token>
              <replacement-token name="filespec">
                <input global="false">
                  <from>filespec</from>
                </input>
              </replacement-token>
              <replacement-token name="subdir">
                <input global="false">
                  <from>subdir</from>
                </input>
              </replacement-token>
              <replacement-token name="timeout secs">
                <input global="false">
                  <from>timeout secs</from>
                </input>
              </replacement-token>
              <replacement-token name="numberformat">
                <input global="false">
                  <from>numberformat</from>
                </input>
              </replacement-token>
              <replacement-token name="timeformat">
                <input global="false">
                  <from>timeformat</from>
                </input>
              </replacement-token>
              <replacement-token name="dateformat">
                <input global="false">
                  <from>dateformat</from>
                </input>
              </replacement-token>
              <replacement-token name="fromdate">
                <input global="false">
                  <from>fromdate</from>
                </input>
              </replacement-token>
              <replacement-token name="fromtime">
                <input global="false">
                  <from>fromtime</from>
                </input>
              </replacement-token>
              <replacement-token name="todate">
                <input global="false">
                  <from>todate</from>
                </input>
              </replacement-token>
              <replacement-token name="totime">
                <input global="false">
                  <from>totime</from>
                </input>
              </replacement-token>
              <replacement-token name="detail">
                <input global="false">
                  <from>detail</from>
                </input>
              </replacement-token>
              <replacement-token name="nasnodename">
                <input global="false">
                  <from>nasnodename</from>
                </input>
              </replacement-token>
            </stylesheet-replacement-tokens>
            <stylesheet><![CDATA[<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="1.0">
  <xsl:output indent="no" omit-xml-declaration="yes" />
  <xsl:template match="/">
    <items>
      <item>
        <operation-name>
          <xsl:text disable-output-escaping="no">query-backup</xsl:text>
        </operation-name>
        <xsl:if test="string('${timeout secs}')!=''">
          <timeout-secs>
            <xsl:value-of select="'${timeout secs}'" disable-output-escaping="no" />
          </timeout-secs>
        </xsl:if>
        <command-options>
          <xsl:if test="string('${filelist}')!=''">
            <filelist>
              <xsl:value-of select="'${filelist}'" disable-output-escaping="no" />
            </filelist>
          </xsl:if>
          <xsl:if test="string('${subdir}')!=''">
            <subdir>
              <xsl:value-of select="'${subdir}'" disable-output-escaping="no" />
            </subdir>
          </xsl:if>
          <xsl:if test="string('${numberformat}')!=''">
            <numberformat>
              <xsl:value-of select="'${numberformat}'" disable-output-escaping="no" />
            </numberformat>
          </xsl:if>
          <xsl:if test="string('${timeformat}')!=''">
            <timeformat>
              <xsl:value-of select="'${timeformat}'" disable-output-escaping="no" />
            </timeformat>
          </xsl:if>
          <xsl:if test="string('${dateformat}')!=''">
            <dateformat>
              <xsl:value-of select="'${dateformat}'" disable-output-escaping="no" />
            </dateformat>
          </xsl:if>
          <xsl:if test="string('${detail}')='true'">
            <detail />
          </xsl:if>
          <xsl:if test="string('${fromdate}')!=''">
            <fromdate>
              <xsl:value-of select="'${fromdate}'" disable-output-escaping="no" />
            </fromdate>
          </xsl:if>
          <xsl:if test="string('${fromtime}')!=''">
            <fromtime>
              <xsl:value-of select="'${fromtime}'" disable-output-escaping="no" />
            </fromtime>
          </xsl:if>
          <xsl:if test="string('${todate}')!=''">
            <todate>
              <xsl:value-of select="'${todate}'" disable-output-escaping="no" />
            </todate>
          </xsl:if>
          <xsl:if test="string('${totime}') != ''">
            <totime>
              <xsl:value-of select="'${totime}'" disable-output-escaping="no" />
            </totime>
          </xsl:if>
          <xsl:if test="string('${nasnodename}') != ''">
            <nasnodename>
              <xsl:value-of select="'${nasnodename}'" disable-output-escaping="no" />
            </nasnodename>
          </xsl:if>
        </command-options>
        <command-arguments>
          <xsl:if test="string('${filespec}')!=''">
            <filespec>
              <xsl:value-of select="'${filespec}'" disable-output-escaping="no" />
            </filespec>
          </xsl:if>
        </command-arguments>
      </item>
    </items>
  </xsl:template>
</xsl:stylesheet>]]></stylesheet>
          </xslt-stylesheet>
        </assignment>
        <meta>
          <documentation />
          <checkpoint>false</checkpoint>
        </meta>
        <after-execution>
          <log>
            <level>debug</level>
            <parameters>
              <input>
                <value>FINAL ITEMS: </value>
              </input>
              <input>
                <from>final items</from>
              </input>
            </parameters>
          </log>
        </after-execution>
        <location>:assign[1]</location>
      </assign>
    </sequence>
    <meta>
      <expose-to>
        <consumer>RULE</consumer>
        <consumer>SCHEDULE</consumer>
      </expose-to>
      <documentation>
        <description>Utility to create items xml for Query Backup process.</description>
        <version></version>
      </documentation>
      <peer-location>
        <location>any</location>
      </peer-location>
      <record-metrics>false</record-metrics>
      <process-id>822ad07a-1b0f-3193-9e62-7e9b7c2b3c6f</process-id>
      <author />
      <category />
      <status />
      <keywords />
      <systems />
      <last-modified-by />
      <last-modified>1290596959521</last-modified>
    </meta>
  </process-def>
</process>