<process draft="false" dev-studio-version="7.6.02.02">
  <process-def name=":BMC_Database_Automation-SA-ITSM_Integration:BMC_Database_Automation:Validate BDA Connectivity">
    <parameters>
      <input global="false" required="true">
        <description>String Value - target URL having  host , port and context.

Example: http:/host:port/context  for BDA application</description>
        <from>target</from>
        <to>target</to>
      </input>
      <input global="false" required="false">
        <description>String Value - Specifies whether to use an SSL certificate to establish a secure connection. 
Set the value of this element to true to automatically install the certificate. 
Valid values: true, false (default)</description>
        <from>use ssl certificate</from>
        <to>use ssl certificate</to>
      </input>
      <input global="false" required="false">
        <description>String Value - Specifies whether to allow unsigned certificates from trusted zones 
Valid values: true, false (default) 
Commonly, set the value of this element to true if you are using self-signed SSL certificates. 
Rarely, on e-commerce sites or military installations, if you need to use signed certificates such as Verisign or Thawte, set the value of this element to false.</description>
        <from>allow unsigned certificate</from>
        <to>allow unsigned certificate</to>
      </input>
      <input global="false" required="false">
        <description>String Value - Specifies whether to install certificates. Set the value of this element to true if you do not need to export the security certificate from the BMC Database Automation server and import it into the cacerts file. The certificate is installed automatically. 
Valid values: true, false (default)</description>
        <from>install certificate</from>
        <to>install certificate</to>
      </input>
      <input global="false" required="false">
        <description>String Value - Its an attribute of &lt;signature-properties&gt; element 
Specifies the format in which the public (X.509 certificate) and private keys used for signing the HTTP Request  will be provided. The keys can be provided via Java Keystore (JKS) or PEM/DER files or unencrypted Base64-encoded PEM format. 

Valid values: keystore, key-files and key-data </description>
        <from>signature mode</from>
        <to>signature mode</to>
      </input>
      <input global="false" required="false">
        <description>XML specifying the X509 Certificate (Public Key) in unencrypted Base64-encoded PEM format. 

Example - 

&lt;certificate-data&gt;--BEGIN CERTIFICATE---- 
MIICdzCCAeCgAwIBAgIFXseN1xYwDQYJKoZIhvcNAQEFBQAwUzELMAkGA1UEBhMC 
VVMxEzARBgNVBAoTCkFtYXpvbi5jb20xDDAKBgNVBAsTA0FXUzEhMB8GA1UEAxMY 
........ 
----END CERTIFICATE----&lt;/certificate-data&gt; 

Required when signature mode is 'key-data'</description>
        <from>certificate data</from>
        <to>certificate data</to>
      </input>
      <input global="false" required="false">
        <description>XML specifying the Private Key in unencrypted Base64-encoded PEM format. 

Example - 

&lt;private-key-data&gt;--BEGIN PRIVATE KEY---- 
MIICdQIBADANBgkqhkiG9w0BAQEFAASCAl8wggJbAgEAAoGBAKomKro6VbW4PeQtUhNzZpSH26vb 
BTBtH1r4EjnIv4vnhSyyA62ewpROVNn0SpvjoBFwE88HcX3tXym/zbVgtdPke9K+SYHP6CWdiLqn 
........ 
----END PRIVATE KEY----&lt;/private-key-data&gt; 

Required when signature mode is 'key-data'</description>
        <from>private key data</from>
        <to>private key data</to>
      </input>
      <input global="false" required="false">
        <description>String Value - Specifies the file containing X509 Certificate (Public Key). The formats supported by the adapter are - 

1) Base64-encoded unencrypted PEM (Privacy Enhanced Mail) format 
2) DER (Definite Encoding Rules) format 

Required when signature mode is 'key-files'</description>
        <from>certificate file</from>
        <to>certificate file</to>
      </input>
      <input global="false" required="false">
        <description>String Value - Specifies the file containing Private Key used to sign the HTTP Request using the signing algorithm. The formats supported by the adapter are - 

1) Base64-encoded unencrypted PEM (Privacy Enhanced Mail) format 
2) DER (Definite Encoding Rules) format 

Required when signature mode is 'key-files'</description>
        <from>private key file</from>
        <to>private key file</to>
      </input>
      <input global="false" required="false">
        <description>String Value - Specifies the password of the Java Keystore (JKS)

Required when signature mode is 'keystore'</description>
        <from>keystore password</from>
        <to>keystore password</to>
      </input>
      <input global="false" required="false">
        <description>String Value - Specifies the alias name in the Java Keystore (JKS) that identifies the Public Key Certificate (PKC), the web server uses to authenticate the client. 

Required when signature mode is 'keystore'</description>
        <from>alias</from>
        <to>alias</to>
      </input>
      <input global="false" required="false">
        <description>String Value - Specifies the path to the Java Keystore (JKS) containing the client certificate. 

Required when signature mode is 'keystore'</description>
        <from>keystore file</from>
        <to>keystore file</to>
      </input>
      <input global="false" required="false">
        <description>String Value - 
Specifies the password of the truststore file 
Default value: changeit (passphrase for cacerts, the local security certificate store) 

Warning 
The value of the &lt;passphrase&gt; element is the passphrase for the cacerts certificate stored on the BMC Atrium Orchestrator local peer (CDP or AP) and not the BMC BladeLogic Network Automation target host.Changing the passphrase might destroy 
your server security environment. 

Verify the cacerts passphrase using the following command in UNIX or Linux: 
$ /opt/bmc/ao/cdp/jvm/binkeytool -list -keystore /opt/bmc/ao/cdp/jvm/lib/security/cacerts </description>
        <from>passphrase</from>
        <to>passphrase</to>
      </input>
      <output global="false" required="false">
        <to>status</to>
        <from>success status</from>
      </output>
      <output global="false" required="false">
        <to>reason</to>
        <from>status message</from>
      </output>
      <output global="false" required="false">
        <to>target</to>
        <from>target</from>
      </output>
    </parameters>
    <access />
    <sequence>
      <call-process>
        <process-name>:BMC_Database_Automation-SA-ITSM_Integration:Utilities:Extract Configuration Data</process-name>
        <parameters>
          <input>
            <value>BMC_Database_Automation</value>
            <to>configuration name</to>
          </input>
          <output>
            <from>success status</from>
            <to>success status</to>
          </output>
          <output>
            <from>status message</from>
            <to>status message</to>
          </output>
          <output>
            <from>configuration name</from>
            <to>configuration name</to>
          </output>
          <output>
            <from>bda connection details</from>
            <to>bda connection details</to>
          </output>
          <output>
            <from>bda task closed reason mappings</from>
            <to>bda task closed reason mappings</to>
          </output>
          <output>
            <from>change platform</from>
            <to>change platform</to>
          </output>
          <output>
            <from>change template name</from>
            <to>change template name</to>
          </output>
          <output>
            <from>change default status</from>
            <to>change default status</to>
          </output>
          <output>
            <from>change default change type</from>
            <to>change default change type</to>
          </output>
          <output>
            <from>change default impact</from>
            <to>change default impact</to>
          </output>
          <output>
            <from>change default urgency</from>
            <to>change default urgency</to>
          </output>
          <output>
            <from>change default risk level</from>
            <to>change default risk level</to>
          </output>
          <output>
            <from>change default timing</from>
            <to>change default timing</to>
          </output>
          <output>
            <from>change default summary</from>
            <to>change default summary</to>
          </output>
          <output>
            <from>task platform</from>
            <to>task platform</to>
          </output>
          <output>
            <from>task oic operational catergorization tier1</from>
            <to>task oic operational catergorization tier1</to>
          </output>
          <output>
            <from>task operational catergorization tier2</from>
            <to>task operational catergorization tier2</to>
          </output>
          <output>
            <from>authentication platform</from>
            <to>authentication platform</to>
          </output>
          <output>
            <from>authentication schema</from>
            <to>authentication schema</to>
          </output>
          <output>
            <from>authentication adapter</from>
            <to>authentication adapter</to>
          </output>
          <output>
            <from>authentication query mappings</from>
            <to>authentication query mappings</to>
          </output>
          <output>
            <from>authentication version</from>
            <to>authentication version</to>
          </output>
          <output>
            <from>authentication username</from>
            <to>authentication username</to>
          </output>
          <output>
            <from>date format</from>
            <to>date format</to>
          </output>
          <output>
            <from>ssl parameters</from>
            <to>ssl parameters</to>
            <xslt-stylesheet>
              <stylesheet-replacement-tokens />
              <stylesheet><![CDATA[<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="2.0">
  <xsl:output indent="no" />
  <xsl:template match="@*|node()">
    <xsl:copy>
      <xsl:apply-templates select="@*|node()" />
    </xsl:copy>
  </xsl:template>
  <xsl:template match="*">
    <xsl:element name="{translate(local-name(),'ABCDEFGHIJKLMNOPQRSTUVWXYZ','abcdefghijklmnopqrstuvwxyz')}">
      <xsl:apply-templates select="@*|node()" />
    </xsl:element>
  </xsl:template>
</xsl:stylesheet>]]></stylesheet>
            </xslt-stylesheet>
          </output>
        </parameters>
        <meta>
          <documentation />
          <run-mode-handling>
            <run-mode>OCP</run-mode>
            <allow-step-into>false</allow-step-into>
          </run-mode-handling>
          <checkpoint>false</checkpoint>
        </meta>
        <location>:call-process[1]</location>
      </call-process>
      <switch>
        <meta>
          <documentation />
          <run-mode-handling>
            <run-mode>OCP</run-mode>
            <allow-step-into>true</allow-step-into>
          </run-mode-handling>
          <checkpoint>false</checkpoint>
        </meta>
        <execute-all-applicable-cases>false</execute-all-applicable-cases>
        <default>
          <sequence>
            <assign>
              <assignment>
                <output>
                  <to>mutual authentication param request</to>
                  <value>
                    <empty />
                  </value>
                </output>
              </assignment>
              <assignment>
                <output>
                  <to>connection param request</to>
                  <value>
                    <empty />
                  </value>
                </output>
                <xslt-stylesheet>
                  <stylesheet-replacement-tokens>
                    <replacement-token name="ssl certificate">
                      <input global="false">
                        <from>use ssl certificate</from>
                      </input>
                    </replacement-token>
                    <replacement-token name="unsigned certificate">
                      <input global="false">
                        <from>allow unsigned certificate</from>
                      </input>
                    </replacement-token>
                    <replacement-token name="install certificate">
                      <input global="false">
                        <from>install certificate</from>
                      </input>
                    </replacement-token>
                    <replacement-token name="passphrase">
                      <input global="false">
                        <from>passphrase</from>
                      </input>
                    </replacement-token>
                  </stylesheet-replacement-tokens>
                  <stylesheet><![CDATA[<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="1.0">
  <xsl:output indent="no" />
  <xsl:template match="/">
    <connection-parameters>
      <xsl:if test="string-length(&quot;${ssl certificate}&quot;) &gt; 0">
        <use-ssl-certificate>${ssl certificate}</use-ssl-certificate>
      </xsl:if>
      <xsl:if test="string-length(&quot;${unsigned certificate}&quot;) &gt; 0">
        <allow-unsigned-certificate>${unsigned certificate}</allow-unsigned-certificate>
      </xsl:if>
      <xsl:if test="string-length(&quot;${install certificate}&quot;) &gt; 0">
        <install-certificate>${install certificate}</install-certificate>
      </xsl:if>
      <xsl:if test="string-length(&quot;${passphrase}&quot;) &gt; 0">
        <passphrase>${passphrase}</passphrase>
      </xsl:if>
    </connection-parameters>
  </xsl:template>
</xsl:stylesheet>]]></stylesheet>
                </xslt-stylesheet>
              </assignment>
              <meta>
                <documentation />
                <checkpoint>false</checkpoint>
              </meta>
              <after-execution>
                <log>
                  <level>debug</level>
                  <parameters>
                    <input>
                      <value>###REquestsssssss#############</value>
                    </input>
                    <input>
                      <from>mutual authentication param request</from>
                    </input>
                    <input>
                      <from>connection param request</from>
                    </input>
                  </parameters>
                </log>
              </after-execution>
              <location>:switch[1]:sequence[1]:assign[1]</location>
            </assign>
          </sequence>
        </default>
        <case>
          <condition>
            <document>
              <input>
                <from>target</from>
              </input>
            </document>
            <xpath-expression>
              <xpath-replacement-tokens />
              <xpath><![CDATA[substring-before(.,':') ="https" ]]></xpath>
            </xpath-expression>
          </condition>
          <sequence>
            <switch>
              <meta>
                <documentation />
                <run-mode-handling>
                  <run-mode>OCP</run-mode>
                  <allow-step-into>true</allow-step-into>
                </run-mode-handling>
                <checkpoint>false</checkpoint>
              </meta>
              <execute-all-applicable-cases>false</execute-all-applicable-cases>
              <default>
                <sequence>
                  <assign>
                    <assignment>
                      <output>
                        <to>ssl parameters request</to>
                        <value>ssl parameters niether in request and nor in module configuration, so will be picked up from Adapter configuration</value>
                      </output>
                    </assignment>
                    <meta>
                      <documentation />
                      <checkpoint>false</checkpoint>
                    </meta>
                    <location>:switch[1]:sequence[2]:switch[1]:sequence[1]:assign[1]</location>
                  </assign>
                </sequence>
              </default>
              <case>
                <condition>
                  <document>
                    <input>
                      <from>use ssl certificate</from>
                    </input>
                  </document>
                  <xpath-expression>
                    <xpath-replacement-tokens />
                    <xpath><![CDATA[text()='true']]></xpath>
                  </xpath-expression>
                </condition>
                <sequence>
                  <assign>
                    <assignment>
                      <output>
                        <to>ssl parameters request</to>
                        <value>
                          <empty />
                        </value>
                      </output>
                      <xslt-stylesheet>
                        <stylesheet-replacement-tokens>
                          <replacement-token name="private key data">
                            <input global="false">
                              <from>private key data</from>
                            </input>
                          </replacement-token>
                          <replacement-token name="certificate data">
                            <input global="false">
                              <from>certificate data</from>
                            </input>
                          </replacement-token>
                          <replacement-token name="private key file">
                            <input global="false">
                              <from>private key file</from>
                            </input>
                          </replacement-token>
                          <replacement-token name="certificate file">
                            <input global="false">
                              <from>certificate file</from>
                            </input>
                          </replacement-token>
                          <replacement-token name="keystore file">
                            <input global="false">
                              <from>keystore file</from>
                            </input>
                          </replacement-token>
                          <replacement-token name="keystore password">
                            <input global="false">
                              <from>keystore password</from>
                            </input>
                          </replacement-token>
                          <replacement-token name="alias">
                            <input global="false">
                              <from>alias</from>
                            </input>
                          </replacement-token>
                          <replacement-token name="ssl certificate">
                            <input global="false">
                              <from>use ssl certificate</from>
                            </input>
                          </replacement-token>
                          <replacement-token name="unsigned certificate">
                            <input global="false">
                              <from>allow unsigned certificate</from>
                            </input>
                          </replacement-token>
                          <replacement-token name="install certificate">
                            <input global="false">
                              <from>install certificate</from>
                            </input>
                          </replacement-token>
                          <replacement-token name="passphrase">
                            <input global="false">
                              <from>passphrase</from>
                            </input>
                          </replacement-token>
                          <replacement-token name="signature mode">
                            <input global="false">
                              <from>signature mode</from>
                            </input>
                          </replacement-token>
                        </stylesheet-replacement-tokens>
                        <stylesheet><![CDATA[<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="1.0">
  <xsl:output indent="no" />
  <xsl:template match="/">
    <ssl-parameters>
      <passphrase>${passphrase}</passphrase>
      <certificate-data>$[certificate data]</certificate-data>
      <private-key-data>$[private key data]</private-key-data>
      <certificate-file>$[certificate file]</certificate-file>
      <private-key-file>$[private key file]</private-key-file>
      <keystore-password>$[keystore password]</keystore-password>
      <alias>$[alias]</alias>
      <keystore-file>$[keystore file]</keystore-file>
      <use-ssl-certificate>${ssl certificate}</use-ssl-certificate>
      <allow-unsigned-certificate>${unsigned certificate}</allow-unsigned-certificate>
      <install-certificate>${install certificate}</install-certificate>
      <signature-mode>${signature mode}</signature-mode>
    </ssl-parameters>
  </xsl:template>
</xsl:stylesheet>]]></stylesheet>
                      </xslt-stylesheet>
                    </assignment>
                    <meta>
                      <documentation />
                      <checkpoint>false</checkpoint>
                    </meta>
                    <location>:switch[1]:sequence[2]:switch[1]:sequence[2]:assign[1]</location>
                  </assign>
                </sequence>
              </case>
              <case>
                <condition>
                  <document>
                    <input>
                      <from>ssl parameters</from>
                    </input>
                  </document>
                  <xpath-expression>
                    <xpath-replacement-tokens />
                    <xpath><![CDATA[//use_ssl_certificate/text()='true']]></xpath>
                  </xpath-expression>
                </condition>
                <sequence>
                  <assign>
                    <assignment>
                      <document>
                        <input>
                          <from>ssl parameters</from>
                        </input>
                      </document>
                      <result>
                        <output>
                          <to>ssl parameters request</to>
                        </output>
                      </result>
                      <xslt-stylesheet>
                        <stylesheet-replacement-tokens />
                        <stylesheet><![CDATA[<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="1.0">
  <xsl:output indent="no" />
  <xsl:template match="/">
    <ssl-parameters>
      <passphrase>
        <xsl:value-of select="//passphrase/text()" disable-output-escaping="no" />
      </passphrase>
      <certificate-data>
        <xsl:value-of select="//certificate_data/text()" disable-output-escaping="no" />
      </certificate-data>
      <private-key-data>
        <xsl:value-of select="//private_key_data/text()" disable-output-escaping="no" />
      </private-key-data>
      <certificate-file>
        <xsl:value-of select="//certificate_file/text()" disable-output-escaping="no" />
      </certificate-file>
      <private-key-file>
        <xsl:value-of select="//private_key_file/text()" disable-output-escaping="no" />
      </private-key-file>
      <keystore-password>
        <xsl:value-of select="//keystore_password/text()" disable-output-escaping="no" />
      </keystore-password>
      <alias>
        <xsl:value-of select="//alias/text()" disable-output-escaping="no" />
      </alias>
      <keystore-file>
        <xsl:value-of select="//keystore_file/text()" disable-output-escaping="no" />
      </keystore-file>
      <allow-unsigned-certificate>
        <xsl:value-of select="//allow_unsigned_certificate/text()" disable-output-escaping="no" />
      </allow-unsigned-certificate>
      <install-certificate>
        <xsl:value-of select="//install_certificate/text()" disable-output-escaping="no" />
      </install-certificate>
      <use-ssl-certificate>
        <xsl:value-of select="//use_ssl_certificate/text()" disable-output-escaping="no" />
      </use-ssl-certificate>
      <signature-mode>
        <xsl:value-of select="//signature_mode/text()" disable-output-escaping="no" />
      </signature-mode>
    </ssl-parameters>
  </xsl:template>
</xsl:stylesheet>]]></stylesheet>
                      </xslt-stylesheet>
                    </assignment>
                    <meta>
                      <documentation />
                      <checkpoint>false</checkpoint>
                    </meta>
                    <location>:switch[1]:sequence[2]:switch[1]:sequence[3]:assign[1]</location>
                  </assign>
                </sequence>
              </case>
              <location>:switch[1]:sequence[2]:switch[1]</location>
            </switch>
            <assign>
              <assignment>
                <document>
                  <input>
                    <from>ssl parameters request</from>
                  </input>
                </document>
                <result>
                  <output>
                    <to>certificate file</to>
                  </output>
                </result>
                <xpath-expression>
                  <xpath-replacement-tokens />
                  <xpath><![CDATA[//ssl-parameters/certificate-file/text()]]></xpath>
                </xpath-expression>
              </assignment>
              <assignment>
                <document>
                  <input>
                    <from>ssl parameters request</from>
                  </input>
                </document>
                <result>
                  <output>
                    <to>private key file</to>
                  </output>
                </result>
                <xpath-expression>
                  <xpath-replacement-tokens />
                  <xpath><![CDATA[//ssl-parameters/private-key-file/text()]]></xpath>
                </xpath-expression>
              </assignment>
              <assignment>
                <document>
                  <input>
                    <from>ssl parameters request</from>
                  </input>
                </document>
                <result>
                  <output>
                    <to>use ssl certificate</to>
                  </output>
                </result>
                <xpath-expression>
                  <xpath-replacement-tokens />
                  <xpath><![CDATA[//ssl-parameters/use-ssl-certificate/text()]]></xpath>
                </xpath-expression>
              </assignment>
              <assignment>
                <document>
                  <input>
                    <from>ssl parameters request</from>
                  </input>
                </document>
                <result>
                  <output>
                    <to>allow unsigned certificate</to>
                  </output>
                </result>
                <xpath-expression>
                  <xpath-replacement-tokens />
                  <xpath><![CDATA[//ssl-parameters/allow-unsigned-certificate/text()]]></xpath>
                </xpath-expression>
              </assignment>
              <assignment>
                <document>
                  <input>
                    <from>ssl parameters request</from>
                  </input>
                </document>
                <result>
                  <output>
                    <to>install certificate</to>
                  </output>
                </result>
                <xpath-expression>
                  <xpath-replacement-tokens />
                  <xpath><![CDATA[//ssl-parameters/install-certificate/text()]]></xpath>
                </xpath-expression>
              </assignment>
              <assignment>
                <document>
                  <input>
                    <from>ssl parameters request</from>
                  </input>
                </document>
                <result>
                  <output>
                    <to>passphrase</to>
                  </output>
                </result>
                <xpath-expression>
                  <xpath-replacement-tokens />
                  <xpath><![CDATA[//ssl-parameters/passphrase/text()]]></xpath>
                </xpath-expression>
              </assignment>
              <assignment>
                <document>
                  <input>
                    <from>ssl parameters request</from>
                  </input>
                </document>
                <result>
                  <output>
                    <to>private key data</to>
                  </output>
                </result>
                <xpath-expression>
                  <xpath-replacement-tokens />
                  <xpath><![CDATA[//ssl-parameters/private-key-data/text()]]></xpath>
                </xpath-expression>
              </assignment>
              <assignment>
                <document>
                  <input>
                    <from>ssl parameters request</from>
                  </input>
                </document>
                <result>
                  <output>
                    <to>certificate data</to>
                  </output>
                </result>
                <xpath-expression>
                  <xpath-replacement-tokens />
                  <xpath><![CDATA[//ssl-parameters/certificate-data/text()]]></xpath>
                </xpath-expression>
              </assignment>
              <assignment>
                <document>
                  <input>
                    <from>ssl parameters request</from>
                  </input>
                </document>
                <result>
                  <output>
                    <to>keystore file</to>
                  </output>
                </result>
                <xpath-expression>
                  <xpath-replacement-tokens />
                  <xpath><![CDATA[//ssl-parameters/keystore-file/text()]]></xpath>
                </xpath-expression>
              </assignment>
              <assignment>
                <document>
                  <input>
                    <from>ssl parameters request</from>
                  </input>
                </document>
                <result>
                  <output>
                    <to>keystore password</to>
                  </output>
                </result>
                <xpath-expression>
                  <xpath-replacement-tokens />
                  <xpath><![CDATA[//ssl-parameters/keystore-password/text()]]></xpath>
                </xpath-expression>
              </assignment>
              <assignment>
                <document>
                  <input>
                    <from>ssl parameters request</from>
                  </input>
                </document>
                <result>
                  <output>
                    <to>alias</to>
                  </output>
                </result>
                <xpath-expression>
                  <xpath-replacement-tokens />
                  <xpath><![CDATA[//ssl-parameters/alias/text()]]></xpath>
                </xpath-expression>
              </assignment>
              <assignment>
                <document>
                  <input>
                    <from>ssl parameters request</from>
                  </input>
                </document>
                <result>
                  <output>
                    <to>signature mode</to>
                  </output>
                </result>
                <xpath-expression>
                  <xpath-replacement-tokens />
                  <xpath><![CDATA[//ssl-parameters/signature-mode/text()]]></xpath>
                </xpath-expression>
              </assignment>
              <meta>
                <documentation />
                <checkpoint>false</checkpoint>
              </meta>
              <location>:switch[1]:sequence[2]:assign[1]</location>
            </assign>
            <assign>
              <assignment>
                <output>
                  <to>mutual authentication param request</to>
                  <value>
                    <empty />
                  </value>
                </output>
                <xslt-stylesheet>
                  <stylesheet-replacement-tokens>
                    <replacement-token name="signature mode">
                      <input global="false">
                        <from>signature mode</from>
                      </input>
                    </replacement-token>
                    <replacement-token name="key store file">
                      <input global="false">
                        <from>keystore file</from>
                      </input>
                    </replacement-token>
                    <replacement-token name="keystore-password">
                      <input global="false">
                        <from>keystore password</from>
                      </input>
                    </replacement-token>
                    <replacement-token name="alias">
                      <input global="false">
                        <from>alias</from>
                      </input>
                    </replacement-token>
                    <replacement-token name="certificate data">
                      <input global="false">
                        <from>certificate data</from>
                      </input>
                    </replacement-token>
                    <replacement-token name="private key data">
                      <input global="false">
                        <from>private key data</from>
                      </input>
                    </replacement-token>
                    <replacement-token name="private key file">
                      <input global="false">
                        <from>private key file</from>
                      </input>
                    </replacement-token>
                    <replacement-token name="certificate file">
                      <input global="false">
                        <from>certificate file</from>
                      </input>
                    </replacement-token>
                  </stylesheet-replacement-tokens>
                  <stylesheet><![CDATA[<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="1.0">
  <xsl:output indent="yes" />
  <xsl:template match="/">
    <mutual-authentication-parameters>
      <xsl:if test="'${signature mode}' != ''  and ( '${signature mode}' = 'keystore'  or '${signature mode}' = 'key-files' or '${signature mode}' = 'key-data')">
        <signature-properties>
          <xsl:attribute name="mode">${signature mode}</xsl:attribute>
          <xsl:if test="'${signature mode}' = 'keystore'">
            <keystore-file>${key store file}</keystore-file>
            <keystore-password>${keystore-password}</keystore-password>
            <alias>${alias}</alias>
          </xsl:if>
          <xsl:if test="'${signature mode}' = 'key-data'">
            <certificate-data>${certificate data}</certificate-data>
            <private-key-data>${private key data}</private-key-data>
          </xsl:if>
          <xsl:if test="'${signature mode}' = 'key-files'">
            <private-key-file>${private key file}</private-key-file>
            <certificate-file>${certificate file}</certificate-file>
          </xsl:if>
        </signature-properties>
      </xsl:if>
    </mutual-authentication-parameters>
  </xsl:template>
</xsl:stylesheet>]]></stylesheet>
                </xslt-stylesheet>
              </assignment>
              <assignment>
                <output>
                  <to>connection param request</to>
                  <value>
                    <empty />
                  </value>
                </output>
                <xslt-stylesheet>
                  <stylesheet-replacement-tokens>
                    <replacement-token name="ssl certificate">
                      <input global="false">
                        <from>use ssl certificate</from>
                      </input>
                    </replacement-token>
                    <replacement-token name="unsigned certificate">
                      <input global="false">
                        <from>allow unsigned certificate</from>
                      </input>
                    </replacement-token>
                    <replacement-token name="install certificate">
                      <input global="false">
                        <from>install certificate</from>
                      </input>
                    </replacement-token>
                    <replacement-token name="passphrase">
                      <input global="false">
                        <from>passphrase</from>
                      </input>
                    </replacement-token>
                  </stylesheet-replacement-tokens>
                  <stylesheet><![CDATA[<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="1.0">
  <xsl:output indent="no" />
  <xsl:template match="/">
    <connection-parameters>
      <xsl:if test="string-length(&quot;${ssl certificate}&quot;) &gt; 0">
        <use-ssl-certificate>${ssl certificate}</use-ssl-certificate>
      </xsl:if>
      <xsl:if test="string-length(&quot;${unsigned certificate}&quot;) &gt; 0">
        <allow-unsigned-certificate>${unsigned certificate}</allow-unsigned-certificate>
      </xsl:if>
      <xsl:if test="string-length(&quot;${install certificate}&quot;) &gt; 0">
        <install-certificate>${install certificate}</install-certificate>
      </xsl:if>
      <xsl:if test="string-length(&quot;${passphrase}&quot;) &gt; 0">
        <passphrase>${passphrase}</passphrase>
      </xsl:if>
    </connection-parameters>
  </xsl:template>
</xsl:stylesheet>]]></stylesheet>
                </xslt-stylesheet>
              </assignment>
              <meta>
                <documentation />
                <checkpoint>false</checkpoint>
              </meta>
              <after-execution>
                <log>
                  <level>debug</level>
                  <parameters>
                    <input>
                      <value>###REquestsssssss#############</value>
                    </input>
                    <input>
                      <from>mutual authentication param request</from>
                    </input>
                    <input>
                      <from>connection param request</from>
                    </input>
                  </parameters>
                </log>
              </after-execution>
              <location>:switch[1]:sequence[2]:assign[2]</location>
            </assign>
          </sequence>
        </case>
        <location>:switch[1]</location>
      </switch>
      <call-process>
        <process-name>:BMC_Database_Automation-SA-ITSM_Integration:Utilities:Validate Connectivity</process-name>
        <parameters>
          <input>
            <from>bda connection details</from>
            <to>connection details</to>
          </input>
          <input>
            <from>target</from>
            <to>target</to>
          </input>
          <input>
            <from>connection param request</from>
            <to>connection parameters</to>
          </input>
          <input>
            <from>mutual authentication param request</from>
            <to>mutual authentication parameters</to>
          </input>
          <output>
            <from>success status</from>
            <to>success status</to>
          </output>
          <output>
            <from>status message</from>
            <to>status message</to>
          </output>
          <output>
            <from>error code</from>
            <to>error code</to>
          </output>
          <output>
            <from>target</from>
            <to>target</to>
          </output>
        </parameters>
        <meta>
          <documentation />
          <run-mode-handling>
            <run-mode>OCP</run-mode>
            <allow-step-into>false</allow-step-into>
          </run-mode-handling>
          <checkpoint>false</checkpoint>
        </meta>
        <location>:call-process[2]</location>
      </call-process>
      <assign>
        <assignment>
          <document>
            <input>
              <from>status message</from>
            </input>
          </document>
          <result>
            <output>
              <to>status message</to>
            </output>
          </result>
          <xslt-stylesheet>
            <stylesheet-replacement-tokens>
              <replacement-token name="error code">
                <input global="false">
                  <from>error code</from>
                </input>
              </replacement-token>
            </stylesheet-replacement-tokens>
            <stylesheet><![CDATA[<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="1.0">
  <xsl:output indent="no" />
  <xsl:template match="/">
    <value>
      <xsl:choose>
        <xsl:when test="string(.)='success'">
          <xsl:text disable-output-escaping="no">AO adapter communicated with the BDA application successfully.</xsl:text>
        </xsl:when>
        <xsl:otherwise>
          <xsl:choose>
            <xsl:when test="'${error code}'!=''">
              <xsl:value-of select="concat(&quot;Communication between AO adapter and BDA application Unsuccessful. Reason : &quot;,., &quot;  Http error code: &quot;,&quot;${error code}&quot;)" disable-output-escaping="no" />
            </xsl:when>
            <xsl:otherwise>
              <xsl:value-of select="concat(&quot;Communication between AO adapter and BDA application Unsuccessful.  Reason : &quot;,.)" disable-output-escaping="no" />
            </xsl:otherwise>
          </xsl:choose>
        </xsl:otherwise>
      </xsl:choose>
    </value>
  </xsl:template>
</xsl:stylesheet>]]></stylesheet>
          </xslt-stylesheet>
        </assignment>
        <assignment>
          <document>
            <input>
              <from>success status</from>
            </input>
          </document>
          <result>
            <output>
              <to>success status</to>
            </output>
          </result>
          <xslt-stylesheet>
            <stylesheet-replacement-tokens />
            <stylesheet><![CDATA[<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="1.0">
  <xsl:output indent="no" />
  <xsl:template match="/">
    <value>
      <xsl:choose>
        <xsl:when test="string(.)='true'">
          <xsl:text disable-output-escaping="no">0</xsl:text>
        </xsl:when>
        <xsl:otherwise>
          <xsl:text disable-output-escaping="no">1</xsl:text>
        </xsl:otherwise>
      </xsl:choose>
    </value>
  </xsl:template>
</xsl:stylesheet>]]></stylesheet>
          </xslt-stylesheet>
        </assignment>
        <meta>
          <documentation />
          <checkpoint>false</checkpoint>
        </meta>
        <after-execution>
          <log>
            <level>debug</level>
            <parameters>
              <input>
                <value>##########********* STATUS ###########</value>
              </input>
              <input>
                <from>success status</from>
              </input>
              <input>
                <from>status message</from>
              </input>
            </parameters>
          </log>
        </after-execution>
        <location>:assign[1]</location>
      </assign>
    </sequence>
    <meta>
      <expose-to>
        <consumer>RULE</consumer>
        <consumer>SCHEDULE</consumer>
      </expose-to>
      <documentation>
        <description>validate connectivity through the AO adapter back to the BDA application.accept inputs of host, port and context , return success if BDA is reachable via the adapter or  return failure if BDA is not reachable via the adapter</description>
        <version></version>
      </documentation>
      <peer-location>
        <location>any</location>
      </peer-location>
      <record-metrics>false</record-metrics>
      <process-id>069469a6-5f5d-4c46-a25d-792ad1fe9a13</process-id>
      <author>Kashinath</author>
      <category></category>
      <status></status>
      <keywords></keywords>
      <systems></systems>
      <last-modified-by>admin</last-modified-by>
      <last-modified>1321370757666</last-modified>
    </meta>
  </process-def>
</process>