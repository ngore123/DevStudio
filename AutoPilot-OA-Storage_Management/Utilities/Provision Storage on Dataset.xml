<process draft="false" dev-studio-version="7.6.02.01">
  <process-def name=":AutoPilot-OA-Storage_Management:Utilities:Provision Storage on Dataset">
    <parameters>
      <input global="false" required="true">
        <description>The name of a configuration item defined in a configuration module. 

Valid value: NetApp</description>
        <from>configuration name</from>
        <to>configuration name</to>
      </input>
      <input global="false" required="true">
        <description>Provision a new member into the effective primary node of a data set.

Sample Items XML:

&lt;storage&gt;
	&lt;storage-container-name-or-id&gt;test1&lt;/storage-container-name-or-id&gt;
	&lt;size&gt;21000000&lt;/size&gt;
	&lt;name&gt;vol3&lt;/name&gt;
&lt;/storage&gt;


Parameters Description:

storage-container-name-or-id [Required]
	The name of the dataset whose member will be provisioned.

name [Optional] 
	Name of the storage container. If this is a NAS data set, i.e the provisioning policy associated with the primary node of the data set is of type 'nas', then this name corresponds to the qtree created. If this is a SAN data set, i.e the provisioning policy associated with the primary node of the data set is of type 'san', then this name corresponds to the LUN or volume that will be provisioned as part of this request. The length of this string cannot be more than 255 characters.
If this tag is not provided, a name for storage to be provisioned will be deduced automatically which will have the following format - Storage yyyyMMddHHmmss

size[Required] 
	Size for the data set member. The value is in bytes. Range: [1..2^63-1] 

</description>
        <from>storage</from>
        <to>storage</to>
      </input>
      <input global="false" required="true">
        <description>module configuration elements</description>
        <from>module configuration items</from>
        <to>module configuration items</to>
      </input>
      <input global="false" required="false">
        <description>NetApp: 
[required if dynamic targeting is used otherwise optional] 

Designates a specific target (name of the DFM server where the operation will be performed) that has been defined in the adapter configuration. Valid value- Same value that has been specified for the name attribute of 'config' element in the adapter configuration . If this tag is left empty the request will be executed on the first defined adapter configuration.

for e.g for the  adapter config below , target would be 02.
&lt;configs&gt;
   &lt;config name="02"&gt;
          &lt;target&gt;172.19.224.103&lt;/target&gt;
          &lt;user-name&gt;root&lt;/user-name&gt;
          &lt;password&gt;bmcbmc&lt;/password&gt;
          &lt;protocol&gt;http&lt;/protocol&gt;
          &lt;port&gt;8088&lt;/port&gt;
   &lt;/config&gt;
&lt;/configs&gt;

Dynamic targeting: Host name or IP address of DFM.</description>
        <from>target</from>
        <to>target</to>
      </input>
      <input global="false" required="false">
        <description>NetApp:
[required only if dynamic targeting is used]
NetApp DataFabric Manager login username.</description>
        <from>username</from>
        <to>username</to>
      </input>
      <input global="false" required="false">
        <description>NetApp:
[required only if dynamic targeting is used]
NetApp DataFabric Manager login password.</description>
        <from>password</from>
        <to>password</to>
      </input>
      <input global="false" required="false">
        <description>NetApp: [Conditional]  specified only when password parameter is mentioned .
You can encrypt the password by specifying the encryption type .
Valid values:  Base64,Plain.</description>
        <from>encryption type</from>
        <to>encryption type</to>
      </input>
      <input global="false" required="false">
        <description>NetApp:
[Optional and used when dynamic targeting] 
Communication protocol used by adapter. Valid value is http or https. Default value is http.</description>
        <from>protocol</from>
        <to>protocol</to>
      </input>
      <input global="false" required="false">
        <description>NetApp: 
[Optional and used when dynamic targeting]
Port on which NetApp DataFabric Manager is enabled. Default value is 8088 for http protocol and 8488 for https protocol.</description>
        <from>port</from>
        <to>port</to>
      </input>
      <output global="false" required="false">
        <to>success status</to>
        <from>success status</from>
      </output>
      <output global="false" required="false">
        <to>status message</to>
        <from>status message</from>
      </output>
      <output global="false" required="false">
        <to>output</to>
        <from>output</from>
      </output>
    </parameters>
    <access />
    <sequence>
      <switch>
        <meta>
          <documentation />
          <run-mode-handling>
            <run-mode>OCP</run-mode>
            <allow-step-into>true</allow-step-into>
          </run-mode-handling>
          <checkpoint>false</checkpoint>
        </meta>
        <execute-all-applicable-cases>false</execute-all-applicable-cases>
        <default>
          <sequence>
            <assign>
              <assignment>
                <output>
                  <to>success status</to>
                  <value>failure</value>
                </output>
              </assignment>
              <assignment>
                <document>
                  <input>
                    <from>configuration name</from>
                  </input>
                </document>
                <result>
                  <output>
                    <to>status message</to>
                  </output>
                </result>
                <xpath-expression>
                  <xpath-replacement-tokens />
                  <xpath><![CDATA[concat("Unknown configuration name: ", .)]]></xpath>
                </xpath-expression>
              </assignment>
              <meta>
                <documentation />
                <checkpoint>false</checkpoint>
              </meta>
              <location>:switch[1]:sequence[1]:assign[1]</location>
            </assign>
          </sequence>
        </default>
        <case>
          <condition>
            <document>
              <input>
                <from>configuration name</from>
              </input>
            </document>
            <xpath-expression>
              <xpath-replacement-tokens />
              <xpath><![CDATA[text()="NetApp"]]></xpath>
            </xpath-expression>
          </condition>
          <sequence>
            <console-output>
              <type>INFO</type>
              <summary>
                <concat>
                  <input>
                    <value></value>
                  </input>
                </concat>
              </summary>
              <detail>
                <concat>
                  <input>
                    <value></value>
                  </input>
                </concat>
              </detail>
            </console-output>
            <call-process>
              <process-name>:AutoPilot-OA-Storage_Management:Utilities:Convert Storage Size Into Bytes</process-name>
              <parameters>
                <input>
                  <from>storage</from>
                  <to>storage size</to>
                  <xpath-expression>
                    <xpath-replacement-tokens />
                    <xpath><![CDATA[//size/text()]]></xpath>
                  </xpath-expression>
                </input>
                <input>
                  <from>storage</from>
                  <to>storage size unit</to>
                  <xpath-expression>
                    <xpath-replacement-tokens />
                    <xpath><![CDATA[//storage-unit/text()]]></xpath>
                  </xpath-expression>
                </input>
                <output>
                  <from>storage size</from>
                  <to>size</to>
                </output>
              </parameters>
              <meta>
                <documentation />
                <run-mode-handling>
                  <run-mode>OCP</run-mode>
                  <allow-step-into>false</allow-step-into>
                </run-mode-handling>
                <checkpoint>false</checkpoint>
              </meta>
              <after-execution>
                <console-output>
                  <type>INFO</type>
                  <summary>
                    <concat>
                      <input>
                        <value></value>
                      </input>
                    </concat>
                  </summary>
                  <detail>
                    <concat>
                      <input>
                        <value></value>
                      </input>
                    </concat>
                  </detail>
                </console-output>
              </after-execution>
              <location>:switch[1]:sequence[2]:call-process[1]</location>
            </call-process>
            <assign>
              <assignment>
                <document>
                  <input>
                    <from>storage</from>
                  </input>
                </document>
                <result>
                  <output>
                    <to>items</to>
                  </output>
                </result>
                <xslt-stylesheet>
                  <stylesheet-replacement-tokens>
                    <replacement-token name="target">
                      <input global="false">
                        <from>target</from>
                      </input>
                    </replacement-token>
                    <replacement-token name="size">
                      <input global="false">
                        <from>size</from>
                      </input>
                    </replacement-token>
                    <replacement-token name="username">
                      <input global="false">
                        <from>username</from>
                      </input>
                    </replacement-token>
                    <replacement-token name="password">
                      <input global="false">
                        <from>password</from>
                      </input>
                    </replacement-token>
                    <replacement-token name="encryption type">
                      <input global="false">
                        <from>encryption type</from>
                      </input>
                    </replacement-token>
                    <replacement-token name="protocol">
                      <input global="false">
                        <from>protocol</from>
                      </input>
                    </replacement-token>
                    <replacement-token name="port">
                      <input global="false">
                        <from>port</from>
                      </input>
                    </replacement-token>
                  </stylesheet-replacement-tokens>
                  <stylesheet><![CDATA[<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="1.0">
  <xsl:output indent="no" />
  <xsl:template match="/">
    <items>
      <item>
        <xsl:if test="string-length('${target}') &gt; 0 and string-length('${username}') =0">
          <target>${target}</target>
        </xsl:if>
        <dataset-name-or-id>
          <xsl:value-of select="//storage-container-name-or-id/text()" disable-output-escaping="no" />
        </dataset-name-or-id>
        <size>
          <xsl:value-of select="round($[size])" disable-output-escaping="no" />
        </size>
        <xsl:if test=" name(//name) ">
          <name>
            <xsl:value-of select="//name/text()" disable-output-escaping="no" />
          </name>
        </xsl:if>
        <xsl:if test="name(//comments)">
          <xsl:copy-of select="//comments" />
        </xsl:if>
        <xsl:if test=" name(//dataset-export-info) ">
          <xsl:copy-of select="//dataset-export-info" />
        </xsl:if>
        <dry-run>
          <xsl:text disable-output-escaping="no">true</xsl:text>
        </dry-run>
        <include-dry-run-reason-details>
          <xsl:text disable-output-escaping="no">true</xsl:text>
        </include-dry-run-reason-details>
        <xsl:if test=" name(//create-new-vfiler) ">
          <create-new-vfiler>
            <xsl:value-of select="//create-new-vfiler/text()" disable-output-escaping="no" />
          </create-new-vfiler>
        </xsl:if>
        <xsl:if test=" name(//description) ">
          <description>
            <xsl:value-of select="//description/text()" disable-output-escaping="no" />
          </description>
        </xsl:if>
        <xsl:if test=" name(//resource-name-or-id) ">
          <resource-name-or-id>
            <xsl:value-of select="//resource-name-or-id/text()" disable-output-escaping="no" />
          </resource-name-or-id>
        </xsl:if>
        <xsl:if test="string-length(//maximum-data-size/text()) &gt; 0">
          <maximum-data-size>
            <xsl:value-of select="//maximum-data-size/text()" disable-output-escaping="no" />
          </maximum-data-size>
        </xsl:if>
        <xsl:if test=" name(//force) ">
          <force>
            <xsl:value-of select="//force/text()" disable-output-escaping="no" />
          </force>
        </xsl:if>
        <xsl:if test="string-length(//vfiler-name-or-id/text()&gt;0)">
          <vfiler-name-or-id>
            <xsl:value-of select="//vfiler-name-or-id/text()" disable-output-escaping="no" />
          </vfiler-name-or-id>
        </xsl:if>
        <xsl:if test="string-length(//vfiler-name-or-id/text()) &gt; 0 or //create-new-vfiler/text() = 'true'">
          <online-migration>
            <xsl:text disable-output-escaping="no">false</xsl:text>
          </online-migration>
        </xsl:if>
        <xsl:if test="string-length(//maximum-snapshot-space/text()&gt;0)">
          <maximum-snapshot-space>
            <xsl:value-of select="//maximum-snapshot-space/text()" disable-output-escaping="no" />
          </maximum-snapshot-space>
        </xsl:if>
        <xsl:if test="string-length('${target}')&gt;0 and string-length('${username}') &gt; 0">
          <targets>
            <target>
              <host>
                <xsl:value-of select="'${target}'" disable-output-escaping="no" />
              </host>
              <user-name>${username}</user-name>
              <password>
                <xsl:attribute name="encryption-type">
                  <xsl:value-of select="'${encryption type}'" disable-output-escaping="no" />
                </xsl:attribute>
                <xsl:value-of select="'${password}'" disable-output-escaping="no" />
              </password>
              <xsl:if test="string-length('${protocol}') &gt;0">
                <protocol>${protocol}</protocol>
              </xsl:if>
              <xsl:if test="string-length('${port}') &gt;0">
                <port>${port}</port>
              </xsl:if>
            </target>
          </targets>
        </xsl:if>
      </item>
    </items>
  </xsl:template>
</xsl:stylesheet>]]></stylesheet>
                </xslt-stylesheet>
              </assignment>
              <meta>
                <documentation />
                <checkpoint>false</checkpoint>
              </meta>
              <location>:switch[1]:sequence[2]:assign[1]</location>
            </assign>
            <call-process>
              <process-name>:AO-AD-NetAPP_Storage:Perform Action</process-name>
              <parameters>
                <input>
                  <from>module configuration items</from>
                  <to>adapter name</to>
                  <xpath-expression>
                    <xpath-replacement-tokens>
                      <replacement-token name="configuration name">
                        <input global="false">
                          <from>configuration name</from>
                        </input>
                      </replacement-token>
                    </xpath-replacement-tokens>
                    <xpath><![CDATA[//$[configuration name]/Adapter/text()]]></xpath>
                  </xpath-expression>
                </input>
                <input>
                  <from>module configuration items</from>
                  <to>version</to>
                  <xpath-expression>
                    <xpath-replacement-tokens>
                      <replacement-token name="configuration name">
                        <input global="false">
                          <from>configuration name</from>
                        </input>
                      </replacement-token>
                    </xpath-replacement-tokens>
                    <xpath><![CDATA[//$[configuration name]/Version/text()]]></xpath>
                  </xpath-expression>
                </input>
                <input>
                  <value>provision-dataset</value>
                  <to>item type</to>
                </input>
                <input>
                  <from>items</from>
                  <to>items</to>
                </input>
                <output>
                  <from>adapter response</from>
                  <to>adapter response</to>
                </output>
              </parameters>
              <meta>
                <documentation />
                <run-mode-handling>
                  <run-mode>OCP</run-mode>
                  <allow-step-into>false</allow-step-into>
                </run-mode-handling>
                <checkpoint>false</checkpoint>
              </meta>
              <after-execution>
                <console-output>
                  <type>INFO</type>
                  <summary>
                    <concat>
                      <input>
                        <value></value>
                      </input>
                    </concat>
                  </summary>
                  <detail>
                    <concat>
                      <input>
                        <value></value>
                      </input>
                    </concat>
                  </detail>
                </console-output>
              </after-execution>
              <location>:switch[1]:sequence[2]:call-process[2]</location>
            </call-process>
            <switch>
              <meta>
                <documentation />
                <run-mode-handling>
                  <run-mode>OCP</run-mode>
                  <allow-step-into>true</allow-step-into>
                </run-mode-handling>
                <checkpoint>false</checkpoint>
              </meta>
              <execute-all-applicable-cases>false</execute-all-applicable-cases>
              <default>
                <sequence>
                  <assign>
                    <assignment>
                      <output>
                        <to>success status</to>
                        <value>failure</value>
                      </output>
                    </assignment>
                    <assignment>
                      <document>
                        <input>
                          <from>adapter response</from>
                        </input>
                      </document>
                      <result>
                        <output>
                          <to>status message</to>
                        </output>
                      </result>
                      <xslt-stylesheet>
                        <stylesheet-replacement-tokens />
                        <stylesheet><![CDATA[<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="1.0">
  <xsl:output indent="no" />
  <xsl:template match="/">
    <xsl:choose>
      <xsl:when test="string-length(//output) &gt; 0">
        <xsl:copy-of select="//output" />
      </xsl:when>
      <xsl:otherwise>
        <xsl:copy-of select="//error" />
      </xsl:otherwise>
    </xsl:choose>
  </xsl:template>
</xsl:stylesheet>]]></stylesheet>
                      </xslt-stylesheet>
                    </assignment>
                    <meta>
                      <documentation />
                      <checkpoint>false</checkpoint>
                    </meta>
                    <location>:switch[1]:sequence[2]:switch[1]:sequence[1]:assign[1]</location>
                  </assign>
                </sequence>
              </default>
              <case>
                <condition>
                  <document>
                    <input>
                      <from>adapter response</from>
                    </input>
                  </document>
                  <xpath-expression>
                    <xpath-replacement-tokens />
                    <xpath><![CDATA[string(//is-provisioning-failure/text()) = 'false']]></xpath>
                  </xpath-expression>
                </condition>
                <sequence>
                  <console-output>
                    <type>INFO</type>
                    <summary>
                      <concat>
                        <input>
                          <value></value>
                        </input>
                      </concat>
                    </summary>
                    <detail>
                      <concat>
                        <input>
                          <value></value>
                        </input>
                      </concat>
                    </detail>
                  </console-output>
                  <assign>
                    <assignment>
                      <document>
                        <input>
                          <from>storage</from>
                        </input>
                      </document>
                      <result>
                        <output>
                          <to>items</to>
                        </output>
                      </result>
                      <xslt-stylesheet>
                        <stylesheet-replacement-tokens>
                          <replacement-token name="target">
                            <input global="false">
                              <from>target</from>
                            </input>
                          </replacement-token>
                          <replacement-token name="size">
                            <input global="false">
                              <from>size</from>
                            </input>
                          </replacement-token>
                          <replacement-token name="username">
                            <input global="false">
                              <from>username</from>
                            </input>
                          </replacement-token>
                          <replacement-token name="password">
                            <input global="false">
                              <from>password</from>
                            </input>
                          </replacement-token>
                          <replacement-token name="encryption type">
                            <input global="false">
                              <from>encryption type</from>
                            </input>
                          </replacement-token>
                          <replacement-token name="protocol">
                            <input global="false">
                              <from>protocol</from>
                            </input>
                          </replacement-token>
                          <replacement-token name="port">
                            <input global="false">
                              <from>port</from>
                            </input>
                          </replacement-token>
                        </stylesheet-replacement-tokens>
                        <stylesheet><![CDATA[<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="1.0">
  <xsl:output indent="no" />
  <xsl:template match="/">
    <items>
      <item>
        <xsl:if test="string-length('${target}') &gt; 0 and string-length('${username}') =0">
          <target>${target}</target>
        </xsl:if>
        <dataset-name-or-id>
          <xsl:value-of select="//storage-container-name-or-id/text()" disable-output-escaping="no" />
        </dataset-name-or-id>
        <size>
          <xsl:value-of select="round($[size])" disable-output-escaping="no" />
        </size>
        <xsl:if test=" name(//name) ">
          <name>
            <xsl:value-of select="//name/text()" disable-output-escaping="no" />
          </name>
        </xsl:if>
        <xsl:if test="name(//comments) ">
          <xsl:copy-of select="//comments" />
        </xsl:if>
        <xsl:if test="name(//dataset-export-info) ">
          <xsl:copy-of select="//dataset-export-info" />
        </xsl:if>
        <xsl:if test=" name(//create-new-vfiler) ">
          <create-new-vfiler>
            <xsl:value-of select="//create-new-vfiler/text()" disable-output-escaping="no" />
          </create-new-vfiler>
        </xsl:if>
        <xsl:if test=" name(//description) ">
          <description>
            <xsl:value-of select="//description/text()" disable-output-escaping="no" />
          </description>
        </xsl:if>
        <xsl:if test=" name(//resource-name-or-id) ">
          <resource-name-or-id>
            <xsl:value-of select="//resource-name-or-id/text()" disable-output-escaping="no" />
          </resource-name-or-id>
        </xsl:if>
        <xsl:if test="string-length(//maximum-data-size/text()) &gt; 0">
          <maximum-data-size>
            <xsl:value-of select="//maximum-data-size/text()" disable-output-escaping="no" />
          </maximum-data-size>
        </xsl:if>
        <xsl:if test=" name(//force) ">
          <force>
            <xsl:value-of select="//force/text()" disable-output-escaping="no" />
          </force>
        </xsl:if>
        <xsl:if test="string-length(//vfiler-name-or-id/text())&gt;0">
          <vfiler-name-or-id>
            <xsl:value-of select="//vfiler-name-or-id/text()" disable-output-escaping="no" />
          </vfiler-name-or-id>
        </xsl:if>
        <xsl:if test="string-length(//vfiler-name-or-id/text()) &gt; 0 or //create-new-vfiler/text() = 'true'">
          <xsl:if test="string-length(//online-migration/text())&gt;0">
            <online-migration>
              <xsl:value-of select="//online-migration/text()" disable-output-escaping="no" />
            </online-migration>
          </xsl:if>
        </xsl:if>
        <xsl:if test="string-length(//maximum-snapshot-space/text())&gt;0">
          <maximum-snapshot-space>
            <xsl:value-of select="//maximum-snapshot-space/text()" disable-output-escaping="no" />
          </maximum-snapshot-space>
        </xsl:if>
        <xsl:if test="string-length('${target}')&gt;0 and string-length('${username}') &gt; 0">
          <targets>
            <target>
              <host>
                <xsl:value-of select="'${target}'" disable-output-escaping="no" />
              </host>
              <user-name>${username}</user-name>
              <password>
                <xsl:attribute name="encryption-type">
                  <xsl:value-of select="'${encryption type}'" disable-output-escaping="no" />
                </xsl:attribute>
                <xsl:value-of select="'${password}'" disable-output-escaping="no" />
              </password>
              <xsl:if test="string-length('${protocol}') &gt;0">
                <protocol>${protocol}</protocol>
              </xsl:if>
              <xsl:if test="string-length('${port}') &gt;0">
                <port>${port}</port>
              </xsl:if>
            </target>
          </targets>
        </xsl:if>
      </item>
    </items>
  </xsl:template>
</xsl:stylesheet>]]></stylesheet>
                      </xslt-stylesheet>
                    </assignment>
                    <meta>
                      <documentation />
                      <checkpoint>false</checkpoint>
                    </meta>
                    <location>:switch[1]:sequence[2]:switch[1]:sequence[2]:assign[1]</location>
                  </assign>
                  <call-process>
                    <process-name>:AO-AD-NetAPP_Storage:Perform Action</process-name>
                    <parameters>
                      <input>
                        <from>module configuration items</from>
                        <to>adapter name</to>
                        <xpath-expression>
                          <xpath-replacement-tokens>
                            <replacement-token name="configuration name">
                              <input global="false">
                                <from>configuration name</from>
                              </input>
                            </replacement-token>
                          </xpath-replacement-tokens>
                          <xpath><![CDATA[//$[configuration name]/Adapter/text()]]></xpath>
                        </xpath-expression>
                      </input>
                      <input>
                        <from>module configuration items</from>
                        <to>version</to>
                        <xpath-expression>
                          <xpath-replacement-tokens>
                            <replacement-token name="configuration name">
                              <input global="false">
                                <from>configuration name</from>
                              </input>
                            </replacement-token>
                          </xpath-replacement-tokens>
                          <xpath><![CDATA[//$[configuration name]/Version/text()]]></xpath>
                        </xpath-expression>
                      </input>
                      <input>
                        <value>provision-dataset</value>
                        <to>item type</to>
                      </input>
                      <input>
                        <from>items</from>
                        <to>items</to>
                      </input>
                      <output>
                        <from>adapter response</from>
                        <to>adapter response</to>
                      </output>
                    </parameters>
                    <meta>
                      <documentation />
                      <run-mode-handling>
                        <run-mode>OCP</run-mode>
                        <allow-step-into>false</allow-step-into>
                      </run-mode-handling>
                      <checkpoint>false</checkpoint>
                    </meta>
                    <after-execution>
                      <console-output>
                        <type>INFO</type>
                        <summary>
                          <concat>
                            <input>
                              <value></value>
                            </input>
                          </concat>
                        </summary>
                        <detail>
                          <concat>
                            <input>
                              <value></value>
                            </input>
                          </concat>
                        </detail>
                      </console-output>
                    </after-execution>
                    <location>:switch[1]:sequence[2]:switch[1]:sequence[2]:call-process[1]</location>
                  </call-process>
                  <switch>
                    <meta>
                      <documentation />
                      <run-mode-handling>
                        <run-mode>OCP</run-mode>
                        <allow-step-into>true</allow-step-into>
                      </run-mode-handling>
                      <checkpoint>false</checkpoint>
                    </meta>
                    <execute-all-applicable-cases>false</execute-all-applicable-cases>
                    <default>
                      <sequence>
                        <assign>
                          <assignment>
                            <output>
                              <to>success status</to>
                              <value>failure</value>
                            </output>
                          </assignment>
                          <assignment>
                            <document>
                              <input>
                                <from>adapter response</from>
                              </input>
                            </document>
                            <result>
                              <output>
                                <to>status message</to>
                              </output>
                            </result>
                            <xpath-expression>
                              <xpath-replacement-tokens />
                              <xpath><![CDATA[concat("Errorr:  ", //error)]]></xpath>
                            </xpath-expression>
                          </assignment>
                          <meta>
                            <documentation />
                            <checkpoint>false</checkpoint>
                          </meta>
                          <location>:switch[1]:sequence[2]:switch[1]:sequence[2]:switch[1]:sequence[1]:assign[1]</location>
                        </assign>
                      </sequence>
                    </default>
                    <case>
                      <condition>
                        <document>
                          <input>
                            <from>adapter response</from>
                          </input>
                        </document>
                        <xpath-expression>
                          <xpath-replacement-tokens />
                          <xpath><![CDATA[string(//response/metadata/status)!='error']]></xpath>
                        </xpath-expression>
                      </condition>
                      <sequence>
                        <console-output>
                          <type>INFO</type>
                          <summary>
                            <concat>
                              <input>
                                <value></value>
                              </input>
                            </concat>
                          </summary>
                          <detail>
                            <concat>
                              <input>
                                <value></value>
                              </input>
                            </concat>
                          </detail>
                        </console-output>
                        <call-process>
                          <process-name>:AutoPilot-OA-Storage_Management:Utilities:Get Job Response</process-name>
                          <parameters>
                            <input>
                              <from>configuration name</from>
                              <to>configuration name</to>
                            </input>
                            <input>
                              <from>adapter response</from>
                              <to>adapter response</to>
                            </input>
                            <input>
                              <from>target</from>
                              <to>target</to>
                            </input>
                            <input>
                              <from>username</from>
                              <to>username</to>
                            </input>
                            <input>
                              <from>password</from>
                              <to>password</to>
                            </input>
                            <input>
                              <from>encryption type</from>
                              <to>encryption type</to>
                            </input>
                            <input>
                              <from>protocol</from>
                              <to>protocol</to>
                            </input>
                            <input>
                              <from>port</from>
                              <to>port</to>
                            </input>
                            <output>
                              <from>status message</from>
                              <to>status message</to>
                            </output>
                            <output>
                              <from>success status</from>
                              <to>success status</to>
                            </output>
                            <output>
                              <from>find job status response</from>
                              <to>find job status response</to>
                            </output>
                          </parameters>
                          <meta>
                            <documentation />
                            <run-mode-handling>
                              <run-mode>OCP</run-mode>
                              <allow-step-into>false</allow-step-into>
                            </run-mode-handling>
                            <checkpoint>false</checkpoint>
                          </meta>
                          <after-execution>
                            <console-output>
                              <type>INFO</type>
                              <summary>
                                <concat>
                                  <input>
                                    <value></value>
                                  </input>
                                </concat>
                              </summary>
                              <detail>
                                <concat>
                                  <input>
                                    <value></value>
                                  </input>
                                </concat>
                              </detail>
                            </console-output>
                          </after-execution>
                          <location>:switch[1]:sequence[2]:switch[1]:sequence[2]:switch[1]:sequence[2]:call-process[1]</location>
                        </call-process>
                        <switch>
                          <meta>
                            <documentation />
                            <run-mode-handling>
                              <run-mode>OCP</run-mode>
                              <allow-step-into>true</allow-step-into>
                            </run-mode-handling>
                            <checkpoint>false</checkpoint>
                          </meta>
                          <execute-all-applicable-cases>false</execute-all-applicable-cases>
                          <default>
                            <sequence>
                              <assign>
                                <assignment>
                                  <output>
                                    <to>success status</to>
                                    <value>failure</value>
                                  </output>
                                </assignment>
                                <assignment>
                                  <document>
                                    <input>
                                      <from>adapter response</from>
                                    </input>
                                  </document>
                                  <result>
                                    <output>
                                      <to>status message</to>
                                    </output>
                                  </result>
                                  <xpath-expression>
                                    <xpath-replacement-tokens />
                                    <xpath><![CDATA[concat("Error:  ", "Create job failed")]]></xpath>
                                  </xpath-expression>
                                </assignment>
                                <meta>
                                  <documentation />
                                  <checkpoint>false</checkpoint>
                                </meta>
                                <location>:switch[1]:sequence[2]:switch[1]:sequence[2]:switch[1]:sequence[2]:switch[1]:sequence[1]:assign[1]</location>
                              </assign>
                            </sequence>
                          </default>
                          <case applies-if-any-condition-true="false">
                            <condition>
                              <document>
                                <input>
                                  <from>success status</from>
                                </input>
                              </document>
                              <xpath-expression>
                                <xpath-replacement-tokens />
                                <xpath><![CDATA[string(.) = 'success']]></xpath>
                              </xpath-expression>
                            </condition>
                            <condition>
                              <document>
                                <input>
                                  <from>find job status response</from>
                                </input>
                              </document>
                              <xpath-expression>
                                <xpath-replacement-tokens />
                                <xpath><![CDATA[string(//job-overall-status/text()) !="failed"  and string(//job-overall-status/text())!= 'running_with_failures']]></xpath>
                              </xpath-expression>
                            </condition>
                            <sequence>
                              <console-output>
                                <type>INFO</type>
                                <summary>
                                  <concat>
                                    <input>
                                      <value></value>
                                    </input>
                                  </concat>
                                </summary>
                                <detail>
                                  <concat>
                                    <input>
                                      <value></value>
                                    </input>
                                  </concat>
                                </detail>
                              </console-output>
                              <assign>
                                <assignment>
                                  <document>
                                    <input>
                                      <from>find job status response</from>
                                    </input>
                                  </document>
                                  <result>
                                    <output>
                                      <to>output</to>
                                    </output>
                                  </result>
                                  <xpath-expression>
                                    <xpath-replacement-tokens />
                                    <xpath><![CDATA[//dp-job-info]]></xpath>
                                  </xpath-expression>
                                </assignment>
                                <meta>
                                  <documentation />
                                  <checkpoint>false</checkpoint>
                                </meta>
                                <location>:switch[1]:sequence[2]:switch[1]:sequence[2]:switch[1]:sequence[2]:switch[1]:sequence[2]:assign[1]</location>
                              </assign>
                            </sequence>
                          </case>
                          <location>:switch[1]:sequence[2]:switch[1]:sequence[2]:switch[1]:sequence[2]:switch[1]</location>
                        </switch>
                      </sequence>
                    </case>
                    <location>:switch[1]:sequence[2]:switch[1]:sequence[2]:switch[1]</location>
                  </switch>
                </sequence>
              </case>
              <location>:switch[1]:sequence[2]:switch[1]</location>
            </switch>
          </sequence>
        </case>
        <location>:switch[1]</location>
      </switch>
    </sequence>
    <meta>
      <expose-to>
        <consumer>RULE</consumer>
        <consumer>SCHEDULE</consumer>
      </expose-to>
      <documentation>
        <description>NetApp:

Dynamic targeting:Ability to communicate with multiple DFM servers which are not configured under the adapter configuration. NetApp action can be invoked using dynamic targeting / without dynamic targeting.

When Dynamic targeting is used : target would be Host name or IP address of server on which NetApp DataFabric Manager is running. It is mandatory send all the required parameters:
username, 
 password , 
 encyption type  when using dynamic targeting.

When Dynamic targeting is not used : Designates a specific target (name of the DFM server where the operation will be performed) that has been defined in the adapter configuration. Valid value- Same value that has been specified for the name attribute of 'config' element in the adapter configuration . If this tag is left empty the request will be executed on the first defined adapter configuration.

for e.g for the  adapter config below , target would be 02.
&lt;configs&gt;
  &lt;config name="02"&gt;
    &lt;target&gt;172.19.224.103&lt;/target&gt;
    &lt;user-name&gt;root&lt;/user-name&gt;
    &lt;password&gt;bmcbmc&lt;/password&gt;
    &lt;protocol&gt;http&lt;/protocol&gt;
    &lt;port&gt;8088&lt;/port&gt;
  &lt;/config&gt;
&lt;/configs&gt;
</description>
        <version></version>
      </documentation>
      <peer-location>
        <location>any</location>
      </peer-location>
      <record-metrics>false</record-metrics>
      <process-id>1a921b26-cc9a-3de3-827f-308f6080a1e9</process-id>
      <author>admin</author>
      <category></category>
      <status></status>
      <keywords></keywords>
      <systems></systems>
      <last-modified-by>admin</last-modified-by>
      <last-modified>1311227910647</last-modified>
    </meta>
  </process-def>
</process>