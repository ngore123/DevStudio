<process draft="false" dev-studio-version="7.6.02.01">
  <process-def name=":AutoPilot-OA-Storage_Management:Resource_Pool:Create Resource Pool">
    <parameters>
      <input global="false" required="true">
        <description>The name of a configuration item defined in a configuration module. 
Valid value: NetApp</description>
        <from>configuration name</from>
        <to>configuration name</to>
      </input>
      <input global="false" required="true">
        <description>NetApp: 
Create a new, empty resource pool. 

Sample XML:

&lt;storage&gt;
		&lt;aggregate-nearly-overcommitted-threshold&gt;50&lt;/aggregate-nearly-overcommitted-threshold&gt;
		&lt;aggregate-overcommitted-threshold&gt;50&lt;/aggregate-overcommitted-threshold&gt;
		&lt;resource-tag&gt;testing1&lt;/resource-tag&gt;
		&lt;resourcepool-contact&gt;abc@globallogic.com&lt;/resourcepool-contact&gt;
		&lt;resourcepool-description&gt;test desc&lt;/resourcepool-description&gt;
		&lt;resourcepool-full-threshold&gt;80&lt;/resourcepool-full-threshold&gt;
		&lt;resourcepool-name&gt;testing&lt;/resourcepool-name&gt;
		&lt;resourcepool-nearly-full-threshold&gt;90&lt;/resourcepool-nearly-full-threshold&gt;
		&lt;resourcepool-owner&gt;test&lt;/resourcepool-owner&gt;
		&lt;resourcepool-timezone&gt;GMT&lt;/resourcepool-timezone&gt;
	&lt;/storage&gt;

Parameters Description
aggregate-nearly-overcommitted-threshold[Optional]
	The value (as an integer percentage) of the fullness threshold used to generate an "resourcepool nearly overcommitted" event for all the resource pools. If the value specified is empty, then the setting is cleared and the value specified in global options for aggrNearlyOvercommittedThreshold will be used. Valid value - integer. Range: [0..65535]

aggregate-overcommitted-threshold[Optional]
	The value (as an integer percentage) of the fullness threshold used to generate an "resourcepool overcommitted" event for all the resource pools. If the value specified is empty, then the setting is cleared and the value specified in global options for aggrOvercommittedThreshold will be used. Valid values - integer. Range: [0..65535]
	
resource-tag[Optional]
	A label that can be associated with a resource pool.
	
resourcepool-contact[Optional]
	A list of email addresses. If more than one email address is specified, the addresses must be seperated by a ','. Spaces (and other white space) are not allowed, either between addresses or in them. Unprintable characters are also invalid. The list may contain up to 255 characters.

resourcepool-description[Optional]
	Description of the resource pool, up to 255 characters long. This is modifiable.

resourcepool-full-threshold[Optional]
	The value (as an integer percentage) of the fullness threshold used to generate a "resource pool full" event for this resource pool. Valid values - integer. Range: [0..1000]  

resourcepool-name[Required]
	Name of the resource pool. This is modifiable. This must be specified in resourcepool-create. Its a valid DFM object name. A valid DFM object name would contain at least one non-numeric character.

resourcepool-nearly-full-threshold[Optional]
	The value (as an integer percentage) of the fullness threshold used to generate a "resource pool nearly full" event for this resource pool. Valid values - integer. Range: [0..1000]

resourcepool-owner[Optional]
	Name of the owner of the resource pool, up to 255 characters long. This is modifiable.  

resourcepool-timezone[Optional]
	Time zone in which this pool's storage is located. This is modifiable. An empty value means to use the system default (usually GMT).

EMC : Creates a new storage Pool under given storage system.
e.g

&lt;storage&gt;
  	&lt;storage-system-name&gt;CKM00102400340&lt;/storage-system-name&gt;
  	&lt;raid-group/&gt;
  	&lt;thin-pool&gt;
     &lt;pool-type/&gt;
     &lt;disk-name/&gt;
	&lt;lun-name/&gt;
      &lt;/storage&gt;

Parameters description :

storage-system-name [required]:
---------------------------------------
	- Specifies the storage system name on which the storage pool is to be created.
	- Valid value: Any valid string.
	- Default value: None.

raid- group OR thin-pool [Required]:
-------------------------------------------
- Specifies the RAID group name or thin-pool name .
	- Valid value: None.
	- Default value: None.
Note : one can specify raid-group or thin pool one at atime. Both cannot be specified at the same time.

pool-type [Required]:
---------------------------
	- Specifies the type of the pool to be created.
	- Valid value: RG or TP
	- Default value: None


disk-name or lun-name [Required]:
-------------------------------------------

	- Specifies the user defined disk name or lun name.
	- Valid value: Any valid string.
      - Default value: None.
Note : one can specify disk-name or lun-name one at atime. Both cannot be specified at the same time.
</description>
        <from>storage</from>
        <to>storage</to>
      </input>
      <input global="false" required="false">
        <description>NetApp: 
[required if dynamic targeting is used otherwise optional] 

Designates a specific target (name of the DFM server where the operation will be performed) that has been defined in the adapter configuration. Valid value- Same value that has been specified for the name attribute of 'config' element in the adapter configuration . If this tag is left empty the request will be executed on the first defined adapter configuration.

for e.g for the  adapter config below , target would be 02.
&lt;configs&gt;
   &lt;config name="02"&gt;
          &lt;target&gt;172.19.224.103&lt;/target&gt;
          &lt;user-name&gt;root&lt;/user-name&gt;
          &lt;password&gt;bmcbmc&lt;/password&gt;
          &lt;protocol&gt;http&lt;/protocol&gt;
          &lt;port&gt;8088&lt;/port&gt;
   &lt;/config&gt;
&lt;/configs&gt;

Dynamic targeting: Host name or IP address of DFM.

</description>
        <from>target</from>
        <to>target</to>
      </input>
      <input global="false" required="false">
        <description>NetApp:
[required only if dynamic targeting is used]
NetApp DataFabric Manager login username.</description>
        <from>username</from>
        <to>username</to>
      </input>
      <input global="false" required="false">
        <description>NetApp:
[required only if dynamic targeting is used]
NetApp DataFabric Manager login password.


</description>
        <from>password</from>
        <to>password</to>
      </input>
      <input global="false" required="false">
        <description>NetApp: [Conditional]  specified only when password parameter is mentioned .
You can encrypt the password by specifying the encryption type .
Valid values:  Base64,Plain.</description>
        <from>encryption type</from>
        <to>encryption type</to>
      </input>
      <input global="false" required="false">
        <description>NetApp:
[Optional and used when dynamic targeting] 
Communication protocol used by adapter. Valid value is http or https. Default value is http.</description>
        <from>protocol</from>
        <to>protocol</to>
      </input>
      <input global="false" required="false">
        <description>NetApp: 
[Optional and used when dynamic targeting]
Port on which NetApp DataFabric Manager is enabled. Default value is 8088 for http protocol and 8488 for https protocol.

</description>
        <from>port</from>
        <to>port</to>
      </input>
      <output global="false" required="false">
        <description>String Value - Indicates whether or not the process completed successfully. 

Valid values: success or failure</description>
        <to>success status</to>
        <from>success status</from>
      </output>
      <output global="false" required="false">
        <description>String Value - A process specific explanation for the value of success status. </description>
        <to>status message</to>
        <from>status message</from>
      </output>
      <output global="false" required="false">
        <to>output</to>
        <from>output</from>
      </output>
    </parameters>
    <access />
    <sequence>
      <call-process>
        <process-name>:AutoPilot-OA-Storage_Management:Utilities:Extract Configuration Data</process-name>
        <parameters>
          <input>
            <from>configuration name</from>
            <to>configuration name</to>
          </input>
          <output>
            <from>success status</from>
            <to>success status</to>
          </output>
          <output>
            <from>adapter</from>
            <to>adapter</to>
          </output>
          <output>
            <from>version</from>
            <to>version</to>
          </output>
        </parameters>
        <meta>
          <documentation />
          <run-mode-handling>
            <run-mode>OCP</run-mode>
            <allow-step-into>false</allow-step-into>
          </run-mode-handling>
          <checkpoint>false</checkpoint>
        </meta>
        <after-execution>
          <console-output>
            <type>INFO</type>
            <summary>
              <concat>
                <input>
                  <value></value>
                </input>
              </concat>
            </summary>
            <detail>
              <concat>
                <input>
                  <value></value>
                </input>
              </concat>
            </detail>
          </console-output>
        </after-execution>
        <location>:call-process[1]</location>
      </call-process>
      <switch>
        <meta>
          <documentation />
          <run-mode-handling>
            <run-mode>OCP</run-mode>
            <allow-step-into>true</allow-step-into>
          </run-mode-handling>
          <checkpoint>false</checkpoint>
        </meta>
        <execute-all-applicable-cases>false</execute-all-applicable-cases>
        <default>
          <sequence>
            <assign>
              <assignment>
                <output>
                  <to>success status</to>
                  <value>failure</value>
                </output>
              </assignment>
              <assignment>
                <document>
                  <input>
                    <from>configuration name</from>
                  </input>
                </document>
                <result>
                  <output>
                    <to>status message</to>
                  </output>
                </result>
                <xpath-expression>
                  <xpath-replacement-tokens />
                  <xpath><![CDATA[concat("Unknown configuration name: ", .)]]></xpath>
                </xpath-expression>
              </assignment>
              <meta>
                <documentation />
                <checkpoint>false</checkpoint>
              </meta>
              <location>:switch[1]:sequence[1]:assign[1]</location>
            </assign>
          </sequence>
        </default>
        <case applies-if-any-condition-true="false">
          <condition>
            <document>
              <input>
                <from>configuration name</from>
              </input>
            </document>
            <xpath-expression>
              <xpath-replacement-tokens />
              <xpath><![CDATA[text()="NetApp"]]></xpath>
            </xpath-expression>
          </condition>
          <condition>
            <document>
              <input>
                <from>success status</from>
              </input>
            </document>
            <xpath-expression>
              <xpath-replacement-tokens />
              <xpath><![CDATA[string(.) = 'success']]></xpath>
            </xpath-expression>
          </condition>
          <sequence>
            <console-output>
              <type>INFO</type>
              <summary>
                <concat>
                  <input>
                    <value></value>
                  </input>
                </concat>
              </summary>
              <detail>
                <concat>
                  <input>
                    <value></value>
                  </input>
                </concat>
              </detail>
            </console-output>
            <assign>
              <assignment>
                <document>
                  <input>
                    <from>storage</from>
                  </input>
                </document>
                <result>
                  <output>
                    <to>items</to>
                  </output>
                </result>
                <xslt-stylesheet>
                  <stylesheet-replacement-tokens>
                    <replacement-token name="target">
                      <input global="false">
                        <from>target</from>
                      </input>
                    </replacement-token>
                    <replacement-token name="username">
                      <input global="false">
                        <from>username</from>
                      </input>
                    </replacement-token>
                    <replacement-token name="password">
                      <input global="false">
                        <from>password</from>
                      </input>
                    </replacement-token>
                    <replacement-token name="encryption type">
                      <input global="false">
                        <from>encryption type</from>
                      </input>
                    </replacement-token>
                    <replacement-token name="protocol">
                      <input global="false">
                        <from>protocol</from>
                      </input>
                    </replacement-token>
                    <replacement-token name="port">
                      <input global="false">
                        <from>port</from>
                      </input>
                    </replacement-token>
                  </stylesheet-replacement-tokens>
                  <stylesheet><![CDATA[<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="1.0">
  <xsl:output indent="no" />
  <xsl:template match="/">
    <items>
      <item>
        <xsl:if test="string-length(//resourcepool-timezone/text())&gt;0">
          <resourcepool-timezone>
            <xsl:value-of select="//resourcepool-timezone/text()" disable-output-escaping="no" />
          </resourcepool-timezone>
        </xsl:if>
        <xsl:if test="string-length(//resourcepool-owner/text())&gt;0">
          <resourcepool-owner>
            <xsl:value-of select="//resourcepool-owner/text()" disable-output-escaping="no" />
          </resourcepool-owner>
        </xsl:if>
        <xsl:if test="string-length(//resourcepool-nearly-full-threshold/text())&gt;0">
          <resourcepool-nearly-full-threshold>
            <xsl:value-of select="//resourcepool-nearly-full-threshold/text()" disable-output-escaping="no" />
          </resourcepool-nearly-full-threshold>
        </xsl:if>
        <xsl:if test="string-length(//resourcepool-full-threshold/text())&gt;0">
          <resourcepool-full-threshold>
            <xsl:value-of select="//resourcepool-full-threshold/text()" disable-output-escaping="no" />
          </resourcepool-full-threshold>
        </xsl:if>
        <xsl:if test="string-length(//resourcepool-description/text())&gt;0">
          <resourcepool-description>
            <xsl:value-of select="//resourcepool-description/text()" disable-output-escaping="no" />
          </resourcepool-description>
        </xsl:if>
        <xsl:if test="string-length(//aggregate-nearly-overcommitted-threshold/text())&gt;0">
          <aggregate-nearly-overcommitted-threshold>
            <xsl:value-of select="//aggregate-nearly-overcommitted-threshold" disable-output-escaping="no" />
          </aggregate-nearly-overcommitted-threshold>
        </xsl:if>
        <xsl:if test="string-length(//resourcepool-contact/text())&gt;0">
          <resourcepool-contact>
            <xsl:value-of select="//resourcepool-contact/text()" disable-output-escaping="no" />
          </resourcepool-contact>
        </xsl:if>
        <xsl:if test="string-length(//resource-tag/text())&gt;0">
          <resource-tag>
            <xsl:value-of select="//resource-tag/text()" disable-output-escaping="no" />
          </resource-tag>
        </xsl:if>
        <xsl:if test="string-length(//aggregate-overcommitted-threshold/text())&gt;0">
          <aggregate-overcommitted-threshold>
            <xsl:value-of select="//aggregate-overcommitted-threshold/text()" disable-output-escaping="no" />
          </aggregate-overcommitted-threshold>
        </xsl:if>
        <xsl:if test="string-length('${target}') &gt; 0 and string-length('${username}') =0">
          <target>
            <xsl:value-of select="'${target}'" disable-output-escaping="no" />
          </target>
        </xsl:if>
        <resourcepool-name>
          <xsl:value-of select="//resourcepool-name" disable-output-escaping="no" />
        </resourcepool-name>
        <xsl:if test="string-length('${target}')&gt;0 and string-length('${username}') &gt; 0">
          <targets>
            <target>
              <host>
                <xsl:value-of select="'${target}'" disable-output-escaping="no" />
              </host>
              <user-name>${username}</user-name>
              <password>
                <xsl:attribute name="encryption-type">
                  <xsl:value-of select="'${encryption type}'" disable-output-escaping="no" />
                </xsl:attribute>
                <xsl:value-of select="'${password}'" disable-output-escaping="no" />
              </password>
              <xsl:if test="string-length('${protocol}') &gt;0">
                <protocol>${protocol}</protocol>
              </xsl:if>
              <xsl:if test="string-length('${port}') &gt;0">
                <port>${port}</port>
              </xsl:if>
            </target>
          </targets>
        </xsl:if>
      </item>
    </items>
  </xsl:template>
</xsl:stylesheet>]]></stylesheet>
                </xslt-stylesheet>
              </assignment>
              <meta>
                <documentation />
                <checkpoint>false</checkpoint>
              </meta>
              <location>:switch[1]:sequence[2]:assign[1]</location>
            </assign>
            <call-process>
              <process-name>:AO-AD-NetAPP_Storage:Create Items</process-name>
              <parameters>
                <input>
                  <from>version</from>
                  <to>version</to>
                </input>
                <input>
                  <value>create-resource-pool</value>
                  <to>item type</to>
                </input>
                <input>
                  <from>items</from>
                  <to>items</to>
                </input>
                <output>
                  <from>adapter response</from>
                  <to>adapter response</to>
                </output>
              </parameters>
              <meta>
                <documentation />
                <run-mode-handling>
                  <run-mode>OCP</run-mode>
                  <allow-step-into>false</allow-step-into>
                </run-mode-handling>
                <checkpoint>false</checkpoint>
              </meta>
              <after-execution>
                <console-output>
                  <type>INFO</type>
                  <summary>
                    <concat>
                      <input>
                        <value></value>
                      </input>
                    </concat>
                  </summary>
                  <detail>
                    <concat>
                      <input>
                        <value></value>
                      </input>
                    </concat>
                  </detail>
                </console-output>
              </after-execution>
              <location>:switch[1]:sequence[2]:call-process[1]</location>
            </call-process>
            <switch>
              <meta>
                <documentation />
                <run-mode-handling>
                  <run-mode>OCP</run-mode>
                  <allow-step-into>true</allow-step-into>
                </run-mode-handling>
                <checkpoint>false</checkpoint>
              </meta>
              <execute-all-applicable-cases>false</execute-all-applicable-cases>
              <default>
                <sequence>
                  <assign>
                    <assignment>
                      <output>
                        <to>success status</to>
                        <value>failure</value>
                      </output>
                    </assignment>
                    <assignment>
                      <document>
                        <input>
                          <from>adapter response</from>
                        </input>
                      </document>
                      <result>
                        <output>
                          <to>status message</to>
                        </output>
                      </result>
                      <xpath-expression>
                        <xpath-replacement-tokens />
                        <xpath><![CDATA[//response/metadata/error/text()]]></xpath>
                      </xpath-expression>
                    </assignment>
                    <meta>
                      <documentation />
                      <checkpoint>false</checkpoint>
                    </meta>
                    <location>:switch[1]:sequence[2]:switch[1]:sequence[1]:assign[1]</location>
                  </assign>
                </sequence>
              </default>
              <case>
                <condition>
                  <document>
                    <input>
                      <from>adapter response</from>
                    </input>
                  </document>
                  <xpath-expression>
                    <xpath-replacement-tokens />
                    <xpath><![CDATA[string(//response/metadata/status/text())!= 'error']]></xpath>
                  </xpath-expression>
                </condition>
                <sequence>
                  <console-output>
                    <type>INFO</type>
                    <summary>
                      <concat>
                        <input>
                          <value></value>
                        </input>
                      </concat>
                    </summary>
                    <detail>
                      <concat>
                        <input>
                          <value></value>
                        </input>
                      </concat>
                    </detail>
                  </console-output>
                  <assign>
                    <assignment>
                      <output>
                        <to>success status</to>
                        <value>success</value>
                      </output>
                    </assignment>
                    <assignment>
                      <document>
                        <input>
                          <from>adapter response</from>
                        </input>
                      </document>
                      <result>
                        <output>
                          <to>output</to>
                        </output>
                      </result>
                      <xpath-expression>
                        <xpath-replacement-tokens />
                        <xpath><![CDATA[//response/output]]></xpath>
                      </xpath-expression>
                    </assignment>
                    <meta>
                      <documentation />
                      <checkpoint>false</checkpoint>
                    </meta>
                    <location>:switch[1]:sequence[2]:switch[1]:sequence[2]:assign[1]</location>
                  </assign>
                </sequence>
              </case>
              <location>:switch[1]:sequence[2]:switch[1]</location>
            </switch>
          </sequence>
        </case>
        <location>:switch[1]</location>
      </switch>
    </sequence>
    <meta>
      <expose-to>
        <consumer>RULE</consumer>
        <consumer>SCHEDULE</consumer>
        <consumer>SOAP</consumer>
      </expose-to>
      <documentation>
        <description>NetApp: 
Create a new, empty resource pool.

Dynamic targeting:Ability to communicate with multiple DFM servers which are not configured under the adapter configuration. NetApp action can be invoked using dynamic targeting / without dynamic targeting.

When Dynamic targeting is used : target would be Host name or IP address of server on which NetApp DataFabric Manager is running. It is mandatory send all the required parameters:
username, 
 password , 
 encyption type  when using dynamic targeting.

When Dynamic targeting is not used : Designates a specific target (name of the DFM server where the operation will be performed) that has been defined in the adapter configuration. Valid value- Same value that has been specified for the name attribute of 'config' element in the adapter configuration . If this tag is left empty the request will be executed on the first defined adapter configuration.

for e.g for the  adapter config below , target would be 02.
&lt;configs&gt;
  &lt;config name="02"&gt;
    &lt;target&gt;172.19.224.103&lt;/target&gt;
    &lt;user-name&gt;root&lt;/user-name&gt;
    &lt;password&gt;bmcbmc&lt;/password&gt;
    &lt;protocol&gt;http&lt;/protocol&gt;
    &lt;port&gt;8088&lt;/port&gt;
  &lt;/config&gt;
&lt;/configs&gt;
</description>
        <version></version>
      </documentation>
      <peer-location>
        <location>any</location>
      </peer-location>
      <record-metrics>false</record-metrics>
      <process-id>196863b4-59af-3c4b-9561-c165c8bc3b27</process-id>
      <author>admin</author>
      <category></category>
      <status></status>
      <keywords></keywords>
      <systems></systems>
      <last-modified-by>admin</last-modified-by>
      <last-modified>1311227678959</last-modified>
    </meta>
  </process-def>
</process>