<process draft="false" dev-studio-version="7.6.02.01">
  <process-def name=":AutoPilot-OA-Storage_Management:Security_Configuration:Attach Host to LUN">
    <parameters>
      <input global="false" required="true">
        <description>The name of a configuration item defined in a configuration module. 

Valid value: NetApp,EMC</description>
        <from>configuration name</from>
        <to>configuration name</to>
      </input>
      <input global="false" required="true">
        <description>NetApp:
The hostname or IP of the target storage/filer.

EMC:
Name of the storage system .
</description>
        <from>target host</from>
        <to>target host</to>
      </input>
      <input global="false" required="true">
        <description>NetApp: path of the LUN with which the host is to be attached
EMC: Name of the Lun.</description>
        <from>storage path</from>
        <to>storage path</to>
      </input>
      <input global="false" required="false">
        <description>NetApp:
name of the host to be attached to san storage

</description>
        <from>host name</from>
        <to>host name</to>
      </input>
      <input global="false" required="false">
        <description>[Required Only EMC]

Type of san storage connectivity.
Valid values: iscsi, fcp

Requried for NetApp</description>
        <from>initiator group type</from>
        <to>initiator group type</to>
      </input>
      <input global="false" required="false">
        <description>[Required for  EMC] :

Specifies the name of the host(s) to which the lun(s) must be associated.


[optional for NetApp] :

WWPN or Alias of Initiator to add.  

</description>
        <from>initiator id</from>
        <to>initiator id</to>
      </input>
      <input global="false" required="false">
        <description>[optional] 

OS type of the initiators within the group. While optional, this field should always be specified. Please see Note below. The type applies to all initiators within the group and governs the finer details of SCSI protocol interaction with these initiators. 
Valid Values - "default", "solaris", "windows", "hpux", "aix", "linux", "netware", "vmware", "openvms", "xen" and "hyper_v". If not specified, "default" is used.

NOTE: It is strongly recommended for the caller of this API to specify an OS type that is not "default". Some host OSes require this type field be set correctly in order to function properly.  

Note : Applicable for NetApp only</description>
        <from>os type</from>
        <to>os type</to>
      </input>
      <input global="false" required="false">
        <description>NetApp: 
[required if dynamic targeting is used otherwise optional] 

Designates a specific target (name of the DFM server where the operation will be performed) that has been defined in the adapter configuration. Valid value- Same value that has been specified for the name attribute of 'config' element in the adapter configuration . If this tag is left empty the request will be executed on the first defined adapter configuration.

for e.g for the  adapter config below , target would be 02.
&lt;configs&gt;
   &lt;config name="02"&gt;
          &lt;target&gt;172.19.224.103&lt;/target&gt;
          &lt;user-name&gt;root&lt;/user-name&gt;
          &lt;password&gt;bmcbmc&lt;/password&gt;
          &lt;protocol&gt;http&lt;/protocol&gt;
          &lt;port&gt;8088&lt;/port&gt;
   &lt;/config&gt;
&lt;/configs&gt;

Dynamic targeting: Host name or IP address of DFM.


EMC:- [optional] Specifies the connection information for EMC SMI-S Provider.
		- Default value: All defined adapter configuration.</description>
        <from>target</from>
        <to>target</to>
      </input>
      <input global="false" required="false">
        <description>NetApp:
[required only if dynamic targeting is used]
NetApp DataFabric Manager login username.

EMC:- [optional]  Specifies the login name used to connect to  EMC SMI-S Provider. The 'username' specified in adapter request overrides the value specified in adapter configuration.
	- Valid value: None.
	- Default Value: None.</description>
        <from>username</from>
        <to>username</to>
      </input>
      <input global="false" required="false">
        <description>NetApp:
[required only if dynamic targeting is used]
NetApp DataFabric Manager login password.

EMC :- [optional]  Specifies the password used to connect to  EMC SMI-S Provider. The 'password' specified in adapter request overrides the value specified in adapter configuration.
	- Valid value: None.
	- Default Value: None.</description>
        <from>password</from>
        <to>password</to>
      </input>
      <input global="false" required="false">
        <description>NetApp: [Conditional]  specified only when password parameter is mentioned .
You can encrypt the password by specifying the encryption type .
Valid values:  Base64,Plain.</description>
        <from>encryption type</from>
        <to>encryption type</to>
      </input>
      <input global="false" required="false">
        <description>NetApp:
[Optional and used when dynamic targeting] 
Communication protocol used by adapter. Valid value is http or https. Default value is http.

EMC:- [optional]  Specifies the protocol used to connect to  EMC SMI-S Provider. The 'protocol' specified in adapter request overrides the value specified in adapter configuration.
	- Valid value: HTTPS or HTTP
	- Default Value: None.</description>
        <from>protocol</from>
        <to>protocol</to>
      </input>
      <input global="false" required="false">
        <description>NetApp: 
[Optional and used when dynamic targeting]
Port on which NetApp DataFabric Manager is enabled. Default value is 8088 for http protocol and 8488 for https protocol.


EMC:- [optional]  Specifies the port number used to connect to  EMC SMI-S Provider. The 'port' specified in adapter request overrides the value specified in adapter configuration.
	- Valid value: A valid numeric value. 
	- Default Value: None.</description>
        <from>port</from>
        <to>port</to>
      </input>
      <input global="false" required="false">
        <description>[optional] 
EMC: - Specifies the time in seconds after which the attempt to connect to EMC SMI-S provider times out. The 'timeout-secs' specified in adapter request overrides the value specified in adapter configuration.
	- Valid value: A numeric value which specifies the time in seconds. 
	- Default Value: 180, if no 'timeout-secs' is provided .</description>
        <from>time out secs</from>
        <to>time out secs</to>
      </input>
      <output global="false" required="false">
        <description>String Value - Indicates whether or not the process completed successfully. 

Valid values: success or failure</description>
        <to>success status</to>
        <from>success status</from>
      </output>
      <output global="false" required="false">
        <description>String Value - A process specific explanation for the value of success status, incase of failure</description>
        <to>status message</to>
        <from>status message</from>
      </output>
      <output global="false" required="false">
        <description>String or XML value - Contains required output, in case of success

sample xml for EMC:
&lt;result&gt;
  &lt;storage-groups&gt;
    &lt;storage-group&gt;
      &lt;storage-system-name&gt;CLARiiON+CKM00102400340&lt;/storage-system-name&gt;
      &lt;storage-group-name&gt;iqn.1991-05.com.microsoft:ibmc-f3cx5bs.adprod.bmc.com&lt;/storage-group-name&gt;
      &lt;lun-name&gt;00001&lt;/lun-name&gt;
      &lt;add-lun-status&gt;0 (Success)&lt;/add-lun-status&gt;
    &lt;/storage-group&gt;
  &lt;/storage-groups&gt;
&lt;/result&gt;</description>
        <to>output</to>
        <from>output</from>
      </output>
    </parameters>
    <access />
    <sequence>
      <call-process>
        <process-name>:AutoPilot-OA-Storage_Management:Utilities:Extract Configuration Data</process-name>
        <parameters>
          <input>
            <from>configuration name</from>
            <to>configuration name</to>
          </input>
          <output>
            <from>success status</from>
            <to>success status</to>
          </output>
          <output>
            <from>adapter</from>
            <to>adapter</to>
          </output>
          <output>
            <from>version</from>
            <to>version</to>
          </output>
          <output>
            <from>module configuration items</from>
            <to>module configuration items</to>
          </output>
        </parameters>
        <meta>
          <documentation />
          <run-mode-handling>
            <run-mode>OCP</run-mode>
            <allow-step-into>false</allow-step-into>
          </run-mode-handling>
          <checkpoint>false</checkpoint>
        </meta>
        <after-execution>
          <console-output>
            <type>INFO</type>
            <summary>
              <concat>
                <input>
                  <value></value>
                </input>
              </concat>
            </summary>
            <detail>
              <concat>
                <input>
                  <value></value>
                </input>
              </concat>
            </detail>
          </console-output>
        </after-execution>
        <location>:call-process[1]</location>
      </call-process>
      <switch>
        <meta>
          <documentation />
          <run-mode-handling>
            <run-mode>OCP</run-mode>
            <allow-step-into>true</allow-step-into>
          </run-mode-handling>
          <checkpoint>false</checkpoint>
        </meta>
        <execute-all-applicable-cases>false</execute-all-applicable-cases>
        <default>
          <sequence>
            <assign>
              <assignment>
                <output>
                  <to>success status</to>
                  <value>failure</value>
                </output>
              </assignment>
              <assignment>
                <document>
                  <input>
                    <from>configuration name</from>
                  </input>
                </document>
                <result>
                  <output>
                    <to>status message</to>
                  </output>
                </result>
                <xpath-expression>
                  <xpath-replacement-tokens />
                  <xpath><![CDATA[concat(" Unknown configuration name  ",.)]]></xpath>
                </xpath-expression>
              </assignment>
              <meta>
                <documentation />
                <checkpoint>false</checkpoint>
              </meta>
              <location>:switch[1]:sequence[1]:assign[1]</location>
            </assign>
          </sequence>
        </default>
        <case applies-if-any-condition-true="false">
          <condition>
            <document>
              <input>
                <from>success status</from>
              </input>
            </document>
            <xpath-expression>
              <xpath-replacement-tokens />
              <xpath><![CDATA[string(.) =  'success']]></xpath>
            </xpath-expression>
          </condition>
          <condition>
            <document>
              <input>
                <from>configuration name</from>
              </input>
            </document>
            <xpath-expression>
              <xpath-replacement-tokens />
              <xpath><![CDATA[string(.) = 'NetApp']]></xpath>
            </xpath-expression>
          </condition>
          <sequence>
            <console-output>
              <type>INFO</type>
              <summary>
                <concat>
                  <input>
                    <value></value>
                  </input>
                </concat>
              </summary>
              <detail>
                <concat>
                  <input>
                    <value></value>
                  </input>
                </concat>
              </detail>
            </console-output>
            <assign>
              <assignment>
                <document>
                  <input>
                    <from>host name</from>
                  </input>
                </document>
                <result>
                  <output>
                    <to>items</to>
                  </output>
                </result>
                <xslt-stylesheet>
                  <stylesheet-replacement-tokens>
                    <replacement-token name="target">
                      <input global="false">
                        <from>target</from>
                      </input>
                    </replacement-token>
                    <replacement-token name="target host">
                      <input global="false">
                        <from>target host</from>
                      </input>
                    </replacement-token>
                    <replacement-token name="igroup name">
                      <input global="false">
                        <from>host name</from>
                      </input>
                    </replacement-token>
                    <replacement-token name="username">
                      <input global="false">
                        <from>username</from>
                      </input>
                    </replacement-token>
                    <replacement-token name="password">
                      <input global="false">
                        <from>password</from>
                      </input>
                    </replacement-token>
                    <replacement-token name="encryption type">
                      <input global="false">
                        <from>encryption type</from>
                      </input>
                    </replacement-token>
                    <replacement-token name="protocol">
                      <input global="false">
                        <from>protocol</from>
                      </input>
                    </replacement-token>
                    <replacement-token name="port">
                      <input global="false">
                        <from>port</from>
                      </input>
                    </replacement-token>
                  </stylesheet-replacement-tokens>
                  <stylesheet><![CDATA[<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="1.0">
  <xsl:output indent="no" />
  <xsl:template match="/">
    <items>
      <item>
        <xsl:if test="string-length('${target}') &gt; 0 and string-length('${username}') =0">
          <target>${target}</target>
        </xsl:if>
        <target-host>${target host}</target-host>
        <initiator-group-name>${igroup name}</initiator-group-name>
        <xsl:if test="string-length('${target}')&gt;0 and string-length('${username}') &gt; 0">
          <targets>
            <target>
              <host>
                <xsl:value-of select="'${target}'" disable-output-escaping="no" />
              </host>
              <user-name>${username}</user-name>
              <password>
                <xsl:attribute name="encryption-type">
                  <xsl:value-of select="'${encryption type}'" disable-output-escaping="no" />
                </xsl:attribute>
                <xsl:value-of select="'${password}'" disable-output-escaping="no" />
              </password>
              <xsl:if test="string-length('${protocol}') &gt;0">
                <protocol>${protocol}</protocol>
              </xsl:if>
              <xsl:if test="string-length('${port}') &gt;0">
                <port>${port}</port>
              </xsl:if>
            </target>
          </targets>
        </xsl:if>
      </item>
    </items>
  </xsl:template>
</xsl:stylesheet>]]></stylesheet>
                </xslt-stylesheet>
              </assignment>
              <meta>
                <documentation />
                <checkpoint>false</checkpoint>
              </meta>
              <location>:switch[1]:sequence[2]:assign[1]</location>
            </assign>
            <call-process>
              <process-name>:AO-AD-NetAPP_Storage:Find Items</process-name>
              <parameters>
                <input>
                  <from>module configuration items</from>
                  <to>adapter name</to>
                  <xpath-expression>
                    <xpath-replacement-tokens>
                      <replacement-token name="configuration name">
                        <input global="false">
                          <from>configuration name</from>
                        </input>
                      </replacement-token>
                    </xpath-replacement-tokens>
                    <xpath><![CDATA[//$[configuration name]/Adapter/text()]]></xpath>
                  </xpath-expression>
                </input>
                <input>
                  <from>module configuration items</from>
                  <to>version</to>
                  <xpath-expression>
                    <xpath-replacement-tokens>
                      <replacement-token name="configuration name">
                        <input global="false">
                          <from>configuration name</from>
                        </input>
                      </replacement-token>
                    </xpath-replacement-tokens>
                    <xpath><![CDATA[//$[configuration name]/Version/text()]]></xpath>
                  </xpath-expression>
                </input>
                <input>
                  <value>find-igroup</value>
                  <to>item type</to>
                </input>
                <input>
                  <from>items</from>
                  <to>items</to>
                </input>
                <output>
                  <from>adapter response</from>
                  <to>adapter response</to>
                </output>
              </parameters>
              <meta>
                <documentation />
                <run-mode-handling>
                  <run-mode>OCP</run-mode>
                  <allow-step-into>false</allow-step-into>
                </run-mode-handling>
                <checkpoint>false</checkpoint>
              </meta>
              <after-execution>
                <console-output>
                  <type>INFO</type>
                  <summary>
                    <concat>
                      <input>
                        <value></value>
                      </input>
                    </concat>
                  </summary>
                  <detail>
                    <concat>
                      <input>
                        <value></value>
                      </input>
                    </concat>
                  </detail>
                </console-output>
                <log>
                  <level>debug</level>
                  <parameters>
                    <input>
                      <value>log</value>
                    </input>
                    <input>
                      <from>adapter response</from>
                    </input>
                  </parameters>
                </log>
              </after-execution>
              <location>:switch[1]:sequence[2]:call-process[1]</location>
            </call-process>
            <switch>
              <meta>
                <documentation />
                <run-mode-handling>
                  <run-mode>OCP</run-mode>
                  <allow-step-into>true</allow-step-into>
                </run-mode-handling>
                <checkpoint>false</checkpoint>
              </meta>
              <execute-all-applicable-cases>false</execute-all-applicable-cases>
              <default>
                <sequence>
                  <assign>
                    <assignment>
                      <output>
                        <to>success status</to>
                        <value>success</value>
                      </output>
                    </assignment>
                    <meta>
                      <documentation />
                      <checkpoint>false</checkpoint>
                    </meta>
                    <location>:switch[1]:sequence[2]:switch[1]:sequence[1]:assign[1]</location>
                  </assign>
                </sequence>
              </default>
              <case>
                <condition>
                  <document>
                    <input>
                      <from>adapter response</from>
                    </input>
                  </document>
                  <xpath-expression>
                    <xpath-replacement-tokens />
                    <xpath><![CDATA[string(//responses/response/metadata/status/text()) = 'error']]></xpath>
                  </xpath-expression>
                </condition>
                <sequence>
                  <console-output>
                    <type>INFO</type>
                    <summary>
                      <concat>
                        <input>
                          <value></value>
                        </input>
                      </concat>
                    </summary>
                    <detail>
                      <concat>
                        <input>
                          <value></value>
                        </input>
                      </concat>
                    </detail>
                  </console-output>
                  <switch>
                    <meta>
                      <documentation />
                      <run-mode-handling>
                        <run-mode>OCP</run-mode>
                        <allow-step-into>true</allow-step-into>
                      </run-mode-handling>
                      <checkpoint>false</checkpoint>
                    </meta>
                    <execute-all-applicable-cases>false</execute-all-applicable-cases>
                    <default>
                      <sequence>
                        <assign>
                          <assignment>
                            <output>
                              <to>success status</to>
                              <value>failure</value>
                            </output>
                          </assignment>
                          <assignment>
                            <document>
                              <input>
                                <from>initiator group type</from>
                              </input>
                            </document>
                            <result>
                              <output>
                                <to>status message</to>
                              </output>
                            </result>
                            <xpath-expression>
                              <xpath-replacement-tokens>
                                <replacement-token name="igroup type">
                                  <input global="false">
                                    <from>initiator group type</from>
                                  </input>
                                </replacement-token>
                              </xpath-replacement-tokens>
                              <xpath><![CDATA[concat("Invalid initiator group type:'${igroup type}'." , " Valid values are iscsi and fcp.")]]></xpath>
                            </xpath-expression>
                          </assignment>
                          <meta>
                            <documentation />
                            <checkpoint>false</checkpoint>
                          </meta>
                          <location>:switch[1]:sequence[2]:switch[1]:sequence[2]:switch[1]:sequence[1]:assign[1]</location>
                        </assign>
                      </sequence>
                    </default>
                    <case>
                      <condition>
                        <document>
                          <input>
                            <from>initiator group type</from>
                          </input>
                        </document>
                        <xpath-expression>
                          <xpath-replacement-tokens />
                          <xpath><![CDATA[string(.) = 'iscsi' or string(.) = 'fcp']]></xpath>
                        </xpath-expression>
                      </condition>
                      <sequence>
                        <console-output>
                          <type>INFO</type>
                          <summary>
                            <concat>
                              <input>
                                <value></value>
                              </input>
                            </concat>
                          </summary>
                          <detail>
                            <concat>
                              <input>
                                <value></value>
                              </input>
                            </concat>
                          </detail>
                        </console-output>
                        <assign>
                          <assignment>
                            <document>
                              <input>
                                <from>host name</from>
                              </input>
                            </document>
                            <result>
                              <output>
                                <to>items</to>
                              </output>
                            </result>
                            <xslt-stylesheet>
                              <stylesheet-replacement-tokens>
                                <replacement-token name="target">
                                  <input global="false">
                                    <from>target</from>
                                  </input>
                                </replacement-token>
                                <replacement-token name="target host">
                                  <input global="false">
                                    <from>target host</from>
                                  </input>
                                </replacement-token>
                                <replacement-token name="igroup type">
                                  <input global="false">
                                    <from>initiator group type</from>
                                  </input>
                                </replacement-token>
                                <replacement-token name="os type">
                                  <input global="false">
                                    <from>os type</from>
                                  </input>
                                </replacement-token>
                                <replacement-token name="host name">
                                  <input global="false">
                                    <from>host name</from>
                                  </input>
                                </replacement-token>
                                <replacement-token name="username">
                                  <input global="false">
                                    <from>username</from>
                                  </input>
                                </replacement-token>
                                <replacement-token name="password">
                                  <input global="false">
                                    <from>password</from>
                                  </input>
                                </replacement-token>
                                <replacement-token name="encryption type">
                                  <input global="false">
                                    <from>encryption type</from>
                                  </input>
                                </replacement-token>
                                <replacement-token name="protocol">
                                  <input global="false">
                                    <from>protocol</from>
                                  </input>
                                </replacement-token>
                                <replacement-token name="port">
                                  <input global="false">
                                    <from>port</from>
                                  </input>
                                </replacement-token>
                              </stylesheet-replacement-tokens>
                              <stylesheet><![CDATA[<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="1.0">
  <xsl:output indent="no" />
  <xsl:template match="/">
    <items>
      <item>
        <xsl:if test="string-length('${target}') &gt; 0 and string-length('${username}') =0">
          <target>${target}</target>
        </xsl:if>
        <target-host>${target host}</target-host>
        <initiator-group-name>${host name}</initiator-group-name>
        <xsl:if test="string-length('${igroup type}') &gt; 0">
          <initiator-group-type>${igroup type}</initiator-group-type>
        </xsl:if>
        <xsl:if test="string-length('${os type}') &gt; 0">
          <os-type>${os type}</os-type>
        </xsl:if>
        <xsl:if test="string-length('${target}')&gt;0 and string-length('${username}') &gt; 0">
          <targets>
            <target>
              <host>
                <xsl:value-of select="'${target}'" disable-output-escaping="no" />
              </host>
              <user-name>${username}</user-name>
              <password>
                <xsl:attribute name="encryption-type">
                  <xsl:value-of select="'${encryption type}'" disable-output-escaping="no" />
                </xsl:attribute>
                <xsl:value-of select="'${password}'" disable-output-escaping="no" />
              </password>
              <xsl:if test="string-length('${protocol}') &gt;0">
                <protocol>${protocol}</protocol>
              </xsl:if>
              <xsl:if test="string-length('${port}') &gt;0">
                <port>${port}</port>
              </xsl:if>
            </target>
          </targets>
        </xsl:if>
      </item>
    </items>
  </xsl:template>
</xsl:stylesheet>]]></stylesheet>
                            </xslt-stylesheet>
                          </assignment>
                          <meta>
                            <documentation />
                            <checkpoint>false</checkpoint>
                          </meta>
                          <location>:switch[1]:sequence[2]:switch[1]:sequence[2]:switch[1]:sequence[2]:assign[1]</location>
                        </assign>
                        <call-process>
                          <process-name>:AO-AD-NetAPP_Storage:Create Items</process-name>
                          <parameters>
                            <input>
                              <from>module configuration items</from>
                              <to>adapter name</to>
                              <xpath-expression>
                                <xpath-replacement-tokens>
                                  <replacement-token name="configuration name">
                                    <input global="false">
                                      <from>configuration name</from>
                                    </input>
                                  </replacement-token>
                                </xpath-replacement-tokens>
                                <xpath><![CDATA[//$[configuration name]/Adapter/text()]]></xpath>
                              </xpath-expression>
                            </input>
                            <input>
                              <from>module configuration items</from>
                              <to>version</to>
                              <xpath-expression>
                                <xpath-replacement-tokens>
                                  <replacement-token name="configuration name">
                                    <input global="false">
                                      <from>configuration name</from>
                                    </input>
                                  </replacement-token>
                                </xpath-replacement-tokens>
                                <xpath><![CDATA[//$[configuration name]/Version/text()]]></xpath>
                              </xpath-expression>
                            </input>
                            <input>
                              <value>create-igroup</value>
                              <to>item type</to>
                            </input>
                            <input>
                              <from>items</from>
                              <to>items</to>
                            </input>
                            <output>
                              <from>adapter response</from>
                              <to>adapter response</to>
                            </output>
                          </parameters>
                          <meta>
                            <documentation />
                            <run-mode-handling>
                              <run-mode>OCP</run-mode>
                              <allow-step-into>false</allow-step-into>
                            </run-mode-handling>
                            <checkpoint>false</checkpoint>
                          </meta>
                          <after-execution>
                            <console-output>
                              <type>INFO</type>
                              <summary>
                                <concat>
                                  <input>
                                    <value></value>
                                  </input>
                                </concat>
                              </summary>
                              <detail>
                                <concat>
                                  <input>
                                    <value></value>
                                  </input>
                                </concat>
                              </detail>
                            </console-output>
                          </after-execution>
                          <location>:switch[1]:sequence[2]:switch[1]:sequence[2]:switch[1]:sequence[2]:call-process[1]</location>
                        </call-process>
                        <switch>
                          <meta>
                            <documentation />
                            <run-mode-handling>
                              <run-mode>OCP</run-mode>
                              <allow-step-into>true</allow-step-into>
                            </run-mode-handling>
                            <checkpoint>false</checkpoint>
                          </meta>
                          <execute-all-applicable-cases>false</execute-all-applicable-cases>
                          <default>
                            <sequence>
                              <assign>
                                <assignment>
                                  <output>
                                    <to>success status</to>
                                    <value>failure</value>
                                  </output>
                                </assignment>
                                <assignment>
                                  <document>
                                    <input>
                                      <from>adapter response</from>
                                    </input>
                                  </document>
                                  <result>
                                    <output>
                                      <to>status message</to>
                                    </output>
                                  </result>
                                  <xpath-expression>
                                    <xpath-replacement-tokens />
                                    <xpath><![CDATA[//response/metadata/error/text()]]></xpath>
                                  </xpath-expression>
                                </assignment>
                                <meta>
                                  <documentation />
                                  <checkpoint>false</checkpoint>
                                </meta>
                                <location>:switch[1]:sequence[2]:switch[1]:sequence[2]:switch[1]:sequence[2]:switch[1]:sequence[1]:assign[1]</location>
                              </assign>
                            </sequence>
                          </default>
                          <case>
                            <condition>
                              <document>
                                <input>
                                  <from>adapter response</from>
                                </input>
                              </document>
                              <xpath-expression>
                                <xpath-replacement-tokens />
                                <xpath><![CDATA[string(//response/metadata/status/text()) != 'error' and not(name(//metadata/error))]]></xpath>
                              </xpath-expression>
                            </condition>
                            <sequence>
                              <console-output>
                                <type>INFO</type>
                                <summary>
                                  <concat>
                                    <input>
                                      <value></value>
                                    </input>
                                  </concat>
                                </summary>
                                <detail>
                                  <concat>
                                    <input>
                                      <value></value>
                                    </input>
                                  </concat>
                                </detail>
                              </console-output>
                              <assign>
                                <assignment>
                                  <document>
                                    <input>
                                      <from>target</from>
                                    </input>
                                  </document>
                                  <result>
                                    <output>
                                      <to>items</to>
                                    </output>
                                  </result>
                                  <xslt-stylesheet>
                                    <stylesheet-replacement-tokens>
                                      <replacement-token name="target">
                                        <input global="false">
                                          <from>target</from>
                                        </input>
                                      </replacement-token>
                                      <replacement-token name="host">
                                        <input global="false">
                                          <from>target host</from>
                                        </input>
                                      </replacement-token>
                                      <replacement-token name="igroup name">
                                        <input global="false">
                                          <from>host name</from>
                                        </input>
                                      </replacement-token>
                                      <replacement-token name="initiator id">
                                        <input global="false">
                                          <from>initiator id</from>
                                        </input>
                                      </replacement-token>
                                      <replacement-token name="username">
                                        <input global="false">
                                          <from>username</from>
                                        </input>
                                      </replacement-token>
                                      <replacement-token name="password">
                                        <input global="false">
                                          <from>password</from>
                                        </input>
                                      </replacement-token>
                                      <replacement-token name="encryption type">
                                        <input global="false">
                                          <from>encryption type</from>
                                        </input>
                                      </replacement-token>
                                      <replacement-token name="protocol">
                                        <input global="false">
                                          <from>protocol</from>
                                        </input>
                                      </replacement-token>
                                      <replacement-token name="port">
                                        <input global="false">
                                          <from>port</from>
                                        </input>
                                      </replacement-token>
                                    </stylesheet-replacement-tokens>
                                    <stylesheet><![CDATA[<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="1.0">
  <xsl:output indent="no" />
  <xsl:template match="/">
    <items>
      <item>
        <xsl:if test="string-length('${target}') &gt; 0 and string-length('${username}') =0">
          <target>
            <xsl:value-of select="'${target}'" disable-output-escaping="no" />
          </target>
        </xsl:if>
        <target-host>${host}</target-host>
        <initiator-group-name>${igroup name}</initiator-group-name>
        <initiator>${initiator id}</initiator>
        <force>
          <xsl:text disable-output-escaping="no">false</xsl:text>
        </force>
        <xsl:if test="string-length('${target}')&gt;0 and string-length('${username}') &gt; 0">
          <targets>
            <target>
              <host>
                <xsl:value-of select="'${target}'" disable-output-escaping="no" />
              </host>
              <user-name>${username}</user-name>
              <password>
                <xsl:attribute name="encryption-type">
                  <xsl:value-of select="'${encryption type}'" disable-output-escaping="no" />
                </xsl:attribute>
                <xsl:value-of select="'${password}'" disable-output-escaping="no" />
              </password>
              <xsl:if test="string-length('${protocol}') &gt;0">
                <protocol>${protocol}</protocol>
              </xsl:if>
              <xsl:if test="string-length('${port}') &gt;0">
                <port>${port}</port>
              </xsl:if>
            </target>
          </targets>
        </xsl:if>
      </item>
    </items>
  </xsl:template>
</xsl:stylesheet>]]></stylesheet>
                                  </xslt-stylesheet>
                                </assignment>
                                <meta>
                                  <documentation />
                                  <checkpoint>false</checkpoint>
                                </meta>
                                <after-execution>
                                  <log>
                                    <level>debug</level>
                                    <parameters>
                                      <input>
                                        <from>items</from>
                                      </input>
                                    </parameters>
                                  </log>
                                </after-execution>
                                <location>:switch[1]:sequence[2]:switch[1]:sequence[2]:switch[1]:sequence[2]:switch[1]:sequence[2]:assign[1]</location>
                              </assign>
                              <call-process>
                                <process-name>:AO-AD-NetAPP_Storage:Update Items</process-name>
                                <parameters>
                                  <input>
                                    <from>module configuration items</from>
                                    <to>adapter name</to>
                                    <xpath-expression>
                                      <xpath-replacement-tokens>
                                        <replacement-token name="configuration name">
                                          <input global="false">
                                            <from>configuration name</from>
                                          </input>
                                        </replacement-token>
                                      </xpath-replacement-tokens>
                                      <xpath><![CDATA[//$[configuration name]/Adapter/text()]]></xpath>
                                    </xpath-expression>
                                  </input>
                                  <input>
                                    <from>module configuration items</from>
                                    <to>version</to>
                                    <xpath-expression>
                                      <xpath-replacement-tokens>
                                        <replacement-token name="configuration name">
                                          <input global="false">
                                            <from>configuration name</from>
                                          </input>
                                        </replacement-token>
                                      </xpath-replacement-tokens>
                                      <xpath><![CDATA[//$[configuration name]/Version/text()]]></xpath>
                                    </xpath-expression>
                                  </input>
                                  <input>
                                    <value>add-initiator-to-igroup</value>
                                    <to>item type</to>
                                  </input>
                                  <input>
                                    <from>items</from>
                                    <to>items</to>
                                  </input>
                                  <output>
                                    <from>adapter response</from>
                                    <to>adapter response</to>
                                  </output>
                                </parameters>
                                <meta>
                                  <documentation />
                                  <run-mode-handling>
                                    <run-mode>OCP</run-mode>
                                    <allow-step-into>false</allow-step-into>
                                  </run-mode-handling>
                                  <checkpoint>false</checkpoint>
                                </meta>
                                <after-execution>
                                  <console-output>
                                    <type>INFO</type>
                                    <summary>
                                      <concat>
                                        <input>
                                          <value></value>
                                        </input>
                                      </concat>
                                    </summary>
                                    <detail>
                                      <concat>
                                        <input>
                                          <value></value>
                                        </input>
                                      </concat>
                                    </detail>
                                  </console-output>
                                </after-execution>
                                <location>:switch[1]:sequence[2]:switch[1]:sequence[2]:switch[1]:sequence[2]:switch[1]:sequence[2]:call-process[1]</location>
                              </call-process>
                              <assign>
                                <assignment>
                                  <output>
                                    <to>success status</to>
                                    <value>success</value>
                                  </output>
                                </assignment>
                                <meta>
                                  <documentation />
                                  <checkpoint>false</checkpoint>
                                </meta>
                                <location>:switch[1]:sequence[2]:switch[1]:sequence[2]:switch[1]:sequence[2]:switch[1]:sequence[2]:assign[2]</location>
                              </assign>
                            </sequence>
                          </case>
                          <location>:switch[1]:sequence[2]:switch[1]:sequence[2]:switch[1]:sequence[2]:switch[1]</location>
                        </switch>
                      </sequence>
                    </case>
                    <location>:switch[1]:sequence[2]:switch[1]:sequence[2]:switch[1]</location>
                  </switch>
                </sequence>
              </case>
              <location>:switch[1]:sequence[2]:switch[1]</location>
            </switch>
            <switch>
              <meta>
                <documentation />
                <run-mode-handling>
                  <run-mode>OCP</run-mode>
                  <allow-step-into>true</allow-step-into>
                </run-mode-handling>
                <checkpoint>false</checkpoint>
              </meta>
              <execute-all-applicable-cases>false</execute-all-applicable-cases>
              <default>
                <sequence>
                  <assign>
                    <assignment>
                      <output>
                        <to>success status</to>
                        <value>failure</value>
                      </output>
                    </assignment>
                    <assignment>
                      <document>
                        <input>
                          <from>adapter response</from>
                        </input>
                      </document>
                      <result>
                        <output>
                          <to>status message</to>
                        </output>
                      </result>
                      <xpath-expression>
                        <xpath-replacement-tokens />
                        <xpath><![CDATA[//response/metadata/error/text()]]></xpath>
                      </xpath-expression>
                    </assignment>
                    <meta>
                      <documentation />
                      <checkpoint>false</checkpoint>
                    </meta>
                    <location>:switch[1]:sequence[2]:switch[2]:sequence[1]:assign[1]</location>
                  </assign>
                </sequence>
              </default>
              <case>
                <condition>
                  <document>
                    <input>
                      <from>adapter response</from>
                    </input>
                  </document>
                  <xpath-expression>
                    <xpath-replacement-tokens>
                      <replacement-token name="success status">
                        <input global="false">
                          <from>success status</from>
                        </input>
                      </replacement-token>
                    </xpath-replacement-tokens>
                    <xpath><![CDATA[string('${success status}') = 'success' and string-length(//error/text()) = 0 and string(//response/metadata/status/text()) != 'error']]></xpath>
                  </xpath-expression>
                </condition>
                <sequence>
                  <console-output>
                    <type>INFO</type>
                    <summary>
                      <concat>
                        <input>
                          <value></value>
                        </input>
                      </concat>
                    </summary>
                    <detail>
                      <concat>
                        <input>
                          <value></value>
                        </input>
                      </concat>
                    </detail>
                  </console-output>
                  <assign>
                    <assignment>
                      <document>
                        <input>
                          <from>host name</from>
                        </input>
                      </document>
                      <result>
                        <output>
                          <to>items</to>
                        </output>
                      </result>
                      <xslt-stylesheet>
                        <stylesheet-replacement-tokens>
                          <replacement-token name="target">
                            <input global="false">
                              <from>target</from>
                            </input>
                          </replacement-token>
                          <replacement-token name="target host">
                            <input global="false">
                              <from>target host</from>
                            </input>
                          </replacement-token>
                          <replacement-token name="path">
                            <input global="false">
                              <from>storage path</from>
                            </input>
                          </replacement-token>
                          <replacement-token name="igroup name">
                            <input global="false">
                              <from>host name</from>
                            </input>
                          </replacement-token>
                          <replacement-token name="username">
                            <input global="false">
                              <from>username</from>
                            </input>
                          </replacement-token>
                          <replacement-token name="password">
                            <input global="false">
                              <from>password</from>
                            </input>
                          </replacement-token>
                          <replacement-token name="encryption type">
                            <input global="false">
                              <from>encryption type</from>
                            </input>
                          </replacement-token>
                          <replacement-token name="protocol">
                            <input global="false">
                              <from>protocol</from>
                            </input>
                          </replacement-token>
                          <replacement-token name="port">
                            <input global="false">
                              <from>port</from>
                            </input>
                          </replacement-token>
                        </stylesheet-replacement-tokens>
                        <stylesheet><![CDATA[<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="1.0">
  <xsl:output indent="no" />
  <xsl:template match="/">
    <items>
      <item>
        <xsl:if test="string-length('${target}') &gt; 0 and string-length('${username}') =0">
          <target>${target}</target>
        </xsl:if>
        <target-host>${target host}</target-host>
        <initiator-group>${igroup name}</initiator-group>
        <path>${path}</path>
        <xsl:if test="string-length('${target}')&gt;0 and string-length('${username}') &gt; 0">
          <targets>
            <target>
              <host>
                <xsl:value-of select="'${target}'" disable-output-escaping="no" />
              </host>
              <user-name>${username}</user-name>
              <password>
                <xsl:attribute name="encryption-type">
                  <xsl:value-of select="'${encryption type}'" disable-output-escaping="no" />
                </xsl:attribute>
                <xsl:value-of select="'${password}'" disable-output-escaping="no" />
              </password>
              <xsl:if test="string-length('${protocol}') &gt;0">
                <protocol>${protocol}</protocol>
              </xsl:if>
              <xsl:if test="string-length('${port}') &gt;0">
                <port>${port}</port>
              </xsl:if>
            </target>
          </targets>
        </xsl:if>
      </item>
    </items>
  </xsl:template>
</xsl:stylesheet>]]></stylesheet>
                      </xslt-stylesheet>
                    </assignment>
                    <meta>
                      <documentation />
                      <checkpoint>false</checkpoint>
                    </meta>
                    <location>:switch[1]:sequence[2]:switch[2]:sequence[2]:assign[1]</location>
                  </assign>
                  <call-process>
                    <process-name>:AO-AD-NetAPP_Storage:Update Items</process-name>
                    <parameters>
                      <input>
                        <from>module configuration items</from>
                        <to>adapter name</to>
                        <xpath-expression>
                          <xpath-replacement-tokens>
                            <replacement-token name="configuration name">
                              <input global="false">
                                <from>configuration name</from>
                              </input>
                            </replacement-token>
                          </xpath-replacement-tokens>
                          <xpath><![CDATA[//$[configuration name]/Adapter/text()]]></xpath>
                        </xpath-expression>
                      </input>
                      <input>
                        <from>module configuration items</from>
                        <to>version</to>
                        <xpath-expression>
                          <xpath-replacement-tokens>
                            <replacement-token name="configuration name">
                              <input global="false">
                                <from>configuration name</from>
                              </input>
                            </replacement-token>
                          </xpath-replacement-tokens>
                          <xpath><![CDATA[//$[configuration name]/Version/text()]]></xpath>
                        </xpath-expression>
                      </input>
                      <input>
                        <value>map-lun-to-igroup</value>
                        <to>item type</to>
                      </input>
                      <input>
                        <from>items</from>
                        <to>items</to>
                      </input>
                      <output>
                        <from>adapter response</from>
                        <to>adapter response</to>
                      </output>
                    </parameters>
                    <meta>
                      <documentation />
                      <run-mode-handling>
                        <run-mode>OCP</run-mode>
                        <allow-step-into>false</allow-step-into>
                      </run-mode-handling>
                      <checkpoint>false</checkpoint>
                    </meta>
                    <after-execution>
                      <console-output>
                        <type>INFO</type>
                        <summary>
                          <concat>
                            <input>
                              <value></value>
                            </input>
                          </concat>
                        </summary>
                        <detail>
                          <concat>
                            <input>
                              <value></value>
                            </input>
                          </concat>
                        </detail>
                      </console-output>
                    </after-execution>
                    <location>:switch[1]:sequence[2]:switch[2]:sequence[2]:call-process[1]</location>
                  </call-process>
                  <switch>
                    <meta>
                      <documentation />
                      <run-mode-handling>
                        <run-mode>OCP</run-mode>
                        <allow-step-into>true</allow-step-into>
                      </run-mode-handling>
                      <checkpoint>false</checkpoint>
                    </meta>
                    <execute-all-applicable-cases>false</execute-all-applicable-cases>
                    <default>
                      <sequence>
                        <assign>
                          <assignment>
                            <output>
                              <to>success status</to>
                              <value>failure</value>
                            </output>
                          </assignment>
                          <assignment>
                            <document>
                              <input>
                                <from>adapter response</from>
                              </input>
                            </document>
                            <result>
                              <output>
                                <to>status message</to>
                              </output>
                            </result>
                            <xpath-expression>
                              <xpath-replacement-tokens />
                              <xpath><![CDATA[//response/metadata/error/text()]]></xpath>
                            </xpath-expression>
                          </assignment>
                          <meta>
                            <documentation />
                            <checkpoint>false</checkpoint>
                          </meta>
                          <location>:switch[1]:sequence[2]:switch[2]:sequence[2]:switch[1]:sequence[1]:assign[1]</location>
                        </assign>
                      </sequence>
                    </default>
                    <case>
                      <condition>
                        <document>
                          <input>
                            <from>adapter response</from>
                          </input>
                        </document>
                        <xpath-expression>
                          <xpath-replacement-tokens />
                          <xpath><![CDATA[string(//response/metadata/status/text()) != 'error' and not(name(//metadata/error))]]></xpath>
                        </xpath-expression>
                      </condition>
                      <sequence>
                        <console-output>
                          <type>INFO</type>
                          <summary>
                            <concat>
                              <input>
                                <value></value>
                              </input>
                            </concat>
                          </summary>
                          <detail>
                            <concat>
                              <input>
                                <value></value>
                              </input>
                            </concat>
                          </detail>
                        </console-output>
                        <assign>
                          <assignment>
                            <output>
                              <to>success status</to>
                              <value>success</value>
                            </output>
                          </assignment>
                          <assignment>
                            <input>
                              <concat>
                                <input>
                                  <value>Host "</value>
                                </input>
                                <input required="false">
                                  <from>host name</from>
                                </input>
                                <input>
                                  <value>" has been successfully attached to storage "</value>
                                </input>
                                <input required="false">
                                  <from>storage path</from>
                                </input>
                                <input>
                                  <value>"</value>
                                </input>
                              </concat>
                            </input>
                            <output>
                              <to>status message</to>
                            </output>
                          </assignment>
                          <assignment>
                            <document>
                              <input>
                                <from>adapter response</from>
                              </input>
                            </document>
                            <result>
                              <output>
                                <to>output</to>
                              </output>
                            </result>
                            <xslt-stylesheet>
                              <stylesheet-replacement-tokens />
                              <stylesheet><![CDATA[<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="1.0">
  <xsl:output indent="no" />
  <xsl:template match="/">
    <value>
      <xsl:copy-of select="//response" />
    </value>
  </xsl:template>
</xsl:stylesheet>]]></stylesheet>
                            </xslt-stylesheet>
                          </assignment>
                          <meta>
                            <documentation />
                            <checkpoint>false</checkpoint>
                          </meta>
                          <location>:switch[1]:sequence[2]:switch[2]:sequence[2]:switch[1]:sequence[2]:assign[1]</location>
                        </assign>
                      </sequence>
                    </case>
                    <location>:switch[1]:sequence[2]:switch[2]:sequence[2]:switch[1]</location>
                  </switch>
                </sequence>
              </case>
              <location>:switch[1]:sequence[2]:switch[2]</location>
            </switch>
          </sequence>
        </case>
        <case>
          <condition>
            <document>
              <input>
                <from>configuration name</from>
              </input>
            </document>
            <xpath-expression>
              <xpath-replacement-tokens />
              <xpath><![CDATA[string(.) = 'EMC']]></xpath>
            </xpath-expression>
          </condition>
          <sequence>
            <call-process>
              <process-name>:AutoPilot-OA-Storage_Management:Searches:Get Storage Container Info</process-name>
              <parameters>
                <input>
                  <from>configuration name</from>
                  <to>configuration name</to>
                </input>
                <input>
                  <from>initiator id</from>
                  <to>storage container name or id</to>
                </input>
                <input>
                  <from>target host</from>
                  <to>storage system name</to>
                </input>
                <input>
                  <from>target</from>
                  <to>target</to>
                </input>
                <input>
                  <from>username</from>
                  <to>username</to>
                </input>
                <input>
                  <from>password</from>
                  <to>password</to>
                </input>
                <input>
                  <from>protocol</from>
                  <to>protocol</to>
                </input>
                <input>
                  <from>port</from>
                  <to>port</to>
                </input>
                <input>
                  <from>time out secs</from>
                  <to>time out secs</to>
                </input>
                <output>
                  <from>success status</from>
                  <to>success status</to>
                </output>
                <output>
                  <from>status message</from>
                  <to>status message</to>
                </output>
                <output>
                  <from>output</from>
                  <to>get storage group response</to>
                </output>
              </parameters>
              <meta>
                <documentation />
                <run-mode-handling>
                  <run-mode>OCP</run-mode>
                  <allow-step-into>false</allow-step-into>
                </run-mode-handling>
                <checkpoint>false</checkpoint>
              </meta>
              <location>:switch[1]:sequence[3]:call-process[1]</location>
            </call-process>
            <switch>
              <meta>
                <documentation />
                <run-mode-handling>
                  <run-mode>OCP</run-mode>
                  <allow-step-into>true</allow-step-into>
                </run-mode-handling>
                <checkpoint>false</checkpoint>
              </meta>
              <execute-all-applicable-cases>false</execute-all-applicable-cases>
              <default>
                <sequence>
                  <assign>
                    <assignment>
                      <document>
                        <input>
                          <from>configuration name</from>
                        </input>
                      </document>
                      <result>
                        <output>
                          <to>storage</to>
                        </output>
                      </result>
                      <xslt-stylesheet>
                        <stylesheet-replacement-tokens>
                          <replacement-token name="lun">
                            <input global="false">
                              <from>storage path</from>
                            </input>
                          </replacement-token>
                          <replacement-token name="storage system name">
                            <input global="false">
                              <from>target host</from>
                            </input>
                          </replacement-token>
                          <replacement-token name="iqn">
                            <input global="false">
                              <from>initiator id</from>
                            </input>
                          </replacement-token>
                          <replacement-token name="host type">
                            <input global="false">
                              <from>initiator group type</from>
                            </input>
                          </replacement-token>
                        </stylesheet-replacement-tokens>
                        <stylesheet><![CDATA[<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="1.0">
  <xsl:output indent="no" />
  <xsl:template match="/">
    <storage>
      <storage-system-name>
        <xsl:value-of select="'${storage system name}'" disable-output-escaping="no" />
      </storage-system-name>
      <storage-group-name>
        <xsl:value-of select="'${iqn}'" disable-output-escaping="no" />
      </storage-group-name>
      <lun-name>
        <xsl:value-of select="'${lun}'" disable-output-escaping="no" />
      </lun-name>
      <xsl:if test="string('${host type}') = 'iscsi'">
        <iqn>
          <xsl:value-of select="'${iqn}'" disable-output-escaping="no" />
        </iqn>
      </xsl:if>
      <xsl:if test="string('${host type}') = 'fcp'">
        <wwn>
          <xsl:value-of select="'${iqn}'" disable-output-escaping="no" />
        </wwn>
      </xsl:if>
    </storage>
  </xsl:template>
</xsl:stylesheet>]]></stylesheet>
                      </xslt-stylesheet>
                    </assignment>
                    <meta>
                      <documentation />
                      <checkpoint>false</checkpoint>
                    </meta>
                    <location>:switch[1]:sequence[3]:switch[1]:sequence[1]:assign[1]</location>
                  </assign>
                  <call-process>
                    <process-name>:AutoPilot-OA-Storage_Management:Storage_Container:Create Storage Container</process-name>
                    <parameters>
                      <input>
                        <from>configuration name</from>
                        <to>configuration name</to>
                      </input>
                      <input>
                        <from>storage</from>
                        <to>storage</to>
                      </input>
                      <input>
                        <from>target</from>
                        <to>target</to>
                      </input>
                      <input>
                        <from>username</from>
                        <to>username</to>
                      </input>
                      <input>
                        <from>password</from>
                        <to>password</to>
                      </input>
                      <input>
                        <from>protocol</from>
                        <to>protocol</to>
                      </input>
                      <input>
                        <from>port</from>
                        <to>port</to>
                      </input>
                      <input>
                        <from>time out secs</from>
                        <to>time out secs</to>
                      </input>
                      <output>
                        <from>success status</from>
                        <to>success status</to>
                      </output>
                      <output>
                        <from>status message</from>
                        <to>status message</to>
                      </output>
                      <output>
                        <from>output</from>
                        <to>output</to>
                      </output>
                    </parameters>
                    <meta>
                      <documentation />
                      <run-mode-handling>
                        <run-mode>OCP</run-mode>
                        <allow-step-into>false</allow-step-into>
                      </run-mode-handling>
                      <checkpoint>false</checkpoint>
                    </meta>
                    <location>:switch[1]:sequence[3]:switch[1]:sequence[1]:call-process[1]</location>
                  </call-process>
                </sequence>
              </default>
              <case>
                <condition>
                  <document>
                    <input>
                      <from>get storage group response</from>
                    </input>
                  </document>
                  <xpath-expression>
                    <xpath-replacement-tokens />
                    <xpath><![CDATA[string-length(//storage-groups/storage-group)>0]]></xpath>
                  </xpath-expression>
                </condition>
                <sequence>
                  <assign>
                    <assignment>
                      <document>
                        <input>
                          <from>configuration name</from>
                        </input>
                      </document>
                      <result>
                        <output>
                          <to>storage</to>
                        </output>
                      </result>
                      <xslt-stylesheet>
                        <stylesheet-replacement-tokens>
                          <replacement-token name="lun">
                            <input global="false">
                              <from>storage path</from>
                            </input>
                          </replacement-token>
                          <replacement-token name="storage system name">
                            <input global="false">
                              <from>target host</from>
                            </input>
                          </replacement-token>
                          <replacement-token name="wwn">
                            <input global="false">
                              <from>initiator id</from>
                            </input>
                          </replacement-token>
                        </stylesheet-replacement-tokens>
                        <stylesheet><![CDATA[<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="1.0">
  <xsl:output indent="no" />
  <xsl:template match="/">
    <storage>
      <storage-system-name>
        <xsl:value-of select="'${storage system name}'" disable-output-escaping="no" />
      </storage-system-name>
      <storage-group-name>
        <xsl:value-of select="'${wwn}'" disable-output-escaping="no" />
      </storage-group-name>
      <lun-name>
        <xsl:value-of select="'${lun}'" disable-output-escaping="no" />
      </lun-name>
    </storage>
  </xsl:template>
</xsl:stylesheet>]]></stylesheet>
                      </xslt-stylesheet>
                    </assignment>
                    <meta>
                      <documentation />
                      <checkpoint>false</checkpoint>
                    </meta>
                    <location>:switch[1]:sequence[3]:switch[1]:sequence[2]:assign[1]</location>
                  </assign>
                  <call-process>
                    <process-name>:AutoPilot-OA-Storage_Management:Storage_Container:Add LUN to Storage Container</process-name>
                    <parameters>
                      <input>
                        <from>configuration name</from>
                        <to>configuration name</to>
                      </input>
                      <input>
                        <from>storage</from>
                        <to>storage</to>
                      </input>
                      <input>
                        <from>target</from>
                        <to>target</to>
                      </input>
                      <input>
                        <from>username</from>
                        <to>username</to>
                      </input>
                      <input>
                        <from>password</from>
                        <to>password</to>
                      </input>
                      <input>
                        <from>protocol</from>
                        <to>protocol</to>
                      </input>
                      <input>
                        <from>port</from>
                        <to>port</to>
                      </input>
                      <input>
                        <from>time out secs</from>
                        <to>time out secs</to>
                      </input>
                      <output>
                        <from>success status</from>
                        <to>success status</to>
                      </output>
                      <output>
                        <from>status message</from>
                        <to>status message</to>
                      </output>
                      <output>
                        <from>output</from>
                        <to>output</to>
                      </output>
                    </parameters>
                    <meta>
                      <documentation />
                      <run-mode-handling>
                        <run-mode>OCP</run-mode>
                        <allow-step-into>false</allow-step-into>
                      </run-mode-handling>
                      <checkpoint>false</checkpoint>
                    </meta>
                    <location>:switch[1]:sequence[3]:switch[1]:sequence[2]:call-process[1]</location>
                  </call-process>
                </sequence>
              </case>
              <location>:switch[1]:sequence[3]:switch[1]</location>
            </switch>
          </sequence>
        </case>
        <location>:switch[1]</location>
      </switch>
    </sequence>
    <meta>
      <expose-to>
        <consumer>RULE</consumer>
        <consumer>SCHEDULE</consumer>
      </expose-to>
      <documentation>
        <description>NetApp:This actions attachs the given host to the given lun.  It creates an initiator group with the name of the "host" when its the first association for that host.  Then onwards the igroup is retrieved and the lun is added to the igroup.

Dynamic targeting:Ability to communicate with multiple DFM servers which are not configured under the adapter configuration. NetApp action can be invoked using dynamic targeting / without dynamic targeting.

When Dynamic targeting is used : target would be Host name or IP address of server on which NetApp DataFabric Manager is running. It is mandatory send all the required parameters:
username, 
 password , 
 encyption type  when using dynamic targeting.

When Dynamic targeting is not used : Designates a specific target (name of the DFM server where the operation will be performed) that has been defined in the adapter configuration. Valid value- Same value that has been specified for the name attribute of 'config' element in the adapter configuration . If this tag is left empty the request will be executed on the first defined adapter configuration.

for e.g for the  adapter config below , target would be 02.
&lt;configs&gt;
  &lt;config name="02"&gt;
    &lt;target&gt;172.19.224.103&lt;/target&gt;
    &lt;user-name&gt;root&lt;/user-name&gt;
    &lt;password&gt;bmcbmc&lt;/password&gt;
    &lt;protocol&gt;http&lt;/protocol&gt;
    &lt;port&gt;8088&lt;/port&gt;
  &lt;/config&gt;
&lt;/configs&gt;


EMC: This action attaches the given host to the given lun. It creates a new storage group with given iniator id and add the given iniator id(wwn) to it and lun to it. Then onwards the storage group is retrieved and lun is added to that storage group.Input Parameter mapping:
target host ---- Storage System name
storage path ---- Lun name
initiator id ------ iqn /wwn , and these the mandatory parameters to be given for EMC
iqn: This is for iscsi host
wwn: This is for FC.

Dynamic targeting: Ability to communicate with multiple SMIS-providers which are not configured under the adapter configuration. EMC action can be invoked using dynamic targeting / without dynamic targeting.

When Dynamic targeting is used : target would be Host name or IP address of server on which EMC SMIS provider is running. It is mandatory send all the required parameters:
username, 
 password , 
 protocol
port  when using dynamic targeting.

When Dynamic targeting is not used :  target specifies the connection information for EMC SMI-S Provider.
- Valid value: The value specified for &lt;target&gt; element must be same as the value that has been specified for the name attribute of &lt;config&gt; element in the adapter configuration. You can leave this    tag empty. In this case the request will be executed on all the defined adapter configuration.
                       - Default value: All defined adapter configuration. 
For e.g for the  adapter config below , target would be 03.
&lt;configs&gt;
  &lt;config name="03"&gt;
    &lt;target&gt; 10.128.28.59&lt;/target&gt;
    &lt;user-name&gt;emcuser&lt;/user-name&gt;
    &lt;password&gt;bmcbmc&lt;/password&gt;
    &lt;protocol&gt;https&lt;/protocol&gt;
    &lt;port&gt; 5989&lt;/port&gt;
  &lt;/config&gt;
&lt;/configs&gt;
</description>
        <version></version>
      </documentation>
      <peer-location>
        <location>any</location>
      </peer-location>
      <record-metrics>false</record-metrics>
      <process-id>8d0bef62-7400-30fe-9be5-0f914c602d3b</process-id>
      <author>admin</author>
      <category></category>
      <status></status>
      <keywords></keywords>
      <systems></systems>
      <last-modified-by>admin</last-modified-by>
      <last-modified>1313562921717</last-modified>
    </meta>
  </process-def>
</process>