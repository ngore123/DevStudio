<process draft="false" dev-studio-version="7.6.02.01">
  <process-def name=":AutoPilot-OA-Storage_Management:Storage_Container:Create Storage Container">
    <parameters>
      <input global="false" required="true">
        <description>String Value - The name of a configuration item defined in a configuration module.

Valid Values: NetApp, EMC</description>
        <from>configuration name</from>
        <to>configuration name</to>
      </input>
      <input global="false" required="true">
        <description>NetApp: 

sample input XML:

&lt;storage&gt;
	&lt;storage-container-contact&gt;test@globallogic.com&lt;/storage-container-contact&gt;
	&lt;storage-container-description&gt;test desc&lt;/storage-container-description&gt;
	&lt;storage-container-name&gt;testds1&lt;/storage-container-name&gt;
	&lt;storage-container-metadata&gt;
		&lt;dfm-metadata-field&gt;
			&lt;field-name&gt;test field&lt;/field-name&gt;
			&lt;field-value&gt;test value&lt;/field-value&gt;
		&lt;/dfm-metadata-field&gt;
	&lt;/storage-container-metadata&gt;
	&lt;storage-container-access-details&gt;
		&lt;ip-address&gt;172.16.49.160&lt;/ip-address&gt;
		&lt;netmask&gt;255.255.255.0&lt;/netmask&gt;
	&lt;/storage-container-access-details&gt;
	&lt;storage-container-owner&gt;test&lt;/storage-container-owner&gt;
	&lt;protection-policy-name-or-id&gt;Back up&lt;/protection-policy-name-or-id&gt;
	&lt;provisioning-policy-name-or-id&gt;policy_sdp&lt;/provisioning-policy-name-or-id&gt;
	&lt;requires-non-disruptive-restore&gt;false&lt;/requires-non-disruptive-restore&gt;
	&lt;is-suspended&gt;false&lt;/is-suspended&gt;
	&lt;timezone-name&gt;GMT&lt;/timezone-name&gt;
	&lt;volume-qtree-name-prefix&gt;bmc&lt;/volume-qtree-name-prefix&gt;
	&lt;is-application-data&gt;true&lt;/is-application-data&gt;
	&lt;application-name&gt;Name of the application&lt;/application-name&gt;
	&lt;application-server-name&gt;Name of the server&lt;/application-server-name&gt;
	&lt;application-version&gt;2.1&lt;/application-version&gt;
	&lt;is-application-responsible-for-primary-backup&gt;true&lt;/is-application-responsible-for-primary-backup&gt;	
     &lt;is-application-managing-primary-backup-retention&gt;true&lt;/is-application-managing-primary-backup-retention&gt;
     &lt;carry-primary-backup-retention&gt;true&lt;/carry-primary-backup-retention&gt;
	&lt;vfiler-name-or-id&gt;test-vfiler&lt;/vfiler-name-or-id&gt;
&lt;/storage&gt;

Parameters Description:

storage-container-contact [Optional]
 Contact for the data set, such as the owner's e-mail address.  
 
storage-container-description [Optional] 
	Description of the new data set, up to 255 characters long.  
	
storage-container-metadata [Optional]
 Opaque metadata for data set. Metadata is usually set and interpreted by an application that is using the data set. DFM does not look into the contents of the metadata. 

dfm-metadata-field [Optional]
	This is the parent field that contains one metadata information. This is defined using the following key/value tags - field-name,field-value.

field-name [Optional] 
	Name of the metadata field. Field names are up to 255 characters in length and are case- insensitive. This is required if dataset-metadata is present.

field-value [Optional] 
	Arbitrary, user-defined data expressed as a string. The string is opaque to the server and must not exceed 16384 (16k) characters in length. This is required if dataset-metadata is present.
 
storage-container-name[Required]
	Name of the new data set.  

storage-container-access-details [Optional]
	Data access details for a dataset that needs to be configured and provisioned in a way that it is capable of transparent migration. This enables all the storage in the primary node of the dataset to be migrated to a different physical resource without having to reconfigure the clients accessing this storage.

ip-address [Optional]
	IP address in dotted decimal format. (for example, "192.168.11.12"). The length of this string cannot be more than 16 characters. This tag is required if dataset access details needs to be provided.

netmask [Optional]
	Netmask for the IP Address in dotted decimal notation. As input, this is valid only when ip-address is also provided in dataset-access-details. Provisioning Manager will create a vFiler unit whose IP Address will be the one configured as ip-address and it will be bound to an interface with this netmask.
	
storage-container-owner [Optional]
	Name of the owner of the data set, up to 255 characters long.

is-suspended [Optional] 
	This is a boolean field. True if an administrator has chosen to suspend this data set for all automated actions (data protection and conformance check of the data set). Default is False.

protection-policy-name-or-id [Optional]
	Name or identifier of the protection policy to associate with this data set. The dataprotection license is required for this input.
	
provisioning-policy-name-or-id [Optional]
	Name or identifier of the provisioning policy to be associated with the primary node of the data set. The members of the primary node are provisioned based on this policy. Once the provisioning policy is associated with the data set node, the storage in the node is periodically monitored for conformance with the policy.  

requires-non-disruptive-restore[Optional]
	This is a boolean field. If true then the data set will be configured to enable non-disruptive restores from backup destinations. Default value is false. 
 
timezone-name [Optional]
	Timezone to assign to the root node. If specified, the value must be a timezone-name returned by timezone-list-info-iter-next. If no timezone is assigned, then the default system timezone will be used.

volume-qtree-name-prefix [Optional]
	Prefix for volume and qtree names, up to 60 characters long. The allowed characters are a to z A to Z 0 to 9 ' ' (space) . (period) _ (underscore) - (hyphen) If any other characters are included, an error is returned.	

is-application-data [Optional]
	This is a boolean field. If true, the data set is an application data set managed by an external application. Because backups must be coordinated between the application and DFM, transfers move backups between nodes instead of creating new backups. Policies for which this behavior is not supported may not be assigned to application data sets. Conversion of a non-application data set to an application data set is not allowed. The default value is false.

application-info [Optional]
	This input is used only if is-application-data is true. It contains information about the application which manages this dataset.

application-name [Optional]
	Name of an application, up to 255 characters long. For example: "SnapManager for Oracle". This input is used only if is-application-data is true. This input is a required input if is-application-data is true.

application-server-name [Optional]
	The name of the server the application is running on, up to 255 characters long. This is the name of the host server, rather than the name of the client application. This input is used only if is-application-data is true. This input is a required input if is-application-data is true.

application-version [Optional]
	Version of an application, up to 255 characters long. For example: "2.1". This input is used only if is-application-data is true. This input is a required input if is-application-data is true.

is-application-responsible-for-primary-backup [Optional]
	This is a boolean field. DFM creates primary backup versions only if this option is false. This input is used only if is-application-data is true.  This input is a required input if is-application-data is true. Valid values - true, false
	
carry-primary-backup-retention [Optional]
	This is a boolean field. This input is used only if is-application-data is true. If this input is true, retention type of the primary backup is assigned to its replicas on the other nodes of the dataset. An exception is made if the dp-backup-start API with retention-type specified, starts the replication. In that case, the retention type specified in dp-backup-start is assigned to the replicas thereby overriding the retention type of the primary backup. If a scheduled event starts the replication, retention type specified in the schedule event is ignored.
If this input is false, retention type of the primary backup is ignored when assigning retention type to its replicas. Depending on how the backup transfer job was started, the retention type specified either in dp-backup-start API or the one specified in the schedule is assigned to the replica of the primary backup.

When this input is false, replicas of the primary backup may get an undesired retention type if the schedules are not configured very carefully. Therefore, it is recommended that any new users of the API should always set this input to true.

Note that even if the retention type of primary and secondary backups is the same, the retention duration may be different for them. The retention duration is specified for each node in the data protection policy. See dp-policy-node-info for more details.

Always present in the output.

Default is true.

is-application-managing-primary-backup-retention[Optional]
	This is a boolean field. If this input is true, Protection Manager does not enforce retention settings in the policy on the primary backups. Application is responsible for deleting primary backups, possibly by invoking dp-backup-version-delete API.
If this input is false, Protection Manager deletes the primary backups according to the retention settings specified in the policy.

Always present in the output.

Default is false.

vfiler-name-or-id [optional]
	Name or identifier of the vFiler unit to be attached to the primary node of the dataset. If a vFiler unit is attached, then all members provisioned into this node will be exported over this vFiler unit.


EMC:

EMC sample input XML:


	&lt;storage&gt;
				&lt;storage-system-name&gt;CLARiiON+CKM00102400340&lt;/storage-system-name&gt;
				&lt;storage-group-name&gt;Storage Group 1&lt;/storage-group-name&gt;
				&lt;wwn&gt;10000000C96EB8DA&lt;/wwn&gt;
				&lt;lun-name&gt;00001&lt;/lun-name&gt;
	&lt;/storage&gt;

Element Description: 


storage-group-name [optional]:

	Specifies the user defined storage group name.
	Valid value: Any valid string.
	Default value: None.

storage-system-name [Required]:
---------------------------------------

	- Specifies the name of the storage system
	- Valid value: None.
	- Default value: None.

iqn  or wwn [optional]:
--------------------

	- Specifies the name of the iscsi host(s) /wwn that must be associated to the storage group.
	- Valid value: Any valid string.
	- Default value: None.

iqn: This is for iscsi host
wwn: This is for FC.

Note : either iqn or wwn can be specified one at a time.

lun-name [optional]:
---------------------------

	- Specifies the name of the lun(s) that must be associated to the storage group.
	- Valid value: Any valid string.
	- Default value: None.

Note:  For Symmetrix lun name is mandatory.
		For Clariion lun name is optinal</description>
        <from>storage</from>
        <to>storage</to>
      </input>
      <input global="false" required="false">
        <description>NetApp: 
[required if dynamic targeting is used otherwise optional] 

Designates a specific target (name of the DFM server where the operation will be performed) that has been defined in the adapter configuration. Valid value- Same value that has been specified for the name attribute of 'config' element in the adapter configuration . If this tag is left empty the request will be executed on the first defined adapter configuration.

for e.g for the  adapter config below , target would be 02.
&lt;configs&gt;
   &lt;config name="02"&gt;
          &lt;target&gt;172.19.224.103&lt;/target&gt;
          &lt;user-name&gt;root&lt;/user-name&gt;
          &lt;password&gt;bmcbmc&lt;/password&gt;
          &lt;protocol&gt;http&lt;/protocol&gt;
          &lt;port&gt;8088&lt;/port&gt;
   &lt;/config&gt;
&lt;/configs&gt;

Dynamic targeting: Host name or IP address of DFM.


EMC:-
[optional] 
Specifies the connection information for EMC SMI-S Provider.
- Default value: All defined adapter configuration..
</description>
        <from>target</from>
        <to>target</to>
      </input>
      <input global="false" required="false">
        <description>NetApp:
[required only if dynamic targeting is used]
NetApp DataFabric Manager login username.


EMC:- 
[optional] 
Specifies the login name used to connect to  EMC SMI-S Provider. The 'username' specified in adapter request overrides the value specified in adapter configuration.
	- Valid value: None.
	- Default Value: None.</description>
        <from>username</from>
        <to>username</to>
      </input>
      <input global="false" required="false">
        <description>NetApp:
[required only if dynamic targeting is used]
NetApp DataFabric Manager login password.


EMC :- 
[optional] 
Specifies the password used to connect to  EMC SMI-S Provider. The 'password' specified in adapter request overrides the value specified in adapter configuration.
	- Valid value: None.
	- Default Value: None.</description>
        <from>password</from>
        <to>password</to>
      </input>
      <input global="false" required="false">
        <description>NetApp: [Conditional]  specified only when password parameter is mentioned .
You can encrypt the password by specifying the encryption type .
Valid values:  Base64,Plain.
</description>
        <from>encryption type</from>
        <to>encryption type</to>
      </input>
      <input global="false" required="false">
        <description>NetApp:
[Optional and used when dynamic targeting] 
Communication protocol used by adapter. Valid value is http or https. Default value is http.


EMC:- 
[optional] 
Specifies the protocol used to connect to  EMC SMI-S Provider. The 'protocol' specified in adapter request overrides the value specified in adapter configuration.
	- Valid value: HTTPS or HTTP
	- Default Value: None.</description>
        <from>protocol</from>
        <to>protocol</to>
      </input>
      <input global="false" required="false">
        <description>NetApp: 
[Optional and used when dynamic targeting]
Port on which NetApp DataFabric Manager is enabled. Default value is 8088 for http protocol and 8488 for https protocol.


EMC:- 
[optional]
Specifies the port number used to connect to  EMC SMI-S Provider. The 'port' specified in adapter request overrides the value specified in adapter configuration.
	- Valid value: A valid numeric value. 
	- Default Value: None.</description>
        <from>port</from>
        <to>port</to>
      </input>
      <input global="false" required="false">
        <description>
EMC : - 
[optional]
Specifies the time in seconds after which the attempt to connect to EMC SMI-S provider times out. The 'timeout-secs' specified in adapter request overrides the value specified in adapter configuration.
	- Valid value: A numeric value which specifies the time in seconds. 
	- Default Value: 180, if no 'timeout-secs' is provided .</description>
        <from>time out secs</from>
        <to>time out secs</to>
      </input>
      <output global="false" required="false">
        <description>String Value - Indicates whether or not the process completed successfully. 

Valid values: success or failure</description>
        <to>success status</to>
        <from>success status</from>
      </output>
      <output global="false" required="false">
        <description>String Value - A process specific explanation for the value of success status.</description>
        <to>status message</to>
        <from>status message</from>
      </output>
      <output global="false" required="false">
        <description>String or XML value - Contains required output incase of success

Sample xml for EMC:
 &lt;output&gt;
    &lt;storage-groups&gt;
      &lt;storage-group&gt;
        &lt;storage-system-name&gt;CLARiiON+CKM00102400340&lt;/storage-system-name&gt;
        &lt;storage-group-name&gt;SG14&lt;/storage-group-name&gt;
        &lt;create-storage-group-status&gt;0 (Success)&lt;/create-storage-group-status&gt;
      &lt;/storage-group&gt;
    &lt;/storage-groups&gt;
  &lt;/output&gt;
</description>
        <to>output</to>
        <from>output</from>
      </output>
    </parameters>
    <access />
    <sequence>
      <call-process>
        <process-name>:AutoPilot-OA-Storage_Management:Utilities:Extract Configuration Data</process-name>
        <parameters>
          <input>
            <from>configuration name</from>
            <to>configuration name</to>
          </input>
          <output>
            <from>adapter</from>
            <to>adapter</to>
          </output>
          <output>
            <from>version</from>
            <to>version</to>
          </output>
          <output>
            <from>module configuration items</from>
            <to>module configuration items</to>
          </output>
        </parameters>
        <meta>
          <documentation />
          <run-mode-handling>
            <run-mode>OCP</run-mode>
            <allow-step-into>false</allow-step-into>
          </run-mode-handling>
          <checkpoint>false</checkpoint>
        </meta>
        <after-execution>
          <console-output>
            <type>INFO</type>
            <summary>
              <concat>
                <input>
                  <value></value>
                </input>
              </concat>
            </summary>
            <detail>
              <concat>
                <input>
                  <value></value>
                </input>
              </concat>
            </detail>
          </console-output>
        </after-execution>
        <location>:call-process[1]</location>
      </call-process>
      <switch>
        <meta>
          <documentation />
          <run-mode-handling>
            <run-mode>OCP</run-mode>
            <allow-step-into>true</allow-step-into>
          </run-mode-handling>
          <checkpoint>false</checkpoint>
        </meta>
        <before-execution>
          <log>
            <level>debug</level>
            <parameters>
              <input>
                <from>dataset</from>
              </input>
            </parameters>
          </log>
        </before-execution>
        <execute-all-applicable-cases>false</execute-all-applicable-cases>
        <default>
          <sequence>
            <assign>
              <assignment>
                <output>
                  <to>success status</to>
                  <value>failure</value>
                </output>
              </assignment>
              <assignment>
                <document>
                  <input>
                    <from>configuration name</from>
                  </input>
                </document>
                <result>
                  <output>
                    <to>status message</to>
                  </output>
                </result>
                <xpath-expression>
                  <xpath-replacement-tokens />
                  <xpath><![CDATA[concat("Unknown configuration name: ", .)]]></xpath>
                </xpath-expression>
              </assignment>
              <meta>
                <documentation />
                <checkpoint>false</checkpoint>
              </meta>
              <location>:switch[1]:sequence[1]:assign[1]</location>
            </assign>
          </sequence>
        </default>
        <case>
          <condition>
            <document>
              <input>
                <from>configuration name</from>
              </input>
            </document>
            <xpath-expression>
              <xpath-replacement-tokens />
              <xpath><![CDATA[text()="NetApp"]]></xpath>
            </xpath-expression>
          </condition>
          <sequence>
            <console-output>
              <type>INFO</type>
              <summary>
                <concat>
                  <input>
                    <value></value>
                  </input>
                </concat>
              </summary>
              <detail>
                <concat>
                  <input>
                    <value></value>
                  </input>
                </concat>
              </detail>
            </console-output>
            <assign>
              <assignment>
                <document>
                  <input>
                    <from>storage</from>
                  </input>
                </document>
                <result>
                  <output>
                    <to>items</to>
                  </output>
                </result>
                <xslt-stylesheet>
                  <stylesheet-replacement-tokens>
                    <replacement-token name="target">
                      <input global="false">
                        <from>target</from>
                      </input>
                    </replacement-token>
                    <replacement-token name="username">
                      <input global="false">
                        <from>username</from>
                      </input>
                    </replacement-token>
                    <replacement-token name="password">
                      <input global="false">
                        <from>password</from>
                      </input>
                    </replacement-token>
                    <replacement-token name="protocol">
                      <input global="false">
                        <from>protocol</from>
                      </input>
                    </replacement-token>
                    <replacement-token name="port">
                      <input global="false">
                        <from>port</from>
                      </input>
                    </replacement-token>
                    <replacement-token name="encryption type">
                      <input global="false">
                        <from>encryption type</from>
                      </input>
                    </replacement-token>
                  </stylesheet-replacement-tokens>
                  <stylesheet><![CDATA[<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="1.0">
  <xsl:output indent="no" />
  <xsl:template match="/">
    <items>
      <item>
        <xsl:if test="string-length('${target}')&gt;0 and string-length('${username}') =0">
          <target>${target}</target>
        </xsl:if>
        <dataset-name>
          <xsl:value-of select="//storage-container-name/text()" disable-output-escaping="no" />
        </dataset-name>
        <dataset-description>
          <xsl:value-of select="//storage-container-description/text()" disable-output-escaping="no" />
        </dataset-description>
        <dataset-contact>
          <xsl:value-of select="//storage-container-contact/text()" disable-output-escaping="no" />
        </dataset-contact>
        <dataset-metadata>
          <xsl:copy-of select="//storage-container-metadata/*" />
        </dataset-metadata>
        <dataset-owner>
          <xsl:value-of select="//storage-container-owner/text()" disable-output-escaping="no" />
        </dataset-owner>
        <xsl:if test="string-length(//protection-policy-name-or-id/text())&gt;0">
          <protection-policy-name-or-id>
            <xsl:value-of select="//protection-policy-name-or-id/text()" disable-output-escaping="no" />
          </protection-policy-name-or-id>
        </xsl:if>
        <provisioning-policy-name-or-id>
          <xsl:value-of select="//provisioning-policy-name-or-id/text()" disable-output-escaping="no" />
        </provisioning-policy-name-or-id>
        <requires-non-disruptive-restore>
          <xsl:value-of select="//requires-non-disruptive-restore/text()" disable-output-escaping="no" />
        </requires-non-disruptive-restore>
        <is-suspended>
          <xsl:value-of select="//is-suspended/text()" disable-output-escaping="no" />
        </is-suspended>
        <timezone-name>
          <xsl:value-of select="//timezone-name/text()" disable-output-escaping="no" />
        </timezone-name>
        <volume-qtree-name-prefix>
          <xsl:value-of select="//volume-qtree-name-prefix/text()" disable-output-escaping="no" />
        </volume-qtree-name-prefix>
        <is-application-data>
          <xsl:value-of select="//is-application-data/text()" disable-output-escaping="no" />
        </is-application-data>
        <application-name>
          <xsl:value-of select="//application-name/text()" disable-output-escaping="no" />
        </application-name>
        <application-server-name>
          <xsl:value-of select="//application-server-name/text()" disable-output-escaping="no" />
        </application-server-name>
        <application-version>
          <xsl:value-of select="//application-version/text()" disable-output-escaping="no" />
        </application-version>
        <is-application-responsible-for-primary-backup>
          <xsl:value-of select="//is-application-responsible-for-primary-backup/text()" disable-output-escaping="no" />
        </is-application-responsible-for-primary-backup>
        <is-application-managing-primary-backup-retention>
          <xsl:value-of select="//is-application-managing-primary-backup-retention/text()" disable-output-escaping="no" />
        </is-application-managing-primary-backup-retention>
        <carry-primary-backup-retention>
          <xsl:value-of select="//carry-primary-backup-retention/text()" disable-output-escaping="no" />
        </carry-primary-backup-retention>
        <dataset-access-details>
          <xsl:copy-of select="//storage-container-access-details/*" />
        </dataset-access-details>
        <vfiler-name-or-id>
          <xsl:value-of select="//vfiler-name-or-id/text()" disable-output-escaping="no" />
        </vfiler-name-or-id>
        <xsl:if test="string-length('${target}')&gt;0 and string-length('${username}') &gt; 0">
          <targets>
            <target>
              <host>
                <xsl:value-of select="'${target}'" disable-output-escaping="no" />
              </host>
              <user-name>${username}</user-name>
              <password>
                <xsl:attribute name="encryption-type">
                  <xsl:value-of select="'${encryption type}'" disable-output-escaping="no" />
                </xsl:attribute>
                <xsl:value-of select="'${password}'" disable-output-escaping="no" />
              </password>
              <xsl:if test="string-length('${protocol}') &gt;0">
                <protocol>${protocol}</protocol>
              </xsl:if>
              <xsl:if test="string-length('${port}') &gt;0">
                <port>${port}</port>
              </xsl:if>
            </target>
          </targets>
        </xsl:if>
      </item>
    </items>
  </xsl:template>
</xsl:stylesheet>]]></stylesheet>
                </xslt-stylesheet>
              </assignment>
              <meta>
                <documentation />
                <checkpoint>false</checkpoint>
              </meta>
              <after-execution>
                <log>
                  <level>debug</level>
                  <parameters>
                    <input>
                      <from>items</from>
                    </input>
                  </parameters>
                </log>
              </after-execution>
              <location>:switch[1]:sequence[2]:assign[1]</location>
            </assign>
            <call-process>
              <process-name>:AO-AD-NetAPP_Storage:Create Items</process-name>
              <parameters>
                <input>
                  <from>module configuration items</from>
                  <to>adapter name</to>
                  <xpath-expression>
                    <xpath-replacement-tokens>
                      <replacement-token name="configuration name">
                        <input global="false">
                          <from>configuration name</from>
                        </input>
                      </replacement-token>
                    </xpath-replacement-tokens>
                    <xpath><![CDATA[//$[configuration name]/Adapter/text()]]></xpath>
                  </xpath-expression>
                </input>
                <input>
                  <from>module configuration items</from>
                  <to>version</to>
                  <xpath-expression>
                    <xpath-replacement-tokens>
                      <replacement-token name="configuration name">
                        <input global="false">
                          <from>configuration name</from>
                        </input>
                      </replacement-token>
                    </xpath-replacement-tokens>
                    <xpath><![CDATA[//$[configuration name]/Version/text()]]></xpath>
                  </xpath-expression>
                </input>
                <input>
                  <value>create-dataset</value>
                  <to>item type</to>
                </input>
                <input>
                  <from>items</from>
                  <to>items</to>
                </input>
                <output>
                  <from>adapter response</from>
                  <to>adapter response</to>
                </output>
              </parameters>
              <meta>
                <documentation />
                <run-mode-handling>
                  <run-mode>OCP</run-mode>
                  <allow-step-into>false</allow-step-into>
                </run-mode-handling>
                <checkpoint>false</checkpoint>
              </meta>
              <after-execution>
                <console-output>
                  <type>INFO</type>
                  <summary>
                    <concat>
                      <input>
                        <value></value>
                      </input>
                    </concat>
                  </summary>
                  <detail>
                    <concat>
                      <input>
                        <value></value>
                      </input>
                    </concat>
                  </detail>
                </console-output>
              </after-execution>
              <location>:switch[1]:sequence[2]:call-process[1]</location>
            </call-process>
            <switch>
              <meta>
                <documentation />
                <run-mode-handling>
                  <run-mode>OCP</run-mode>
                  <allow-step-into>true</allow-step-into>
                </run-mode-handling>
                <checkpoint>false</checkpoint>
              </meta>
              <execute-all-applicable-cases>false</execute-all-applicable-cases>
              <default>
                <sequence>
                  <assign>
                    <assignment>
                      <output>
                        <to>success status</to>
                        <value>failure</value>
                      </output>
                    </assignment>
                    <assignment>
                      <document>
                        <input>
                          <from>adapter response</from>
                        </input>
                      </document>
                      <result>
                        <output>
                          <to>status message</to>
                        </output>
                      </result>
                      <xpath-expression>
                        <xpath-replacement-tokens />
                        <xpath><![CDATA[concat("Error: ", //error)]]></xpath>
                      </xpath-expression>
                    </assignment>
                    <meta>
                      <documentation />
                      <checkpoint>false</checkpoint>
                    </meta>
                    <location>:switch[1]:sequence[2]:switch[1]:sequence[1]:assign[1]</location>
                  </assign>
                </sequence>
              </default>
              <case>
                <condition>
                  <document>
                    <input>
                      <from>adapter response</from>
                    </input>
                  </document>
                  <xpath-expression>
                    <xpath-replacement-tokens />
                    <xpath><![CDATA[//responses//status/text() != 'error']]></xpath>
                  </xpath-expression>
                </condition>
                <sequence>
                  <console-output>
                    <type>INFO</type>
                    <summary>
                      <concat>
                        <input>
                          <value></value>
                        </input>
                      </concat>
                    </summary>
                    <detail>
                      <concat>
                        <input>
                          <value></value>
                        </input>
                      </concat>
                    </detail>
                  </console-output>
                  <assign>
                    <assignment>
                      <output>
                        <to>success status</to>
                        <value>success</value>
                      </output>
                    </assignment>
                    <assignment>
                      <document>
                        <input>
                          <from>adapter response</from>
                        </input>
                      </document>
                      <result>
                        <output>
                          <to>output</to>
                        </output>
                      </result>
                      <xpath-expression>
                        <xpath-replacement-tokens />
                        <xpath><![CDATA[//output/*]]></xpath>
                      </xpath-expression>
                    </assignment>
                    <meta>
                      <documentation />
                      <checkpoint>false</checkpoint>
                    </meta>
                    <location>:switch[1]:sequence[2]:switch[1]:sequence[2]:assign[1]</location>
                  </assign>
                </sequence>
              </case>
              <location>:switch[1]:sequence[2]:switch[1]</location>
            </switch>
          </sequence>
        </case>
        <case>
          <condition>
            <document>
              <input>
                <from>configuration name</from>
              </input>
            </document>
            <xpath-expression>
              <xpath-replacement-tokens />
              <xpath><![CDATA[string(.) = 'EMC']]></xpath>
            </xpath-expression>
          </condition>
          <sequence>
            <console-output>
              <type>INFO</type>
              <summary>
                <concat>
                  <input>
                    <value></value>
                  </input>
                </concat>
              </summary>
              <detail>
                <concat>
                  <input>
                    <value></value>
                  </input>
                </concat>
              </detail>
            </console-output>
            <assign>
              <assignment>
                <document>
                  <input>
                    <from>storage</from>
                  </input>
                </document>
                <result>
                  <output>
                    <to>items</to>
                  </output>
                </result>
                <xslt-stylesheet>
                  <stylesheet-replacement-tokens>
                    <replacement-token name="target">
                      <input global="false">
                        <from>target</from>
                      </input>
                    </replacement-token>
                    <replacement-token name="username">
                      <input global="false">
                        <from>username</from>
                      </input>
                    </replacement-token>
                    <replacement-token name="password">
                      <input global="false">
                        <from>password</from>
                      </input>
                    </replacement-token>
                    <replacement-token name="protocol">
                      <input global="false">
                        <from>protocol</from>
                      </input>
                    </replacement-token>
                    <replacement-token name="port">
                      <input global="false">
                        <from>port</from>
                      </input>
                    </replacement-token>
                    <replacement-token name="time out secs">
                      <input global="false">
                        <from>time out secs</from>
                      </input>
                    </replacement-token>
                  </stylesheet-replacement-tokens>
                  <stylesheet><![CDATA[<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="1.0">
  <xsl:output indent="no" />
  <xsl:template match="/">
    <items>
      <item>
        <xsl:if test="string-length('${target}') &gt; 0">
          <target>${target}</target>
        </xsl:if>
        <xsl:if test="string-length('${username}')&gt;0">
          <username>
            <xsl:value-of select="'${username}'" disable-output-escaping="no" />
          </username>
        </xsl:if>
        <xsl:if test="string-length('${password}')&gt;0">
          <password>
            <xsl:value-of select="'${password}'" disable-output-escaping="no" />
          </password>
        </xsl:if>
        <xsl:if test="string-length('${protocol}')&gt;0">
          <protocol>
            <xsl:value-of select="'${protocol}'" disable-output-escaping="no" />
          </protocol>
        </xsl:if>
        <xsl:if test="string-length('${port}')&gt;0">
          <port>
            <xsl:value-of select="'${port}'" disable-output-escaping="no" />
          </port>
        </xsl:if>
        <xsl:if test="string-length('${time out secs}')&gt;0">
          <timeout-secs>
            <xsl:value-of select="'${time out secs}'" disable-output-escaping="no" />
          </timeout-secs>
        </xsl:if>
        <storage-system-name>
          <xsl:value-of select="//storage-system-name/text()" disable-output-escaping="no" />
        </storage-system-name>
        <xsl:if test="string-length(//storage-group-name)&gt;0">
          <storage-group-name>
            <xsl:value-of select="//storage-group-name/text()" disable-output-escaping="no" />
          </storage-group-name>
        </xsl:if>
        <xsl:if test="string-length(//lun-name)&gt;0">
          <lun-name>
            <xsl:value-of select="//lun-name/text()" disable-output-escaping="no" />
          </lun-name>
        </xsl:if>
        <xsl:if test="string-length(//wwn)&gt;0">
          <wwn>
            <xsl:value-of select="//wwn/text()" disable-output-escaping="no" />
          </wwn>
        </xsl:if>
        <xsl:if test="string-length(//iqn)&gt;0">
          <iqn>
            <xsl:value-of select="//iqn/text()" disable-output-escaping="no" />
          </iqn>
        </xsl:if>
      </item>
    </items>
  </xsl:template>
</xsl:stylesheet>]]></stylesheet>
                </xslt-stylesheet>
              </assignment>
              <meta>
                <documentation />
                <checkpoint>false</checkpoint>
              </meta>
              <location>:switch[1]:sequence[3]:assign[1]</location>
            </assign>
            <call-process>
              <process-name>:AO-AD-EMC_Storage:Create Items</process-name>
              <parameters>
                <input>
                  <from>adapter</from>
                  <to>adapter name</to>
                </input>
                <input>
                  <from>version</from>
                  <to>version</to>
                </input>
                <input>
                  <value>create-storage-group</value>
                  <to>item type</to>
                </input>
                <input>
                  <from>items</from>
                  <to>items</to>
                </input>
                <output>
                  <from>adapter response</from>
                  <to>adapter response</to>
                </output>
              </parameters>
              <meta>
                <documentation />
                <run-mode-handling>
                  <run-mode>OCP</run-mode>
                  <allow-step-into>false</allow-step-into>
                </run-mode-handling>
                <checkpoint>false</checkpoint>
              </meta>
              <location>:switch[1]:sequence[3]:call-process[1]</location>
            </call-process>
            <switch>
              <meta>
                <documentation />
                <run-mode-handling>
                  <run-mode>OCP</run-mode>
                  <allow-step-into>true</allow-step-into>
                </run-mode-handling>
                <checkpoint>false</checkpoint>
              </meta>
              <execute-all-applicable-cases>false</execute-all-applicable-cases>
              <default>
                <sequence>
                  <assign>
                    <assignment>
                      <output>
                        <to>success status</to>
                        <value>failure</value>
                      </output>
                    </assignment>
                    <assignment>
                      <document>
                        <input>
                          <from>adapter response</from>
                        </input>
                      </document>
                      <result>
                        <output>
                          <to>status message</to>
                        </output>
                      </result>
                      <xpath-expression>
                        <xpath-replacement-tokens />
                        <xpath><![CDATA[string(//error-messages)]]></xpath>
                      </xpath-expression>
                    </assignment>
                    <meta>
                      <documentation />
                      <checkpoint>false</checkpoint>
                    </meta>
                    <location>:switch[1]:sequence[3]:switch[1]:sequence[1]:assign[1]</location>
                  </assign>
                </sequence>
              </default>
              <case>
                <condition>
                  <document>
                    <input>
                      <from>adapter response</from>
                    </input>
                  </document>
                  <xpath-expression>
                    <xpath-replacement-tokens />
                    <xpath><![CDATA[string(//responses/response/metadata/status)!= 'error']]></xpath>
                  </xpath-expression>
                </condition>
                <sequence>
                  <console-output>
                    <type>INFO</type>
                    <summary>
                      <concat>
                        <input>
                          <value></value>
                        </input>
                      </concat>
                    </summary>
                    <detail>
                      <concat>
                        <input>
                          <value></value>
                        </input>
                      </concat>
                    </detail>
                  </console-output>
                  <assign>
                    <assignment>
                      <output>
                        <to>success status</to>
                        <value>success</value>
                      </output>
                    </assignment>
                    <assignment>
                      <output>
                        <to>status message</to>
                        <value>Storage Container created successfully.</value>
                      </output>
                    </assignment>
                    <assignment>
                      <document>
                        <input>
                          <from>adapter response</from>
                        </input>
                      </document>
                      <result>
                        <output>
                          <to>output</to>
                        </output>
                      </result>
                      <xpath-expression>
                        <xpath-replacement-tokens />
                        <xpath><![CDATA[//output]]></xpath>
                      </xpath-expression>
                    </assignment>
                    <meta>
                      <documentation />
                      <checkpoint>false</checkpoint>
                    </meta>
                    <location>:switch[1]:sequence[3]:switch[1]:sequence[2]:assign[1]</location>
                  </assign>
                </sequence>
              </case>
              <location>:switch[1]:sequence[3]:switch[1]</location>
            </switch>
          </sequence>
        </case>
        <location>:switch[1]</location>
      </switch>
    </sequence>
    <meta>
      <expose-to>
        <consumer>RULE</consumer>
        <consumer>SCHEDULE</consumer>
        <consumer>SOAP</consumer>
      </expose-to>
      <documentation>
        <description>Creates a storage container. For NetApp it creates a dataset,for EMC it creates an storage group with the given lun and host.

NetApp:
Dynamic targeting:Ability to communicate with multiple DFM servers which are not configured under the adapter configuration. NetApp action can be invoked using dynamic targeting / without dynamic targeting.

When Dynamic targeting is used : target would be Host name or IP address of server on which NetApp DataFabric Manager is running. It is mandatory send all the required parameters:
username, 
 password , 
 encyption type  when using dynamic targeting.

When Dynamic targeting is not used : Designates a specific target (name of the DFM server where the operation will be performed) that has been defined in the adapter configuration. Valid value- Same value that has been specified for the name attribute of 'config' element in the adapter configuration . If this tag is left empty the request will be executed on the first defined adapter configuration.

for e.g for the  adapter config below , target would be 02.
&lt;configs&gt;
  &lt;config name="02"&gt;
    &lt;target&gt;172.19.224.103&lt;/target&gt;
    &lt;user-name&gt;root&lt;/user-name&gt;
    &lt;password&gt;bmcbmc&lt;/password&gt;
    &lt;protocol&gt;http&lt;/protocol&gt;
    &lt;port&gt;8088&lt;/port&gt;
  &lt;/config&gt;
&lt;/configs&gt;

EMC:
Dynamic targeting: Ability to communicate with multiple SMIS-providers which are not configured under the adapter configuration. EMC action can be invoked using dynamic targeting / without dynamic targeting.

When Dynamic targeting is used : target would be Host name or IP address of server on which EMC SMIS provider is running. It is mandatory send all the required parameters:
username, 
 password , 
 protocol
port  when using dynamic targeting.

When Dynamic targeting is not used :  target specifies the connection information for EMC SMI-S Provider.
- Valid value: The value specified for &lt;target&gt; element must be same as the value that has been specified for the name attribute of &lt;config&gt; element in the adapter configuration. You can leave this    tag empty. In this case the request will be executed on all the defined adapter configuration.
                       - Default value: All defined adapter configuration. 
For e.g for the  adapter config below , target would be 03.
&lt;configs&gt;
  &lt;config name="03"&gt;
    &lt;target&gt; 10.128.28.59&lt;/target&gt;
    &lt;user-name&gt;emcuser&lt;/user-name&gt;
    &lt;password&gt;bmcbmc&lt;/password&gt;
    &lt;protocol&gt;https&lt;/protocol&gt;
    &lt;port&gt; 5989&lt;/port&gt;
  &lt;/config&gt;
&lt;/configs&gt;
</description>
        <version></version>
      </documentation>
      <peer-location>
        <location>any</location>
      </peer-location>
      <record-metrics>false</record-metrics>
      <process-id>473a1699-5e62-38c3-a8c0-c2603aa24ece</process-id>
      <author>admin</author>
      <category></category>
      <status></status>
      <keywords></keywords>
      <systems></systems>
      <last-modified-by>admin</last-modified-by>
      <last-modified>1313562852062</last-modified>
    </meta>
  </process-def>
</process>