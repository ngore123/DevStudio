<process draft="false" dev-studio-version="7.6.02.01">
  <process-def name=":AutoPilot-OA-Storage_Management:File_System:Delete File System">
    <parameters>
      <input global="false" required="true">
        <description>Name of the storage vendor.  Supported vendors: NetApp</description>
        <from>configuration name</from>
        <to>configuration name</to>
      </input>
      <input global="false" required="true">
        <description>
Sample input XML:

  &lt;storage&gt;
	&lt;storage-container-name-or-id&gt;test&lt;/storage-container-name-or-id&gt;
	&lt;force&gt;true&lt;/force&gt;
	&lt;dataset-member-parameters&gt;
	&lt;dataset-member-parameter&gt;
	   &lt;dp-node-name&gt;root&lt;/dp-node-name&gt;	        
        &lt;object-name-or-id&gt;simeth0:/NAS_STORAGE_GOLD_1301032947463&lt;/object-name-or-id&gt;
	&lt;/dataset-member-parameter&gt;
	&lt;/dataset-member-parameters&gt;
  &lt;/storage&gt;

Parameters Description:

storage-container-name-or-id [Required]
	Name or identifier of the data set to edit.

object-name-or-id[Optional]
	Identifier of the object to remove from the data set.

force[Optional]
	This is a boolean field. By default, force is false. If true, and an edit is already in progress on the specified data set or an object the data set is dependent on (such as a data protection policy), the previous edit session is rolled back and a new edit session is begun.

dataset-member-parameters[Required]
	Parent tag that contains information about members to be removed to dataset

dataset-member-parameter[Required]
	This tag contains the information about a single member to be removed to dataset

dp-node-name[Optional]
	Name of the data protection policy node associated with the object. If dp-node-name is not specified, the object is considered to be removed from the root data protection policy node.</description>
        <from>storage</from>
        <to>storage</to>
      </input>
      <input global="false" required="false">
        <description>NetApp:
[required if dynamic targeting is used otherwise optional] 

Designates a specific target (name of the DFM server where the operation will be performed) that has been defined in the adapter configuration. Valid value- Same value that has been specified for the name attribute of 'config' element in the adapter configuration . If this tag is left empty the request will be executed on the first defined adapter configuration.
for e.g for the  adapter config below , target would be 02.
&lt;configs&gt;
  &lt;config name="02"&gt;
    &lt;target&gt;172.19.224.103&lt;/target&gt;
    &lt;user-name&gt;root&lt;/user-name&gt;
    &lt;password&gt;bmcbmc&lt;/password&gt;
    &lt;protocol&gt;http&lt;/protocol&gt;
    &lt;port&gt;8088&lt;/port&gt;
  &lt;/config&gt;
&lt;/configs&gt;


Dynamic targeting:Host name or IP address of server on which NetApp DataFabric Manager is running
</description>
        <from>target</from>
        <to>target</to>
      </input>
      <input global="false" required="false">
        <description>NetApp:
[required only if dynamic targeting is used]

NetApp DataFabric Manager login username. 
Note : In case of dynamic targeting  username is  mandatory.</description>
        <from>username</from>
        <to>username</to>
      </input>
      <input global="false" required="false">
        <description>NetApp:
[required only if dynamic targeting is used]
NetApp DataFabric Manager login password.
Note : In case of dynamic targeting  password is  mandatory.</description>
        <from>password</from>
        <to>password</to>
      </input>
      <input global="false" required="false">
        <description>NetApp:
[required only if dynamic targeting is used] 

encryption type[Conditional] : 
Specified only when password parameter is mentioned . 

You can encrypt the password by specifying the encryption type attribute. 
Valid Values : Base64 , plain</description>
        <from>encryption type</from>
        <to>encryption type</to>
      </input>
      <input global="false" required="false">
        <description>NetApp:
[Optional and used when dynamic targeting] 
Communication protocol used by adapter. Valid value is http or https. Default value is http. </description>
        <from>protocol</from>
        <to>protocol</to>
      </input>
      <input global="false" required="false">
        <description>NetApp: 
[Optional and used when dynamic targeting] Port on which NetApp DataFabric Manager is enabled. Default value is 8088 for http protocol and 8488 for https protocol. 
</description>
        <from>port</from>
        <to>port</to>
      </input>
      <output global="false" required="false">
        <description>String Value - Indicates whether or not the process completed successfully. 

Valid values: success or failure</description>
        <to>success status</to>
        <from>success status</from>
      </output>
      <output global="false" required="false">
        <description>String Value - A process specific explanation for the value of success status. </description>
        <to>status message</to>
        <from>status message</from>
      </output>
      <output global="false" required="false">
        <to>output</to>
        <from>output</from>
      </output>
    </parameters>
    <access />
    <sequence>
      <call-process>
        <process-name>:AutoPilot-OA-Storage_Management:Utilities:Extract Configuration Data</process-name>
        <parameters>
          <input>
            <from>configuration name</from>
            <to>configuration name</to>
          </input>
          <output>
            <from>module configuration items</from>
            <to>module configuration items</to>
          </output>
        </parameters>
        <meta>
          <documentation />
          <run-mode-handling>
            <run-mode>OCP</run-mode>
            <allow-step-into>false</allow-step-into>
          </run-mode-handling>
          <checkpoint>false</checkpoint>
        </meta>
        <after-execution>
          <console-output>
            <type>INFO</type>
            <summary>
              <concat>
                <input>
                  <value></value>
                </input>
              </concat>
            </summary>
            <detail>
              <concat>
                <input>
                  <value></value>
                </input>
              </concat>
            </detail>
          </console-output>
        </after-execution>
        <location>:call-process[1]</location>
      </call-process>
      <switch>
        <meta>
          <documentation />
          <run-mode-handling>
            <run-mode>OCP</run-mode>
            <allow-step-into>true</allow-step-into>
          </run-mode-handling>
          <checkpoint>false</checkpoint>
        </meta>
        <execute-all-applicable-cases>false</execute-all-applicable-cases>
        <default>
          <sequence>
            <assign>
              <assignment>
                <output>
                  <to>success status</to>
                  <value>failure</value>
                </output>
              </assignment>
              <assignment>
                <document>
                  <input>
                    <from>configuration name</from>
                  </input>
                </document>
                <result>
                  <output>
                    <to>status message</to>
                  </output>
                </result>
                <xpath-expression>
                  <xpath-replacement-tokens />
                  <xpath><![CDATA[concat("Unknown configuration name: ", .)]]></xpath>
                </xpath-expression>
              </assignment>
              <meta>
                <documentation />
                <checkpoint>false</checkpoint>
              </meta>
              <location>:switch[1]:sequence[1]:assign[1]</location>
            </assign>
          </sequence>
        </default>
        <case>
          <condition>
            <document>
              <input>
                <from>configuration name</from>
              </input>
            </document>
            <xpath-expression>
              <xpath-replacement-tokens />
              <xpath><![CDATA[text()="NetApp"]]></xpath>
            </xpath-expression>
          </condition>
          <sequence>
            <console-output>
              <type>INFO</type>
              <summary>
                <concat>
                  <input>
                    <value></value>
                  </input>
                </concat>
              </summary>
              <detail>
                <concat>
                  <input>
                    <value></value>
                  </input>
                </concat>
              </detail>
            </console-output>
            <assign>
              <assignment>
                <document>
                  <input>
                    <from>storage</from>
                  </input>
                </document>
                <result>
                  <output>
                    <to>items</to>
                  </output>
                </result>
                <xslt-stylesheet>
                  <stylesheet-replacement-tokens>
                    <replacement-token name="target">
                      <input global="false">
                        <from>target</from>
                      </input>
                    </replacement-token>
                    <replacement-token name="username">
                      <input global="false">
                        <from>username</from>
                      </input>
                    </replacement-token>
                    <replacement-token name="password">
                      <input global="false">
                        <from>password</from>
                      </input>
                    </replacement-token>
                    <replacement-token name="protocol">
                      <input global="false">
                        <from>protocol</from>
                      </input>
                    </replacement-token>
                    <replacement-token name="port">
                      <input global="false">
                        <from>port</from>
                      </input>
                    </replacement-token>
                    <replacement-token name="etype">
                      <input global="false">
                        <from>encryption type</from>
                      </input>
                    </replacement-token>
                  </stylesheet-replacement-tokens>
                  <stylesheet><![CDATA[<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="1.0">
  <xsl:output indent="no" />
  <xsl:template match="/">
    <items>
      <item>
        <xsl:if test="string-length('${target}')&gt;0 and string-length('${username}') = 0">
          <target>
            <xsl:value-of select="'${target}'" disable-output-escaping="no" />
          </target>
        </xsl:if>
        <dataset-name-or-id>
          <xsl:value-of select="//storage-container-name-or-id/text()" disable-output-escaping="no" />
        </dataset-name-or-id>
        <force>
          <xsl:value-of select="//force/text()" disable-output-escaping="no" />
        </force>
        <destroy>
          <xsl:text disable-output-escaping="no">true</xsl:text>
        </destroy>
        <xsl:copy-of select="//dataset-member-parameters" />
        <xsl:if test="string-length('${target}')&gt;0 and string-length('${username}') &gt; 0">
          <targets>
            <target>
              <host>
                <xsl:value-of select="'${target}'" disable-output-escaping="no" />
              </host>
              <user-name>${username}</user-name>
              <password>
                <xsl:attribute name="encryption-type">
                  <xsl:value-of select="'${etype}'" disable-output-escaping="no" />
                </xsl:attribute>
                <xsl:value-of select="'${password}'" disable-output-escaping="no" />
              </password>
              <xsl:if test="string-length('${protocol}') &gt; 0">
                <protocol>${protocol}</protocol>
              </xsl:if>
              <xsl:if test="string-length('${port}') &gt; 0">
                <port>${port}</port>
              </xsl:if>
            </target>
          </targets>
        </xsl:if>
      </item>
    </items>
  </xsl:template>
</xsl:stylesheet>]]></stylesheet>
                </xslt-stylesheet>
              </assignment>
              <meta>
                <documentation />
                <checkpoint>false</checkpoint>
              </meta>
              <location>:switch[1]:sequence[2]:assign[1]</location>
            </assign>
            <call-process>
              <process-name>:AO-AD-NetAPP_Storage:Update Items</process-name>
              <parameters>
                <input>
                  <from>module configuration items</from>
                  <to>adapter name</to>
                  <xpath-expression>
                    <xpath-replacement-tokens>
                      <replacement-token name="configuration name">
                        <input global="false">
                          <from>configuration name</from>
                        </input>
                      </replacement-token>
                    </xpath-replacement-tokens>
                    <xpath><![CDATA[//$[configuration name]/Adapter/text()]]></xpath>
                  </xpath-expression>
                </input>
                <input>
                  <from>module configuration items</from>
                  <to>version</to>
                  <xpath-expression>
                    <xpath-replacement-tokens>
                      <replacement-token name="configuration name">
                        <input global="false">
                          <from>configuration name</from>
                        </input>
                      </replacement-token>
                    </xpath-replacement-tokens>
                    <xpath><![CDATA[//$[configuration name]/Version/text()]]></xpath>
                  </xpath-expression>
                </input>
                <input>
                  <value>dataset-remove-member</value>
                  <to>item type</to>
                </input>
                <input>
                  <from>items</from>
                  <to>items</to>
                </input>
                <output>
                  <from>adapter response</from>
                  <to>adapter response</to>
                </output>
              </parameters>
              <meta>
                <documentation />
                <run-mode-handling>
                  <run-mode>OCP</run-mode>
                  <allow-step-into>false</allow-step-into>
                </run-mode-handling>
                <checkpoint>false</checkpoint>
              </meta>
              <after-execution>
                <console-output>
                  <type>INFO</type>
                  <summary>
                    <concat>
                      <input>
                        <value></value>
                      </input>
                    </concat>
                  </summary>
                  <detail>
                    <concat>
                      <input>
                        <value></value>
                      </input>
                    </concat>
                  </detail>
                </console-output>
              </after-execution>
              <location>:switch[1]:sequence[2]:call-process[1]</location>
            </call-process>
            <switch>
              <meta>
                <documentation />
                <run-mode-handling>
                  <run-mode>OCP</run-mode>
                  <allow-step-into>true</allow-step-into>
                </run-mode-handling>
                <checkpoint>false</checkpoint>
              </meta>
              <execute-all-applicable-cases>false</execute-all-applicable-cases>
              <default>
                <sequence>
                  <assign>
                    <assignment>
                      <output>
                        <to>success status</to>
                        <value>failure</value>
                      </output>
                    </assignment>
                    <assignment>
                      <document>
                        <input>
                          <from>adapter response</from>
                        </input>
                      </document>
                      <result>
                        <output>
                          <to>status message</to>
                        </output>
                      </result>
                      <xpath-expression>
                        <xpath-replacement-tokens />
                        <xpath><![CDATA[concat("Error:  ", //error)]]></xpath>
                      </xpath-expression>
                    </assignment>
                    <meta>
                      <documentation />
                      <checkpoint>false</checkpoint>
                    </meta>
                    <location>:switch[1]:sequence[2]:switch[1]:sequence[1]:assign[1]</location>
                  </assign>
                </sequence>
              </default>
              <case>
                <condition>
                  <document>
                    <input>
                      <from>adapter response</from>
                    </input>
                  </document>
                  <xpath-expression>
                    <xpath-replacement-tokens />
                    <xpath><![CDATA[string(//response/metadata/status)!='error']]></xpath>
                  </xpath-expression>
                </condition>
                <sequence>
                  <console-output>
                    <type>INFO</type>
                    <summary>
                      <concat>
                        <input>
                          <value></value>
                        </input>
                      </concat>
                    </summary>
                    <detail>
                      <concat>
                        <input>
                          <value></value>
                        </input>
                      </concat>
                    </detail>
                  </console-output>
                  <call-process>
                    <process-name>:AutoPilot-OA-Storage_Management:Utilities:Get Job Response</process-name>
                    <parameters>
                      <input>
                        <from>configuration name</from>
                        <to>configuration name</to>
                      </input>
                      <input>
                        <from>adapter response</from>
                        <to>adapter response</to>
                      </input>
                      <input>
                        <from>target</from>
                        <to>target</to>
                      </input>
                      <input>
                        <from>username</from>
                        <to>username</to>
                      </input>
                      <input>
                        <from>password</from>
                        <to>password</to>
                      </input>
                      <input>
                        <from>encryption type</from>
                        <to>encryption type</to>
                      </input>
                      <input>
                        <from>protocol</from>
                        <to>protocol</to>
                      </input>
                      <input>
                        <from>port</from>
                        <to>port</to>
                      </input>
                      <output>
                        <from>status message</from>
                        <to>status message</to>
                      </output>
                      <output>
                        <from>success status</from>
                        <to>success status</to>
                      </output>
                      <output>
                        <from>find job status response</from>
                        <to>find job status response</to>
                      </output>
                    </parameters>
                    <meta>
                      <documentation />
                      <run-mode-handling>
                        <run-mode>OCP</run-mode>
                        <allow-step-into>false</allow-step-into>
                      </run-mode-handling>
                      <checkpoint>false</checkpoint>
                    </meta>
                    <after-execution>
                      <console-output>
                        <type>INFO</type>
                        <summary>
                          <concat>
                            <input>
                              <value></value>
                            </input>
                          </concat>
                        </summary>
                        <detail>
                          <concat>
                            <input>
                              <value></value>
                            </input>
                          </concat>
                        </detail>
                      </console-output>
                    </after-execution>
                    <location>:switch[1]:sequence[2]:switch[1]:sequence[2]:call-process[1]</location>
                  </call-process>
                  <switch>
                    <meta>
                      <documentation />
                      <run-mode-handling>
                        <run-mode>OCP</run-mode>
                        <allow-step-into>true</allow-step-into>
                      </run-mode-handling>
                      <checkpoint>false</checkpoint>
                    </meta>
                    <execute-all-applicable-cases>false</execute-all-applicable-cases>
                    <default>
                      <sequence>
                        <assign>
                          <assignment>
                            <output>
                              <to>success status</to>
                              <value>failure</value>
                            </output>
                          </assignment>
                          <assignment>
                            <document>
                              <input>
                                <from>find job status response</from>
                              </input>
                            </document>
                            <result>
                              <output>
                                <to>status message</to>
                              </output>
                            </result>
                            <xpath-expression>
                              <xpath-replacement-tokens />
                              <xpath><![CDATA[concat("Error:  ", "Delete Job failed'")]]></xpath>
                            </xpath-expression>
                          </assignment>
                          <meta>
                            <documentation />
                            <checkpoint>false</checkpoint>
                          </meta>
                          <location>:switch[1]:sequence[2]:switch[1]:sequence[2]:switch[1]:sequence[1]:assign[1]</location>
                        </assign>
                      </sequence>
                    </default>
                    <case applies-if-any-condition-true="false">
                      <condition>
                        <document>
                          <input>
                            <from>success status</from>
                          </input>
                        </document>
                        <xpath-expression>
                          <xpath-replacement-tokens />
                          <xpath><![CDATA[string(.) = 'success']]></xpath>
                        </xpath-expression>
                      </condition>
                      <condition>
                        <document>
                          <input>
                            <from>find job status response</from>
                          </input>
                        </document>
                        <xpath-expression>
                          <xpath-replacement-tokens />
                          <xpath><![CDATA[string(//job-overall-status/text()) !="failed"  and string(//job-overall-status/text())!= 'running_with_failures']]></xpath>
                        </xpath-expression>
                      </condition>
                      <sequence>
                        <console-output>
                          <type>INFO</type>
                          <summary>
                            <concat>
                              <input>
                                <value></value>
                              </input>
                            </concat>
                          </summary>
                          <detail>
                            <concat>
                              <input>
                                <value></value>
                              </input>
                            </concat>
                          </detail>
                        </console-output>
                        <assign>
                          <assignment>
                            <document>
                              <input>
                                <from>find job status response</from>
                              </input>
                            </document>
                            <result>
                              <output>
                                <to>output</to>
                              </output>
                            </result>
                            <xpath-expression>
                              <xpath-replacement-tokens />
                              <xpath><![CDATA[//dp-job-info]]></xpath>
                            </xpath-expression>
                          </assignment>
                          <meta>
                            <documentation />
                            <checkpoint>false</checkpoint>
                          </meta>
                          <location>:switch[1]:sequence[2]:switch[1]:sequence[2]:switch[1]:sequence[2]:assign[1]</location>
                        </assign>
                      </sequence>
                    </case>
                    <location>:switch[1]:sequence[2]:switch[1]:sequence[2]:switch[1]</location>
                  </switch>
                </sequence>
              </case>
              <location>:switch[1]:sequence[2]:switch[1]</location>
            </switch>
          </sequence>
        </case>
        <location>:switch[1]</location>
      </switch>
    </sequence>
    <meta>
      <expose-to>
        <consumer>RULE</consumer>
        <consumer>SCHEDULE</consumer>
        <consumer>SOAP</consumer>
      </expose-to>
      <documentation>
        <description>NetApp:Deletes File System.
Dynamic targeting:Ability to communicate with multiple DFM servers which are not configured under the adapter configuration. NetApp action can be invoked using dynamic targeting / without dynamic targeting.

When Dynamic targeting is used : target would be Host name or IP address of server on which NetApp DataFabric Manager is running. It is mandatory send all the required parameters:
 username, 
 password , 
 encyption type  when using dynamic targeting.

When Dynamic targeting is not used : Designates a specific target (name of the DFM server where the operation will be performed) that has been defined in the adapter configuration. Valid value- Same value that has been specified for the name attribute of 'config' element in the adapter configuration . If this tag is left empty the request will be executed on the first defined adapter configuration.

for e.g for the  adapter config below , target would be 02.
&lt;configs&gt;
  &lt;config name="02"&gt;
    &lt;target&gt;172.19.224.103&lt;/target&gt;
    &lt;user-name&gt;root&lt;/user-name&gt;
    &lt;password&gt;bmcbmc&lt;/password&gt;
    &lt;protocol&gt;http&lt;/protocol&gt;
    &lt;port&gt;8088&lt;/port&gt;
  &lt;/config&gt;
&lt;/configs&gt;
</description>
        <version></version>
      </documentation>
      <peer-location>
        <location>any</location>
      </peer-location>
      <record-metrics>false</record-metrics>
      <process-id>1844b13a-8d2a-3412-996a-4f3dbff5a35d</process-id>
      <author>admin</author>
      <category></category>
      <status></status>
      <keywords></keywords>
      <systems></systems>
      <last-modified-by>admin</last-modified-by>
      <last-modified>1311162985930</last-modified>
    </meta>
  </process-def>
</process>