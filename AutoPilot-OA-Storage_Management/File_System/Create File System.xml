<process draft="false" dev-studio-version="7.6.02.01">
  <process-def name=":AutoPilot-OA-Storage_Management:File_System:Create File System">
    <parameters>
      <input global="false" required="true">
        <description>Name of the storage vendor.  Supported vendors: NetApp</description>
        <from>configuration name</from>
        <to>configuration name</to>
      </input>
      <input global="false" required="true">
        <description>Sample input XML for NFS:

&lt;storage&gt;
	&lt;storage-container-name-or-id&gt;test1&lt;/storage-container-name-or-id&gt;
	&lt;size&gt;2&lt;/size&gt;
     &lt;storage-unit&gt;GB&lt;/storage-unit&gt;
	&lt;name&gt;vol3&lt;/name&gt;
	&lt;comments&gt;
		&lt;provision-member-comment&gt;
			&lt;comment-field-name-or-id&gt;id&lt;/comment-field-name-or-id&gt;
			&lt;comment-value&gt;value&lt;/comment-value&gt;
		&lt;/provision-member-comment&gt;
	&lt;/comments&gt;
	&lt;create-new-vfiler&gt;false&lt;/create-new-vfiler&gt;
	&lt;description&gt;test desc&lt;/description&gt;
	&lt;resource-name-or-id&gt;simeth0:aggr0&lt;/resource-name-or-id&gt;
	&lt;maximum-data-size&gt;3000000&lt;/maximum-data-size&gt;
	&lt;force&gt;true&lt;/force&gt;
	&lt;dataset-export-info&gt;
		&lt;dataset-export-protocol&gt;nfs&lt;/dataset-export-protocol&gt;
		&lt;dataset-nfs-export-setting&gt;
		  &lt;nfs-protocol-version&gt;v3&lt;/nfs-protocol-version&gt;
		  &lt;anonymous-access-user&gt;65534&lt;/anonymous-access-user&gt;
		  &lt;disable-setuid&gt;true&lt;/disable-setuid&gt;
		  &lt;is-readonly-for-all-hosts&gt;false&lt;/is-readonly-for-all-hosts&gt;		  
		  &lt;is-readwrite-for-all-hosts&gt;true&lt;/is-readwrite-for-all-hosts&gt;		  
		  &lt;nfs-security-flavors&gt;
			&lt;nfs-security-flavor&gt;krb5&lt;/nfs-security-flavor&gt;
			&lt;nfs-security-flavor&gt;krb5p&lt;/nfs-security-flavor&gt;
			&lt;nfs-security-flavor&gt;sys&lt;/nfs-security-flavor&gt;
		  &lt;/nfs-security-flavors&gt;
		  &lt;nfs-export-root-hosts&gt;
			&lt;nfs-export-host&gt;
			  &lt;is-an-exception&gt;false&lt;/is-an-exception&gt;
			  &lt;hostname&gt;172.16.49.104&lt;/hostname&gt;
			&lt;/nfs-export-host&gt;
		  &lt;/nfs-export-root-hosts&gt;
		  &lt;nfs-export-rw-hosts&gt;
			&lt;nfs-export-host&gt;
			  &lt;is-an-exception&gt;false&lt;/is-an-exception&gt;
			  &lt;hostname&gt;172.16.49.104&lt;/hostname&gt;
			&lt;/nfs-export-host&gt;
		  &lt;/nfs-export-rw-hosts&gt;
		&lt;/dataset-nfs-export-setting&gt;		
	&lt;/dataset-export-info&gt;
	&lt;vfiler-name-or-id&gt;test filer&lt;/vfiler-name-or-id&gt;
	&lt;online-migration&gt;false&lt;/online-migration&gt;
&lt;/storage&gt;


Sample input XML for CIFS:

&lt;storage&gt;
	&lt;storage-container-name-or-id&gt;test1&lt;/storage-container-name-or-id&gt;
	&lt;size&gt;2&lt;/size&gt;
     &lt;storage-unit&gt;GB&lt;/storage-unit&gt;
	&lt;name&gt;vol3&lt;/name&gt;
	&lt;comments&gt;
		&lt;provision-member-comment&gt;
			&lt;comment-field-name-or-id&gt;id&lt;/comment-field-name-or-id&gt;
			&lt;comment-value&gt;value&lt;/comment-value&gt;
		&lt;/provision-member-comment&gt;
	&lt;/comments&gt;
	&lt;create-new-vfiler&gt;false&lt;/create-new-vfiler&gt;
	&lt;description&gt;test desc&lt;/description&gt;
	&lt;resource-name-or-id&gt;simeth0:aggr0&lt;/resource-name-or-id&gt;
	&lt;maximum-data-size&gt;3000000&lt;/maximum-data-size&gt;
	&lt;force&gt;true&lt;/force&gt;
	&lt;dataset-export-info&gt;
		&lt;dataset-export-protocol&gt;cifs&lt;/dataset-export-protocol&gt;
		&lt;dataset-cifs-export-setting&gt;
		  &lt;cifs-domain&gt;synapse.com&lt;/cifs-domain&gt;
		  &lt;dataset-cifs-share-permissions&gt;
			&lt;dataset-cifs-share-permission&gt;
			  &lt;cifs-username&gt;Everyone&lt;/cifs-username&gt;
			  &lt;permission&gt;full_control&lt;/permission&gt;
			&lt;/dataset-cifs-share-permission&gt;
			&lt;dataset-cifs-share-permission&gt;
			  &lt;cifs-username&gt;test&lt;/cifs-username&gt;
			  &lt;permission&gt;read&lt;/permission&gt;
			&lt;/dataset-cifs-share-permission&gt;
		  &lt;/dataset-cifs-share-permissions&gt;
		&lt;/dataset-cifs-export-setting&gt;
	&lt;/dataset-export-info&gt;
	&lt;vfiler-name-or-id&gt;test filer&lt;/vfiler-name-or-id&gt;
	&lt;online-migration&gt;true&lt;/online-migration&gt;
&lt;/storage&gt;

Parameters Description:

storage-container-name-or-id [Required]
	The name of the dataset whose member will be provisioned.

description[Optional]
	Description of the provisioning request. The length of this string cannot be more than 255 characters.

maximum-data-size[Optional]
	Maximum storage space for the dataset member. Applicable when provisioning members in NFS data sets (i.e. datasets associated with provisioning policy of type 'nas' and export over 'NFS' protocol). Storage clients can write data up to this limit if the containing aggregate has space. The value is specified in bytes. Range: [1..2^63-1] 

resource-name-or-id[Optional]
	Name or identifier of the resource object from which storage space will be provisioned. valid types of objects are:- 
    		* Filer 
	     * Aggregate 
	The filer or aggregate specified should belong to the resource pool(s) associated with primary node of the dataset.
 
name[Optional] 
	Name of the storage container. If this is a NAS data set, i.e the provisioning policy associated with the primary node of the data set is of type 'nas', then this name corresponds to the qtree created. If this is a SAN data set, i.e the provisioning policy associated with the primary node of the data set is of type 'san', then this name corresponds to the LUN or volume that will be provisioned as part of this request. The length of this string cannot be more than 255 characters.
If this tag is not provided, a name for storage to be provisioned will be deduced automatically which will have the following format - Storage yyyyMMddHHmmss

size[Required] 
	Size for the data set member in terms of provided storage unit.

storage-unit [Required]
     Valid Values:MB, GB, TB, KB

comments[Optional]
	Comments to be associated with the provisioning request.

provision-member-comment[Optional]
	One comment field to fill in as part of the request.

comment-field-name-or-id[Optional]
	Name or identifier of the comment field.

comment-value[Optional]
	Value of the comment field. An empty string can be used to unset the value of the comment field for this object.

create-new-vfiler[Optional]
	True, if new vFiler Unit needs to be created during provisioning. The provisioned storage container is then moved to the vFiler Unit. This input is applicable only in the context of resourcepool-member-list-info-iter-start zapi and run-provisioning-checks is specified as 'true'. This input is ignored in dataset-provision-member zapi. The default value is 'false'.

dataset-export-info[Optional]
	Specifies the NAS export settings for the the provisioning member. Member level export settings cannot be specified, if export settings have been configured at node level.

dataset-cifs-export-setting[Optional]
	The CIFS export settings for storage exported over CIFS. This field may be present only if the dataset-export-protocol is 'cifs' or 'mixed'.

cifs-domain[Optional]
	Name of the CIFS domain. If present, then only filers or vFilers belonging to this CIFS domain is considered for provisioning. If not present, then any filer is picked. Up to 255 characters.

dataset-cifs-share-permissions[Optional]
	Specifies the permissions granted to users on storage provisioned in this dataset node. This field may be present only if the dataset-export-protocol is 'cifs' or 'mixed'.

dataset-cifs-share-permission[Optional]
	 single permission granted to a user on CIFS shares within a dataset node.

cifs-username[Optional]
	Name of a user in the specified domain. The username may be the name of an actual domain user or one of the built-in names - 'administrator' or 'everyone'. This is required for defining 'dataset-cifs-share-permission'.

permission[Optional]
	Specifies the permissions granted to a user.This is required for defining 'dataset-cifs-share-permission'.

dataset-export-protocol[Optional]
	Specifies the protocol over which members of the dataset node will be exported. This value is always returned. If omitted during a modify operation, the existing value is not changed. If specified as 'none' in a modify operation, the existing settings will be cleared. Default value is 'none'.
Valid values - nfs,cifs,mixed,none

dataset-nfs-export-setting[Optional]
	The NFS export settings for storage exported over NFS. This field may be present only if the dataset-export-protocol is 'nfs' or 'mixed'.

anonymous-access-user[Optional]
	If the client accessing the export is not present in the root access list for the export, the effective user for root is the value specified for this field. Default value is 65534 which maps to user nobody. It could be an integer Range: [0..65534] or a user name not more than 255 characters.

disable-setuid[Optional]
	This is a boolean field. If true, causes the server file system to ignore attempts to enable the setuid or setgid mode bits. Default value is true.

is-readonly-for-all-hosts[Optional]
	This is a boolean field. Specifies that all hosts receive read-only permissions on nfs exports in this dataset node. Equivalent to specifying "ro" on the filer. Default value is false. If true, is-readwrite-for-all-hosts must be false.

is-readwrite-for-all-hosts[Optional]
	This is a boolean field. Specifies that all hosts receive read-write permissions on nfs exports in this dataset node. Equivalent to specifying "rw" on the filer. Default value is true. If true, is-readonly-for-all-hosts must be false.

nfs-export-ro-hosts[Optional]
	A list of hosts with read-only permissions on exports in this dataset node. If a non empty list of nfs-export-ro-hosts is present along with is-readonly-for-all-hosts as true, then an error will be returned.

nfs-export-root-hosts[Optional]
	A list of hosts with the root user having read-only or read-write permissions on exports in this dataset node.

nfs-export-rw-hosts[Optional]
	A list of hosts with read-write permissions on exports in this dataset node. If a non empty list of nfs-export-rw-hosts is present along with is-readwrite-for-all-hosts as true, then an error will be returned.

nfs-export-host[Optional]
	Specifies a single host or all-hosts. A host can be a host name (DNS name), an IP address, a subnet or a domain name. If an 'all-hosts' entry is present, all other host name entries must be negated.

hostname[Optional]
	Specifies a single host name entry. A host name may be a DNS name, an IP address, a subnet (specified as &lt;subnet address&gt;/&lt;prefix length&gt; i.e. CIDR notation or '[network] &lt;subnet-address&gt; [netmask] &lt;netmask&gt;'), a domain, or a workgroup.

is-an-exception[Optional]
	This is a boolean field. Specifies that the rule does not apply to this host. Should be used when it is required to grant permissions to hosts in a subnet or a domain or all hosts excluding some. Default value is false.

nfs-security-flavors[Optional]
	List of strings specifying the security flavors supported on exports in this dataset node. If this field is not specified, the default value of 'sys' is assumed.

nfs-security-flavor[Optional]
	A security flavor to be applied on nfs exports. Possible values are 'none', 'sys' (Unix Style), 'krb5' (Kerberos v5) , krb5i' (Kerberos v5 integrity) and 'krb5p' (Kerberos v5 privacy). Default value is 'sys'.
nfs-protocol-version[Optional]
	NFS protocol version, valid values are "v2", "v3" and "v4". Default value is "v3". If set, the storage systems that have the given version enabled will be selected to provision storage for the dataset.

vfiler-name-or-id[Optional]
	Name or id of the vFiler Unit, if specified the newly provisioned dataset member will be moved to the specified vFiler Unit and accessed via the vFiler Unit's IP addresses. Ignored for storage-service-dataset-provision.

online-migration[Optional]
	This is a boolean field. If True, online migration pre checks will be done on this filer before provisioning. This parameter is valid only if create-new-vfiler flag is TRUE OR vfiler-name-or-id is specified.</description>
        <from>storage</from>
        <to>storage</to>
      </input>
      <input global="false" required="false">
        <description>[NetApp:
[required if dynamic targeting is used otherwise optional] 

Designates a specific target (name of the DFM server where the operation will be performed) that has been defined in the adapter configuration. Valid value- Same value that has been specified for the name attribute of 'config' element in the adapter configuration . If this tag is left empty the request will be executed on the first defined adapter configuration.

for e.g for the  adapter config below , target would be 02.
&lt;configs&gt;
  &lt;config name="02"&gt;
    &lt;target&gt;172.19.224.103&lt;/target&gt;
    &lt;user-name&gt;root&lt;/user-name&gt;
    &lt;password&gt;bmcbmc&lt;/password&gt;
    &lt;protocol&gt;http&lt;/protocol&gt;
    &lt;port&gt;8088&lt;/port&gt;
  &lt;/config&gt;
&lt;/configs&gt;

Dynamic targeting:Host name or IP address of server on which NetApp DataFabric Manager is running</description>
        <from>target</from>
        <to>target</to>
      </input>
      <input global="false" required="false">
        <description>NetApp:
[required only if dynamic targeting is used]

NetApp DataFabric Manager login username. 
</description>
        <from>username</from>
        <to>username</to>
      </input>
      <input global="false" required="false">
        <description>NetApp:
[required only if dynamic targeting is used]
NetApp DataFabric Manager login password. 
</description>
        <from>password</from>
        <to>password</to>
      </input>
      <input global="false" required="false">
        <description>NetApp:
[required only if dynamic targeting is used] 

encryption type[Conditional] : 
Specified only when password parameter is mentioned . 

You can encrypt the password by specifying the encryption type attribute. 
Valid Values : Base64 , plain</description>
        <from>encryption type</from>
        <to>encryption type</to>
      </input>
      <input global="false" required="false">
        <description>NetApp:
[Optional and used when dynamic targeting] 
Communication protocol used by adapter. Valid value is http or https. Default value is http. 
</description>
        <from>protocol</from>
        <to>protocol</to>
      </input>
      <input global="false" required="false">
        <description>NetApp: 
[Optional and used when dynamic targeting] Port on which NetApp DataFabric Manager is enabled. Default value is 8088 for http protocol and 8488 for https protocol. 
</description>
        <from>port</from>
        <to>port</to>
      </input>
      <output global="false" required="false">
        <description>String Value - Indicates whether or not the process completed successfully. 

Valid values: success or failure</description>
        <to>success status</to>
        <from>success status</from>
      </output>
      <output global="false" required="false">
        <description>String Value - A process specific explanation for the value of success status. </description>
        <to>status message</to>
        <from>status message</from>
      </output>
      <output global="false" required="false">
        <to>output</to>
        <from>output</from>
      </output>
    </parameters>
    <access />
    <sequence>
      <call-process>
        <process-name>:AutoPilot-OA-Storage_Management:Utilities:Extract Configuration Data</process-name>
        <parameters>
          <input>
            <from>configuration name</from>
            <to>configuration name</to>
          </input>
          <output>
            <from>module configuration items</from>
            <to>module configuration items</to>
          </output>
        </parameters>
        <meta>
          <documentation />
          <run-mode-handling>
            <run-mode>OCP</run-mode>
            <allow-step-into>false</allow-step-into>
          </run-mode-handling>
          <checkpoint>false</checkpoint>
        </meta>
        <after-execution>
          <console-output>
            <type>INFO</type>
            <summary>
              <concat>
                <input>
                  <value></value>
                </input>
              </concat>
            </summary>
            <detail>
              <concat>
                <input>
                  <value></value>
                </input>
              </concat>
            </detail>
          </console-output>
        </after-execution>
        <location>:call-process[1]</location>
      </call-process>
      <switch>
        <meta>
          <documentation />
          <run-mode-handling>
            <run-mode>OCP</run-mode>
            <allow-step-into>true</allow-step-into>
          </run-mode-handling>
          <checkpoint>false</checkpoint>
        </meta>
        <execute-all-applicable-cases>false</execute-all-applicable-cases>
        <default>
          <sequence>
            <assign>
              <assignment>
                <output>
                  <to>success status</to>
                  <value>failure</value>
                </output>
              </assignment>
              <assignment>
                <document>
                  <input>
                    <from>configuration name</from>
                  </input>
                </document>
                <result>
                  <output>
                    <to>status message</to>
                  </output>
                </result>
                <xpath-expression>
                  <xpath-replacement-tokens />
                  <xpath><![CDATA[concat("Unknown configuration name: ", .)]]></xpath>
                </xpath-expression>
              </assignment>
              <meta>
                <documentation />
                <checkpoint>false</checkpoint>
              </meta>
              <location>:switch[1]:sequence[1]:assign[1]</location>
            </assign>
          </sequence>
        </default>
        <case>
          <condition>
            <document>
              <input>
                <from>configuration name</from>
              </input>
            </document>
            <xpath-expression>
              <xpath-replacement-tokens />
              <xpath><![CDATA[text()="NetApp"]]></xpath>
            </xpath-expression>
          </condition>
          <sequence>
            <console-output>
              <type>INFO</type>
              <summary>
                <concat>
                  <input>
                    <value></value>
                  </input>
                </concat>
              </summary>
              <detail>
                <concat>
                  <input>
                    <value></value>
                  </input>
                </concat>
              </detail>
            </console-output>
            <call-process>
              <process-name>:AutoPilot-OA-Storage_Management:Utilities:Convert Storage Size Into Bytes</process-name>
              <parameters>
                <input>
                  <from>storage</from>
                  <to>storage size</to>
                  <xpath-expression>
                    <xpath-replacement-tokens />
                    <xpath><![CDATA[//size/text()]]></xpath>
                  </xpath-expression>
                </input>
                <input>
                  <from>storage</from>
                  <to>storage size unit</to>
                  <xpath-expression>
                    <xpath-replacement-tokens />
                    <xpath><![CDATA[//storage-unit/text()]]></xpath>
                  </xpath-expression>
                </input>
                <output>
                  <from>storage size</from>
                  <to>size</to>
                </output>
              </parameters>
              <meta>
                <documentation />
                <run-mode-handling>
                  <run-mode>OCP</run-mode>
                  <allow-step-into>false</allow-step-into>
                </run-mode-handling>
                <checkpoint>false</checkpoint>
              </meta>
              <after-execution>
                <console-output>
                  <type>INFO</type>
                  <summary>
                    <concat>
                      <input>
                        <value></value>
                      </input>
                    </concat>
                  </summary>
                  <detail>
                    <concat>
                      <input>
                        <value></value>
                      </input>
                    </concat>
                  </detail>
                </console-output>
              </after-execution>
              <location>:switch[1]:sequence[2]:call-process[1]</location>
            </call-process>
            <assign>
              <assignment>
                <document>
                  <input>
                    <from>storage</from>
                  </input>
                </document>
                <result>
                  <output>
                    <to>items</to>
                  </output>
                </result>
                <xslt-stylesheet>
                  <stylesheet-replacement-tokens>
                    <replacement-token name="target">
                      <input global="false">
                        <from>target</from>
                      </input>
                    </replacement-token>
                    <replacement-token name="size">
                      <input global="false">
                        <from>size</from>
                      </input>
                    </replacement-token>
                    <replacement-token name="username">
                      <input global="false">
                        <from>username</from>
                      </input>
                    </replacement-token>
                    <replacement-token name="password">
                      <input global="false">
                        <from>password</from>
                      </input>
                    </replacement-token>
                    <replacement-token name="protocol">
                      <input global="false">
                        <from>protocol</from>
                      </input>
                    </replacement-token>
                    <replacement-token name="port">
                      <input global="false">
                        <from>port</from>
                      </input>
                    </replacement-token>
                    <replacement-token name="etype">
                      <input global="false">
                        <from>encryption type</from>
                      </input>
                    </replacement-token>
                  </stylesheet-replacement-tokens>
                  <stylesheet><![CDATA[<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="1.0">
  <xsl:output indent="no" />
  <xsl:template match="/">
    <items>
      <item>
        <xsl:if test="string-length('${target}') &gt; 0 and string-length('${username}') = 0">
          <target>${target}</target>
        </xsl:if>
        <dataset-name-or-id>
          <xsl:value-of select="//storage-container-name-or-id/text()" disable-output-escaping="no" />
        </dataset-name-or-id>
        <size>
          <xsl:value-of select="round($[size])" disable-output-escaping="no" />
        </size>
        <xsl:if test=" name(//name) ">
          <name>
            <xsl:value-of select="//name/text()" disable-output-escaping="no" />
          </name>
        </xsl:if>
        <xsl:if test="name(//comments)">
          <xsl:copy-of select="//comments" />
        </xsl:if>
        <xsl:if test=" name(//dataset-export-info) ">
          <xsl:copy-of select="//dataset-export-info" />
        </xsl:if>
        <dry-run>
          <xsl:text disable-output-escaping="no">true</xsl:text>
        </dry-run>
        <include-dry-run-reason-details>
          <xsl:text disable-output-escaping="no">true</xsl:text>
        </include-dry-run-reason-details>
        <xsl:if test=" name(//create-new-vfiler) ">
          <create-new-vfiler>
            <xsl:value-of select="//create-new-vfiler/text()" disable-output-escaping="no" />
          </create-new-vfiler>
        </xsl:if>
        <xsl:if test=" name(//description) ">
          <description>
            <xsl:value-of select="//description/text()" disable-output-escaping="no" />
          </description>
        </xsl:if>
        <xsl:if test=" name(//resource-name-or-id) ">
          <resource-name-or-id>
            <xsl:value-of select="//resource-name-or-id/text()" disable-output-escaping="no" />
          </resource-name-or-id>
        </xsl:if>
        <xsl:if test="string-length(//maximum-data-size/text()) &gt; 0">
          <maximum-data-size>
            <xsl:value-of select="//maximum-data-size/text()" disable-output-escaping="no" />
          </maximum-data-size>
        </xsl:if>
        <xsl:if test=" name(//force) ">
          <force>
            <xsl:value-of select="//force/text()" disable-output-escaping="no" />
          </force>
        </xsl:if>
        <xsl:if test="string-length(//vfiler-name-or-id/text()&gt;0)">
          <vfiler-name-or-id>
            <xsl:value-of select="//vfiler-name-or-id/text()" disable-output-escaping="no" />
          </vfiler-name-or-id>
        </xsl:if>
        <xsl:if test="string-length(//vfiler-name-or-id/text()) &gt; 0 or //create-new-vfiler/text() = 'true'">
          <online-migration>
            <xsl:text disable-output-escaping="no">false</xsl:text>
          </online-migration>
        </xsl:if>
        <xsl:if test="string-length('${target}') &gt; 0 and string-length('${username}')  &gt; 0">
          <targets>
            <target>
              <host>${target}</host>
              <user-name>${username}</user-name>
              <password>
                <xsl:attribute name="encryption-type">
                  <xsl:value-of select="'${etype}'" disable-output-escaping="no" />
                </xsl:attribute>
                <xsl:value-of select="'${password}'" disable-output-escaping="no" />
              </password>
              <xsl:if test="string-length('${protocol}') &gt;0">
                <protocol>${protocol}</protocol>
              </xsl:if>
              <xsl:if test="string-length('${port}') &gt;0">
                <port>${port}</port>
              </xsl:if>
            </target>
          </targets>
        </xsl:if>
      </item>
    </items>
  </xsl:template>
</xsl:stylesheet>]]></stylesheet>
                </xslt-stylesheet>
              </assignment>
              <meta>
                <documentation />
                <checkpoint>false</checkpoint>
              </meta>
              <location>:switch[1]:sequence[2]:assign[1]</location>
            </assign>
            <call-process>
              <process-name>:AO-AD-NetAPP_Storage:Perform Action</process-name>
              <parameters>
                <input>
                  <from>module configuration items</from>
                  <to>adapter name</to>
                  <xpath-expression>
                    <xpath-replacement-tokens>
                      <replacement-token name="configuration name">
                        <input global="false">
                          <from>configuration name</from>
                        </input>
                      </replacement-token>
                    </xpath-replacement-tokens>
                    <xpath><![CDATA[//$[configuration name]/Adapter/text()]]></xpath>
                  </xpath-expression>
                </input>
                <input>
                  <from>module configuration items</from>
                  <to>version</to>
                  <xpath-expression>
                    <xpath-replacement-tokens>
                      <replacement-token name="configuration name">
                        <input global="false">
                          <from>configuration name</from>
                        </input>
                      </replacement-token>
                    </xpath-replacement-tokens>
                    <xpath><![CDATA[//$[configuration name]/Version/text()]]></xpath>
                  </xpath-expression>
                </input>
                <input>
                  <value>provision-nas-dataset</value>
                  <to>item type</to>
                </input>
                <input>
                  <from>items</from>
                  <to>items</to>
                </input>
                <output>
                  <from>adapter response</from>
                  <to>adapter response</to>
                </output>
              </parameters>
              <meta>
                <documentation />
                <run-mode-handling>
                  <run-mode>OCP</run-mode>
                  <allow-step-into>false</allow-step-into>
                </run-mode-handling>
                <checkpoint>false</checkpoint>
              </meta>
              <after-execution>
                <console-output>
                  <type>INFO</type>
                  <summary>
                    <concat>
                      <input>
                        <value></value>
                      </input>
                    </concat>
                  </summary>
                  <detail>
                    <concat>
                      <input>
                        <value></value>
                      </input>
                    </concat>
                  </detail>
                </console-output>
              </after-execution>
              <location>:switch[1]:sequence[2]:call-process[2]</location>
            </call-process>
            <switch>
              <meta>
                <documentation />
                <run-mode-handling>
                  <run-mode>OCP</run-mode>
                  <allow-step-into>true</allow-step-into>
                </run-mode-handling>
                <checkpoint>false</checkpoint>
              </meta>
              <execute-all-applicable-cases>false</execute-all-applicable-cases>
              <default>
                <sequence>
                  <assign>
                    <assignment>
                      <output>
                        <to>success status</to>
                        <value>failure</value>
                      </output>
                    </assignment>
                    <assignment>
                      <document>
                        <input>
                          <from>adapter response</from>
                        </input>
                      </document>
                      <result>
                        <output>
                          <to>status message</to>
                        </output>
                      </result>
                      <xslt-stylesheet>
                        <stylesheet-replacement-tokens />
                        <stylesheet><![CDATA[<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="1.0">
  <xsl:output indent="no" />
  <xsl:template match="/">
    <xsl:choose>
      <xsl:when test="string-length(//output) &gt; 0">
        <xsl:copy-of select="//output" />
      </xsl:when>
      <xsl:otherwise>
        <xsl:copy-of select="//error" />
      </xsl:otherwise>
    </xsl:choose>
  </xsl:template>
</xsl:stylesheet>]]></stylesheet>
                      </xslt-stylesheet>
                    </assignment>
                    <meta>
                      <documentation />
                      <checkpoint>false</checkpoint>
                    </meta>
                    <location>:switch[1]:sequence[2]:switch[1]:sequence[1]:assign[1]</location>
                  </assign>
                </sequence>
              </default>
              <case>
                <condition>
                  <document>
                    <input>
                      <from>adapter response</from>
                    </input>
                  </document>
                  <xpath-expression>
                    <xpath-replacement-tokens />
                    <xpath><![CDATA[string(//is-provisioning-failure/text()) = 'false']]></xpath>
                  </xpath-expression>
                </condition>
                <sequence>
                  <console-output>
                    <type>INFO</type>
                    <summary>
                      <concat>
                        <input>
                          <value></value>
                        </input>
                      </concat>
                    </summary>
                    <detail>
                      <concat>
                        <input>
                          <value></value>
                        </input>
                      </concat>
                    </detail>
                  </console-output>
                  <assign>
                    <assignment>
                      <document>
                        <input>
                          <from>storage</from>
                        </input>
                      </document>
                      <result>
                        <output>
                          <to>items</to>
                        </output>
                      </result>
                      <xslt-stylesheet>
                        <stylesheet-replacement-tokens>
                          <replacement-token name="target">
                            <input global="false">
                              <from>target</from>
                            </input>
                          </replacement-token>
                          <replacement-token name="size">
                            <input global="false">
                              <from>size</from>
                            </input>
                          </replacement-token>
                          <replacement-token name="username">
                            <input global="false">
                              <from>username</from>
                            </input>
                          </replacement-token>
                          <replacement-token name="password">
                            <input global="false">
                              <from>password</from>
                            </input>
                          </replacement-token>
                          <replacement-token name="protocol">
                            <input global="false">
                              <from>protocol</from>
                            </input>
                          </replacement-token>
                          <replacement-token name="port">
                            <input global="false">
                              <from>port</from>
                            </input>
                          </replacement-token>
                          <replacement-token name="etype">
                            <input global="false">
                              <from>encryption type</from>
                            </input>
                          </replacement-token>
                        </stylesheet-replacement-tokens>
                        <stylesheet><![CDATA[<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="1.0">
  <xsl:output indent="no" />
  <xsl:template match="/">
    <items>
      <item>
        <xsl:if test="string-length('${target}') &gt; 0 and string-length('${username}') = 0">
          <target>${target}</target>
        </xsl:if>
        <dataset-name-or-id>
          <xsl:value-of select="//storage-container-name-or-id/text()" disable-output-escaping="no" />
        </dataset-name-or-id>
        <size>
          <xsl:value-of select="round($[size])" disable-output-escaping="no" />
        </size>
        <xsl:if test=" name(//name) ">
          <name>
            <xsl:value-of select="//name/text()" disable-output-escaping="no" />
          </name>
        </xsl:if>
        <xsl:if test="name(//comments) ">
          <xsl:copy-of select="//comments" />
        </xsl:if>
        <xsl:if test="name(//dataset-export-info) ">
          <xsl:copy-of select="//dataset-export-info" />
        </xsl:if>
        <xsl:if test=" name(//create-new-vfiler) ">
          <create-new-vfiler>
            <xsl:value-of select="//create-new-vfiler/text()" disable-output-escaping="no" />
          </create-new-vfiler>
        </xsl:if>
        <xsl:if test=" name(//description) ">
          <description>
            <xsl:value-of select="//description/text()" disable-output-escaping="no" />
          </description>
        </xsl:if>
        <xsl:if test=" name(//resource-name-or-id) ">
          <resource-name-or-id>
            <xsl:value-of select="//resource-name-or-id/text()" disable-output-escaping="no" />
          </resource-name-or-id>
        </xsl:if>
        <xsl:if test="string-length(//maximum-data-size/text()) &gt; 0">
          <maximum-data-size>
            <xsl:value-of select="//maximum-data-size/text()" disable-output-escaping="no" />
          </maximum-data-size>
        </xsl:if>
        <xsl:if test=" name(//force) ">
          <force>
            <xsl:value-of select="//force/text()" disable-output-escaping="no" />
          </force>
        </xsl:if>
        <xsl:if test="string-length(//vfiler-name-or-id/text())&gt;0">
          <vfiler-name-or-id>
            <xsl:value-of select="//vfiler-name-or-id/text()" disable-output-escaping="no" />
          </vfiler-name-or-id>
        </xsl:if>
        <xsl:if test="string-length(//vfiler-name-or-id/text()) &gt; 0 or //create-new-vfiler/text() = 'true'">
          <xsl:if test="string-length(//online-migration/text())&gt;0">
            <online-migration>
              <xsl:value-of select="//online-migration/text()" disable-output-escaping="no" />
            </online-migration>
          </xsl:if>
        </xsl:if>
        <xsl:if test="string-length('${target}') &gt; 0 and string-length('${username}') &gt;  0">
          <targets>
            <target>
              <host>${target}</host>
              <user-name>${username}</user-name>
              <password>
                <xsl:attribute name="encryption-type">
                  <xsl:value-of select="'${etype}'" disable-output-escaping="no" />
                </xsl:attribute>
                <xsl:value-of select="'${password}'" disable-output-escaping="no" />
              </password>
              <xsl:if test="string-length('${protocol}') &gt;0">
                <protocol>${protocol}</protocol>
              </xsl:if>
              <xsl:if test="string-length('${port}') &gt;0">
                <port>${port}</port>
              </xsl:if>
            </target>
          </targets>
        </xsl:if>
      </item>
    </items>
  </xsl:template>
</xsl:stylesheet>]]></stylesheet>
                      </xslt-stylesheet>
                    </assignment>
                    <meta>
                      <documentation />
                      <checkpoint>false</checkpoint>
                    </meta>
                    <location>:switch[1]:sequence[2]:switch[1]:sequence[2]:assign[1]</location>
                  </assign>
                  <call-process>
                    <process-name>:AO-AD-NetAPP_Storage:Perform Action</process-name>
                    <parameters>
                      <input>
                        <from>module configuration items</from>
                        <to>adapter name</to>
                        <xpath-expression>
                          <xpath-replacement-tokens>
                            <replacement-token name="configuration name">
                              <input global="false">
                                <from>configuration name</from>
                              </input>
                            </replacement-token>
                          </xpath-replacement-tokens>
                          <xpath><![CDATA[//$[configuration name]/Adapter/text()]]></xpath>
                        </xpath-expression>
                      </input>
                      <input>
                        <from>module configuration items</from>
                        <to>version</to>
                        <xpath-expression>
                          <xpath-replacement-tokens>
                            <replacement-token name="configuration name">
                              <input global="false">
                                <from>configuration name</from>
                              </input>
                            </replacement-token>
                          </xpath-replacement-tokens>
                          <xpath><![CDATA[//$[configuration name]/Version/text()]]></xpath>
                        </xpath-expression>
                      </input>
                      <input>
                        <value>provision-nas-dataset</value>
                        <to>item type</to>
                      </input>
                      <input>
                        <from>items</from>
                        <to>items</to>
                      </input>
                      <output>
                        <from>adapter response</from>
                        <to>adapter response</to>
                      </output>
                    </parameters>
                    <meta>
                      <documentation />
                      <run-mode-handling>
                        <run-mode>OCP</run-mode>
                        <allow-step-into>false</allow-step-into>
                      </run-mode-handling>
                      <checkpoint>false</checkpoint>
                    </meta>
                    <after-execution>
                      <console-output>
                        <type>INFO</type>
                        <summary>
                          <concat>
                            <input>
                              <value></value>
                            </input>
                          </concat>
                        </summary>
                        <detail>
                          <concat>
                            <input>
                              <value></value>
                            </input>
                          </concat>
                        </detail>
                      </console-output>
                    </after-execution>
                    <location>:switch[1]:sequence[2]:switch[1]:sequence[2]:call-process[1]</location>
                  </call-process>
                  <switch>
                    <meta>
                      <documentation />
                      <run-mode-handling>
                        <run-mode>OCP</run-mode>
                        <allow-step-into>true</allow-step-into>
                      </run-mode-handling>
                      <checkpoint>false</checkpoint>
                    </meta>
                    <execute-all-applicable-cases>false</execute-all-applicable-cases>
                    <default>
                      <sequence>
                        <assign>
                          <assignment>
                            <output>
                              <to>success status</to>
                              <value>failure</value>
                            </output>
                          </assignment>
                          <assignment>
                            <document>
                              <input>
                                <from>adapter response</from>
                              </input>
                            </document>
                            <result>
                              <output>
                                <to>status message</to>
                              </output>
                            </result>
                            <xpath-expression>
                              <xpath-replacement-tokens />
                              <xpath><![CDATA[concat("Errorr:  ", //error)]]></xpath>
                            </xpath-expression>
                          </assignment>
                          <meta>
                            <documentation />
                            <checkpoint>false</checkpoint>
                          </meta>
                          <location>:switch[1]:sequence[2]:switch[1]:sequence[2]:switch[1]:sequence[1]:assign[1]</location>
                        </assign>
                      </sequence>
                    </default>
                    <case>
                      <condition>
                        <document>
                          <input>
                            <from>adapter response</from>
                          </input>
                        </document>
                        <xpath-expression>
                          <xpath-replacement-tokens />
                          <xpath><![CDATA[string(//response/metadata/status)!='error']]></xpath>
                        </xpath-expression>
                      </condition>
                      <sequence>
                        <console-output>
                          <type>INFO</type>
                          <summary>
                            <concat>
                              <input>
                                <value></value>
                              </input>
                            </concat>
                          </summary>
                          <detail>
                            <concat>
                              <input>
                                <value></value>
                              </input>
                            </concat>
                          </detail>
                        </console-output>
                        <call-process>
                          <process-name>:AutoPilot-OA-Storage_Management:Utilities:Get Job Response</process-name>
                          <parameters>
                            <input>
                              <from>configuration name</from>
                              <to>configuration name</to>
                            </input>
                            <input>
                              <from>adapter response</from>
                              <to>adapter response</to>
                            </input>
                            <input>
                              <from>target</from>
                              <to>target</to>
                            </input>
                            <input>
                              <from>username</from>
                              <to>username</to>
                            </input>
                            <input>
                              <from>password</from>
                              <to>password</to>
                            </input>
                            <input>
                              <from>encryption type</from>
                              <to>encryption type</to>
                            </input>
                            <input>
                              <from>protocol</from>
                              <to>protocol</to>
                            </input>
                            <input>
                              <from>port</from>
                              <to>port</to>
                            </input>
                            <output>
                              <from>status message</from>
                              <to>status message</to>
                            </output>
                            <output>
                              <from>success status</from>
                              <to>success status</to>
                            </output>
                            <output>
                              <from>find job status response</from>
                              <to>find job status response</to>
                            </output>
                          </parameters>
                          <meta>
                            <documentation />
                            <run-mode-handling>
                              <run-mode>OCP</run-mode>
                              <allow-step-into>false</allow-step-into>
                            </run-mode-handling>
                            <checkpoint>false</checkpoint>
                          </meta>
                          <after-execution>
                            <console-output>
                              <type>INFO</type>
                              <summary>
                                <concat>
                                  <input>
                                    <value></value>
                                  </input>
                                </concat>
                              </summary>
                              <detail>
                                <concat>
                                  <input>
                                    <value></value>
                                  </input>
                                </concat>
                              </detail>
                            </console-output>
                          </after-execution>
                          <location>:switch[1]:sequence[2]:switch[1]:sequence[2]:switch[1]:sequence[2]:call-process[1]</location>
                        </call-process>
                        <switch>
                          <meta>
                            <documentation />
                            <run-mode-handling>
                              <run-mode>OCP</run-mode>
                              <allow-step-into>true</allow-step-into>
                            </run-mode-handling>
                            <checkpoint>false</checkpoint>
                          </meta>
                          <execute-all-applicable-cases>false</execute-all-applicable-cases>
                          <default>
                            <sequence>
                              <assign>
                                <assignment>
                                  <output>
                                    <to>success status</to>
                                    <value>failure</value>
                                  </output>
                                </assignment>
                                <assignment>
                                  <document>
                                    <input>
                                      <from>adapter response</from>
                                    </input>
                                  </document>
                                  <result>
                                    <output>
                                      <to>status message</to>
                                    </output>
                                  </result>
                                  <xpath-expression>
                                    <xpath-replacement-tokens />
                                    <xpath><![CDATA[concat("Error:  ", "Create job failed")]]></xpath>
                                  </xpath-expression>
                                </assignment>
                                <meta>
                                  <documentation />
                                  <checkpoint>false</checkpoint>
                                </meta>
                                <location>:switch[1]:sequence[2]:switch[1]:sequence[2]:switch[1]:sequence[2]:switch[1]:sequence[1]:assign[1]</location>
                              </assign>
                            </sequence>
                          </default>
                          <case applies-if-any-condition-true="false">
                            <condition>
                              <document>
                                <input>
                                  <from>success status</from>
                                </input>
                              </document>
                              <xpath-expression>
                                <xpath-replacement-tokens />
                                <xpath><![CDATA[string(.) = 'success']]></xpath>
                              </xpath-expression>
                            </condition>
                            <condition>
                              <document>
                                <input>
                                  <from>find job status response</from>
                                </input>
                              </document>
                              <xpath-expression>
                                <xpath-replacement-tokens />
                                <xpath><![CDATA[string(//job-overall-status/text()) !="failed"  and string(//job-overall-status/text())!= 'running_with_failures']]></xpath>
                              </xpath-expression>
                            </condition>
                            <sequence>
                              <console-output>
                                <type>INFO</type>
                                <summary>
                                  <concat>
                                    <input>
                                      <value></value>
                                    </input>
                                  </concat>
                                </summary>
                                <detail>
                                  <concat>
                                    <input>
                                      <value></value>
                                    </input>
                                  </concat>
                                </detail>
                              </console-output>
                              <assign>
                                <assignment>
                                  <document>
                                    <input>
                                      <from>find job status response</from>
                                    </input>
                                  </document>
                                  <result>
                                    <output>
                                      <to>output</to>
                                    </output>
                                  </result>
                                  <xpath-expression>
                                    <xpath-replacement-tokens />
                                    <xpath><![CDATA[//dp-job-info]]></xpath>
                                  </xpath-expression>
                                </assignment>
                                <meta>
                                  <documentation />
                                  <checkpoint>false</checkpoint>
                                </meta>
                                <location>:switch[1]:sequence[2]:switch[1]:sequence[2]:switch[1]:sequence[2]:switch[1]:sequence[2]:assign[1]</location>
                              </assign>
                            </sequence>
                          </case>
                          <location>:switch[1]:sequence[2]:switch[1]:sequence[2]:switch[1]:sequence[2]:switch[1]</location>
                        </switch>
                      </sequence>
                    </case>
                    <location>:switch[1]:sequence[2]:switch[1]:sequence[2]:switch[1]</location>
                  </switch>
                </sequence>
              </case>
              <location>:switch[1]:sequence[2]:switch[1]</location>
            </switch>
          </sequence>
        </case>
        <location>:switch[1]</location>
      </switch>
    </sequence>
    <meta>
      <expose-to>
        <consumer>RULE</consumer>
        <consumer>SCHEDULE</consumer>
        <consumer>SOAP</consumer>
      </expose-to>
      <documentation>
        <description>NetApp: Creates a File System

Dynamic targeting:Ability to communicate with multiple DFM servers which are not configured under the adapter configuration. NetApp action can be invoked using dynamic targeting / without dynamic targeting.

When Dynamic targeting is used : target would be Host name or IP address of server on which NetApp DataFabric Manager is running. It is mandatory send all the required parameters:
 username, 
 password , 
 encyption type  when using dynamic targeting.

When Dynamic targeting is not used : Designates a specific target (name of the DFM server where the operation will be performed) that has been defined in the adapter configuration. Valid value- Same value that has been specified for the name attribute of 'config' element in the adapter configuration . If this tag is left empty the request will be executed on the first defined adapter configuration.

for e.g for the  adapter config below , target would be 02.
&lt;configs&gt;
  &lt;config name="02"&gt;
    &lt;target&gt;172.19.224.103&lt;/target&gt;
    &lt;user-name&gt;root&lt;/user-name&gt;
    &lt;password&gt;bmcbmc&lt;/password&gt;
    &lt;protocol&gt;http&lt;/protocol&gt;
    &lt;port&gt;8088&lt;/port&gt;
  &lt;/config&gt;
&lt;/configs&gt;



</description>
        <version></version>
      </documentation>
      <peer-location>
        <location>any</location>
      </peer-location>
      <record-metrics>false</record-metrics>
      <process-id>e1f07f25-64fb-3c06-8081-5609fe413721</process-id>
      <author>admin</author>
      <category></category>
      <status></status>
      <keywords></keywords>
      <systems></systems>
      <last-modified-by>admin</last-modified-by>
      <last-modified>1311153162083</last-modified>
    </meta>
  </process-def>
</process>