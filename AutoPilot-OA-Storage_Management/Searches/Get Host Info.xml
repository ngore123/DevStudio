<process draft="false" dev-studio-version="7.6.02.01">
  <process-def name=":AutoPilot-OA-Storage_Management:Searches:Get Host Info">
    <parameters>
      <input global="false" required="true">
        <description>Name of the storage vendor.  Supported vendors: NetApp</description>
        <from>configuration name</from>
        <to>configuration name</to>
      </input>
      <input global="false" required="false">
        <description>[Required]

NetApp:

Finds details of Host / Hosts which satisfy the search criteria.

Sample XML:
  &lt;storage&gt;
	&lt;expand-filer-to-vfilers&gt;true&lt;/expand-filer-to-vfilers&gt;
	&lt;host-dp-filter-info&gt;
          &lt;is-dp-ignored&gt;false&lt;/is-dp-ignored&gt;
          &lt;is-in-dataset&gt;false&lt;/is-in-dataset&gt;
          &lt;is-in-resourcepool&gt;false&lt;/is-in-resourcepool&gt;
          &lt;is-snapmirrored-only&gt;false&lt;/is-snapmirrored-only&gt;
          &lt;is-snapvault-primary-only&gt;false&lt;/is-snapvault-primary-only&gt;
          &lt;is-snapvault-secondary-only&gt;false&lt;/is-snapvault-secondary-only&gt;
          &lt;is-unprotected&gt;false&lt;/is-unprotected&gt;
      &lt;/host-dp-filter-info&gt;
     &lt;host-types&gt;
		&lt;host-type&gt;filer&lt;/host-type&gt;
	&lt;/host-types&gt;
      &lt;include-is-available&gt;false&lt;/include-is-available&gt;
      &lt;include-migration-info&gt;false&lt;/include-migration-info&gt;
      &lt;include-perf-space-details&gt;false&lt;/include-perf-space-details&gt;
      &lt;is-direct-member-only&gt;false&lt;/is-direct-member-only&gt;
      &lt;license-filter&gt;nfs&lt;/license-filter&gt;
      &lt;object-management-filter&gt;node&lt;/object-management-filter&gt;
      &lt;object-name-or-id&gt;object_name_1&lt;/object-name-or-id&gt;
      &lt;query-host&gt;false&lt;/query-host&gt;
     	 &lt;vfiler-ipspace&gt;ipspace3&lt;/vfiler-ipspace&gt;
  &lt;/storage&gt;

Parameters Description:


host-dp-filter-info [Optional]
	This is the parent tag which holds search parameter values specific to data protection policy.

expand-filer-to-vfilers[Optional]
	This is a boolean field. If true and object-name-or-id is a storage system and host-types contains "vfiler" then all vFiler units belonging to the storage system are returned else it is ignored. Default value is false.

is-dp-ignored [Optional]
	This is a boolean field. If true, only list aggregates that have been set to be ignored for purposes of data protection. If false, only list aggregates that have not been set to be ignored for purposes of data protection. If not specified, list all aggregates without taking into account whether they have been ignored or not.

is-in-dataset [Optional]
	This is a boolean field. If true, only hosts in a dataset are listed Default is false.

is-in-resourcepool [Optional]
	This is a boolean field. If true, only hosts in a resource pool are listed Default is false.

is-snapmirrored-only [Optional]
	This is a boolean field. If true, only SnapMirror hosts are listed. Host could be either a source or a destination for SnapMirror. Default is false.

is-snapvault-primary-only [Optional]
	This is a boolean field. If true, only SnapVault primary systems are listed. Default is false.

is-snapvault-secondary-only [Optional]
	This is a boolean field. If true, only SnapVault secondary systems are listed. Default is false.

is-unprotected [Optional]
	This is a boolean field. If true, only list hosts which are not protected, which means it is:
		1. not in any resource pool, and
		2. not a member of a node in a dataset with protection policy assigned.
If false or not set, list all hosts.


host-types [Optional]
	This is a parent tag that holds different host-type values which need to be included in the search. A host-types tag can hold multiple host-type values

host-type [Optional]
	This holds values of the host-type which need to be included in the search. 
Valid values are : filer, vfiler, cluster, vserver, agent, ossv, and switch

Multiple host-type values may be specified in &lt;host-types&gt; tag as follows :
	&lt;host-types&gt;
		&lt;host-type&gt;filer&lt;/host-type&gt;
		&lt;host-type&gt;cluster&lt;/host-type&gt;
		.
		.
		....etc.
	&lt;/host-types&gt;

include-is-available [Optional]
	This is a boolean field. If true, the is-available status is calculated for each host which may make the call to this zapi take much longer.

include-migration-info [Optional]
	This is a boolean field. If true, return the migration information for the migrating vFiler units. Default value is false.

include-perf-space-details [Optional]
	This is a boolean field. If true, return the details of space consumed by performance data of the host. Default value is false.

is-direct-member-only [Optional]
	This is a boolean field. If true, only return the hosts that are direct members of the specified resource group. Default value is false. This field is meaningful only if a resource group name or id is given for the object-name-or-id field.

license-filter [Optional]
	Filter for listing storage systems based on services licensed.  Only those storage systems which have all the licenses installed as specified in input are listed.

Valid values: "nfs", "cifs", "iscsi", "fcp", "multistore", "a_sis", "snapmirror_sync".

object-management-filter [Optional]
	Filter the object based on the Data ONTAP interface that provides complete management for the object i.e. ONTAP CLIs, SNMP, ONTAPI etc. If no filter is supplied, all objects will be considered.

Valid Values : 
		"node" - For objects manageable by node management interface
		"cluster" - For objects manageable by cluster management interface

object-name-or-id [Optional]
	Name or identifier of an object to list hosts for. The allowed object types for this argument are:
		Resource Group
		Resource Pool
		Dataset
		Storage Set
		Host
		Aggregate
		Volume
		Qtree
		OSSV Directory
	If object-name-or-id identifies a host, that single host will be returned. If object-name-or-id resolves to more than one hosts, all of them will be returned. If no object-name-or-id is provided, all hosts will be listed. Host Agents and OSSV agents may use a subdomain to identify themselves, unlike other host types. If the host-types element includes "agent" or "ossv" all subdomains beginning with the host name will be checked.

query-host [Optional]
	This is a boolean field. If true, query the host to update the database and refresh the values returned in the following elements :
		host-status
		is-agent-ossv-enabled
		is-snapvault-enabled
		is-ndmp-enabled
		is-snapmirror-enabled
		snapvault-access-specifier
		ndmp-access-specifier
		snapmirror-access-specifier
		host-communication-status
		host-credentials-status
		ndmp-communication-status
		ndmp-credentials-status
		ndmp-agent-status
		is-snapvault-primary
		is-snapvault-secondary
		is-snapmirror-host
		is-unix-primary
		is-linux-primary
		is-windows-primary
		is-windows-ofm-primary
		is-nearstore

	Errors in communicating with or authenticating to the host will prevent updating all the elements that are supported.

vfiler-ipspace [Optional]
	Filter for listing vFiler units, if specified, only the vFiler units that belong to the ipspace are listed. Applicable only for host-type "vfiler".

</description>
        <from>storage</from>
        <to>storage</to>
      </input>
      <input global="false" required="false">
        <description>[optional]
EMC:
- Specifies the storage system name from which the information has to be collected.
	- Valid value: Any valid string.
	- Default value: None.
</description>
        <from>storage system name</from>
        <to>storage system name</to>
      </input>
      <input global="false" required="false">
        <description>NetApp:
[required if dynamic targeting is used otherwise optional] 

Designates a specific target (name of the DFM server where the operation will be performed) that has been defined in the adapter configuration. Valid value- Same value that has been specified for the name attribute of 'config' element in the adapter configuration . If this tag is left empty the request will be executed on the first defined adapter configuration.
for e.g for the  adapter config below , target would be 02.
&lt;configs&gt;
  &lt;config name="02"&gt;
    &lt;target&gt;172.19.224.103&lt;/target&gt;
    &lt;user-name&gt;root&lt;/user-name&gt;
    &lt;password&gt;bmcbmc&lt;/password&gt;
    &lt;protocol&gt;http&lt;/protocol&gt;
    &lt;port&gt;8088&lt;/port&gt;
  &lt;/config&gt;
&lt;/configs&gt;

Dynamic targeting:Host name or IP address of server on which NetApp DataFabric Manager is running

EMC
[optional]
	- Specifies the connection information for EMC SMI-S Provider.
	- Valid value: The value specified for &lt;target&gt; element must be same as the value that has been specified for the name attribute of &lt;config&gt; element in the adapter configuration. You can leave this tag empty. In this case the request will be executed on all the defined adapter configuration.
	- Default value: All defined adapter configuration.</description>
        <from>target</from>
        <to>target</to>
      </input>
      <input global="false" required="false">
        <description>NetApp:
[required only if dynamic targeting is used]

NetApp DataFabric Manager login username. 

EMC:	
[optional]
- Specifies the login name used to connect to  EMC SMI-S Provider. The 'username' specified in adapter request overrides the value specified in adapter configuration.
	- Valid value: None.
	- Default Value: None.</description>
        <from>username</from>
        <to>username</to>
      </input>
      <input global="false" required="false">
        <description>NetApp:
[required only if dynamic targeting is used]
NetApp DataFabric Manager login password.

EMC:
[optional]- Specifies the password used to connect to  EMC SMI-S Provider. The 'password' specified in adapter request overrides the value specified in adapter configuration.
	- Valid value: None.
	- Default Value: None.</description>
        <from>password</from>
        <to>password</to>
      </input>
      <input global="false" required="false">
        <description>NetApp:
[required only if dynamic targeting is used] 

encryption type[Conditional] : 
Specified only when password parameter is mentioned . 

You can encrypt the password by specifying the encryption type attribute. 
Valid Values : Base64 , plain
</description>
        <from>encryption type</from>
        <to>encryption type</to>
      </input>
      <input global="false" required="false">
        <description>NetApp:
[Optional and used when dynamic targeting] 
Communication protocol used by adapter. Valid value is http or https. Default value is http. 

EMC:
[optional]
- Specifies the protocol used to connect to  EMC SMI-S Provider. The 'protocol' specified in adapter request overrides the value specified in adapter configuration.
	- Valid value: HTTPS or HTTP
	- Default Value: None.</description>
        <from>protocol</from>
        <to>protocol</to>
      </input>
      <input global="false" required="false">
        <description>NetApp: 
[Optional and used when dynamic targeting] Port on which NetApp DataFabric Manager is enabled. Default value is 8088 for http protocol and 8488 for https protocol. 

EMC:
[optional]
- Specifies the port number used to connect to  EMC SMI-S Provider. The 'port' specified in adapter request overrides the value specified in adapter configuration.
	- Valid value: A valid numeric value. 
	- Default Value: None.</description>
        <from>port</from>
        <to>port</to>
      </input>
      <input global="false" required="false">
        <description>[optional]
EMC:
- Specifies the time in seconds after which the attempt to connect to EMC SMI-S provider times out. The 'timeout-secs' specified in adapter request overrides the value specified in adapter configuration.
	- Valid value: A numeric value which specifies the time in seconds. 
	- Default Value: 180, if no 'timeout-secs' is provided in adapter configuration. 
</description>
        <from>time out secs</from>
        <to>time out secs</to>
      </input>
      <output global="false" required="false">
        <description>String Value - Indicates whether or not the process completed successfully. 

Valid values: success or failure</description>
        <to>success status</to>
        <from>success status</from>
      </output>
      <output global="false" required="false">
        <description>String Value - A process specific explanation for the value of success status in case of failure.</description>
        <to>status message</to>
        <from>status message</from>
      </output>
      <output global="false" required="false">
        <description>String or XML value - Contains required output, incase of success.</description>
        <to>output</to>
        <from>output</from>
      </output>
    </parameters>
    <access />
    <sequence>
      <call-process>
        <process-name>:AutoPilot-OA-Storage_Management:Utilities:Extract Configuration Data</process-name>
        <parameters>
          <input>
            <from>configuration name</from>
            <to>configuration name</to>
          </input>
          <output>
            <from>success status</from>
            <to>success status</to>
          </output>
          <output>
            <from>adapter</from>
            <to>adapter</to>
          </output>
          <output>
            <from>version</from>
            <to>version</to>
          </output>
        </parameters>
        <meta>
          <documentation />
          <run-mode-handling>
            <run-mode>OCP</run-mode>
            <allow-step-into>false</allow-step-into>
          </run-mode-handling>
          <checkpoint>false</checkpoint>
        </meta>
        <after-execution>
          <console-output>
            <type>INFO</type>
            <summary>
              <concat>
                <input>
                  <value></value>
                </input>
              </concat>
            </summary>
            <detail>
              <concat>
                <input>
                  <value></value>
                </input>
              </concat>
            </detail>
          </console-output>
        </after-execution>
        <location>:call-process[1]</location>
      </call-process>
      <switch>
        <meta>
          <documentation />
          <run-mode-handling>
            <run-mode>OCP</run-mode>
            <allow-step-into>true</allow-step-into>
          </run-mode-handling>
          <checkpoint>false</checkpoint>
        </meta>
        <execute-all-applicable-cases>false</execute-all-applicable-cases>
        <default>
          <sequence>
            <assign>
              <assignment>
                <output>
                  <to>success status</to>
                  <value>failure</value>
                </output>
              </assignment>
              <assignment>
                <document>
                  <input>
                    <from>configuration name</from>
                  </input>
                </document>
                <result>
                  <output>
                    <to>status message</to>
                  </output>
                </result>
                <xpath-expression>
                  <xpath-replacement-tokens />
                  <xpath><![CDATA[concat("Unknown configuration name ",.)]]></xpath>
                </xpath-expression>
              </assignment>
              <meta>
                <documentation />
                <checkpoint>false</checkpoint>
              </meta>
              <location>:switch[1]:sequence[1]:assign[1]</location>
            </assign>
          </sequence>
        </default>
        <case>
          <condition>
            <document>
              <input>
                <from>configuration name</from>
              </input>
            </document>
            <xpath-expression>
              <xpath-replacement-tokens />
              <xpath><![CDATA[text()= 'NetApp']]></xpath>
            </xpath-expression>
          </condition>
          <sequence>
            <console-output>
              <type>INFO</type>
              <summary>
                <concat>
                  <input>
                    <value></value>
                  </input>
                </concat>
              </summary>
              <detail>
                <concat>
                  <input>
                    <value></value>
                  </input>
                </concat>
              </detail>
            </console-output>
            <assign>
              <assignment>
                <document>
                  <input>
                    <from>storage</from>
                  </input>
                </document>
                <result>
                  <output>
                    <to>items</to>
                  </output>
                </result>
                <xslt-stylesheet>
                  <stylesheet-replacement-tokens>
                    <replacement-token name="target">
                      <input global="false">
                        <from>target</from>
                      </input>
                    </replacement-token>
                    <replacement-token name="username">
                      <input global="false">
                        <from>username</from>
                      </input>
                    </replacement-token>
                    <replacement-token name="password">
                      <input global="false">
                        <from>password</from>
                      </input>
                    </replacement-token>
                    <replacement-token name="protocol">
                      <input global="false">
                        <from>protocol</from>
                      </input>
                    </replacement-token>
                    <replacement-token name="port">
                      <input global="false">
                        <from>port</from>
                      </input>
                    </replacement-token>
                    <replacement-token name="etype">
                      <input global="false">
                        <from>encryption type</from>
                      </input>
                    </replacement-token>
                  </stylesheet-replacement-tokens>
                  <stylesheet><![CDATA[<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="1.0">
  <xsl:output indent="no" />
  <xsl:template match="/">
    <items>
      <item>
        <xsl:if test="string-length(//expand-filer-to-vfilers/text())&gt;0">
          <expand-filer-to-vfilers>
            <xsl:value-of select="//expand-filer-to-vfilers" disable-output-escaping="no" />
          </expand-filer-to-vfilers>
        </xsl:if>
        <xsl:if test=" name(//host-dp-filter-info) ">
          <host-dp-filter-info>
            <xsl:if test="string-length(//is-dp-ignored/text())&gt;0">
              <is-dp-ignored>
                <xsl:value-of select="//is-dp-ignored" disable-output-escaping="no" />
              </is-dp-ignored>
            </xsl:if>
            <xsl:if test="string-length(//is-in-dataset/text())&gt;0">
              <is-in-dataset>
                <xsl:value-of select="//is-in-dataset" disable-output-escaping="no" />
              </is-in-dataset>
            </xsl:if>
            <xsl:if test="string-length(//is-in-resourcepool/text())&gt;0">
              <is-in-resourcepool>
                <xsl:value-of select="//is-in-resourcepool" disable-output-escaping="no" />
              </is-in-resourcepool>
            </xsl:if>
            <xsl:if test="string-length(//is-snapmirrored-only/text())&gt;0">
              <is-snapmirrored-only>
                <xsl:value-of select="//is-snapmirrored-only" disable-output-escaping="no" />
              </is-snapmirrored-only>
            </xsl:if>
            <xsl:if test="string-length(//is-snapvault-primary-only/text())&gt;0">
              <is-snapvault-primary-only>
                <xsl:value-of select="//is-snapvault-primary-only" disable-output-escaping="no" />
              </is-snapvault-primary-only>
            </xsl:if>
            <xsl:if test="string-length(//is-snapvault-secondary-only/text())&gt;0">
              <is-snapvault-secondary-only>
                <xsl:value-of select="//is-snapvault-secondary-only" disable-output-escaping="no" />
              </is-snapvault-secondary-only>
            </xsl:if>
            <xsl:if test="string-length(//is-unprotected/text())&gt;0">
              <is-unprotected>
                <xsl:value-of select="//is-unprotected" disable-output-escaping="no" />
              </is-unprotected>
            </xsl:if>
          </host-dp-filter-info>
        </xsl:if>
        <xsl:if test=" name(//host-types) ">
          <xsl:copy-of select="//host-types" />
        </xsl:if>
        <xsl:if test="string-length(//include-is-available/text())&gt;0">
          <include-is-available>
            <xsl:value-of select="//include-is-available" disable-output-escaping="no" />
          </include-is-available>
        </xsl:if>
        <xsl:if test="string-length(//include-migration-info/text())&gt;0">
          <include-migration-info>
            <xsl:value-of select="//include-migration-info" disable-output-escaping="no" />
          </include-migration-info>
        </xsl:if>
        <xsl:if test="string-length(//include-perf-space-details/text())&gt;0">
          <include-perf-space-details>
            <xsl:value-of select="//include-perf-space-details" disable-output-escaping="no" />
          </include-perf-space-details>
        </xsl:if>
        <xsl:if test="string-length(//is-direct-member-only/text())&gt;0">
          <is-direct-member-only>
            <xsl:value-of select="//is-direct-member-only" disable-output-escaping="no" />
          </is-direct-member-only>
        </xsl:if>
        <xsl:if test="string-length(//license-filter/text())&gt;0">
          <license-filter>
            <xsl:value-of select="//license-filter" disable-output-escaping="no" />
          </license-filter>
        </xsl:if>
        <xsl:if test="string-length(//object-management-filter/text())&gt;0">
          <object-management-filter>
            <xsl:value-of select="//object-management-filter" disable-output-escaping="no" />
          </object-management-filter>
        </xsl:if>
        <xsl:if test="string-length(//object-name-or-id/text())&gt;0">
          <object-name-or-id>
            <xsl:value-of select="//object-name-or-id" disable-output-escaping="no" />
          </object-name-or-id>
        </xsl:if>
        <xsl:if test="string-length(//query-host/text())&gt;0">
          <query-host>
            <xsl:value-of select="//query-host" disable-output-escaping="no" />
          </query-host>
        </xsl:if>
        <xsl:if test="string-length(//vfiler-ipspace/text())&gt;0">
          <vfiler-ipspace>
            <xsl:value-of select="//vfiler-ipspace" disable-output-escaping="no" />
          </vfiler-ipspace>
        </xsl:if>
        <xsl:if test="string-length('${target}')&gt;0 and string-length('${username}') =0">
          <target>
            <xsl:value-of select="'${target}'" disable-output-escaping="no" />
          </target>
        </xsl:if>
        <xsl:if test="string-length('${target}')&gt;0 and string-length('${username}') &gt; 0">
          <targets>
            <target>
              <host>
                <xsl:value-of select="'${target}'" disable-output-escaping="no" />
              </host>
              <user-name>${username}</user-name>
              <password>
                <xsl:attribute name="encryption-type">
                  <xsl:value-of select="'${etype}'" disable-output-escaping="no" />
                </xsl:attribute>
                <xsl:value-of select="'${password}'" disable-output-escaping="no" />
              </password>
              <xsl:if test="string-length('${protocol}')&gt;0">
                <protocol>${protocol}</protocol>
              </xsl:if>
              <xsl:if test="string-length('${port}')&gt;0">
                <port>${port}</port>
              </xsl:if>
            </target>
          </targets>
        </xsl:if>
      </item>
    </items>
  </xsl:template>
</xsl:stylesheet>]]></stylesheet>
                </xslt-stylesheet>
              </assignment>
              <meta>
                <documentation />
                <checkpoint>false</checkpoint>
              </meta>
              <location>:switch[1]:sequence[2]:assign[1]</location>
            </assign>
            <call-process>
              <process-name>:AO-AD-NetAPP_Storage:v4.0:Host:Find Host</process-name>
              <parameters>
                <input>
                  <from>adapter</from>
                  <to>adapter name</to>
                </input>
                <input>
                  <from>items</from>
                  <to>items</to>
                </input>
                <output>
                  <from>adapter response</from>
                  <to>adapter response</to>
                </output>
              </parameters>
              <meta>
                <documentation />
                <run-mode-handling>
                  <run-mode>OCP</run-mode>
                  <allow-step-into>false</allow-step-into>
                </run-mode-handling>
                <checkpoint>false</checkpoint>
              </meta>
              <after-execution>
                <console-output>
                  <type>INFO</type>
                  <summary>
                    <concat>
                      <input>
                        <value></value>
                      </input>
                    </concat>
                  </summary>
                  <detail>
                    <concat>
                      <input>
                        <value></value>
                      </input>
                    </concat>
                  </detail>
                </console-output>
              </after-execution>
              <location>:switch[1]:sequence[2]:call-process[1]</location>
            </call-process>
            <switch>
              <meta>
                <documentation />
                <run-mode-handling>
                  <run-mode>OCP</run-mode>
                  <allow-step-into>true</allow-step-into>
                </run-mode-handling>
                <checkpoint>false</checkpoint>
              </meta>
              <execute-all-applicable-cases>false</execute-all-applicable-cases>
              <default>
                <sequence>
                  <assign>
                    <assignment>
                      <output>
                        <to>success status</to>
                        <value>failure</value>
                      </output>
                    </assignment>
                    <assignment>
                      <document>
                        <input>
                          <from>adapter response</from>
                        </input>
                      </document>
                      <result>
                        <output>
                          <to>status message</to>
                        </output>
                      </result>
                      <xpath-expression>
                        <xpath-replacement-tokens />
                        <xpath><![CDATA[//response/metadata/error/text()]]></xpath>
                      </xpath-expression>
                    </assignment>
                    <meta>
                      <documentation />
                      <checkpoint>false</checkpoint>
                    </meta>
                    <location>:switch[1]:sequence[2]:switch[1]:sequence[1]:assign[1]</location>
                  </assign>
                </sequence>
              </default>
              <case>
                <condition>
                  <document>
                    <input>
                      <from>adapter response</from>
                    </input>
                  </document>
                  <xpath-expression>
                    <xpath-replacement-tokens />
                    <xpath><![CDATA[string(//response/metadata/status/text())!= 'error']]></xpath>
                  </xpath-expression>
                </condition>
                <sequence>
                  <console-output>
                    <type>INFO</type>
                    <summary>
                      <concat>
                        <input>
                          <value></value>
                        </input>
                      </concat>
                    </summary>
                    <detail>
                      <concat>
                        <input>
                          <value></value>
                        </input>
                      </concat>
                    </detail>
                  </console-output>
                  <assign>
                    <assignment>
                      <output>
                        <to>success status</to>
                        <value>success</value>
                      </output>
                    </assignment>
                    <assignment>
                      <document>
                        <input>
                          <from>adapter response</from>
                        </input>
                      </document>
                      <result>
                        <output>
                          <to>output</to>
                        </output>
                      </result>
                      <xslt-stylesheet>
                        <stylesheet-replacement-tokens />
                        <stylesheet><![CDATA[<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="1.0">
  <xsl:output indent="no" />
  <xsl:template match="/">
    <output>
      <xsl:copy-of select="//host-info" />
    </output>
  </xsl:template>
</xsl:stylesheet>]]></stylesheet>
                      </xslt-stylesheet>
                    </assignment>
                    <meta>
                      <documentation />
                      <checkpoint>false</checkpoint>
                    </meta>
                    <location>:switch[1]:sequence[2]:switch[1]:sequence[2]:assign[1]</location>
                  </assign>
                </sequence>
              </case>
              <location>:switch[1]:sequence[2]:switch[1]</location>
            </switch>
          </sequence>
        </case>
        <case>
          <condition>
            <document>
              <input>
                <from>configuration name</from>
              </input>
            </document>
            <xpath-expression>
              <xpath-replacement-tokens />
              <xpath><![CDATA[string(.) = 'EMC']]></xpath>
            </xpath-expression>
          </condition>
          <sequence>
            <assign>
              <assignment>
                <document>
                  <input>
                    <from>target</from>
                  </input>
                </document>
                <result>
                  <output>
                    <to>items</to>
                  </output>
                </result>
                <xslt-stylesheet>
                  <stylesheet-replacement-tokens>
                    <replacement-token name="target">
                      <input global="false">
                        <from>target</from>
                      </input>
                    </replacement-token>
                    <replacement-token name="username">
                      <input global="false">
                        <from>username</from>
                      </input>
                    </replacement-token>
                    <replacement-token name="password">
                      <input global="false">
                        <from>password</from>
                      </input>
                    </replacement-token>
                    <replacement-token name="protocol">
                      <input global="false">
                        <from>protocol</from>
                      </input>
                    </replacement-token>
                    <replacement-token name="port">
                      <input global="false">
                        <from>port</from>
                      </input>
                    </replacement-token>
                    <replacement-token name="time out secs">
                      <input global="false">
                        <from>time out secs</from>
                      </input>
                    </replacement-token>
                    <replacement-token name="storage system name">
                      <input global="false">
                        <from>storage system name</from>
                      </input>
                    </replacement-token>
                  </stylesheet-replacement-tokens>
                  <stylesheet><![CDATA[<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="1.0">
  <xsl:output indent="no" />
  <xsl:template match="/">
    <items>
      <item>
        <xsl:if test="string-length('${target}')&gt;0">
          <target>
            <xsl:value-of select="'${target}'" disable-output-escaping="no" />
          </target>
        </xsl:if>
        <xsl:if test="string-length('${username}')&gt;0">
          <username>
            <xsl:value-of select="'${username}'" disable-output-escaping="no" />
          </username>
        </xsl:if>
        <xsl:if test="string-length('${password}')&gt;0">
          <password>
            <xsl:value-of select="'${password}'" disable-output-escaping="no" />
          </password>
        </xsl:if>
        <xsl:if test="string-length('${protocol}')&gt;0">
          <protocol>
            <xsl:value-of select="'${protocol}'" disable-output-escaping="no" />
          </protocol>
        </xsl:if>
        <xsl:if test="string-length('${port}')&gt;0">
          <port>
            <xsl:value-of select="'${port}'" disable-output-escaping="no" />
          </port>
        </xsl:if>
        <xsl:if test="string-length('${time out secs}')&gt;0">
          <timeout-secs>
            <xsl:value-of select="'${time out secs}'" disable-output-escaping="no" />
          </timeout-secs>
        </xsl:if>
        <xsl:if test="string-length('${storage system name}')&gt;0">
          <storage-system-name>
            <xsl:value-of select="'${storage system name}'" disable-output-escaping="no" />
          </storage-system-name>
        </xsl:if>
      </item>
    </items>
  </xsl:template>
</xsl:stylesheet>]]></stylesheet>
                </xslt-stylesheet>
              </assignment>
              <meta>
                <documentation />
                <checkpoint>false</checkpoint>
              </meta>
              <after-execution>
                <log>
                  <level>debug</level>
                  <parameters>
                    <input>
                      <from>items</from>
                    </input>
                  </parameters>
                </log>
              </after-execution>
              <location>:switch[1]:sequence[3]:assign[1]</location>
            </assign>
            <call-process>
              <process-name>:AO-AD-EMC_Storage:Find Items</process-name>
              <parameters>
                <input>
                  <from>adapter</from>
                  <to>adapter name</to>
                </input>
                <input>
                  <from>version</from>
                  <to>version</to>
                </input>
                <input>
                  <value>get-host</value>
                  <to>item type</to>
                </input>
                <input>
                  <from>items</from>
                  <to>items</to>
                </input>
                <output>
                  <from>adapter response</from>
                  <to>adapter response</to>
                </output>
              </parameters>
              <meta>
                <documentation />
                <run-mode-handling>
                  <run-mode>OCP</run-mode>
                  <allow-step-into>false</allow-step-into>
                </run-mode-handling>
                <checkpoint>false</checkpoint>
              </meta>
              <location>:switch[1]:sequence[3]:call-process[1]</location>
            </call-process>
            <switch>
              <meta>
                <documentation />
                <run-mode-handling>
                  <run-mode>OCP</run-mode>
                  <allow-step-into>true</allow-step-into>
                </run-mode-handling>
                <checkpoint>false</checkpoint>
              </meta>
              <execute-all-applicable-cases>false</execute-all-applicable-cases>
              <default>
                <sequence>
                  <assign>
                    <assignment>
                      <output>
                        <to>success status</to>
                        <value>failure</value>
                      </output>
                    </assignment>
                    <assignment>
                      <document>
                        <input>
                          <from>adapter response</from>
                        </input>
                      </document>
                      <result>
                        <output>
                          <to>status message</to>
                        </output>
                      </result>
                      <xpath-expression>
                        <xpath-replacement-tokens />
                        <xpath><![CDATA[string(//error-messages)]]></xpath>
                      </xpath-expression>
                    </assignment>
                    <meta>
                      <documentation />
                      <checkpoint>false</checkpoint>
                    </meta>
                    <location>:switch[1]:sequence[3]:switch[1]:sequence[1]:assign[1]</location>
                  </assign>
                </sequence>
              </default>
              <case>
                <condition>
                  <document>
                    <input>
                      <from>adapter response</from>
                    </input>
                  </document>
                  <xpath-expression>
                    <xpath-replacement-tokens />
                    <xpath><![CDATA[string(//response/metadata/status/text())='success']]></xpath>
                  </xpath-expression>
                </condition>
                <sequence>
                  <console-output>
                    <type>INFO</type>
                    <summary>
                      <concat>
                        <input>
                          <value></value>
                        </input>
                      </concat>
                    </summary>
                    <detail>
                      <concat>
                        <input>
                          <value></value>
                        </input>
                      </concat>
                    </detail>
                  </console-output>
                  <assign>
                    <assignment>
                      <output>
                        <to>success status</to>
                        <value>success</value>
                      </output>
                    </assignment>
                    <assignment>
                      <document>
                        <input>
                          <from>adapter response</from>
                        </input>
                      </document>
                      <result>
                        <output>
                          <to>output</to>
                        </output>
                      </result>
                      <xpath-expression>
                        <xpath-replacement-tokens />
                        <xpath><![CDATA[//output]]></xpath>
                      </xpath-expression>
                    </assignment>
                    <assignment>
                      <output>
                        <to>status message</to>
                        <value>Hosts found</value>
                      </output>
                    </assignment>
                    <meta>
                      <documentation />
                      <checkpoint>false</checkpoint>
                    </meta>
                    <location>:switch[1]:sequence[3]:switch[1]:sequence[2]:assign[1]</location>
                  </assign>
                </sequence>
              </case>
              <location>:switch[1]:sequence[3]:switch[1]</location>
            </switch>
          </sequence>
        </case>
        <location>:switch[1]</location>
      </switch>
    </sequence>
    <meta>
      <expose-to>
        <consumer>RULE</consumer>
        <consumer>SCHEDULE</consumer>
      </expose-to>
      <documentation>
        <description>EMC:This workflow will fetch information about all the host in a given storage system.
NetApp:This workflow retrives infomation about a given host if provided in input , otherwise it will retrive information of all the hosts.

NetApp:

Dynamic targeting:Ability to communicate with multiple DFM servers which are not configured under the adapter configuration. NetApp action can be invoked using dynamic targeting / without dynamic targeting.

When Dynamic targeting is used : target would be Host name or IP address of server on which NetApp DataFabric Manager is running. It is mandatory send all the required parameters:
 username, 
 password , 
 encyption type  when using dynamic targeting.

When Dynamic targeting is not used : Designates a specific target (name of the DFM server where the operation will be performed) that has been defined in the adapter configuration. Valid value- Same value that has been specified for the name attribute of 'config' element in the adapter configuration . If this tag is left empty the request will be executed on the first defined adapter configuration.

for e.g for the  adapter config below , target would be 02.
&lt;configs&gt;
  &lt;config name="02"&gt;
    &lt;target&gt;172.19.224.103&lt;/target&gt;
    &lt;user-name&gt;root&lt;/user-name&gt;
    &lt;password&gt;bmcbmc&lt;/password&gt;
    &lt;protocol&gt;http&lt;/protocol&gt;
    &lt;port&gt;8088&lt;/port&gt;
  &lt;/config&gt;
&lt;/configs&gt;

EMC:

Dynamic targeting: Ability to communicate with multiple SMIS-providers which are not configured under the adapter configuration. EMC action can be invoked using dynamic targeting / without dynamic targeting.

When Dynamic targeting is used : target would be Host name or IP address of server on which EMC SMIS provider is running. It is mandatory send all the required parameters:
username, 
 password , 
 protocol
port  when using dynamic targeting.

When Dynamic targeting is not used :  target specifies the connection information for EMC SMI-S Provider.
		       Valid value: The value specified for &lt;target&gt; element must be same as the value that has been specified for the name attribute of &lt;config&gt; element in the adapter configuration. You can leave this    tag empty. In this case the request will be executed on all the defined adapter configuration.
                                                - Default value: All defined adapter configuration. 
For e.g for the  adapter config below , target would be 03.
&lt;configs&gt;
  &lt;config name="03"&gt;
    &lt;target&gt; 10.128.28.59&lt;/target&gt;
    &lt;user-name&gt;emcuser&lt;/user-name&gt;
    &lt;password&gt;bmcbmc&lt;/password&gt;
    &lt;protocol&gt;https&lt;/protocol&gt;
    &lt;port&gt; 5989&lt;/port&gt;
  &lt;/config&gt;
&lt;/configs&gt;
</description>
        <version></version>
      </documentation>
      <peer-location>
        <location>any</location>
      </peer-location>
      <record-metrics>false</record-metrics>
      <process-id>c5c338fd-780b-372b-ab49-fb4de7b17bfe</process-id>
      <author>admin</author>
      <category></category>
      <status></status>
      <keywords></keywords>
      <systems></systems>
      <last-modified-by>admin</last-modified-by>
      <last-modified>1311153432033</last-modified>
    </meta>
  </process-def>
</process>