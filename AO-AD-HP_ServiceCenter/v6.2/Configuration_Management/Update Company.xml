<process draft="false" dev-studio-version="7.6.01.02">
  <process-def name=":AO-AD-HP_ServiceCenter:v6.2:Configuration_Management:Update Company">
    <parameters>
      <input global="false" required="false">
        <description>The name of the adapter to use to handle the request. Default adapter name: HPSCActor.</description>
        <from>adapter name</from>
        <to>adapter name</to>
      </input>
      <input global="false" required="true">
        <description>The items for the adapter request. This should be an XML document with a root element named "items" having a children "item" (to support multiple item support, we give "item" multiple times), which should contain the data necessary to execute the specific request. 


Update Company: 

This wrapper updates company record via the application. The application saves this record into its repository which can later be used.

Sample Item Xml: 

&lt;items&gt;
	&lt;item&gt;
		&lt;operation-name&gt;update-company&lt;/operation-name&gt;
		&lt;model&gt;
		  &lt;keys&gt;
			&lt;customer-i-d&gt;
			  &lt;value&gt;Tulip Customer&lt;/value&gt;
			  &lt;type&gt;String&lt;/type&gt;
			&lt;/customer-i-d&gt;
		  &lt;/keys&gt;
		  &lt;instance&gt;
			&lt;customer-since&gt;
			  &lt;value&gt;2008.11.01 08:00:00&lt;/value&gt;
			  &lt;type&gt;DateTime&lt;/type&gt;
			&lt;/customer-since&gt;
			&lt;customer-i-d&gt;
			  &lt;value&gt;Tulip Customer&lt;/value&gt;
			  &lt;type&gt;String&lt;/type&gt;
			&lt;/customer-i-d&gt;
			&lt;company-code&gt;
			  &lt;value&gt;Company Code&lt;/value&gt;
			  &lt;type&gt;String&lt;/type&gt;
			&lt;/company-code&gt;
			&lt;address-line1&gt;
			  &lt;value&gt;Address - updated&lt;/value&gt;
			  &lt;type&gt;String&lt;/type&gt;
			&lt;/address-line1&gt;
			&lt;city&gt;
			  &lt;value&gt;City&lt;/value&gt;
			  &lt;type&gt;String&lt;/type&gt;
			&lt;/city&gt;
			&lt;state&gt;
			  &lt;value&gt;State&lt;/value&gt;
			  &lt;type&gt;String&lt;/type&gt;
			&lt;/state&gt;
			&lt;country&gt;
			  &lt;value&gt;Country&lt;/value&gt;
			  &lt;type&gt;String&lt;/type&gt;
			&lt;/country&gt;
			&lt;zip-code&gt;
			  &lt;value&gt;Post&lt;/value&gt;
			  &lt;type&gt;String&lt;/type&gt;
			&lt;/zip-code&gt;
			&lt;phone-number&gt;
			  &lt;value&gt;Phone Number&lt;/value&gt;
			  &lt;type&gt;String&lt;/type&gt;
			&lt;/phone-number&gt;
			&lt;fax-number&gt;
			  &lt;value&gt;Fax Number&lt;/value&gt;
			  &lt;type&gt;String&lt;/type&gt;
			&lt;/fax-number&gt;
			&lt;last-updated&gt;
			  &lt;value&gt;2008.11.01 08:00:00&lt;/value&gt;
			  &lt;type&gt;DateTime&lt;/type&gt;
			&lt;/last-updated&gt;
			&lt;service-manager&gt;
			  &lt;value&gt;Servcei Manager&lt;/value&gt;
			  &lt;type&gt;String&lt;/type&gt;
			&lt;/service-manager&gt;
			&lt;service-delivery-manager&gt;
			  &lt;value&gt;Service Delivery Manager&lt;/value&gt;
			  &lt;type&gt;String&lt;/type&gt;
			&lt;/service-delivery-manager&gt;
			&lt;company-name&gt;
			  &lt;value&gt;Company Name&lt;/value&gt;
			  &lt;type&gt;String&lt;/type&gt;
			&lt;/company-name&gt;
			&lt;default-s-l-a&gt;
			  &lt;value&gt;155&lt;/value&gt;
			  &lt;type&gt;Int&lt;/type&gt;
			&lt;/default-s-l-a&gt;
		  &lt;/instance&gt;
		&lt;/model&gt;	
	&lt;/item&gt;
&lt;/items&gt;

Elements’ Description: 
Update Process takes place in following manner-

The record is first selected (located) by the information provided in the &lt;keys&gt; element. Essentially, you populate &lt;keys&gt; element with valid key elements otherwise the record wouldn’t be located. 

Once the record is located properly, the fields are updated by the information provided in &lt;instance&gt; element. That is, the respective fields of located record are replaced by the elements’ values that are provided in &lt;instance&gt; element.

NOTE: While locating a record, complete matching of key is required. This means if you give key value to be “abc” and there is a record in the application repository which has key element as “abc123” then this record wouldn’t be located for the update (compare with Find Wrappers.)
 
Modification/Update in located record is done in following manner-

Suppose an random element with name &lt;random-element&gt; which has an 'fieldValue1'. i.e. on retrieving, we'll get.

&lt;instance&gt;
	...
	...
	
	&lt;random-element&gt;
		&lt;value&gt;fieldValue1&lt;/value&gt;
		&lt;type&gt;fieldType&lt;type&gt;
	&lt;/random-element&gt;
	...
	...
&lt;/instance&gt;

Now see following cases of updation-


Case-1:
&lt;instance&gt;
&lt;/instance&gt;

i.e., we don't provide even the element &lt;random-element&gt;
Result: the field get ignored, i.e. not updated.

Case-2:
&lt;instance&gt;
	&lt;random-element&gt;
		&lt;value&gt;&lt;/value&gt;
		&lt;type&gt;fieldType&lt;type&gt;
	&lt;/random-element&gt;
&lt;/instance&gt;

i.e., we don't provide anything inside &lt;value&gt; element (child of element &lt;random-element&gt;.)
Result: the field get ignored, i.e. not updated.

Case-3:
&lt;instance&gt;
	&lt;random-element&gt;
		&lt;value&gt; &lt;/value&gt;
		&lt;type&gt;fieldType&lt;type&gt;
	&lt;/random-element&gt;
&lt;/instance&gt;

i.e., we provide an space character " " (or more contiguous space characters, like "   ") inside &lt;value&gt; element (child of element &lt;random-element&gt;.)
Result: the field get's updated, and the field &lt;random-elements&gt; is set to blank ""(compare with space character " ".)


Case-4:
&lt;instance&gt;
	&lt;random-element&gt;
		&lt;value&gt;fieldValue2&lt;/value&gt;
		&lt;type&gt;fieldType&lt;type&gt;
	&lt;/random-element&gt;
&lt;/instance&gt;

i.e., we provide "fieldValue2" inside &lt;value&gt; element (child of element &lt;random-element&gt;.)
Result: the value "fieldValue2" is set to field of &lt;random-element&gt;. 



NOTE: One can update the key elements too.

Complete Elements’ Description: 

item [Required]:
	This is a child of &lt;items&gt;. This &lt;item&gt; tag can be multiple times to support "multiple items support". 

operation-name [Required]: 

	This shows, what operation you want to perform.

	Valid values:
&lt;operation-name&gt;update-company&lt;/operation-name&gt; is valid operation name element.
	 
keys [Required]: used to ask application to search for the record with the elements inside it.

 Instance [Required] :
It can have many children. The children of this element describe fields of 	a record.

Customer-since[Optional] :  The date-time since what the customer exists.
	
	Valid Value: any input in ‘DateTime’ format. This format is- 
	YYYY.MM.DD HH:MM:SS
	YYYY -&gt; Year
	MM -&gt; Month
	DD -&gt; Date
	HH -&gt; Hours (24 hours system)
	MM -&gt; Minutes
	SS -&gt; Seconds.

	Example,

2008.11.01 08:00:00

Name Of  this element in the application:  “Customer Since.”
	
	Default Value: Ignored, i.e., the field wouldn’t be updated.

customer-i-d [Optional]: Customer Id, used as key too. 
	
	Valid Value: Any String.

Name Of  this element in the application:  “Customer ID.”

Default Value: Ignored, i.e., the field wouldn’t be updated.

Company-code [Optional]: Code of company.
	
	Valid Values : Any String.

Name Of  this element in the application:  “Company code.”

Default Value: Ignored, i.e., the field wouldn’t be updated.

Address-line [Optional] : Address.

	Valid Values : Any string.
Name Of  this element in the application:  “Address.”

	Default Value: Ignored, i.e., the field wouldn’t be updated.

City [Optional] : City of the company.
	
	Valid Values : Any string.
Name Of  this element in the application: first field of  “City/State/Post Code.”

	Default Value: Ignored, i.e., the field wouldn’t be updated.

State [Optional] : State name.
	
	Valid Values: Any string.
Name Of  this element in the application:  Second field of “City/State/Post Code.”

	Default Value: Ignored, i.e., the field wouldn’t be updated.

Country [Optional] : Country.
	
	Valid Values: Any string. 
Name Of  this element in the application:  Second field of  “Country.”
	
Default Value: Ignored, i.e., the field wouldn’t be updated.

Zip-code [Optional] : zip code.

	Valid Values: Any string.
Name Of  this element in the application:  Third field of “City/State/Post Code.”
	
Default Value: Ignored, i.e., the field wouldn’t be updated.

Phone-number [Optional] : phone number.

	Valid Values: Any string.	
Name Of  this element in the application:  Second field of “Phone Number.”
	
Default Value: Ignored, i.e., the field wouldn’t be updated.


Fax-number [Optional] : Fax Number.

	Valid Values: Any string.
Name Of  this element in the application:  Second field of “Fax Number.”
	
Default Value: Ignored, i.e., the field wouldn’t be updated.
	
 Service-manager [Optional] : Service manager.

	Valid Values: Any String.
Name Of  this element in the application:  Second field of “Service Manager.”

	Default Value: Ignored, i.e., the field wouldn’t be updated.

Service-delivery-manager [Optional] : Service delivery manager. 

	Valid Values: Any string.
Name Of  this element in the application:  Second field of “Service Delivery Manager.”

	Default Value: Ignored, i.e., the field wouldn’t be updated.

Company-name [Optional] : Company name.

	Valid Values: Any string.
Name Of  this element in the application:  Second field of “Company Name.”

Default Value: Ignored, i.e., the field wouldn’t be updated.

Default-s-l-a [Optional] : Default SLA.
	
Name Of  this element in the application:  Second field of “Default SLA for Company.”
	
	Valid Values: : Any integer values. These integer values are mapped to string values in application. The list of these mappings is customizable, i.e., more entries can be added to/deleted from it. 

	In out-of-box setup following mappings are available:

	155 -&gt; ACME Bronze
	156 -&gt; ACME Gold
	157 -&gt; ACME Platinum
	158 -&gt; ACME Silver
	159 -&gt; DEFAULT Bronze
	160 -&gt; DEFAULT Gold
	161 -&gt; DEFAULT Platinum
	162 -&gt; DEFAULT Silver
	104 -&gt; GEN Bronze
	102 -&gt; GEN Gold
	101 -&gt; GEN Platinum
	103 -&gt; GEN Silver
	154 -&gt; PRGN Bronze
	152 -&gt; PRGN Gold
	151 -&gt; PRGN Platinum
	153 -&gt; PRGN Silver

	Here, if '155' is provided as value in item xml, on the application the value of this field will be 'ACME Bronze'


	Default Value: if user don't provide value to this tag, corresponding field gets ignored, i.e., the field wouldn’t be updated.


</description>
        <from>items</from>
        <to>items</to>
      </input>
      <input global="false" required="false">
        <description>Provide username/password in form of xml. 

This input parameter is required when the user wants to override the default values for username and password provided in the adapter configuration. This is required for cases where an operation cannot be executed with the default username/password provided in the adapter configuration and only user with special permissions can execute the operation. Examples of such operations can be - 'approve-change', 'deny-change', 'close-change', 'approve-task'

Sample XML Format: 

&lt;connection-parameters&gt;
	&lt;alternate-username&gt;USERNAME&lt;/alternate-username&gt;
	&lt;alternate-password&gt;PASSWORD&lt;/alternate-password&gt;
&lt;/connection-parameters&gt;</description>
        <from>connection parameters</from>
        <to>connection parameters</to>
      </input>
      <output global="false" required="false">
        <description>The adapter response containing the results. </description>
        <to>adapter response</to>
        <from>adapter response</from>
      </output>
    </parameters>
    <access />
    <sequence>
      <switch>
        <meta>
          <documentation />
          <run-mode-handling>
            <run-mode>OCP</run-mode>
            <allow-step-into>true</allow-step-into>
          </run-mode-handling>
          <checkpoint>false</checkpoint>
        </meta>
        <execute-all-applicable-cases>false</execute-all-applicable-cases>
        <default>
          <sequence>
            <call-process>
              <process-name>:AO-AD-HP_ServiceCenter:Utilities:Operation Name Error Reporting</process-name>
              <parameters>
                <input>
                  <value>update-company</value>
                  <to>operation name</to>
                </input>
                <input>
                  <from>items</from>
                  <to>items</to>
                </input>
              </parameters>
              <meta>
                <documentation />
                <run-mode-handling>
                  <run-mode>OCP</run-mode>
                  <allow-step-into>false</allow-step-into>
                </run-mode-handling>
                <checkpoint>false</checkpoint>
              </meta>
              <location>:switch[1]:sequence[1]:call-process[1]</location>
            </call-process>
          </sequence>
        </default>
        <case>
          <condition>
            <document>
              <input>
                <from>items</from>
              </input>
            </document>
            <xpath-expression>
              <xpath-replacement-tokens />
              <xpath><![CDATA[(//operation-name)[1]/text() = 'update-company']]></xpath>
            </xpath-expression>
          </condition>
          <sequence>
            <assign>
              <assignment>
                <document>
                  <input>
                    <from>items</from>
                  </input>
                </document>
                <result>
                  <output>
                    <to>items</to>
                  </output>
                </result>
                <xslt-stylesheet>
                  <stylesheet-replacement-tokens />
                  <stylesheet><![CDATA[<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="1.0">
  <xsl:output indent="no" />
  <xsl:template match="/">
    <items>
      <xsl:for-each select="//item">
        <item>
          <entity-type>
            <xsl:text disable-output-escaping="no">company</xsl:text>
          </entity-type>
          <xsl:copy-of select="./*" />
        </item>
      </xsl:for-each>
    </items>
  </xsl:template>
</xsl:stylesheet>]]></stylesheet>
                </xslt-stylesheet>
              </assignment>
              <meta>
                <documentation />
                <checkpoint>false</checkpoint>
              </meta>
              <location>:switch[1]:sequence[2]:assign[1]</location>
            </assign>
            <call-process>
              <process-name>:AO-AD-HP_ServiceCenter:Utilities:Configuration_Management:Update Configuration Item Utility</process-name>
              <parameters>
                <input>
                  <from>adapter name</from>
                  <to>adapter name</to>
                </input>
                <input>
                  <from>items</from>
                  <to>items</to>
                </input>
                <input>
                  <from>connection parameters</from>
                  <to>connection parameters</to>
                </input>
                <output>
                  <from>adapter response</from>
                  <to>adapter response</to>
                </output>
              </parameters>
              <meta>
                <documentation />
                <run-mode-handling>
                  <run-mode>OCP</run-mode>
                  <allow-step-into>false</allow-step-into>
                </run-mode-handling>
                <checkpoint>false</checkpoint>
              </meta>
              <location>:switch[1]:sequence[2]:call-process[1]</location>
            </call-process>
          </sequence>
        </case>
        <location>:switch[1]</location>
      </switch>
    </sequence>
    <meta>
      <expose-to>
        <consumer>RULE</consumer>
        <consumer>SCHEDULE</consumer>
      </expose-to>
      <documentation>
        <description>
Update Company: 

This wrapper updates company record via the application. The application saves this record into its repository which can later be used.
</description>
        <version>1.0</version>
      </documentation>
      <peer-location>
        <location>any</location>
      </peer-location>
      <record-metrics>false</record-metrics>
      <process-id>a894f45e-857c-37a3-99a6-79a3713bedf6</process-id>
      <author />
      <category />
      <status />
      <keywords />
      <systems />
      <last-modified-by />
      <last-modified>1290593600758</last-modified>
    </meta>
  </process-def>
</process>