<process draft="false" dev-studio-version="7.6.01.02">
  <process-def name=":AO-AD-HP_ServiceCenter:v6.2:Configuration_Management:Create Location">
    <parameters>
      <input global="false" required="false">
        <description>The name of the adapter to use to handle the request. Default adapter name: HPSCActor.</description>
        <from>adapter name</from>
        <to>adapter name</to>
      </input>
      <input global="false" required="true">
        <description>The items for the adapter request. This should be an XML document with a root element named "items" having a children "item" (to support multiple item support, we give "item" multiple times), which should contain the data necessary to execute the specific request. 


Create Location

This wrapper creates ‘Location’ record via the application. The application saves this record into its repository which can later be used.

Sample Item Xml: 
&lt;items&gt;
	&lt;item&gt;
		&lt;operation-name&gt;create-location&lt;/operation-name&gt;
		&lt;model&gt;
		  &lt;keys&gt;
		  &lt;/keys&gt;
		  &lt;instance&gt;
			&lt;location&gt;
			  &lt;value&gt;MyLocation25&lt;/value&gt;
			  &lt;type&gt;String&lt;/type&gt;
			&lt;/location&gt;
			&lt;location-name&gt;
			  &lt;value&gt;Location Name&lt;/value&gt;
			  &lt;type&gt;String&lt;/type&gt;
			&lt;/location-name&gt;
			
			&lt;address&gt;
			  &lt;type&gt;Array&lt;/type&gt;
			  &lt;address&gt;
				&lt;element&gt;
				  &lt;value&gt;Address&lt;/value&gt;
				  &lt;type&gt;String&lt;/type&gt;
				&lt;/element&gt;
			  &lt;/address&gt;
			&lt;/address&gt;
			&lt;city&gt;
			  &lt;value&gt;City&lt;/value&gt;
			  &lt;type&gt;String&lt;/type&gt;
			&lt;/city&gt;
			&lt;state&gt;
			  &lt;value&gt;State&lt;/value&gt;
			  &lt;type&gt;String&lt;/type&gt;
			&lt;/state&gt;
			&lt;zip&gt;
			  &lt;value&gt;zip&lt;/value&gt;
			  &lt;type&gt;String&lt;/type&gt;
			&lt;/zip&gt;
			&lt;primary-contact&gt;
			  &lt;value&gt;primary contact&lt;/value&gt;
			  &lt;type&gt;String&lt;/type&gt;
			&lt;/primary-contact&gt;
			&lt;phone&gt;
			  &lt;value&gt;Phone&lt;/value&gt;
			  &lt;type&gt;String&lt;/type&gt;
			&lt;/phone&gt;
			&lt;location-open-time&gt;
			  &lt;value&gt;11:00:00&lt;/value&gt;
			  &lt;type&gt;Time&lt;/type&gt;
			&lt;/location-open-time&gt;
			&lt;location-closing-time&gt;
			  &lt;value&gt;12:00:00&lt;/value&gt;
			  &lt;type&gt;Time&lt;/type&gt;
			&lt;/location-closing-time&gt;
			&lt;primary-contact-department&gt;
			  &lt;value&gt;primary contact department&lt;/value&gt;
			  &lt;type&gt;String&lt;/type&gt;
			&lt;/primary-contact-department&gt;
			&lt;location-code&gt;
			  &lt;value&gt;Location Code&lt;/value&gt;
			  &lt;type&gt;String&lt;/type&gt;
			&lt;/location-code&gt;
			&lt;comments&gt;
			  &lt;type&gt;Array&lt;/type&gt;
			  &lt;comments&gt;
				&lt;element&gt;
				  &lt;value&gt;Comment line 1&lt;/value&gt;
				  &lt;type&gt;String&lt;/type&gt;
				&lt;/element&gt;
				&lt;element&gt;
				  &lt;value&gt;Comment line 2&lt;/value&gt;
				  &lt;type&gt;String&lt;/type&gt;
				&lt;/element&gt;
			  &lt;/comments&gt;
			&lt;/comments&gt;
			&lt;country&gt;
			  &lt;value&gt;Country&lt;/value&gt;
			  &lt;type&gt;String&lt;/type&gt;
			&lt;/country&gt;
			&lt;email&gt;
			  &lt;value&gt;Email&lt;/value&gt;
			  &lt;type&gt;String&lt;/type&gt;
			&lt;/email&gt;
			&lt;company&gt;
			  &lt;value&gt;Company&lt;/value&gt;
			  &lt;type&gt;String&lt;/type&gt;
			&lt;/company&gt;
			&lt;location-structure&gt;
			  &lt;value&gt;Location structure&lt;/value&gt;
			  &lt;type&gt;String&lt;/type&gt;
			&lt;/location-structure&gt;
			&lt;site-category&gt;
			  &lt;value&gt;A&lt;/value&gt;
			  &lt;type&gt;String&lt;/type&gt;
			&lt;/site-category&gt;
			&lt;/instance&gt;
		&lt;/model&gt;
	&lt;/item&gt;
&lt;/items&gt;

Elements’ Description: 
The elements provided in the instance element refer to particular field of the record. We create an instance of this record by providing information in the &lt;value&gt; elements.

NOTE: The elements provided in &lt;keys&gt; element doesn’t mean that we are asking the application that these elements (the elements in the &lt;keys&gt; element) should be treated as keys for the record being created. Application has pre-defined key elements. The elements given in the &lt;keys&gt; element are meaning-less. 

Complete Elements’ Description: 

NOTE: To create a ‘Location’ record, we require at least &lt;location&gt; element  to be populated properly. See the bold elements in this “Elements’ Description”. 

NOTE: The element &lt;location&gt; is used as key. Thus this field must be populated with unique string. 

item [Required]:
	This is a child of &lt;items&gt;. This &lt;item&gt; tag can be multiple times to support "multiple items support". 

operation-name [Required]: 

	This shows, what operation you want to perform.

	Valid values:
&lt;operation-name&gt;create-location&lt;/operation-name&gt; is valid operation name element.
	 
keys [Required]: used to ask application to search for the record with the elements inside it.


 Instance [Required] :
It can have many children. The children of this element describe fields of 	a record.

Location[Required]: The location field.

	Name of this element in the application: Location.
	
	Valid Values: Any unique string, as it’s also used as key for the record.

	Default Value: No default value, as it’s required key. 

Location-name[Optional]: The location name field of the record. 

	Name of this element in the application: Location Name.

	Valid Values: Any string. 

	Default Value: “”

Address [Optional]: It's an array type element. An array type element is looks like-


&lt;array-type-element&gt;
	&lt;type&gt;array&lt;/type&gt;
	&lt;array-type-element&gt;

		&lt;!-- here multiple children can exist. each with name "element" --&gt;
		&lt;element&gt;&lt;/element&gt;
		&lt;element&gt;&lt;/element&gt;
		&lt;element&gt;&lt;/element&gt;
		...

	&lt;/array-type-element&gt;
&lt;/array-type-element&gt;

Note: one element shows one line in the address field. 

Element [Optional]: Shows one line in the address field. 

	Name of this element in the application: Address.

	Valid Values: Any string. 

	Default Value: “”

City[Optional]: The city name. 

	Name of this element in the application: City.

	Valid Values: Any string. 
	
	Default Values: “”

State[Optional]: The name of state. 

	Name of this element in the application: State/ Province.

	Valid Values: Any string. 
	
	Default Value: “”

Zip [Optional]: zip code. 

	Name of this element in the application. 

	Valid Values: Any string. 

	Default value: “”

Primary-contact [Optional]: the primary contact. 

	Name of this element in the application: Primary Contact.
	
	Valid Values: Any string, or you can select any existing contact record. 

	Default Value: “”

Phone [Optional]: The phone number. 

	Name of this element in the application: Phone. 

	Valid Values: Any string. 

	Default Value: “”

Location-open-time [Optional]: The opening time of the location. 

	Name of this element in the application:  Hours (1st field)

	Valid Values: Any input in time format. 

	Time Format: HH:MM:SS
	HH -&gt; hour, MM -&gt; min., SS -&gt; sec.

	Default Value: “”

Location-closing-time [Optional]: The closing time of the location. 

	Name of this element in the application: Hours (2nd field)

	Valid Values: Any string. 

	Default Value: “”

Primary-contact-department [Optional]: The primary contact department. 

	Name of this element in the location: Department. 

	Valid Values: Any string. 

	Default value: “”

Location-code[Optional]: The code for the location. 

	Name of this element in the location: Location Code. 

	Valid Values: Any string. 

	Default Value: “”

Comment [Optional]: Related comment. It’s an array type element. An array type element is looks like-

&lt;array-type-element&gt;
	&lt;type&gt;array&lt;/type&gt;
	&lt;array-type-element&gt;

		&lt;!-- here multiple children can exist. each with name "element" --&gt;
		&lt;element&gt;&lt;/element&gt;
		&lt;element&gt;&lt;/element&gt;
		&lt;element&gt;&lt;/element&gt;
		...

	&lt;/array-type-element&gt;
&lt;/array-type-element&gt;
	
Element[Optional]: This shows one line in the comment filed. 

Name of these elements in the application: Comment (one element shows one line.) 

	Valid Values: Any string.
	
	Default Value: “”

Country[Optional]: Country name. 

	Name of this element in the application: Country.

	Valid Values: Any string. 
	
	Default Value: “”

Email [Optional]: Email ID. 

	Name of this field in the application: Email. 
	
	Valid Values: Any string. 
	
	Default Value: “”

Company[Optional]: Company name. 

	Name of this field in the application: Company.
	
	Valid Values: Any string. 

	Default Value: “”

Site-category[Optional]: Category of the place. 

	Name of this element in the application: Site Category. 

	Valid Values: A, B, C, D. 
	A -&gt; Critical Site, B -&gt; Major Site, C -&gt; Satellite Site, D -&gt; Home site. 

Default Value: A (i.e., anything other than ‘B’, ‘C’, ‘D’ would cause selection of ‘A’



</description>
        <from>items</from>
        <to>items</to>
      </input>
      <input global="false" required="false">
        <description>Provide username/password in form of xml. 

This input parameter is required when the user wants to override the default values for username and password provided in the adapter configuration. This is required for cases where an operation cannot be executed with the default username/password provided in the adapter configuration and only user with special permissions can execute the operation. Examples of such operations can be - 'approve-change', 'deny-change', 'close-change', 'approve-task'

Sample XML Format: 

&lt;connection-parameters&gt;
	&lt;alternate-username&gt;USERNAME&lt;/alternate-username&gt;
	&lt;alternate-password&gt;PASSWORD&lt;/alternate-password&gt;
&lt;/connection-parameters&gt;</description>
        <from>connection parameters</from>
        <to>connection parameters</to>
      </input>
      <output global="false" required="false">
        <description>The adapter response containing the results. </description>
        <to>adapter response</to>
        <from>adapter response</from>
      </output>
    </parameters>
    <access />
    <sequence>
      <switch>
        <meta>
          <documentation />
          <run-mode-handling>
            <run-mode>OCP</run-mode>
            <allow-step-into>true</allow-step-into>
          </run-mode-handling>
          <checkpoint>false</checkpoint>
        </meta>
        <execute-all-applicable-cases>false</execute-all-applicable-cases>
        <default>
          <sequence>
            <call-process>
              <process-name>:AO-AD-HP_ServiceCenter:Utilities:Operation Name Error Reporting</process-name>
              <parameters>
                <input>
                  <value>create-location</value>
                  <to>operation name</to>
                </input>
                <input>
                  <from>items</from>
                  <to>items</to>
                </input>
              </parameters>
              <meta>
                <documentation />
                <run-mode-handling>
                  <run-mode>OCP</run-mode>
                  <allow-step-into>false</allow-step-into>
                </run-mode-handling>
                <checkpoint>false</checkpoint>
              </meta>
              <location>:switch[1]:sequence[1]:call-process[1]</location>
            </call-process>
          </sequence>
        </default>
        <case>
          <condition>
            <document>
              <input>
                <from>items</from>
              </input>
            </document>
            <xpath-expression>
              <xpath-replacement-tokens />
              <xpath><![CDATA[(//operation-name)[1]/text() = 'create-location']]></xpath>
            </xpath-expression>
          </condition>
          <sequence>
            <assign>
              <assignment>
                <document>
                  <input>
                    <from>items</from>
                  </input>
                </document>
                <result>
                  <output>
                    <to>items</to>
                  </output>
                </result>
                <xslt-stylesheet>
                  <stylesheet-replacement-tokens />
                  <stylesheet><![CDATA[<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="1.0">
  <xsl:output indent="no" />
  <xsl:template match="/">
    <items>
      <xsl:for-each select="//item">
        <item>
          <entity-type>
            <xsl:text disable-output-escaping="no">location</xsl:text>
          </entity-type>
          <xsl:copy-of select="./*" />
        </item>
      </xsl:for-each>
    </items>
  </xsl:template>
</xsl:stylesheet>]]></stylesheet>
                </xslt-stylesheet>
              </assignment>
              <meta>
                <documentation />
                <checkpoint>false</checkpoint>
              </meta>
              <location>:switch[1]:sequence[2]:assign[1]</location>
            </assign>
            <call-process>
              <process-name>:AO-AD-HP_ServiceCenter:Utilities:Configuration_Management:Create Configuration Item Utility</process-name>
              <parameters>
                <input>
                  <from>adapter name</from>
                  <to>adapter name</to>
                </input>
                <input>
                  <from>items</from>
                  <to>items</to>
                </input>
                <input>
                  <from>connection parameters</from>
                  <to>connection parameters</to>
                </input>
                <output>
                  <from>adapter response</from>
                  <to>adapter response</to>
                </output>
              </parameters>
              <meta>
                <documentation />
                <run-mode-handling>
                  <run-mode>OCP</run-mode>
                  <allow-step-into>false</allow-step-into>
                </run-mode-handling>
                <checkpoint>false</checkpoint>
              </meta>
              <location>:switch[1]:sequence[2]:call-process[1]</location>
            </call-process>
          </sequence>
        </case>
        <location>:switch[1]</location>
      </switch>
    </sequence>
    <meta>
      <expose-to>
        <consumer>RULE</consumer>
        <consumer>SCHEDULE</consumer>
      </expose-to>
      <documentation>
        <description>
Create Location

This wrapper creates ‘Location’ record via the application. The application saves this record into its repository which can later be used.</description>
        <version>1.0</version>
      </documentation>
      <peer-location>
        <location>any</location>
      </peer-location>
      <record-metrics>false</record-metrics>
      <process-id>1c17c64e-5edd-3ddf-a001-ef813618c69e</process-id>
      <author />
      <category />
      <status />
      <keywords />
      <systems />
      <last-modified-by />
      <last-modified>1290593560554</last-modified>
    </meta>
  </process-def>
</process>