<process draft="false" dev-studio-version="7.6.01.02">
  <process-def name=":AO-AD-HP_ServiceCenter:v6.2:Configuration_Management:Find Company">
    <parameters>
      <input global="false" required="false">
        <description>The name of the adapter to use to handle the request. Default adapter name: HPSCActor.</description>
        <from>adapter name</from>
        <to>adapter name</to>
      </input>
      <input global="false" required="true">
        <description>The items for the adapter request. This should be an XML document with a root element named "items" having a children "item" (to support multiple item support, we give "item" multiple times), which should contain the data necessary to execute the specific request. 


Find Company

This wrapper search out for the company record(s) from pool of company records in the application.

Sample Item Xml:

&lt;items&gt;
	&lt;item&gt;
		&lt;operation-name&gt;retrieve-company&lt;/operation-name&gt;
		&lt;model&gt;
		  &lt;keys&gt;
			&lt;customer-i-d&gt;
			  &lt;value&gt;Tulip Customer&lt;/value&gt;
			  &lt;type&gt;String&lt;/type&gt;
			&lt;/customer-i-d&gt;
		  &lt;/keys&gt;
		  &lt;instance&gt;
			&lt;customer-since&gt;
			  &lt;value&gt;2008.11.01 08:00:00&lt;/value&gt;
			  &lt;type&gt;DateTime&lt;/type&gt;
			&lt;/customer-since&gt;
			&lt;customer-i-d&gt;
			  &lt;value&gt;Tulip Customer&lt;/value&gt;
			  &lt;type&gt;String&lt;/type&gt;
			&lt;/customer-i-d&gt;
			&lt;company-code&gt;
			  &lt;value&gt;Company Code&lt;/value&gt;
			  &lt;type&gt;String&lt;/type&gt;
			&lt;/company-code&gt;
			&lt;address-line1&gt;
			  &lt;value&gt;Address&lt;/value&gt;
			  &lt;type&gt;String&lt;/type&gt;
			&lt;/address-line1&gt;
			&lt;city&gt;
			  &lt;value&gt;City&lt;/value&gt;
			  &lt;type&gt;String&lt;/type&gt;
			&lt;/city&gt;
			&lt;state&gt;
			  &lt;value&gt;State&lt;/value&gt;
			  &lt;type&gt;String&lt;/type&gt;
			&lt;/state&gt;
			&lt;country&gt;
			  &lt;value&gt;Country&lt;/value&gt;
			  &lt;type&gt;String&lt;/type&gt;
			&lt;/country&gt;
			&lt;zip-code&gt;
			  &lt;value&gt;Post&lt;/value&gt;
			  &lt;type&gt;String&lt;/type&gt;
			&lt;/zip-code&gt;
			&lt;phone-number&gt;
			  &lt;value&gt;Phone Number&lt;/value&gt;
			  &lt;type&gt;String&lt;/type&gt;
			&lt;/phone-number&gt;
			&lt;fax-number&gt;
			  &lt;value&gt;Fax Number&lt;/value&gt;
			  &lt;type&gt;String&lt;/type&gt;
			&lt;/fax-number&gt;
			&lt;last-updated&gt;
			  &lt;value&gt;2008.11.01 08:00:00&lt;/value&gt;
			  &lt;type&gt;DateTime&lt;/type&gt;
			&lt;/last-updated&gt;
			&lt;service-manager&gt;
			  &lt;value&gt;Servcei Manager&lt;/value&gt;
			  &lt;type&gt;String&lt;/type&gt;
			&lt;/service-manager&gt;
			&lt;service-delivery-manager&gt;
			  &lt;value&gt;Service Delivery Manager&lt;/value&gt;
			  &lt;type&gt;String&lt;/type&gt;
			&lt;/service-delivery-manager&gt;
			&lt;company-name&gt;
			  &lt;value&gt;Company Name&lt;/value&gt;
			  &lt;type&gt;String&lt;/type&gt;
			&lt;/company-name&gt;
			&lt;default-s-l-a&gt;
			  &lt;value&gt;155&lt;/value&gt;
			  &lt;type&gt;Int&lt;/type&gt;
			&lt;/default-s-l-a&gt;
		  &lt;/instance&gt;
		&lt;/model&gt;	
	&lt;/item&gt;
&lt;/items&gt;
Element Description:

Locating any record takes place in following manner-

The fields inside instance describe the record. Out of which some are key elements.

Following are cases,

Case1: You provide (either in &lt;keys&gt; or in &lt;instance&gt; or in both) only key then the record is uniquely located.

Case2: You provide (either in &lt;keys&gt; or in &lt;instance&gt; or in both) key element(s) along with some other elements then the record is located only by key elements. All other fields (elements) get ignored. Record would get uniquely located as we’re providing the key element(s).

Case3: You provide (either in &lt;keys&gt; or in &lt;instance&gt; or in both) only those elements  that are not key. Then the record is located by logically ANDing all those elements with the corresponding elements of existing record.

Case4: You don’t provide anything. Then all company records would be fetched.

NOTE: When we provide some element(s) (which are not key) in &lt;keys&gt; element then we’re forcibly saying that “search the record(s) with these key elements (the elements in &lt;keys&gt; element.)” In such cases, the elements given inside &lt;instance&gt; element are simply ignored. 

 NOTE:  For a given pattern string P is said to be matched with text string T if the string P is prefix string of T. for example, 

P = xyz 
T = xyz123 
Then P is matched with T. 

If, 
P = xyz
T = 1xyz23 
Then P is not matched with T.

etc.

this means, if you’re searching for vendor, and you’ve given vendor name to be “abc” and if there are two records with vendor name “abc123” and “abc456” then both these record would be fetched.

(this is solely application specific.)

Complete Elements’ Description: 

item [Required]
	This is a child of &lt;items&gt;. This &lt;item&gt; tag can be multiple times to support "multiple items support". 

operation-name [Required] : 

	This shows, what operation you want to perform.

	Valid values:
&lt;operation-name&gt;retrieve-company&lt;/operation-name&gt; is valid operation name element.
	 
keys [Required] : used to ask application to search for the record with the elements inside it.

 Instance [Required] :
It can have many children. The children of this element describe fields of 	a record.

Customer-since[Optional] :  The date-time since what the customer exists.
	
	Valid Value: any input in ‘DateTime’ format. This format is- 
	YYYY.MM.DD HH:MM:SS
	YYYY -&gt; Year
	MM -&gt; Month
	DD -&gt; Date
	HH -&gt; Hours (24 hours system)
	MM -&gt; Minutes
	SS -&gt; Seconds.

	Example,

2008.11.01 08:00:00

Name Of  this element in the application:  “Customer Since.”


customer-i-d [Optional] : Customer Id, used as key too. 
	
	Valid Value: Any String.

Name Of  this element in the application:  “Customer ID.”


Company-code [Optional] : Code of company.
	
	Valid Values : Any String.

Name Of  this element in the application:  “Company code.”


Address-line [Optional] : Address.

	Valid Values : Any string.
Name Of  this element in the application:  “Address.”


City [Optional] : City of the company.
	
	Valid Values : Any string.
Name Of  this element in the application: first field of  “City/State/Post Code.”


State [Optional] : State name.
	
	Valid Values: Any string.
Name Of  this element in the application:  Second field of “City/State/Post Code.”


Country [Optional] : Country.
	
	Valid Values: Any string. 
Name Of  this element in the application:  Second field of  “Country.”


Zip-code [Optional] : zip code.

	Valid Values: Any string.
Name Of  this element in the application:  Third field of “City/State/Post Code.”

Phone-number [Optional] : phone number.

	Valid Values: Any string.	
Name Of  this element in the application:  Second field of “Phone Number.”


Fax-number [Optional] : Fax Number.

	Valid Values: Any string.
Name Of  this element in the application:  Second field of “Fax Number.”


Last-updated [Optional]: Information of last update.

	Valid Values: Any input in the DateTime fomat.
	The date time format is-

YYYY.MM.DD HH:MM:SS
	YYYY -&gt; Year
	MM -&gt; Month
	DD -&gt; Date
	HH -&gt; Hours (24 hours system)
	MM -&gt; Minutes
	SS -&gt; Seconds.

	Example,

2008.11.01 08:00:00

Name Of  this element in the application:  You can’t see this field thorough application. Though it’s mentained by the application and returned with in form of xml.

	
 Service-manager [Optional] : Service manager.

	Valid Values: Any String.
Name Of  this element in the application:  Second field of “Service Manager.”


Service-delivery-manager [Optional] : Service delivery manager. 

	Valid Values: Any string.
Name Of  this element in the application:  Second field of “Service Delivery Manager.”

Company-name [Optional] : Company name.

	Valid Values: Any string.
Name Of  this element in the application:  Second field of “Company Name.”


Default-s-l-a [Optional] : Default SLA.

	Name Of  this element in the application:  Second field of “Default SLA for Company.”
	
	Valid Values: : Any integer values. These integer values are mapped to string values in application. The list of these mappings is customizable, i.e., more entries can be added to/deleted from it. 

	In out-of-box setup following mappings are available:

	155 -&gt; ACME Bronze
	156 -&gt; ACME Gold
	157 -&gt; ACME Platinum
	158 -&gt; ACME Silver
	159 -&gt; DEFAULT Bronze
	160 -&gt; DEFAULT Gold
	161 -&gt; DEFAULT Platinum
	162 -&gt; DEFAULT Silver
	104 -&gt; GEN Bronze
	102 -&gt; GEN Gold
	101 -&gt; GEN Platinum
	103 -&gt; GEN Silver
	154 -&gt; PRGN Bronze
	152 -&gt; PRGN Gold
	151 -&gt; PRGN Platinum
	153 -&gt; PRGN Silver

	Here, if '155' is provided as value in item xml, on the application the value of this field will be 'ACME Bronze'

Uniquequery [Optional] : This tag is just for information to application. This just tell what is key which is unique for a record. This might be set of values of several elements. In other sense, it’s key for query to a record uniquely.

	Valid Values: Any String.
Name Of  this element in the application:  as said earlier, it’s just for information purpose. This is not any field in the application. 


Recordid [Optional] : The ID provided to the record by the application (may not be unique for a record). 

	Valid Values: Any string.
Name Of  this element in the application:  It’s not a visible field at application. Though it’s maintained by the application and returned in form of xml.
</description>
        <from>items</from>
        <to>items</to>
      </input>
      <input global="false" required="false">
        <description>Provide username/password in form of xml. 

This input parameter is required when the user wants to override the default values for username and password provided in the adapter configuration. This is required for cases where an operation cannot be executed with the default username/password provided in the adapter configuration and only user with special permissions can execute the operation. Examples of such operations can be - 'approve-change', 'deny-change', 'close-change', 'approve-task'

Sample XML Format: 

&lt;connection-parameters&gt;
	&lt;alternate-username&gt;USERNAME&lt;/alternate-username&gt;
	&lt;alternate-password&gt;PASSWORD&lt;/alternate-password&gt;
&lt;/connection-parameters&gt;</description>
        <from>connection parameters</from>
        <to>connection parameters</to>
      </input>
      <output global="false" required="false">
        <description>The adapter response containing the results. </description>
        <to>adapter response</to>
        <from>adapter response</from>
      </output>
    </parameters>
    <access />
    <sequence>
      <switch>
        <meta>
          <documentation />
          <run-mode-handling>
            <run-mode>OCP</run-mode>
            <allow-step-into>true</allow-step-into>
          </run-mode-handling>
          <checkpoint>false</checkpoint>
        </meta>
        <execute-all-applicable-cases>false</execute-all-applicable-cases>
        <default>
          <sequence>
            <call-process>
              <process-name>:AO-AD-HP_ServiceCenter:Utilities:Operation Name Error Reporting</process-name>
              <parameters>
                <input>
                  <value>retrieve-company</value>
                  <to>operation name</to>
                </input>
                <input>
                  <from>items</from>
                  <to>items</to>
                </input>
              </parameters>
              <meta>
                <documentation />
                <run-mode-handling>
                  <run-mode>OCP</run-mode>
                  <allow-step-into>false</allow-step-into>
                </run-mode-handling>
                <checkpoint>false</checkpoint>
              </meta>
              <location>:switch[1]:sequence[1]:call-process[1]</location>
            </call-process>
          </sequence>
        </default>
        <case>
          <condition>
            <document>
              <input>
                <from>items</from>
              </input>
            </document>
            <xpath-expression>
              <xpath-replacement-tokens />
              <xpath><![CDATA[(//operation-name)[1]/text() = 'retrieve-company']]></xpath>
            </xpath-expression>
          </condition>
          <sequence>
            <assign>
              <assignment>
                <document>
                  <input>
                    <from>items</from>
                  </input>
                </document>
                <result>
                  <output>
                    <to>items</to>
                  </output>
                </result>
                <xslt-stylesheet>
                  <stylesheet-replacement-tokens />
                  <stylesheet><![CDATA[<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="1.0">
  <xsl:output indent="no" />
  <xsl:template match="/">
    <items>
      <xsl:for-each select="//item">
        <item>
          <entity-type>
            <xsl:text disable-output-escaping="no">company</xsl:text>
          </entity-type>
          <xsl:copy-of select="./*" />
        </item>
      </xsl:for-each>
    </items>
  </xsl:template>
</xsl:stylesheet>]]></stylesheet>
                </xslt-stylesheet>
              </assignment>
              <meta>
                <documentation />
                <checkpoint>false</checkpoint>
              </meta>
              <location>:switch[1]:sequence[2]:assign[1]</location>
            </assign>
            <call-process>
              <process-name>:AO-AD-HP_ServiceCenter:Utilities:Configuration_Management:Find Configuration Item Utility</process-name>
              <parameters>
                <input>
                  <from>adapter name</from>
                  <to>adapter name</to>
                </input>
                <input>
                  <from>items</from>
                  <to>items</to>
                </input>
                <input>
                  <from>connection parameters</from>
                  <to>connection parameters</to>
                </input>
                <output>
                  <from>adapter response</from>
                  <to>adapter response</to>
                </output>
              </parameters>
              <meta>
                <documentation />
                <run-mode-handling>
                  <run-mode>OCP</run-mode>
                  <allow-step-into>false</allow-step-into>
                </run-mode-handling>
                <checkpoint>false</checkpoint>
              </meta>
              <location>:switch[1]:sequence[2]:call-process[1]</location>
            </call-process>
          </sequence>
        </case>
        <location>:switch[1]</location>
      </switch>
    </sequence>
    <meta>
      <expose-to>
        <consumer>RULE</consumer>
        <consumer>SCHEDULE</consumer>
      </expose-to>
      <documentation>
        <description>
Find Company

This wrapper search out for the company record(s) from pool of company records in the application.
</description>
        <version>1.0</version>
      </documentation>
      <peer-location>
        <location>any</location>
      </peer-location>
      <record-metrics>false</record-metrics>
      <process-id>92ac57a4-bbd6-3b93-a42a-a66b2b789544</process-id>
      <author />
      <category />
      <status />
      <keywords />
      <systems />
      <last-modified-by />
      <last-modified>1290593585177</last-modified>
    </meta>
  </process-def>
</process>