<process draft="false" dev-studio-version="7.6.01.02">
  <process-def name=":AO-AD-HP_ServiceCenter:Utilities:Incident_Management:Update Incident">
    <parameters>
      <input global="false" required="false">
        <description>            The name of the adapter to use to handle the request. 
</description>
        <from>adapter name</from>
        <to>adapter name</to>
      </input>
      <input global="false" required="true">
        <description>

The items for the adapter request. This should be an XML document with a root element named "items" having a children "item" (to support multiple item support, we give "item" multiple times), which should contain the data necessary to execute the specific request. 

&lt;items&gt;
	&lt;item&gt;
		&lt;operation-name&gt;close-incident&lt;/operation-name&gt;
		&lt;model&gt;
			&lt;keys&gt;
			  &lt;incident-i-d&gt;
				&lt;value&gt;IM1079&lt;/value&gt;
				&lt;type&gt;String&lt;/type&gt;
			  &lt;/incident-i-d&gt;
			&lt;/keys&gt;
			&lt;instance&gt;
			  &lt;incident-i-d&gt;
				&lt;value&gt;IM1079&lt;/value&gt;
				&lt;type&gt;String&lt;/type&gt;
			  &lt;/incident-i-d&gt;
			  &lt;category&gt;
				&lt;value&gt;client system&lt;/value&gt;
				&lt;mandatory&gt;true&lt;/mandatory&gt;
				&lt;type&gt;String&lt;/type&gt;
			  &lt;/category&gt;
			  &lt;opened-by&gt;
				&lt;value&gt;BOB.HELPDESK&lt;/value&gt;
				&lt;type&gt;String&lt;/type&gt;
			  &lt;/opened-by&gt;
			  &lt;severity&gt;
				&lt;value&gt;4&lt;/value&gt;
				&lt;type&gt;String&lt;/type&gt;
			  &lt;/severity&gt;
			  &lt;primary-assignment-group&gt;
				&lt;value&gt;HELPDESK&lt;/value&gt;
				&lt;type&gt;String&lt;/type&gt;
			  &lt;/primary-assignment-group&gt;
			  &lt;configuration-item&gt;
				&lt;value&gt;TeresaPC&lt;/value&gt;
				&lt;type&gt;String&lt;/type&gt;
			  &lt;/configuration-item&gt;
			  &lt;location&gt;
				&lt;value&gt;Sweden&lt;/value&gt;
				&lt;type&gt;String&lt;/type&gt;
			  &lt;/location&gt;
			  &lt;incident-description&gt;
				&lt;type&gt;Array&lt;/type&gt;
				&lt;incident-description&gt;
				  &lt;element&gt;
					&lt;value&gt;Can't get the controller to recognize a 3rd party external disk drive. She thinks there may be some missing device driver information but doesn't know where to begin.&lt;/value&gt;
					&lt;type&gt;String&lt;/type&gt;
				  &lt;/element&gt;
				&lt;/incident-description&gt;
			  &lt;/incident-description&gt;
			  &lt;assignee-name&gt;
				&lt;value&gt;SOFTWARE 1&lt;/value&gt;
				&lt;type&gt;String&lt;/type&gt;
			  &lt;/assignee-name&gt;
			  &lt;contact&gt;
				&lt;value&gt;THOMPSON, TERESA&lt;/value&gt;
				&lt;type&gt;String&lt;/type&gt;
			  &lt;/contact&gt;
			  &lt;journal-updates&gt;
				&lt;type&gt;Array&lt;/type&gt;
				&lt;journal-updates&gt;
				  &lt;element&gt;
					&lt;value&gt;10/14/08 09:07:11 US/Pacific (falcon):&lt;/value&gt;
					&lt;type&gt;String&lt;/type&gt;
				  &lt;/element&gt;
				  &lt;element&gt;
					&lt;value&gt;corrective action&lt;/value&gt;
					&lt;type&gt;String&lt;/type&gt;
				  &lt;/element&gt;
				  &lt;element&gt;
					&lt;value&gt;03/08/2001 16:12:30 alert stage 3&lt;/value&gt;
					&lt;type&gt;String&lt;/type&gt;
				  &lt;/element&gt;
				  &lt;element&gt;
					&lt;value&gt;**ALERT**&lt;/value&gt;
					&lt;type&gt;String&lt;/type&gt;
				  &lt;/element&gt;
				&lt;/journal-updates&gt;
			  &lt;/journal-updates&gt;
			  &lt;contact-last-name&gt;
				&lt;value&gt;Thompson&lt;/value&gt;
				&lt;type&gt;String&lt;/type&gt;
			  &lt;/contact-last-name&gt;
			  &lt;contact-first-name&gt;
				&lt;value&gt;Teresa&lt;/value&gt;
				&lt;type&gt;String&lt;/type&gt;
			  &lt;/contact-first-name&gt;
			  &lt;company&gt;
				&lt;value&gt;PRGN&lt;/value&gt;
				&lt;type&gt;String&lt;/type&gt;
			  &lt;/company&gt;
			  &lt;brief-description&gt;
				&lt;value&gt;Can't get the controller to recognize a 3rd party external disk drive. She&lt;/value&gt;
				&lt;type&gt;String&lt;/type&gt;
			  &lt;/brief-description&gt;
			  &lt;ticket-owner&gt;
				&lt;value&gt;BOB.HELPDESK&lt;/value&gt;
				&lt;type&gt;String&lt;/type&gt;
			  &lt;/ticket-owner&gt;
			  &lt;updated-by&gt;
				&lt;value&gt;falcon&lt;/value&gt;
				&lt;type&gt;String&lt;/type&gt;
			  &lt;/updated-by&gt;
			  &lt;IMTicket-status&gt;
				&lt;value&gt;Work in progress&lt;/value&gt;
				&lt;type&gt;String&lt;/type&gt;
			  &lt;/IMTicket-status&gt;
			  &lt;subcategory&gt;
				&lt;value&gt;software&lt;/value&gt;
				&lt;type&gt;String&lt;/type&gt;
			  &lt;/subcategory&gt;
			  &lt;SLAAgreement-i-d&gt;
				&lt;value&gt;45&lt;/value&gt;
				&lt;type&gt;Decimal&lt;/type&gt;
			  &lt;/SLAAgreement-i-d&gt;
			  &lt;site-category&gt;
				&lt;value&gt;C&lt;/value&gt;
				&lt;type&gt;String&lt;/type&gt;
			  &lt;/site-category&gt;
			  &lt;product-type&gt;
				&lt;value&gt;non standard apps&lt;/value&gt;
				&lt;type&gt;String&lt;/type&gt;
			  &lt;/product-type&gt;
			  &lt;problem-type&gt;
				&lt;value&gt;client dependent&lt;/value&gt;
				&lt;type&gt;String&lt;/type&gt;
			  &lt;/problem-type&gt;
			  &lt;user-priority&gt;
				&lt;value&gt;5&lt;/value&gt;
				&lt;type&gt;String&lt;/type&gt;
			  &lt;/user-priority&gt;
			  &lt;initial-impact&gt;
				&lt;value&gt;4&lt;/value&gt;
				&lt;type&gt;String&lt;/type&gt;
			  &lt;/initial-impact&gt;
			  &lt;uniquequery&gt;number="IM1079"&lt;/uniquequery&gt;
			  &lt;recordid&gt;IM1079 - Can't get the controller to recognize a 3rd party external disk drive. She  &lt;/recordid&gt;
			  &lt;i-m-ticket-status&gt;
				&lt;value&gt;Work in progress&lt;/value&gt;
				&lt;type&gt;String&lt;/type&gt;
			  &lt;/i-m-ticket-status&gt;
			  &lt;s-l-a-agreement-i-d&gt;
				&lt;value&gt;45&lt;/value&gt;
				&lt;type&gt;Decimal&lt;/type&gt;
			  &lt;/s-l-a-agreement-i-d&gt;
			&lt;/instance&gt;
			&lt;query&gt;number="IM1079"&lt;/query&gt;
		&lt;/model&gt;
	&lt;/item&gt;
&lt;/items&gt;



NOTE: To locate a record (to retrieve) we need only one element (as &lt;key&gt;.) That element is &lt;incident-i-d&gt;. All other fields are simply ignored while locating the record. For example, if you give &lt;company&gt;PRGN–wrong&lt;/company&gt;  instead of
&lt;company&gt;PRGN&lt;/company &gt; then still, same record would be retrieved. 


item [Required]
	This is a child of &lt;items&gt;. This &lt;item&gt; tag can be multiple times to support "multiple items support". 



operation-name [required] : 
	This shows, what operation you want to perform.

	Valid values:
&lt;operation-name&gt;retrieve-incident&lt;/operation-name&gt; is valid operation name element.
	 
key [Required]
Any record is identified by some key. In other sense, it recognizes a record uniquely. This may be collection of elements. Here in this case, &lt;incident-i-d&gt; works as key.
	
	Valid Value: 
Content inside &lt;key&gt; element (all child/children element(s)) refer to a record. If one leave the content inside &lt;key&gt; element then application wouldn’t find any record. The request would be executed leaving message that “no record found with specified “key.” 

Default Value: As this key is required, you need to keep this key even if field inside it is blank. 

NOTE: If one leave the field inside &lt;key&gt; element, the application try to find out &lt;incident-i-d&gt; in the &lt;instance&gt; element. So, at least give &lt;incident-i-d&gt; in &lt;key&gt; or in &lt;instance&gt;. You can give in both too.


Instance [Required] :
It can have many children. The children of this element describe fields of 	a record.

incident-i-d [Required] : The key element to fetch incident record.

	Valid Values: Any string.
	Default Value: Ignored.

Category [Optional] : The category of record.

	Valid Values: 

	telecoms
	shared infrastructure
	security
	printing
	other
	network
	service catalog
	enquiry
	client system
	change
	busyness applications
	
	Default value: Ignored.

opened-by [Optional] The owner.

	Valid Values: Any string, or you can select from pre-existing contacts in the application. 
	Default Values: Ignored.

Severity [optional] : the urgency.

	Valid Values: 1, 2, 3, 4
	Default value: Ignored.

Primary-assignment-group [Optional] : primary assignment group.

	Valid Vaues:  
	
	AUTO
	CLIENT SECURITY
	DEFAULT 
	FACILITIES
	FIELD ENG.
	HELPDESK
	LAN SUPPORT
	M/F SUPPORT
	ONSITE SUPPORT
	PROCUREMENT
	SECONDLINE
	SERVICE DESK
	SOFTWARE
	SYSTEMS ADMIN
	SYSTEMS SUPPORT
	TELECOMS
	TRAINING
	WAN SUPPORT

	Default Value: Ignored.

configuration-item [optional] : The associated configuration item.
	
	Valid Values: 
		Any string, or you can select any pre-existing configuration item in the application.
	Default Value:
		Ignored.

Location [optional] : The location information. 
	
	Valid Values: 
		Any string or you can select pre-existing location record in the application.
	Default Value: 
		Ignored.

Incident-description [Optional] : description for the incident.
	
	Valid Values: Any string.
	Default Value: Ignored.

Assignee-name [Optional] : assignee name.
	
	Valid Values: Any string or  you can select pre-existing contact record in the application.

	Default Value: Ignored.

Contact [Optional] : contact. (not for update)
		
	Valid values: Any string.
	Default Value: Ignored.

journal-updates [Optional] : (not for update)
	
	Valid Values: Any string.
	Default Value: Ignored.

contact-last-name [Optional] : last name.
	
	Valid Values: Any string.
	Default Values: ignored.

Contact-first-name [Optional]: 

	Valid Values: any string.
	Default Value: ignored.

Company [Optional] : company. not for update, it’s dependent (on other fields) field.

	Valid Values: Any string.
	Default Value: Ignored.

Brief Description [Optional] : Description.
	
	Valid Values: Any string.
	Default Value: Ignored.

Ticket owner [Optional] : the ticket owner ( = assignee name.)
	
	Valid Values: Any string or select from application.
	Default Value: ignored.

IMTicket-status [Optional] : status of the incident management ticket (the incident.)

	Valid values: 
	
	Open
	Pending other
	Work in progress
	Reject 
	Resolved
	Pending Vendor
	Closed
	Pending Customer
	Referred
	Replaced Problem

	Default values: Ignored.

Subcategory [Optional] : the subcategory for a given category.
	
	Valid Values: 
	
For each category there are several sub category (might be different). And for each subcategory there are several “product  type” and for each product type there are several “problem type.” For detail you can refer the application itself.

Default Value: Ignored.

site-category [Optional] : site category.
		
	Valid Values: A, B, C, D
	Default values: ignored.

Product-type [Optional] : the product type.

	

Valid Values:
For each category there are several sub category (might be different). And for each subcategory there are several “product  type” and for each product type there are several “problem type.” For detail you can refer the application itself.

	Default Values: Ignored.

Problem-type [Optional] : the problem type.

Valid Values:
For each category there are several sub category (might be different). And for each subcategory there are several “product  type” and for each product type there are several “problem type.” For detail you can refer the application itself.

	Default Values: Ignored.

User-priority [Optional] : the user priority.

	Valid Values: 1, 2, 3, 4, 5.
	Default Values: Ignored.

Initial impact [Optional] : the initial impact.
		
	Valid values: 1, 2, 3, 4
	Default values: Ignored.

Uniquequery [optional] : key related information.
	
	Valid values: Any string.
	Default Value: Ignored.

Recorded [Optional] : the id given to the record.

	Valid Values: Any string.
	Default Values: Ignored.

i-m-tecket-status [Optional] : the status of incident.

	Valid Values: 

	Open
	Pending other
	Work in progress
	Reject 
	Resolved
	Pending Vendor
	Closed
	Pending Customer
	Referred
	Replaced Problem
	
	Default Value: Ignored.

s-l-a-agreement-i-d [Optional] : SLA agreement ID.

	Valid Values: Any string.
	Default Value: Ignored.

</description>
        <from>items</from>
        <to>items</to>
      </input>
      <input global="false" required="false">
        <from>connection parameters</from>
        <to>connection parameters</to>
      </input>
      <output global="false" required="false">
        <description> The adapter response containing the results. </description>
        <to>adapter response</to>
        <from>adapter response</from>
      </output>
    </parameters>
    <access />
    <sequence>
      <call-process>
        <process-name>:AO-AD-HP_ServiceCenter:Utilities:Set Default Adapter Name</process-name>
        <parameters>
          <input>
            <from>adapter name</from>
            <to>adapter name</to>
          </input>
          <output>
            <from>adapter name</from>
            <to>adapter name</to>
          </output>
        </parameters>
        <meta>
          <documentation />
          <run-mode-handling>
            <run-mode>OCP</run-mode>
            <allow-step-into>false</allow-step-into>
          </run-mode-handling>
          <checkpoint>false</checkpoint>
        </meta>
        <location>:call-process[1]</location>
      </call-process>
      <assign>
        <assignment>
          <document>
            <input>
              <from>items</from>
            </input>
          </document>
          <result>
            <output>
              <to>request element</to>
            </output>
          </result>
          <xpath-expression>
            <xpath-replacement-tokens />
            <xpath><![CDATA[concat((//operation-name)[1], "-request")]]></xpath>
          </xpath-expression>
        </assignment>
        <assignment>
          <document>
            <input>
              <from>connection parameters</from>
            </input>
          </document>
          <result>
            <output>
              <to>username</to>
            </output>
          </result>
          <xpath-expression>
            <xpath-replacement-tokens />
            <xpath><![CDATA[(//alternate-username)[1]/text()]]></xpath>
          </xpath-expression>
        </assignment>
        <assignment>
          <document>
            <input>
              <from>connection parameters</from>
            </input>
          </document>
          <result>
            <output>
              <to>password</to>
            </output>
          </result>
          <xpath-expression>
            <xpath-replacement-tokens />
            <xpath><![CDATA[(//alternate-password)[1]/text()]]></xpath>
          </xpath-expression>
        </assignment>
        <meta>
          <documentation />
          <checkpoint>false</checkpoint>
        </meta>
        <location>:assign[1]</location>
      </assign>
      <assign>
        <assignment>
          <document>
            <input>
              <from>items</from>
            </input>
          </document>
          <result>
            <output>
              <to>adapter request</to>
            </output>
          </result>
          <xslt-stylesheet>
            <stylesheet-replacement-tokens>
              <replacement-token name="items">
                <input global="false">
                  <from>items</from>
                </input>
              </replacement-token>
              <replacement-token name="request element">
                <input global="false">
                  <from>request element</from>
                </input>
              </replacement-token>
              <replacement-token name="username">
                <input global="false">
                  <from>username</from>
                </input>
              </replacement-token>
              <replacement-token name="password">
                <input global="false">
                  <from>password</from>
                </input>
              </replacement-token>
            </stylesheet-replacement-tokens>
            <stylesheet><![CDATA[<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="1.0">
  <xsl:output indent="no" />
  <xsl:template match="/">
    <request-data>
      <hp-service-center-request>
        <xsl:if test="string('${username}') != ''">
          <username>${username}</username>
        </xsl:if>
        <xsl:if test="string('${password}') != ''">
          <password>${password}</password>
        </xsl:if>
        <entity>
          <xsl:text disable-output-escaping="no">incident</xsl:text>
        </entity>
        <entity-type>
          <xsl:copy-of select="(//entity-type)[1]/text()" />
        </entity-type>
        <request>
          <operation-name>
            <xsl:copy-of select="(//operation-name)[1]/text()" />
          </operation-name>
          <xsl:for-each select="/items/item">
            <parameters>
              <xsl:element name="${request element}">
                <xsl:copy-of select="./model" />
              </xsl:element>
            </parameters>
          </xsl:for-each>
        </request>
      </hp-service-center-request>
    </request-data>
  </xsl:template>
</xsl:stylesheet>]]></stylesheet>
          </xslt-stylesheet>
        </assignment>
        <meta>
          <documentation />
          <checkpoint>false</checkpoint>
        </meta>
        <location>:assign[2]</location>
      </assign>
      <call-adapter>
        <parameters>
          <input global="false">
            <from>adapter name</from>
          </input>
          <input>
            <value>
              <adapter-request>
                <peer-location>
                  <location>any</location>
                </peer-location>
                <request-action>invoke</request-action>
              </adapter-request>
            </value>
          </input>
          <input global="false">
            <from>adapter request</from>
          </input>
          <input global="false">
            <from>adapter request</from>
          </input>
          <output global="false">
            <to>adapter response</to>
          </output>
        </parameters>
        <meta>
          <documentation />
          <checkpoint>false</checkpoint>
        </meta>
        <before-execution>
          <log>
            <level>debug</level>
            <parameters>
              <input>
                <value>Adapter Request:</value>
              </input>
              <input>
                <from>adapter request</from>
              </input>
              <input>
                <from>adapter name</from>
              </input>
            </parameters>
          </log>
        </before-execution>
        <after-execution>
          <log>
            <level>debug</level>
            <parameters>
              <input>
                <value>Adapter Response:</value>
              </input>
              <input>
                <from>adapter response</from>
              </input>
            </parameters>
          </log>
        </after-execution>
        <location>:call-adapter[1]</location>
      </call-adapter>
    </sequence>
    <meta>
      <expose-to>
        <consumer>RULE</consumer>
        <consumer>SCHEDULE</consumer>
      </expose-to>
      <documentation>
        <description>Update Incident
    Utility wrapper for updating an incident

    Inputs
       adapter name    [Optional]
            The name of the adapter to use to handle the request. 
       version
             Identifies the version of HP Service Center system. Currently "v6.2" is supported.
        items
            The items for the adapter request. This should be an XML document with a root element named "items" having a child "item", which should contain the data necessary to execute the specific request. 
	operation name 
		The value of the operation-name as per the request data provided in the "items"
	alternate username [Optional] 
		Provide username if the corresponding value in the adapter config needs to be overridden
	alternate password [Optional] 
		Provide password if the corresponding value in the adapter config needs to be overridden
   Outputs
        adapter response
            The adapter response containing the results. </description>
        <version>1.0</version>
      </documentation>
      <peer-location>
        <location>any</location>
      </peer-location>
      <record-metrics>false</record-metrics>
      <process-id>b0e32c08-42d9-309a-ad02-29f2f4f720f1</process-id>
      <author />
      <category />
      <status />
      <keywords />
      <systems />
      <last-modified-by />
      <last-modified>1290593530443</last-modified>
    </meta>
  </process-def>
</process>