<process draft="false" dev-studio-version="20.02.00">
  <process-def name=":AO-AD-Amazon_EC2_REST:Adapter_Actions:v1.0:Instance_Operations:Modify Instance Attribute">
    <parameters>
      <input global="false" required="false">
        <description>adapter name    [Optional]
            The name of the adapter use to handle the request.

Default value: AmazonEC2RESTActorAdapter</description>
        <from>adapter name</from>
        <to>adapter name</to>
      </input>
      <input global="false" required="false">
        <description>access key    [Optional]
	The AWS access key.</description>
        <from>access key</from>
        <to>access key</to>
      </input>
      <input global="false" required="false">
        <description>secret key    [Optional]
	The AWS secret access key.</description>
        <from>secret key</from>
        <to>secret key</to>
      </input>
      <input global="false" required="false">
        <description>session token [Optional] : The AWS session token which is generally created for temporary access to users for role based authorization.

Please Note: The temporary access key , secret key and session token to be generated by the user to provide in adapter request.

Please refer below AWS docs for more details

https://docs.aws.amazon.com/IAM/latest/UserGuide/id_credentials_temp_request.html  

https://docs.aws.amazon.com/cli/latest/reference/sts/assume-role.html
</description>
        <from>session token</from>
        <to>session token</to>
      </input>
      <input global="false" required="false">
        <description>region    [Optional]
		The region to communicate with.</description>
        <from>region</from>
        <to>region</to>
      </input>
      <input global="false" required="true">
        <description>instance id [Mandatory]

The instance ID to modify</description>
        <from>instance id</from>
        <to>instance id</to>
      </input>
      <input global="false" required="false">
        <description>user data [Optional]

User data to be made available to the instance
</description>
        <from>user data</from>
        <to>user data</to>
      </input>
      <input global="false" required="false">
        <description>instance type [Optional]

Specifies the instance type.

Valid Values: m1.small</description>
        <from>instance type</from>
        <to>instance type</to>
      </input>
      <input global="false" required="false">
        <description>kernel [Optional]

The ID of the kernel with which to launch the instance.</description>
        <from>kernel</from>
        <to>kernel</to>
      </input>
      <input global="false" required="false">
        <description>ramdisk [Optional]

The ID of the RAM disk with which to launch the instance. Some kernels require additional drivers at launch. Check the kernel requirements for information on whether you need to specify a RAM disk. To find kernel requirements, go to the Resource Center and search for the kernel ID.</description>
        <from>ramdisk</from>
        <to>ramdisk</to>
      </input>
      <input global="false" required="false">
        <description>block device mapping [Optional]

Modifies the "DeleteOnTermination" attribute for the specified attached volume. The volume must be owned by the caller.

device-name - The device name (e.g., /dev/sdh)
ebs - encloses the &lt;delete-on-termination&gt; tag
delete-on-termination - Specifies whether the Amazon EBS volume is deleted on instance termination. Valid values: true, false


&lt;block-device-mapping&gt;
    &lt;!--Zero or more repetition--&gt;
    &lt;item&gt;
        &lt;device-name&gt;&lt;/device-name&gt;
        &lt;ebs&gt;
            &lt;delete-on-termination&gt;&lt;/delete-on-termination&gt;
        &lt;/ebs&gt;
    &lt;/item&gt;
&lt;/block-device-mapping&gt;</description>
        <from>block device mapping</from>
        <to>block device mapping</to>
      </input>
      <input global="false" required="false">
        <description>instance initiated shutdown behavior [Optional]

Specifies whether the instance's Amazon EBS volumes are stopped or terminated when the instance is shut down.

Valid Values: stop</description>
        <from>instance initiated shutdown behavior</from>
        <to>instance initiated shutdown behavior</to>
      </input>
      <output global="false" required="false">
        <description>The adapter response containing the results. </description>
        <to>adapter response</to>
        <from>adapter response</from>
      </output>
    </parameters>
    <access />
    <sequence>
      <call-process>
        <process-name>:AO-AD-Amazon_EC2_REST:Utilities:Instance_Operations:Construct Request for Modify Instance Attribute</process-name>
        <parameters>
          <input>
            <from>access key</from>
            <to>access key</to>
          </input>
          <input>
            <from>secret key</from>
            <to>secret key</to>
          </input>
          <input>
            <from>session token</from>
            <to>session token</to>
          </input>
          <input>
            <from>region</from>
            <to>region</to>
          </input>
          <input>
            <from>instance id</from>
            <to>instance id</to>
          </input>
          <input>
            <from>user data</from>
            <to>user data</to>
          </input>
          <input>
            <from>instance type</from>
            <to>instance type</to>
          </input>
          <input>
            <from>kernel</from>
            <to>kernel</to>
          </input>
          <input>
            <from>ramdisk</from>
            <to>ramdisk</to>
          </input>
          <input>
            <from>block device mapping</from>
            <to>block device mapping</to>
          </input>
          <input>
            <from>instance initiated shutdown behavior</from>
            <to>instance initiated shutdown behavior</to>
          </input>
          <output>
            <from>adapter request</from>
            <to>adapter request</to>
          </output>
        </parameters>
        <meta>
          <documentation />
          <run-mode-handling>
            <run-mode>OCP</run-mode>
            <allow-step-into>false</allow-step-into>
          </run-mode-handling>
          <checkpoint>false</checkpoint>
        </meta>
        <location>:call-process[1]</location>
      </call-process>
      <call-process>
        <process-name>:AO-AD-Amazon_EC2_REST:Utilities:Call Amazon EC2 Adapter</process-name>
        <unique-id>9059c308-39fc-3695-a5b3-24f374d1da7b</unique-id>
        <parameters>
          <input>
            <from>adapter name</from>
            <to>adapter name</to>
          </input>
          <input>
            <from>adapter request</from>
            <to>adapter request</to>
          </input>
          <output>
            <from>adapter response</from>
            <to>adapter response</to>
          </output>
        </parameters>
        <meta>
          <documentation />
          <run-mode-handling>
            <run-mode>OCP</run-mode>
            <allow-step-into>false</allow-step-into>
          </run-mode-handling>
          <checkpoint>false</checkpoint>
        </meta>
        <location>:call-process[2]</location>
      </call-process>
    </sequence>
    <meta>
      <expose-to>
        <consumer>RULE</consumer>
        <consumer>SCHEDULE</consumer>
      </expose-to>
      <documentation>
        <description>Modifies an attribute of an instance.</description>
        <version>1.0</version>
      </documentation>
      <logging-options>
        <is-enabled>false</is-enabled>
        <log-file-name></log-file-name>
      </logging-options>
      <peer-location>
        <location>any</location>
      </peer-location>
      <record-metrics>false</record-metrics>
      <process-id>6f1e59dc-46e3-33a5-9365-30689aa01d96</process-id>
      <author>admin</author>
      <category></category>
      <status></status>
      <keywords></keywords>
      <systems></systems>
      <last-modified-by>aoadmin</last-modified-by>
      <last-modified>1609915574045</last-modified>
    </meta>
  </process-def>
</process>