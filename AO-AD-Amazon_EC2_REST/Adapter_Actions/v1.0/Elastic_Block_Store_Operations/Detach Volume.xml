<process draft="false" dev-studio-version="20.02.00">
  <process-def name=":AO-AD-Amazon_EC2_REST:Adapter_Actions:v1.0:Elastic_Block_Store_Operations:Detach Volume">
    <parameters>
      <input global="false" required="false">
        <description>adapter name    [Optional]
            The name of the adapter use to handle the request.

Default value: AmazonEC2RESTActorAdapter</description>
        <from>adapter name</from>
        <to>adapter name</to>
      </input>
      <input global="false" required="false">
        <description>access key    [Optional]
	The AWS access key.</description>
        <from>access key</from>
        <to>access key</to>
      </input>
      <input global="false" required="false">
        <description>secret key    [Optional]
	The AWS secret access key.</description>
        <from>secret key</from>
        <to>secret key</to>
      </input>
      <input global="false" required="false">
        <description>session token [Optional] : The AWS session token which is generally created for temporary access to users for role based authorization.

Please Note: The temporary access key , secret key and session token to be generated by the user to provide in adapter request.

Please refer below AWS docs for more details

https://docs.aws.amazon.com/IAM/latest/UserGuide/id_credentials_temp_request.html  

https://docs.aws.amazon.com/cli/latest/reference/sts/assume-role.html
</description>
        <from>session token</from>
        <to>session token</to>
      </input>
      <input global="false" required="false">
        <description>region    [Optional]
		 The region to communicate with.</description>
        <from>region</from>
        <to>region</to>
      </input>
      <input global="false" required="true">
        <description>volume id [Mandatory]

The ID of the volume to detach. </description>
        <from>volume id</from>
        <to>volume id</to>
      </input>
      <input global="false" required="false">
        <description>instance id [Optional]

The ID of the instance.</description>
        <from>instance id</from>
        <to>instance id</to>
      </input>
      <input global="false" required="false">
        <description>device [Optional]

The device name</description>
        <from>device</from>
        <to>device</to>
      </input>
      <input global="false" required="false">
        <description>force [Optional]

Forces detachment if the previous detachment attempt did not occur cleanly (logging into an instance, unmounting the volume, and detaching normally). This option can lead to data loss or a corrupted file system. Use this option only as a last resort to detach a volume from a failed instance. The instance will not have an opportunity to flush file system caches nor file system meta data. If you use this option, you must perform file system check and repair procedures.</description>
        <from>force</from>
        <to>force</to>
      </input>
      <output global="false" required="false">
        <description>The adapter response containing the results. </description>
        <to>adapter response</to>
        <from>adapter response</from>
      </output>
    </parameters>
    <access />
    <sequence>
      <call-process>
        <process-name>:AO-AD-Amazon_EC2_REST:Utilities:Elastic_Block_Store_Operations:Construct Request for Detach Volume</process-name>
        <parameters>
          <input>
            <from>access key</from>
            <to>access key</to>
          </input>
          <input>
            <from>secret key</from>
            <to>secret key</to>
          </input>
          <input>
            <from>session token</from>
            <to>session token</to>
          </input>
          <input>
            <from>region</from>
            <to>region</to>
          </input>
          <input>
            <from>volume id</from>
            <to>volume id</to>
          </input>
          <input>
            <from>instance id</from>
            <to>instance id</to>
          </input>
          <input>
            <from>device</from>
            <to>device</to>
          </input>
          <input>
            <from>force</from>
            <to>force</to>
          </input>
          <output>
            <from>adapter request</from>
            <to>adapter request</to>
          </output>
        </parameters>
        <meta>
          <documentation />
          <run-mode-handling>
            <run-mode>OCP</run-mode>
            <allow-step-into>false</allow-step-into>
          </run-mode-handling>
          <checkpoint>false</checkpoint>
        </meta>
        <location>:call-process[1]</location>
      </call-process>
      <call-process>
        <process-name>:AO-AD-Amazon_EC2_REST:Utilities:Call Amazon EC2 Adapter</process-name>
        <unique-id>9059c308-39fc-3695-a5b3-24f374d1da7b</unique-id>
        <parameters>
          <input>
            <from>adapter name</from>
            <to>adapter name</to>
          </input>
          <input>
            <from>adapter request</from>
            <to>adapter request</to>
          </input>
          <output>
            <from>adapter response</from>
            <to>adapter response</to>
          </output>
        </parameters>
        <meta>
          <documentation />
          <run-mode-handling>
            <run-mode>OCP</run-mode>
            <allow-step-into>false</allow-step-into>
          </run-mode-handling>
          <checkpoint>false</checkpoint>
        </meta>
        <location>:call-process[2]</location>
      </call-process>
    </sequence>
    <meta>
      <expose-to>
        <consumer>RULE</consumer>
        <consumer>SCHEDULE</consumer>
      </expose-to>
      <documentation>
        <description>Detaches an Amazon EBS volume from an instance.</description>
        <version>1.0</version>
      </documentation>
      <logging-options>
        <is-enabled>false</is-enabled>
        <log-file-name></log-file-name>
      </logging-options>
      <peer-location>
        <location>any</location>
      </peer-location>
      <record-metrics>false</record-metrics>
      <process-id>4f4cbe27-914f-32a0-8924-99a1f1bb2910</process-id>
      <author>admin</author>
      <category></category>
      <status></status>
      <keywords></keywords>
      <systems></systems>
      <last-modified-by>aoadmin</last-modified-by>
      <last-modified>1609915280079</last-modified>
    </meta>
  </process-def>
</process>