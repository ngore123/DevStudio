<process draft="false" dev-studio-version="20.02.00">
  <process-def name=":AO-AD-Amazon_EC2_REST:Utilities:Elastic_IP_Address_Operations:Construct Request for Associate Address">
    <parameters>
      <input global="false" required="false">
        <description>wsdl location [Optional]

The target WSDL URL for Amazon EC2. The value of this parameter overrides the WSDL URL value provided in adapter configuration. A sample WSDL URL is - 
http://ec2.amazonaws.com/doc/2009-11-30/AmazonEC2.wsdl</description>
        <from>access key</from>
        <to>access key</to>
      </input>
      <input global="false" required="false">
        <description>endpoint address [Optional]

The WebService endpoint to use for performing operations on Amazon EC2 instances across different regions. Respective values for different regions are as below:

    * http://us-east-1.ec2.amazonaws.com/ — Endpoint located in the US-East (Northern Virginia) Region
    * http://us-west-1.ec2.amazonaws.com/ — Endpoint located in the US-West (Northern California) Region
    * http://eu-west-1.ec2.amazonaws.com/ ---Endpoint located in the EU (Ireland) Region
</description>
        <from>secret key</from>
        <to>secret key</to>
      </input>
      <input global="false" required="false">
        <description>session token [Optional] : The AWS session token which is generally created for temporary access to users for role based authorization.

Please Note: The temporary access key , secret key and session token to be generated by the user to provide in adapter request.

Please refer below AWS docs for more details

https://docs.aws.amazon.com/IAM/latest/UserGuide/id_credentials_temp_request.html  

https://docs.aws.amazon.com/cli/latest/reference/sts/assume-role.html
</description>
        <from>session token</from>
        <to>session token</to>
      </input>
      <input global="false" required="false">
        <description>region    [Optional]
		 The region to communicate with.</description>
        <from>region</from>
        <to>region</to>
      </input>
      <input global="false" required="false">
        <description>public ip [Conditional]

The Elastic IP address to be assigned to the specified instance.

Condition: Required for Elastic IP addresses to be associated with instances in EC2-Classic.</description>
        <from>public ip</from>
        <to>public ip</to>
      </input>
      <input global="false" required="false">
        <description>instance id [Conditional]

The instance to associate with the IP address.

Condition: Required for EC2-Classic. For a VPC, you can specify either InstanceID or NetworkInterfaceID, but not both.</description>
        <from>instance id</from>
        <to>instance id</to>
      </input>
      <input global="false" required="false">
        <description>allocation id [Conditional]

The allocation ID that AWS returned when you allocated the elastic IP address for use with Amazon VPC.

Condition: Required for EC2-VPC</description>
        <from>allocation id</from>
        <to>allocation id</to>
      </input>
      <input global="false" required="false">
        <description>allow reassociation [Optional] 

Allows an Elastic IP address that is already associated with an instance or network interface to be re-associated with the specified instance or network interface.

Valid Values: true, false (default)

Note: Valid for EC2-VPC only</description>
        <from>allow reassociation</from>
        <to>allow reassociation</to>
      </input>
      <input global="false" required="false">
        <description>network interface id [Conditional]

The Network Interface Id to which this IP address needs to be associated.

Condition: Required when the specified instance has more than one network interface.

Note: Valid for EC2-VPC only</description>
        <from>network interface id</from>
        <to>network interface id</to>
      </input>
      <input global="false" required="false">
        <description>private ip [Optional]

The primary or secondary private IP address to associate with the Elastic IP address. If no private IP address is specified, the Elastic IP address is associated with the primary private IP address.

Note: Valid for EC2-VPC only</description>
        <from>private ip</from>
        <to>private ip</to>
      </input>
      <output global="false" required="false">
        <to>adapter request</to>
        <from>adapter request</from>
      </output>
    </parameters>
    <access />
    <sequence>
      <assign>
        <assignment>
          <output>
            <to>adapter request</to>
            <value>
              <empty />
            </value>
          </output>
          <xslt-stylesheet>
            <stylesheet-replacement-tokens>
              <replacement-token name="access key">
                <input global="false">
                  <from>access key</from>
                </input>
              </replacement-token>
              <replacement-token name="secret key">
                <input global="false">
                  <from>secret key</from>
                </input>
              </replacement-token>
              <replacement-token name="public ip">
                <input global="false">
                  <from>public ip</from>
                </input>
              </replacement-token>
              <replacement-token name="instance id">
                <input global="false">
                  <from>instance id</from>
                </input>
              </replacement-token>
              <replacement-token name="allocation id">
                <input global="false">
                  <from>allocation id</from>
                </input>
              </replacement-token>
              <replacement-token name="allow reassociation">
                <input global="false">
                  <from>allow reassociation</from>
                </input>
              </replacement-token>
              <replacement-token name="network id">
                <input global="false">
                  <from>network interface id</from>
                </input>
              </replacement-token>
              <replacement-token name="private ip">
                <input global="false">
                  <from>private ip</from>
                </input>
              </replacement-token>
              <replacement-token name="region">
                <input global="false">
                  <from>region</from>
                </input>
              </replacement-token>
              <replacement-token name="session token">
                <input global="false">
                  <from>session token</from>
                </input>
              </replacement-token>
            </stylesheet-replacement-tokens>
            <stylesheet><![CDATA[<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="1.0">
  <xsl:output indent="yes" />
  <xsl:template match="/">
    <request-data>
      <amazon-ec2-rest-request>
        <xsl:if test="string-length('${access key}')&gt;0">
          <access-key>${access key}</access-key>
        </xsl:if>
        <xsl:if test="string-length('${secret key}')&gt;0">
          <secret-key>${secret key}</secret-key>
        </xsl:if>
        <xsl:if test="string-length('${session token}')&gt;0  and string-length('${secret key}')&gt;0 and string-length('${access key}')&gt;0">
          <session-token>${session token}</session-token>
        </xsl:if>
        <operation-name>
          <xsl:text disable-output-escaping="no">associate-address</xsl:text>
        </operation-name>
        <xsl:if test="string-length('${region}')&gt;0">
          <region>${region}</region>
        </xsl:if>
        <parameters>
          <public-ip>
            <xsl:text disable-output-escaping="no">${public ip}</xsl:text>
          </public-ip>
          <instance-id>
            <xsl:text disable-output-escaping="no">${instance id}</xsl:text>
          </instance-id>
          <allocation-id>${allocation id}</allocation-id>
          <allow-reassociation>${allow reassociation}</allow-reassociation>
          <network-interface-id>${network id}</network-interface-id>
          <private-ip>${private ip}</private-ip>
        </parameters>
      </amazon-ec2-rest-request>
    </request-data>
  </xsl:template>
</xsl:stylesheet>]]></stylesheet>
          </xslt-stylesheet>
        </assignment>
        <meta>
          <documentation />
          <checkpoint>false</checkpoint>
        </meta>
        <location>:assign[1]</location>
      </assign>
    </sequence>
    <meta>
      <expose-to>
        <consumer>RULE</consumer>
        <consumer>SCHEDULE</consumer>
      </expose-to>
      <documentation>
        <description>Associates an elastic IP address with an instance. If the IP address is currently assigned to another
instance, the IP address is assigned to the new instance. This is an idempotent operation. If you enter
it more than once, Amazon EC2 does not return an error.</description>
        <version>1.0</version>
      </documentation>
      <logging-options>
        <is-enabled>false</is-enabled>
        <log-file-name></log-file-name>
      </logging-options>
      <peer-location>
        <location>any</location>
      </peer-location>
      <record-metrics>false</record-metrics>
      <process-id>f7fba6e4-e75b-3ae1-8540-407db32361e2</process-id>
      <author>admin</author>
      <category></category>
      <status></status>
      <keywords></keywords>
      <systems></systems>
      <last-modified-by>aoadmin</last-modified-by>
      <last-modified>1609918394286</last-modified>
    </meta>
  </process-def>
</process>