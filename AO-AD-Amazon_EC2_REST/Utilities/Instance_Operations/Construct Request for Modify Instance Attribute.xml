<process draft="false" dev-studio-version="20.02.00">
  <process-def name=":AO-AD-Amazon_EC2_REST:Utilities:Instance_Operations:Construct Request for Modify Instance Attribute">
    <parameters>
      <input global="false" required="false">
        <description>wsdl location [Optional]

The target WSDL URL for Amazon EC2. The value of this parameter overrides the WSDL URL value provided in adapter configuration. A sample WSDL URL is - 
http://ec2.amazonaws.com/doc/2009-11-30/AmazonEC2.wsdl</description>
        <from>access key</from>
        <to>access key</to>
      </input>
      <input global="false" required="false">
        <description>endpoint address [Optional]

The WebService endpoint to use for performing operations on Amazon EC2 instances across different regions. Respective values for different regions are as below:

    * http://us-east-1.ec2.amazonaws.com/ — Endpoint located in the US-East (Northern Virginia) Region
    * http://us-west-1.ec2.amazonaws.com/ — Endpoint located in the US-West (Northern California) Region
    * http://eu-west-1.ec2.amazonaws.com/ ---Endpoint located in the EU (Ireland) Region
</description>
        <from>secret key</from>
        <to>secret key</to>
      </input>
      <input global="false" required="false">
        <description>session token [Optional] : The AWS session token which is generally created for temporary access to users for role based authorization.

Please Note: The temporary access key , secret key and session token to be generated by the user to provide in adapter request.

Please refer below AWS docs for more details

https://docs.aws.amazon.com/IAM/latest/UserGuide/id_credentials_temp_request.html  

https://docs.aws.amazon.com/cli/latest/reference/sts/assume-role.html
</description>
        <from>session token</from>
        <to>session token</to>
      </input>
      <input global="false" required="false">
        <description>region    [Optional]
		 The region to communicate with.</description>
        <from>region</from>
        <to>region</to>
      </input>
      <input global="false" required="true">
        <description>instance id [Mandatory]

The instance ID to modify</description>
        <from>instance id</from>
        <to>instance id</to>
      </input>
      <input global="false" required="false">
        <description>user data [Optional]

User data to be made available to the instance
</description>
        <from>user data</from>
        <to>user data</to>
      </input>
      <input global="false" required="false">
        <description>instance type [Optional]

Specifies the instance type.

Valid Values: m1.small</description>
        <from>instance type</from>
        <to>instance type</to>
      </input>
      <input global="false" required="false">
        <description>kernel [Optional]

The ID of the kernel with which to launch the instance.</description>
        <from>kernel</from>
        <to>kernel</to>
      </input>
      <input global="false" required="false">
        <description>ramdisk [Optional]

The ID of the RAM disk with which to launch the instance. Some kernels require additional drivers at launch. Check the kernel requirements for information on whether you need to specify a RAM disk. To find kernel requirements, go to the Resource Center and search for the kernel ID.</description>
        <from>ramdisk</from>
        <to>ramdisk</to>
      </input>
      <input global="false" required="false">
        <description>block device mapping [Optional]

Modifies the "DeleteOnTermination" attribute for the specified attached volume. The volume must be owned by the caller.

device-name - The device name (e.g., /dev/sdh)
ebs - encloses the &lt;delete-on-termination&gt; tag
delete-on-termination - Specifies whether the Amazon EBS volume is deleted on instance termination. Valid values: true, false


&lt;block-device-mapping&gt;
    &lt;!--Zero or more repetition--&gt;
    &lt;item&gt;
        &lt;device-name&gt;&lt;/device-name&gt;
        &lt;ebs&gt;
            &lt;delete-on-termination&gt;&lt;/delete-on-termination&gt;
        &lt;/ebs&gt;
    &lt;/item&gt;
&lt;/block-device-mapping&gt;
</description>
        <from>block device mapping</from>
        <to>block device mapping</to>
      </input>
      <input global="false" required="false">
        <description>instance initiated shutdown behavior [Optional]

Specifies whether the instance's Amazon EBS volumes are stopped or terminated when the instance is shut down.

Valid Values: stop</description>
        <from>instance initiated shutdown behavior</from>
        <to>instance initiated shutdown behavior</to>
      </input>
      <output global="false" required="false">
        <to>adapter request</to>
        <from>adapter request</from>
      </output>
    </parameters>
    <access />
    <sequence>
      <assign>
        <assignment>
          <output>
            <to>adapter request</to>
            <value>
              <empty />
            </value>
          </output>
          <xslt-stylesheet>
            <stylesheet-replacement-tokens>
              <replacement-token name="access key">
                <input global="false">
                  <from>access key</from>
                </input>
              </replacement-token>
              <replacement-token name="secret key">
                <input global="false">
                  <from>secret key</from>
                </input>
              </replacement-token>
              <replacement-token name="instance id">
                <input global="false">
                  <from>instance id</from>
                </input>
              </replacement-token>
              <replacement-token name="user data">
                <input global="false">
                  <from>user data</from>
                </input>
              </replacement-token>
              <replacement-token name="instance type">
                <input global="false">
                  <from>instance type</from>
                </input>
              </replacement-token>
              <replacement-token name="kernel">
                <input global="false">
                  <from>kernel</from>
                </input>
              </replacement-token>
              <replacement-token name="ramdisk">
                <input global="false">
                  <from>ramdisk</from>
                </input>
              </replacement-token>
              <replacement-token name="block device mapping">
                <input global="false">
                  <from>block device mapping</from>
                </input>
              </replacement-token>
              <replacement-token name="instance initiated shutdown behavior">
                <input global="false">
                  <from>instance initiated shutdown behavior</from>
                </input>
              </replacement-token>
              <replacement-token name="region">
                <input global="false">
                  <from>region</from>
                </input>
              </replacement-token>
              <replacement-token name="session token">
                <input global="false">
                  <from>session token</from>
                </input>
              </replacement-token>
            </stylesheet-replacement-tokens>
            <stylesheet><![CDATA[<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="1.0">
  <xsl:output indent="yes" />
  <xsl:template match="/">
    <request-data>
      <amazon-ec2-rest-request>
        <xsl:if test="string-length('${access key}')&gt;0">
          <access-key>${access key}</access-key>
        </xsl:if>
        <xsl:if test="string-length('${secret key}')&gt;0">
          <secret-key>${secret key}</secret-key>
        </xsl:if>
        <xsl:if test="string-length('${session token}')&gt;0  and string-length('${secret key}')&gt;0 and string-length('${access key}')&gt;0">
          <session-token>${session token}</session-token>
        </xsl:if>
        <operation-name>
          <xsl:text disable-output-escaping="no">modify-instance-attribute</xsl:text>
        </operation-name>
        <xsl:if test="string-length('${region}')&gt;0">
          <region>${region}</region>
        </xsl:if>
        <parameters>
          <instance-id>${instance id}</instance-id>
          <xsl:if test="string-length('${user data}')&gt;0">
            <user-data>
              <value>${user data}</value>
            </user-data>
          </xsl:if>
          <xsl:if test="string-length('${instance type}')&gt;0">
            <instance-type>
              <value>${instance type}</value>
            </instance-type>
          </xsl:if>
          <xsl:if test="string-length('${kernel}')&gt;0">
            <kernel>
              <value>${kernel}</value>
            </kernel>
          </xsl:if>
          <xsl:if test="string-length('${ramdisk}')&gt;0">
            <ramdisk>
              <value>${ramdisk}</value>
            </ramdisk>
          </xsl:if>
          ${block device mapping}
          <xsl:if test="string-length('${instance initiated shutdown behavior}')&gt;0">
            <instance-initiated-shutdown-behavior>
              <value>${instance initiated shutdown behavior}</value>
            </instance-initiated-shutdown-behavior>
          </xsl:if>
        </parameters>
      </amazon-ec2-rest-request>
    </request-data>
  </xsl:template>
</xsl:stylesheet>]]></stylesheet>
          </xslt-stylesheet>
        </assignment>
        <meta>
          <documentation />
          <checkpoint>false</checkpoint>
        </meta>
        <location>:assign[1]</location>
      </assign>
    </sequence>
    <meta>
      <expose-to>
        <consumer>RULE</consumer>
        <consumer>SCHEDULE</consumer>
      </expose-to>
      <documentation>
        <description>Modifies an attribute of an instance.</description>
        <version>1.0</version>
      </documentation>
      <logging-options>
        <is-enabled>false</is-enabled>
        <log-file-name></log-file-name>
      </logging-options>
      <peer-location>
        <location>any</location>
      </peer-location>
      <record-metrics>false</record-metrics>
      <process-id>9168ae65-1e23-3612-aec2-94e7d015d6a3</process-id>
      <author>admin</author>
      <category></category>
      <status></status>
      <keywords></keywords>
      <systems></systems>
      <last-modified-by>aoadmin</last-modified-by>
      <last-modified>1609916383571</last-modified>
    </meta>
  </process-def>
</process>