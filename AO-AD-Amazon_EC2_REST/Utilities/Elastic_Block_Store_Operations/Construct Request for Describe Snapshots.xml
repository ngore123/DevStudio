<process draft="false" dev-studio-version="20.02.00">
  <process-def name=":AO-AD-Amazon_EC2_REST:Utilities:Elastic_Block_Store_Operations:Construct Request for Describe Snapshots">
    <parameters>
      <input global="false" required="false">
        <description>access key    [Optional]
	The AWS access key.</description>
        <from>access key</from>
        <to>access key</to>
      </input>
      <input global="false" required="false">
        <description>secret key    [Optional]
	The AWS secret access key.</description>
        <from>secret key</from>
        <to>secret key</to>
      </input>
      <input global="false" required="false">
        <description>session token [Optional] : The AWS session token which is generally created for temporary access to users for role based authorization.

Please Note: The temporary access key , secret key and session token to be generated by the user to provide in adapter request.

Please refer below AWS docs for more details

https://docs.aws.amazon.com/IAM/latest/UserGuide/id_credentials_temp_request.html  

https://docs.aws.amazon.com/cli/latest/reference/sts/assume-role.html
</description>
        <from>session token</from>
        <to>session token</to>
      </input>
      <input global="false" required="false">
        <description>region    [Optional]
		 The region to communicate with.</description>
        <from>region</from>
        <to>region</to>
      </input>
      <input global="false" required="false">
        <description>snapshot set [Optional]

Set of snapshots.

&lt;snapshot-set&gt;
    &lt;!--Zero or more repetition--&gt;
    &lt;item&gt;
        &lt;snapshot-id&gt;&lt;/snapshot-id&gt;
    &lt;/item&gt;
&lt;/snapshot-set&gt;

</description>
        <from>snapshot set</from>
        <to>snapshot set</to>
      </input>
      <input global="false" required="false">
        <description>owners set [Optional]

Set of owners that can create volumes from the snapshots. Returns snapshots owned by the specified owners and for which you have the "create volume" permission.

Valid Values: 'self', 'amazon', AWS Account ID

&lt;owners-set&gt;
    &lt;!--Zero or more repetition--&gt;
    &lt;item&gt;
        &lt;owner&gt;&lt;/owner&gt;
    &lt;/item&gt;
&lt;/owners-set&gt;
</description>
        <from>owners set</from>
        <to>owners set</to>
      </input>
      <input global="false" required="false">
        <description>restorable by set [Optional]

Set of users that can create volumes from the snapshot. Specify Account ID of a user that can create volumes from the snapshot.

&lt;restorable-by-set&gt;
    &lt;!--Zero or more repetition--&gt;
    &lt;item&gt;
        &lt;user&gt;&lt;/user&gt;
    &lt;/item&gt;
&lt;/restorable-by-set&gt;
</description>
        <from>restorable by set</from>
        <to>restorable by set</to>
      </input>
      <input global="false" required="false">
        <description>filter set [Optional]

The details of the filter as per which you want to retrieve the snapshots.

&lt;filter-set&gt;
    &lt;!--Zero or more repetition--&gt;
    &lt;item&gt;
        &lt;name&gt;status&lt;/name&gt;
        &lt;value-set&gt;
            &lt;!--Zero or more repetition--&gt;
            &lt;item&gt;
                &lt;value&gt;pending&lt;/value&gt;
            &lt;/item&gt;
        &lt;/value-set&gt;
    &lt;/item&gt;
&lt;/filter-set&gt;

The following are the available filters.

description (Type: String)
	A description of the snapshot.

owner-alias (Type: String)
	The AWS account alias (for example, amazon) that owns the snapshot.

owner-id (Type: String)
	The ID of the AWS account that owns the snapshot.

progress 
	The progress of the snapshot, as a percentage (for example, 80%).

snapshot-id (Type: String)
	The snapshot ID.

start-time 
	The time stamp when the snapshot was initiated.

status (Type: String)
	The status of the snapshot 
	Valid Values: pending | completed | error

tag:key=value 
	The key/value combination of a tag assigned to the resource.

tag-key (Type: String)
	The key of a tag assigned to the resource. This filter is independent of the tag-value filter. For example, if you use both the filter "tag-key=Purpose" and the filter "tag-value=X", you get any resources assigned both the tag key Purpose (regardless of what the tag's value is), and the tag value X (regardless of what the tag's key is). If you want to list only resources where Purpose is X, see the tag:key=value filter.

tag-value (Type: String)
	The value of a tag assigned to the resource. This filter is independent of the tag-key filter.

volume-id (Type: String)
	The ID of the volume the snapshot is for.

volume-size
	The size of the volume, in GiB.</description>
        <from>filter set</from>
        <to>filter set</to>
      </input>
      <output global="false" required="false">
        <to>adapter request</to>
        <from>adapter request</from>
      </output>
    </parameters>
    <access />
    <sequence>
      <assign>
        <assignment>
          <output>
            <to>adapter request</to>
            <value>
              <empty />
            </value>
          </output>
          <xslt-stylesheet>
            <stylesheet-replacement-tokens>
              <replacement-token name="access key">
                <input global="false">
                  <from>access key</from>
                </input>
              </replacement-token>
              <replacement-token name="secret key">
                <input global="false">
                  <from>secret key</from>
                </input>
              </replacement-token>
              <replacement-token name="snapshot set">
                <input global="false">
                  <from>snapshot set</from>
                </input>
              </replacement-token>
              <replacement-token name="owners set">
                <input global="false">
                  <from>owners set</from>
                </input>
              </replacement-token>
              <replacement-token name="restorable by set">
                <input global="false">
                  <from>restorable by set</from>
                </input>
              </replacement-token>
              <replacement-token name="region">
                <input global="false">
                  <from>region</from>
                </input>
              </replacement-token>
              <replacement-token name="filters">
                <input global="false">
                  <from>filter set</from>
                </input>
              </replacement-token>
              <replacement-token name="session token">
                <input global="false">
                  <from>session token</from>
                </input>
              </replacement-token>
            </stylesheet-replacement-tokens>
            <stylesheet><![CDATA[<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="1.0">
  <xsl:output indent="yes" />
  <xsl:template match="/">
    <request-data>
      <amazon-ec2-rest-request>
        <xsl:if test="string-length('${access key}')&gt;0">
          <access-key>${access key}</access-key>
        </xsl:if>
        <xsl:if test="string-length('${secret key}')&gt;0">
          <secret-key>${secret key}</secret-key>
        </xsl:if>
        <xsl:if test="string-length('${session token}')&gt;0  and string-length('${secret key}')&gt;0 and string-length('${access key}')&gt;0">
          <session-token>${session token}</session-token>
        </xsl:if>
        <operation-name>
          <xsl:text disable-output-escaping="no">describe-snapshots</xsl:text>
        </operation-name>
        <xsl:if test="string-length('${region}')&gt;0">
          <region>${region}</region>
        </xsl:if>
        <parameters>${snapshot set}${owners set}${restorable by set}${filters}</parameters>
      </amazon-ec2-rest-request>
    </request-data>
  </xsl:template>
</xsl:stylesheet>]]></stylesheet>
          </xslt-stylesheet>
        </assignment>
        <meta>
          <documentation />
          <checkpoint>false</checkpoint>
        </meta>
        <location>:assign[1]</location>
      </assign>
    </sequence>
    <meta>
      <expose-to>
        <consumer>RULE</consumer>
        <consumer>SCHEDULE</consumer>
      </expose-to>
      <documentation>
        <description>Returns information about Amazon EBS snapshots available to the user.
The list of snapshots returned can be modified by specifying snapshot IDs, snapshot owners, or users
with create volume permissions. If no options are specified, Amazon EC2 returns all snapshots for
which the user has create volume permissions.
If you specify one or more snapshot IDs, only snapshots that have the specified IDs are returned. If
you specify an invalid snapshot ID, a fault is returned. If you specify a snapshot ID for which you do not
have access, it will not be included in the returned results.
If you specify one or more snapshot owners, only snapshots from the specified owners and for which
you have access are returned. The results can include the AWS Account IDs of the specified owners,
amazon for snapshots owned by Amazon or self for snapshots that you own.
If you specify a list of restorable users, only users that have create snapshot permissions for the
snapshots are returned. You can specify AWS Account IDs (if you own the snapshot(s)), self for
snapshots for which you own or have explicit permissions, or all for public snapshots.</description>
        <version>1.0</version>
      </documentation>
      <logging-options>
        <is-enabled>false</is-enabled>
        <log-file-name></log-file-name>
      </logging-options>
      <peer-location>
        <location>any</location>
      </peer-location>
      <record-metrics>false</record-metrics>
      <process-id>d3705446-e3d4-3193-9e8e-6c25996906bc</process-id>
      <author>admin</author>
      <category></category>
      <status></status>
      <keywords></keywords>
      <systems></systems>
      <last-modified-by>aoadmin</last-modified-by>
      <last-modified>1609918088106</last-modified>
    </meta>
  </process-def>
</process>