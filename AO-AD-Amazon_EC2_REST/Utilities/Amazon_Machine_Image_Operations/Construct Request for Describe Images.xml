<process draft="false" dev-studio-version="20.02.00">
  <process-def name=":AO-AD-Amazon_EC2_REST:Utilities:Amazon_Machine_Image_Operations:Construct Request for Describe Images">
    <parameters>
      <input global="false" required="false">
        <description>access key    [Optional]
	The AWS access key.</description>
        <from>access key</from>
        <to>access key</to>
      </input>
      <input global="false" required="false">
        <description>secret key    [Optional]
	The AWS secret access key.</description>
        <from>secret key</from>
        <to>secret key</to>
      </input>
      <input global="false" required="false">
        <description>session token [Optional] : The AWS session token which is generally created for temporary access to users for role based authorization.

Please Note: The temporary access key , secret key and session token to be generated by the user to provide in adapter request.

Please refer below AWS docs for more details

https://docs.aws.amazon.com/IAM/latest/UserGuide/id_credentials_temp_request.html  

https://docs.aws.amazon.com/cli/latest/reference/sts/assume-role.html
</description>
        <from>session token</from>
        <to>session token</to>
      </input>
      <input global="false" required="false">
        <description>region    [Optional]
		 The region to communicate with.</description>
        <from>region</from>
        <to>region</to>
      </input>
      <input global="false" required="false">
        <description>executable by set [optional]

Filters the images by users with explicit launch permissions. Specify an AWS account ID, self (the sender of the request), or all (public AMIs).

Valid values: all | self | AWS account ID

&lt;executable-by-set&gt;
    &lt;!--Zero or more repetition--&gt;
    &lt;item&gt;
        &lt;user&gt;&lt;/user&gt;
    &lt;/item&gt;
&lt;/executable-by-set&gt;
</description>
        <from>executable by set</from>
        <to>executable by set</to>
      </input>
      <input global="false" required="false">
        <description>images set [Optional]

One or more AMI IDs to describe.

&lt;images-set&gt;
    &lt;!--Zero or more repetition--&gt;
    &lt;item&gt;
        &lt;image-id&gt;&lt;/image-id&gt;
    &lt;/item&gt;
&lt;/images-set&gt;
</description>
        <from>images set</from>
        <to>images set</to>
      </input>
      <input global="false" required="false">
        <description>owners set [Optional]

Filters the images by their owner(s). Specify an AWS account ID, amazon (owner is Amazon), aws-marketplace (owner is AWS Marketplace), self (owner is the sender of the request), or all (all owners).

Valid values: amazon | aws-marketplace | self | AWS account ID | all

&lt;owners-set&gt;
    &lt;!--Zero or more repetition--&gt;
    &lt;item&gt;
        &lt;owner&gt;&lt;/owner&gt;
    &lt;/item&gt;
&lt;/owners-set&gt;
</description>
        <from>owners set</from>
        <to>owners set</to>
      </input>
      <input global="false" required="false">
        <description>filter set [Optional]

The details of the filter as per which you want to retrieve the images.

&lt;filter-set&gt;
    &lt;!--Zero or more repetition--&gt;
    &lt;item&gt;
        &lt;name&gt;virtualization-type&lt;/name&gt;
        &lt;value-set&gt;
            &lt;!--Zero or more repetition--&gt;
            &lt;item&gt;
                &lt;value&gt;paravirtual&lt;/value&gt;
            &lt;/item&gt;
        &lt;/value-set&gt;
    &lt;/item&gt;
&lt;/filter-set&gt;

The following are the available filters.

    architecture - The image architecture (i386 | x86_64).

    block-device-mapping.delete-on-termination - A Boolean value that indicates whether the Amazon EBS volume is deleted on instance termination.

    block-device-mapping.device-name - The device name for the EBS volume (for example, /dev/sdh).

    block-device-mapping.snapshot-id - The ID of the snapshot used for the EBS volume.

    block-device-mapping.volume-size - The volume size of the EBS volume, in GiB.

    block-device-mapping.volume-type - The volume type of the EBS volume (gp2 | standard | io1).

    description - The description of the image (provided during image creation).

    hypervisor - The hypervisor type (ovm | xen).

    image-id - The ID of the image.

    image-type - The image type (machine | kernel | ramdisk).

    is-public - A Boolean that indicates whether the image is public.

    kernel-id - The kernel ID.

    manifest-location - The location of the image manifest.

    name - The name of the AMI (provided during image creation).

    owner-alias - The AWS account alias (for example, amazon).

    owner-id - The AWS account ID of the image owner.

    platform - The platform. To only list Windows-based AMIs, use windows.

    product-code - The product code.

    product-code.type - The type of the product code (devpay | marketplace).

    ramdisk-id - The RAM disk ID.

    root-device-name - The name of the root device volume (for example, /dev/sda1).

    root-device-type - The type of the root device volume (ebs | instance-store).

    state - The state of the image (available | pending | failed).

    state-reason-code - The reason code for the state change.

    state-reason-message - The message for the state change.

    tag:key=value - The key/value combination of a tag assigned to the resource.

    tag-key - The key of a tag assigned to the resource. This filter is independent of the tag-value filter. For example, if you use both the filter "tag-key=Purpose" and the filter "tag-value=X", you get any resources assigned both the tag key Purpose (regardless of what the tag's value is), and the tag value X (regardless of what the tag's key is). If you want to list only resources where Purpose is X, see the tag:key=value filter.

    tag-value - The value of a tag assigned to the resource. This filter is independent of the tag-key filter.

    virtualization-type - The virtualization type (paravirtual | hvm).</description>
        <from>filter set</from>
        <to>filter set</to>
      </input>
      <output global="false" required="false">
        <to>adapter request</to>
        <from>adapter request</from>
      </output>
    </parameters>
    <access />
    <sequence>
      <assign>
        <assignment>
          <output>
            <to>adapter request</to>
            <value>
              <empty />
            </value>
          </output>
          <xslt-stylesheet>
            <stylesheet-replacement-tokens>
              <replacement-token name="access key">
                <input global="false">
                  <from>access key</from>
                </input>
              </replacement-token>
              <replacement-token name="secret key">
                <input global="false">
                  <from>secret key</from>
                </input>
              </replacement-token>
              <replacement-token name="exec by set">
                <input global="false">
                  <from>executable by set</from>
                </input>
              </replacement-token>
              <replacement-token name="images">
                <input global="false">
                  <from>images set</from>
                </input>
              </replacement-token>
              <replacement-token name="owners">
                <input global="false">
                  <from>owners set</from>
                </input>
              </replacement-token>
              <replacement-token name="region">
                <input global="false">
                  <from>region</from>
                </input>
              </replacement-token>
              <replacement-token name="filters">
                <input global="false">
                  <from>filter set</from>
                </input>
              </replacement-token>
              <replacement-token name="session token">
                <input global="false">
                  <from>session token</from>
                </input>
              </replacement-token>
            </stylesheet-replacement-tokens>
            <stylesheet><![CDATA[<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="1.0">
  <xsl:output indent="no" />
  <xsl:template match="/">
    <request-data>
      <amazon-ec2-rest-request>
        <xsl:if test="string-length('${access key}')&gt;0">
          <access-key>${access key}</access-key>
        </xsl:if>
        <xsl:if test="string-length('${secret key}')&gt;0">
          <secret-key>${secret key}</secret-key>
        </xsl:if>
        <xsl:if test="string-length('${session token}')&gt;0  and string-length('${secret key}')&gt;0 and string-length('${access key}')&gt;0">
          <session-token>${session token}</session-token>
        </xsl:if>
        <operation-name>
          <xsl:text disable-output-escaping="no">describe-images</xsl:text>
        </operation-name>
        <xsl:if test="string-length('${region}')&gt;0">
          <region>${region}</region>
        </xsl:if>
        <parameters>${exec by set}${images}${owners}${filters}</parameters>
      </amazon-ec2-rest-request>
    </request-data>
  </xsl:template>
</xsl:stylesheet>]]></stylesheet>
          </xslt-stylesheet>
        </assignment>
        <meta>
          <documentation />
          <checkpoint>false</checkpoint>
        </meta>
        <location>:assign[1]</location>
      </assign>
    </sequence>
    <meta>
      <expose-to>
        <consumer>RULE</consumer>
        <consumer>SCHEDULE</consumer>
      </expose-to>
      <documentation>
        <description>Returns information about AMIs, AKIs, and ARIs. This includes image type, product codes,
architecture, and kernel and RAM disk IDs. Images available to you include public images, private
images that you own, and private images owned by other users for which you have explicit launch
permissions.</description>
        <version>1.0</version>
      </documentation>
      <logging-options>
        <is-enabled>false</is-enabled>
        <log-file-name></log-file-name>
      </logging-options>
      <peer-location>
        <location>any</location>
      </peer-location>
      <record-metrics>false</record-metrics>
      <process-id>68ee3876-0865-38d6-9490-f28d4b55bbbf</process-id>
      <author>admin</author>
      <category></category>
      <status></status>
      <keywords></keywords>
      <systems></systems>
      <last-modified-by>aoadmin</last-modified-by>
      <last-modified>1609917382486</last-modified>
    </meta>
  </process-def>
</process>