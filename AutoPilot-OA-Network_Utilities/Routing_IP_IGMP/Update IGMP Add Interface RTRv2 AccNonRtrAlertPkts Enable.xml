<process draft="false" dev-studio-version="7.6.01.00">
  <process-def name=":AutoPilot-OA-Network_Utilities:Routing_IP_IGMP:Update IGMP Add Interface RTRv2 AccNonRtrAlertPkts Enable">
    <parameters>
      <input global="false" required="true">
        <description>XML document conforming to the Connection Details Concept that contains the information required to execute a command via command line.</description>
        <from>connection details</from>
        <to>connection details</to>
      </input>
      <input global="false" required="true">
        <description>Specifies the name of the interface on which you want to configure IGMP. The InterfaceName parameter must match the name of the interface as specified in Network Connections. If InterfaceName contains spaces, use quotation marks around the text (for example, "Interface Name").</description>
        <from>interface name</from>
        <to>interface name</to>
      </input>
      <input global="false" required="false">
        <description>Specifies the robustness variable. The value should be greater than zero (0). The default value is 2.</description>
        <from>robustness variable</from>
        <to>robust var</to>
      </input>
      <input global="false" required="false">
        <description>Specifies the interval, in seconds, at which general queries should be sent on the interface. The default value is 125 seconds.</description>
        <from>general query interval</from>
        <to>gen query int</to>
      </input>
      <input global="false" required="false">
        <description>Specifies the maximum response time, in seconds, by which hosts should respond to a general query. The default value is 10 seconds.</description>
        <from>maximum response time</from>
        <to>max response time</to>
      </input>
      <input global="false" required="false">
        <description>Specifies the number of general queries that will be sent during startup. The default value is 2.</description>
        <from>startup query count</from>
        <to>startup query count</to>
      </input>
      <input global="false" required="false">
        <description>Specifies the interval, in seconds, between general queries sent during startup. The default value is 31 seconds.</description>
        <from>startup query interval</from>
        <to>startup query interval</to>
      </input>
      <input global="false" required="false">
        <description>Specifies the number of group-specific queries sent when notice of a host leaving the group is received. The default value is 2.</description>
        <from>last query count</from>
        <to>last query count</to>
      </input>
      <input global="false" required="false">
        <description>Specifies the interval, in milliseconds, between group-specific queries. The default value is 1000 milliseconds.</description>
        <from>last query interval</from>
        <to>last query interval</to>
      </input>
      <output global="false" required="true">
        <description>XML document consisting of one or more &lt;line&gt; elements that contain the command response. Each  &lt;line&gt; element contains an index attribute indicating the order in which the information was returned by the command.</description>
        <to>output</to>
        <from>command output</from>
      </output>
      <output global="false" required="true">
        <description>Did the operation Succeed? Valid value: true.</description>
        <to>success</to>
        <from>exit code</from>
      </output>
    </parameters>
    <access />
    <sequence>
      <spawn>
        <meta>
          <documentation />
          <run-mode-handling>
            <run-mode>OCP</run-mode>
            <allow-step-into>true</allow-step-into>
          </run-mode-handling>
          <checkpoint></checkpoint>
        </meta>
        <sequence>
          <spawn>
            <meta>
              <documentation />
              <run-mode-handling>
                <run-mode>OCP</run-mode>
                <allow-step-into>true</allow-step-into>
              </run-mode-handling>
              <checkpoint></checkpoint>
            </meta>
            <sequence>
              <switch>
                <meta>
                  <documentation />
                  <run-mode-handling>
                    <run-mode>OCP</run-mode>
                    <allow-step-into>true</allow-step-into>
                  </run-mode-handling>
                  <checkpoint>false</checkpoint>
                </meta>
                <execute-all-applicable-cases>false</execute-all-applicable-cases>
                <default>
                  <sequence />
                </default>
                <case>
                  <condition>
                    <document>
                      <input>
                        <from>robust var</from>
                      </input>
                    </document>
                    <xpath-expression>
                      <xpath-replacement-tokens />
                      <xpath><![CDATA[. <=0]]></xpath>
                    </xpath-expression>
                  </condition>
                  <sequence>
                    <assign>
                      <assignment>
                        <output>
                          <to>robust var</to>
                          <value>2</value>
                        </output>
                      </assignment>
                      <meta>
                        <documentation />
                        <checkpoint>false</checkpoint>
                      </meta>
                      <location>:spawn[1]:sequence[1]:spawn[1]:sequence[1]:switch[1]:sequence[2]:assign[1]</location>
                    </assign>
                  </sequence>
                </case>
                <location>:spawn[1]:sequence[1]:spawn[1]:sequence[1]:switch[1]</location>
              </switch>
            </sequence>
            <sequence>
              <switch>
                <meta>
                  <documentation />
                  <run-mode-handling>
                    <run-mode>OCP</run-mode>
                    <allow-step-into>true</allow-step-into>
                  </run-mode-handling>
                  <checkpoint>false</checkpoint>
                </meta>
                <execute-all-applicable-cases>false</execute-all-applicable-cases>
                <default>
                  <sequence />
                </default>
                <case>
                  <condition>
                    <document>
                      <input>
                        <from>gen query int</from>
                      </input>
                    </document>
                    <xpath-expression>
                      <xpath-replacement-tokens />
                      <xpath><![CDATA[. <=0]]></xpath>
                    </xpath-expression>
                  </condition>
                  <sequence>
                    <assign>
                      <assignment>
                        <output>
                          <to>gen query int</to>
                          <value>125</value>
                        </output>
                      </assignment>
                      <meta>
                        <documentation />
                        <checkpoint>false</checkpoint>
                      </meta>
                      <location>:spawn[1]:sequence[1]:spawn[1]:sequence[2]:switch[1]:sequence[2]:assign[1]</location>
                    </assign>
                  </sequence>
                </case>
                <location>:spawn[1]:sequence[1]:spawn[1]:sequence[2]:switch[1]</location>
              </switch>
            </sequence>
            <sequence>
              <switch>
                <meta>
                  <documentation />
                  <run-mode-handling>
                    <run-mode>OCP</run-mode>
                    <allow-step-into>true</allow-step-into>
                  </run-mode-handling>
                  <checkpoint>false</checkpoint>
                </meta>
                <execute-all-applicable-cases>false</execute-all-applicable-cases>
                <default>
                  <sequence />
                </default>
                <case>
                  <condition>
                    <document>
                      <input>
                        <from>max response time</from>
                      </input>
                    </document>
                    <xpath-expression>
                      <xpath-replacement-tokens />
                      <xpath><![CDATA[. <=0]]></xpath>
                    </xpath-expression>
                  </condition>
                  <sequence>
                    <assign>
                      <assignment>
                        <output>
                          <to>max response time</to>
                          <value>10</value>
                        </output>
                      </assignment>
                      <meta>
                        <documentation />
                        <checkpoint>false</checkpoint>
                      </meta>
                      <location>:spawn[1]:sequence[1]:spawn[1]:sequence[3]:switch[1]:sequence[2]:assign[1]</location>
                    </assign>
                  </sequence>
                </case>
                <location>:spawn[1]:sequence[1]:spawn[1]:sequence[3]:switch[1]</location>
              </switch>
            </sequence>
            <location>:spawn[1]:sequence[1]:spawn[1]</location>
          </spawn>
        </sequence>
        <sequence>
          <spawn>
            <meta>
              <documentation />
              <run-mode-handling>
                <run-mode>OCP</run-mode>
                <allow-step-into>true</allow-step-into>
              </run-mode-handling>
              <checkpoint></checkpoint>
            </meta>
            <sequence>
              <switch>
                <meta>
                  <documentation />
                  <run-mode-handling>
                    <run-mode>OCP</run-mode>
                    <allow-step-into>true</allow-step-into>
                  </run-mode-handling>
                  <checkpoint>false</checkpoint>
                </meta>
                <execute-all-applicable-cases>false</execute-all-applicable-cases>
                <default>
                  <sequence />
                </default>
                <case>
                  <condition>
                    <document>
                      <input>
                        <from>startup query count</from>
                      </input>
                    </document>
                    <xpath-expression>
                      <xpath-replacement-tokens />
                      <xpath><![CDATA[. <=0]]></xpath>
                    </xpath-expression>
                  </condition>
                  <sequence>
                    <assign>
                      <assignment>
                        <output>
                          <to>startup query count</to>
                          <value>2</value>
                        </output>
                      </assignment>
                      <meta>
                        <documentation />
                        <checkpoint>false</checkpoint>
                      </meta>
                      <location>:spawn[1]:sequence[2]:spawn[1]:sequence[1]:switch[1]:sequence[2]:assign[1]</location>
                    </assign>
                  </sequence>
                </case>
                <location>:spawn[1]:sequence[2]:spawn[1]:sequence[1]:switch[1]</location>
              </switch>
            </sequence>
            <sequence>
              <switch>
                <meta>
                  <documentation />
                  <run-mode-handling>
                    <run-mode>OCP</run-mode>
                    <allow-step-into>true</allow-step-into>
                  </run-mode-handling>
                  <checkpoint>false</checkpoint>
                </meta>
                <execute-all-applicable-cases>false</execute-all-applicable-cases>
                <default>
                  <sequence />
                </default>
                <case>
                  <condition>
                    <document>
                      <input>
                        <from>last query count</from>
                      </input>
                    </document>
                    <xpath-expression>
                      <xpath-replacement-tokens />
                      <xpath><![CDATA[. <=0]]></xpath>
                    </xpath-expression>
                  </condition>
                  <sequence>
                    <assign>
                      <assignment>
                        <output>
                          <to>last query count</to>
                          <value>2</value>
                        </output>
                      </assignment>
                      <meta>
                        <documentation />
                        <checkpoint>false</checkpoint>
                      </meta>
                      <location>:spawn[1]:sequence[2]:spawn[1]:sequence[2]:switch[1]:sequence[2]:assign[1]</location>
                    </assign>
                  </sequence>
                </case>
                <location>:spawn[1]:sequence[2]:spawn[1]:sequence[2]:switch[1]</location>
              </switch>
            </sequence>
            <sequence>
              <switch>
                <meta>
                  <documentation />
                  <run-mode-handling>
                    <run-mode>OCP</run-mode>
                    <allow-step-into>true</allow-step-into>
                  </run-mode-handling>
                  <checkpoint>false</checkpoint>
                </meta>
                <execute-all-applicable-cases>false</execute-all-applicable-cases>
                <default>
                  <sequence />
                </default>
                <case>
                  <condition>
                    <document>
                      <input>
                        <from>max response time</from>
                      </input>
                    </document>
                    <xpath-expression>
                      <xpath-replacement-tokens />
                      <xpath><![CDATA[. <=0]]></xpath>
                    </xpath-expression>
                  </condition>
                  <sequence>
                    <assign>
                      <assignment>
                        <output>
                          <to>last query interval</to>
                          <value>1000</value>
                        </output>
                      </assignment>
                      <meta>
                        <documentation />
                        <checkpoint>false</checkpoint>
                      </meta>
                      <location>:spawn[1]:sequence[2]:spawn[1]:sequence[3]:switch[1]:sequence[2]:assign[1]</location>
                    </assign>
                  </sequence>
                </case>
                <location>:spawn[1]:sequence[2]:spawn[1]:sequence[3]:switch[1]</location>
              </switch>
            </sequence>
            <location>:spawn[1]:sequence[2]:spawn[1]</location>
          </spawn>
        </sequence>
        <location>:spawn[1]</location>
      </spawn>
      <call-process>
        <process-name>:AutoPilot-OA-Common_Utilities:Invoke Command</process-name>
        <parameters>
          <input>
            <from>connection details</from>
            <to>connection details</to>
          </input>
          <input>
            <value>
              <empty />
            </value>
            <xslt-stylesheet>
              <stylesheet-replacement-tokens>
                <replacement-token name="robust var">
                  <input global="false">
                    <from>robust var</from>
                  </input>
                </replacement-token>
                <replacement-token name="gen query int">
                  <input global="false">
                    <from>gen query int</from>
                  </input>
                </replacement-token>
                <replacement-token name="max response time">
                  <input global="false">
                    <from>max response time</from>
                  </input>
                </replacement-token>
                <replacement-token name="startup query count">
                  <input global="false">
                    <from>startup query count</from>
                  </input>
                </replacement-token>
                <replacement-token name="startup query interval">
                  <input global="false">
                    <from>startup query interval</from>
                  </input>
                </replacement-token>
                <replacement-token name="last query count">
                  <input global="false">
                    <from>last query count</from>
                  </input>
                </replacement-token>
                <replacement-token name="last query interval">
                  <input global="false">
                    <from>last query interval</from>
                  </input>
                </replacement-token>
                <replacement-token name="interface name">
                  <input global="false">
                    <from>interface name</from>
                  </input>
                </replacement-token>
              </stylesheet-replacement-tokens>
              <stylesheet><![CDATA[<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="1.0">
  <xsl:output indent="yes" />
  <xsl:template match="/">
    <fat-command>
      <command os-id="Cisco IOS">
        <xsl:text disable-output-escaping="no">show</xsl:text>
      </command>
      <command os-id="Windows Default">
        <xsl:text disable-output-escaping="no">netsh routing ip igmp add interface Name="${interface name}" IgmpPrototype=igmprtrv2 IfEnabled=enable AccNonRtrAlertPkts=yes</xsl:text>
        <xsl:if test="string-length('${robust var}')!=0">
          <xsl:text disable-output-escaping="no"> RobustVar=${robust var}</xsl:text>
        </xsl:if>
        <xsl:if test="string-length('${gen query int}')!=0">
          <xsl:text disable-output-escaping="no"> GenQueryInterval=${gen query int}</xsl:text>
        </xsl:if>
        <xsl:if test="string-length('${max response time}')!=0">
          <xsl:text disable-output-escaping="no"> GenQueryRespTime=${max response time}</xsl:text>
        </xsl:if>
        <xsl:if test="string-length('${startup query count}')!=0">
          <xsl:text disable-output-escaping="no"> StartUpQueryCount=${startup query count}</xsl:text>
        </xsl:if>
        <xsl:if test="string-length('${startup query interval}')!=0">
          <xsl:text disable-output-escaping="no"> StartUpQueryInterval=${startup query interval}</xsl:text>
        </xsl:if>
        <xsl:if test="string-length('${last query count}')!=0">
          <xsl:text disable-output-escaping="no"> LastMemQueryCount=${last query count}</xsl:text>
        </xsl:if>
        <xsl:if test="string-length('${last query interval}')!=0">
          <xsl:text disable-output-escaping="no"> LastMemQueryInterval=${last query count}</xsl:text>
        </xsl:if>
      </command>
      <command os-id="Linux">
        <xsl:text disable-output-escaping="no">/bin/echo "Not Supported"</xsl:text>
      </command>
      <command os-id="SunOS">
        <xsl:text disable-output-escaping="no">/usr/bin/echo "Not Supported"</xsl:text>
      </command>
    </fat-command>
  </xsl:template>
</xsl:stylesheet>]]></stylesheet>
            </xslt-stylesheet>
            <to>command</to>
          </input>
          <output>
            <from>command output</from>
            <to>command output</to>
          </output>
          <output>
            <from>exit code</from>
            <to>exit code</to>
            <xpath-expression>
              <xpath-replacement-tokens />
              <xpath><![CDATA[string(.)=0]]></xpath>
            </xpath-expression>
          </output>
        </parameters>
        <meta>
          <documentation />
          <run-mode-handling>
            <run-mode>OCP</run-mode>
            <allow-step-into>false</allow-step-into>
          </run-mode-handling>
          <checkpoint>false</checkpoint>
        </meta>
        <after-execution>
          <console-output>
            <type>INFO</type>
            <summary>
              <concat>
                <input>
                  <value></value>
                </input>
              </concat>
            </summary>
            <detail>
              <concat>
                <input>
                  <value></value>
                </input>
              </concat>
            </detail>
          </console-output>
        </after-execution>
        <location>:call-process[1]</location>
      </call-process>
    </sequence>
    <meta>
      <expose-to>
        <consumer>RULE</consumer>
        <consumer>SCHEDULE</consumer>
      </expose-to>
      <documentation>
        <description>Configures IGMP on the specified interface using the following static parameters:

IgmpPrototype=igmprtrv2
Specifies the type of protocol to be configured on the interface.

AccNonRtrAlertPkts=yes
Specifies whether to accept IGMP packets that might not have the router alert option set. The default is yes.

IfEnabled=enable
Specifies whether the protocol you are configuring should be enabled or disabled.</description>
        <version>1.0</version>
      </documentation>
      <peer-location>
        <location>any</location>
      </peer-location>
      <record-metrics>false</record-metrics>
      <process-id>03cd1ae0-6f9d-35ff-8f8c-391eb7c8b63d</process-id>
      <author />
      <category />
      <status />
      <keywords />
      <systems />
      <last-modified-by />
      <last-modified>1288093344055</last-modified>
    </meta>
  </process-def>
</process>