<process draft="false" dev-studio-version="7.5.02.08">
  <process-def name=":AutoPilot-OA-Network_Utilities:Interface:Update Static IP Address Add">
    <parameters>
      <input global="false" required="true">
        <description>XML document conforming to the Connection Details Concept that contains the information required to execute a command via command line.</description>
        <from>connection details</from>
        <to>connection details</to>
      </input>
      <input global="false" required="true">
        <description>Specifies the name of the interface for which you want to add address and gateway information. The InterfaceName parameter must match the name of the interface as specified in Network Connections.</description>
        <from>interface name</from>
        <to>interface name</to>
      </input>
      <input global="false" required="true">
        <description>Specifies the IP address to add and the subnet mask for that IP address.</description>
        <from>ip address</from>
        <to>ip address</to>
      </input>
      <input global="false" required="true">
        <description>Specifies the netmask (also known as a subnet mask) associated with the network destination. The subnet mask can be the appropriate subnet mask for an IP network address, 255.255.255.255 for a host route, or 0.0.0.0 for the default route. If omitted, the subnet mask 255.255.255.255 is used. Because of the relationship between the destination and the subnet mask in defining routes, the destination cannot be more specific than its corresponding subnet mask. In other words, there cannot be a bit set to 1 in the destination if the corresponding bit in the subnet mask is a 0.
</description>
        <from>subnet mask</from>
        <to>subnet mask</to>
      </input>
      <input global="false" required="false">
        <description>Specifies the forwarding or next hop IP address over which the set of addresses defined by the network destination and subnet mask are reachable. For locally attached subnet routes, the gateway address is the IP address assigned to the interface that is attached to the subnet. For remote routes, available across one or more routers, the gateway address is a directly reachable IP address that is assigned to a neighboring router.</description>
        <from>default gateway</from>
        <to>default gateway</to>
      </input>
      <input global="false" required="false">
        <description>Specifies an integer cost metric (ranging from 1 to 9999) for the route, which is used when choosing among multiple routes in the routing table that most closely match the destination address of a packet being forwarded. The route with the lowest metric is chosen. The metric can reflect the number of hops, the speed of the path, path reliability, path throughput, or administrative properties.</description>
        <from>gateway metric</from>
        <to>gateway metric</to>
      </input>
      <input global="false" required="false">
        <description>Optional: Used to configure Unix like system interfaces.</description>
        <from>broadcast address</from>
        <to>broadcast address</to>
      </input>
      <output global="false" required="true">
        <description>XML document consisting of one or more &lt;line&gt; elements that contain the command response. Each  &lt;line&gt; element contains an index attribute indicating the order in which the information was returned by the command.</description>
        <to>output</to>
        <from>command output</from>
      </output>
    </parameters>
    <access />
    <sequence>
      <call-process>
        <process-name>:AutoPilot-OA-Common_Utilities:Invoke Command</process-name>
        <parameters>
          <input>
            <from>connection details</from>
            <to>connection details</to>
          </input>
          <input>
            <value>
              <empty />
            </value>
            <xslt-stylesheet>
              <stylesheet-replacement-tokens>
                <replacement-token name="interface name">
                  <input global="false">
                    <from>interface name</from>
                  </input>
                </replacement-token>
                <replacement-token name="ip address">
                  <input global="false">
                    <from>ip address</from>
                  </input>
                </replacement-token>
                <replacement-token name="default gateway">
                  <input global="false">
                    <from>default gateway</from>
                  </input>
                </replacement-token>
                <replacement-token name="subnet mask">
                  <input global="false">
                    <from>subnet mask</from>
                  </input>
                </replacement-token>
                <replacement-token name="gateway metric">
                  <input global="false">
                    <from>gateway metric</from>
                  </input>
                </replacement-token>
                <replacement-token name="broadcast address">
                  <input global="false">
                    <from>broadcast address</from>
                  </input>
                </replacement-token>
              </stylesheet-replacement-tokens>
              <stylesheet><![CDATA[<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="1.0">
  <xsl:output indent="yes" />
  <xsl:template match="/">
    <fat-command>
      <command os-id="Cisco IOS">
        <xsl:text disable-output-escaping="no">show </xsl:text>
      </command>
      <command os-id="Windows Default">
        <xsl:text disable-output-escaping="no">netsh interface ip add address name="${interface name}" addr=${ip address} mask=${subnet mask}</xsl:text>
        <xsl:choose>
          <xsl:when test="string-length('${default gateway}')=0">
            <xsl:text disable-output-escaping="no"> gateway=none</xsl:text>
          </xsl:when>
          <xsl:otherwise>
            <xsl:text disable-output-escaping="no"> gateway=${default gateway}</xsl:text>
          </xsl:otherwise>
        </xsl:choose>
        <xsl:if test="string-length('${gateway metric}')!=0">
          <xsl:text disable-output-escaping="no"> gwmetric=${gateway metric}</xsl:text>
        </xsl:if>
      </command>
      <command os-id="Linux">
        <xsl:text disable-output-escaping="no">/sbin/ifconfig ${interface name} addif ${IP address} </xsl:text>
        <xsl:choose>
          <xsl:when test="string-length('${subnet mask}')=0">
            <xsl:text disable-output-escaping="no"> netmask +</xsl:text>
          </xsl:when>
          <xsl:otherwise>
            <xsl:text disable-output-escaping="no"> netmask ${subnet mask}</xsl:text>
          </xsl:otherwise>
        </xsl:choose>
        <xsl:choose>
          <xsl:when test="string-length('${broadcast address}')=0">
            <xsl:text disable-output-escaping="no"> broadcast +</xsl:text>
          </xsl:when>
          <xsl:otherwise>
            <xsl:text disable-output-escaping="no"> broadcast ${broadcast address}</xsl:text>
          </xsl:otherwise>
        </xsl:choose>
        <xsl:text disable-output-escaping="no"> up</xsl:text>
      </command>
      <command os-id="SunOS">
        <xsl:text disable-output-escaping="no">/usr/sbin/ifconfig ${interface name} addif ${IP address} </xsl:text>
        <xsl:choose>
          <xsl:when test="string-length('${subnet mask}')=0">
            <xsl:text disable-output-escaping="no"> netmask +</xsl:text>
          </xsl:when>
          <xsl:otherwise>
            <xsl:text disable-output-escaping="no"> netmask ${subnet mask}</xsl:text>
          </xsl:otherwise>
        </xsl:choose>
        <xsl:choose>
          <xsl:when test="string-length('${broadcast address}')=0">
            <xsl:text disable-output-escaping="no"> broadcast +</xsl:text>
          </xsl:when>
          <xsl:otherwise>
            <xsl:text disable-output-escaping="no"> broadcast ${broadcast address}</xsl:text>
          </xsl:otherwise>
        </xsl:choose>
        <xsl:text disable-output-escaping="no"> up</xsl:text>
      </command>
    </fat-command>
  </xsl:template>
</xsl:stylesheet>]]></stylesheet>
            </xslt-stylesheet>
            <to>command</to>
          </input>
          <output>
            <from>command output</from>
            <to>command output</to>
          </output>
          <output>
            <from>exit code</from>
            <to>exit code</to>
          </output>
        </parameters>
        <meta>
          <documentation />
          <run-mode-handling>
            <run-mode>SEMI_AUTOMATIC</run-mode>
            <allow-step-into>false</allow-step-into>
          </run-mode-handling>
          <checkpoint>false</checkpoint>
        </meta>
        <after-execution>
          <console-output>
            <type>INFO</type>
            <summary>
              <concat>
                <input>
                  <value></value>
                </input>
              </concat>
            </summary>
            <detail>
              <concat>
                <input>
                  <value></value>
                </input>
              </concat>
            </detail>
          </console-output>
        </after-execution>
        <location>:call-process[1]</location>
      </call-process>
    </sequence>
    <meta>
      <expose-to>
        <consumer>RULE</consumer>
        <consumer>SCHEDULE</consumer>
      </expose-to>
      <documentation>
        <description>Perform Ping
    Send ICMP ECHO_REQUEST packets to a specified network host and report on the results.</description>
        <version>1.0</version>
      </documentation>
      <peer-location>
        <location>any</location>
      </peer-location>
      <record-metrics>false</record-metrics>
    </meta>
  </process-def>
</process>