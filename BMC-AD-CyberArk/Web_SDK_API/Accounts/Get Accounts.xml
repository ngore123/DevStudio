<process draft="false" dev-studio-version="8.2.00">
  <process-def name=":BMC-AD-CyberArk:Web_SDK_API:Accounts:Get Accounts">
    <parameters>
      <input global="false" required="false">
        <description>adapter name    [Optional]
            The name of the adapter to use to handle the request. 

Default value: CyberArkActorAdapter</description>
        <from>adapter name</from>
        <to>adapter name</to>
      </input>
      <input global="false" required="true">
        <description>The token that identifies the session. A session token that was returned from the “Logon” method.
</description>
        <from>authorization token</from>
        <to>authorization token</to>
      </input>
      <input global="false" required="false">
        <description>"search" is a query parameter key which used in the query string in URL. 
 
Vaild values: List of keywords, separated with a space.

Example: search=Windows admin 
Note: Please do not prefix "search=" for this input

Example input: Windows admin   </description>
        <from>search</from>
        <to>search</to>
      </input>
      <input global="false" required="false">
        <description>Safe Name will be a value of "filter" key query parameter used in the query string in URL to search for accounts filtered by a specific Safe.

Type: String

Valid value: Safe name

Please Note:

This Out of the Box wrapper workflow internally build the "filter" query parameter value using this safe name in element name filter i.e. &lt;filter&gt;safeName eq TSOAdapterKT&lt;/filter&gt;

You must use the filter XML element to filter the account with safe name prefixed with "safeName eq" (filter=safeName eq &lt;Safe name&gt;) if you want to build the adapter request (for call adapter activity input) on your own for this operation.
E.g. &lt;filter&gt;safeName eq TSOAppSafe&lt;/filter&gt;. Please refer documentation for complete details of adapter request elements for this operation.  
</description>
        <from>safe name</from>
        <to>safe name</to>
      </input>
      <input global="false" required="false">
        <description>"sort" is a query parameter key which used in the query string in URL. 

Type: String

Description:

Property or properties by which to sort returned accounts, followed by asc (default) or desc to control sort direction. Separate multiple properties with commas, up to a maximum of 3 properties. 

Vaild values: Property\properties separated with commas. like

sort=&lt;property&gt; &lt;asc/desc&gt;



Example: sort=Windows asc 
Note: Please do not prefix "sort=" for this input

Example input: Windows asc,name desc   </description>
        <from>sort</from>
        <to>sort</to>
      </input>
      <input global="false" required="false">
        <description>"offset" is a query parameter key which used in the query string in URL.

Type: Number

Description: Offset of the first account that is returned in the collection of results.

Valid value: Number

Default value: 0</description>
        <from>offset</from>
        <to>offset</to>
      </input>
      <input global="false" required="false">
        <description>"limit" is a query parameter key which used in the query string in URL.

Type: Number

Description: Maximum number of returned accounts. If not specified, the default value is 50. The maximum number that can be specified is 1000.

When used together with the Offset parameter, this value determines the number of accounts to return, starting from the first account that is returned.

Valid value: Number

Example: 

The following example shows how to use this parameter together with the Offset parameter to issue a query that returns the 10th - 25th accounts of all the results.

specify vaule 10 for offset input

specify vaule 25 for limit input</description>
        <from>limit</from>
        <to>limit</to>
      </input>
      <input global="false" required="false">
        <description>Option to return the response in message body in XML or JSON in output context. If no input is provided, it is assumed to XML.

Default Value: XML

Please note: If JSON provided then headers in adapter response will also be converted into JSON and assigned in output context.

Please note: This parameter is not part of adapter request XML, this parameter is only used to process adapter response in given format.
</description>
        <from>return data format</from>
        <to>return data format</to>
      </input>
      <output global="false" required="false">
        <description>Status represents whether request executed successfully on server
Valid values:

success
error</description>
        <to>status</to>
        <from>status</from>
      </output>
      <output global="false" required="false">
        <description>Body in response</description>
        <to>response body</to>
        <from>response body</from>
      </output>
      <output global="false" required="false">
        <description>response code</description>
        <to>status code</to>
        <from>status code</from>
      </output>
      <output global="false" required="false">
        <description>Response header values
</description>
        <to>response headers</to>
        <from>response headers</from>
      </output>
      <output global="false" required="false">
        <description>Error message in case of status error</description>
        <to>error message</to>
        <from>error message</from>
      </output>
    </parameters>
    <access />
    <sequence>
      <assign>
        <assignment>
          <document>
            <input>
              <from>authorization token</from>
            </input>
          </document>
          <result>
            <output>
              <to>request</to>
            </output>
          </result>
          <xslt-stylesheet>
            <stylesheet-replacement-tokens>
              <replacement-token name="search">
                <input global="false">
                  <from>search</from>
                </input>
              </replacement-token>
              <replacement-token name="safe name">
                <input global="false">
                  <from>safe name</from>
                </input>
              </replacement-token>
              <replacement-token name="sort">
                <input global="false">
                  <from>sort</from>
                </input>
              </replacement-token>
              <replacement-token name="offset">
                <input global="false">
                  <from>offset</from>
                </input>
              </replacement-token>
              <replacement-token name="limit">
                <input global="false">
                  <from>limit</from>
                </input>
              </replacement-token>
            </stylesheet-replacement-tokens>
            <stylesheet><![CDATA[<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="1.0">
  <xsl:output indent="yes" />
  <xsl:template match="/">
    <request>
      <authorization-token>
        <xsl:value-of select="." disable-output-escaping="no" />
      </authorization-token>
      <search>$[search]</search>
      <xsl:if test="string-length('$[safe name]') &gt; 0">
        <filter>
          <xsl:text disable-output-escaping="no">safeName eq $[safe name]</xsl:text>
        </filter>
      </xsl:if>
      <sort>$[sort]</sort>
      <offset>$[offset]</offset>
      <limit>$[limit]</limit>
    </request>
  </xsl:template>
</xsl:stylesheet>]]></stylesheet>
          </xslt-stylesheet>
        </assignment>
        <meta>
          <documentation />
          <checkpoint>false</checkpoint>
        </meta>
        <after-execution>
          <log>
            <level>debug</level>
            <parameters>
              <input>
                <value>Formed Request</value>
              </input>
              <input>
                <from>request</from>
              </input>
            </parameters>
          </log>
        </after-execution>
        <location>:assign[1]</location>
      </assign>
      <call-process>
        <process-name>:BMC-AD-CyberArk:Utilities:Create And Execute Adapter Request</process-name>
        <parameters>
          <input>
            <from>adapter name</from>
            <to>adapter name</to>
          </input>
          <input>
            <value>cyberark-websdk-accounts-get-accounts</value>
            <to>operation name</to>
          </input>
          <input>
            <from>request</from>
            <to>request</to>
          </input>
          <input>
            <from>return data format</from>
            <to>return data format</to>
          </input>
          <output>
            <from>adapter response</from>
            <to>adapter response</to>
          </output>
          <output>
            <from>return data format</from>
            <to>return data format</to>
          </output>
        </parameters>
        <meta>
          <documentation />
          <run-mode-handling>
            <run-mode>OCP</run-mode>
            <allow-step-into>false</allow-step-into>
          </run-mode-handling>
          <checkpoint>false</checkpoint>
        </meta>
        <after-execution>
          <log>
            <level>debug</level>
            <parameters>
              <input>
                <value>------------------Adapter Response----------------</value>
              </input>
              <input>
                <from>adapter response</from>
              </input>
            </parameters>
          </log>
        </after-execution>
        <location>:call-process[1]</location>
      </call-process>
      <call-process>
        <process-name>:AutoPilot-OA-Common_Utilities:BAO_Utilities:REST:Process Response</process-name>
        <parameters>
          <input>
            <from>adapter response</from>
            <to>adapter response</to>
          </input>
          <input>
            <from>return data format</from>
            <to>return data format</to>
          </input>
          <output>
            <from>response headers</from>
            <to>response headers</to>
          </output>
          <output>
            <from>response body</from>
            <to>response body</to>
          </output>
          <output>
            <from>status</from>
            <to>status</to>
          </output>
          <output>
            <from>status code</from>
            <to>status code</to>
          </output>
          <output>
            <from>error message</from>
            <to>error message</to>
          </output>
        </parameters>
        <meta>
          <documentation />
          <run-mode-handling>
            <run-mode>OCP</run-mode>
            <allow-step-into>false</allow-step-into>
          </run-mode-handling>
          <checkpoint>false</checkpoint>
        </meta>
        <location>:call-process[2]</location>
      </call-process>
    </sequence>
    <meta>
      <expose-to>
        <consumer>RULE</consumer>
        <consumer>SCHEDULE</consumer>
        <consumer>OCP</consumer>
        <consumer>SOAP</consumer>
      </expose-to>
      <documentation>
        <description>This operation returns a list of all the accounts in the Vault or subset of account based on search and filter with specific safe.
The user who runs this operation requires List Accounts permissions in the Safe.</description>
        <version></version>
      </documentation>
      <logging-options>
        <is-enabled>false</is-enabled>
        <log-file-name></log-file-name>
      </logging-options>
      <peer-location>
        <location>any</location>
      </peer-location>
      <record-metrics>false</record-metrics>
      <process-id>c06dc4fa-8783-4243-9ec8-f3fe181c569e</process-id>
      <author>dbhola</author>
      <category></category>
      <status></status>
      <keywords></keywords>
      <systems></systems>
      <last-modified-by>aoadmin</last-modified-by>
      <last-modified>1573805248223</last-modified>
    </meta>
  </process-def>
</process>