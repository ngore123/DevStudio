<process draft="false" dev-studio-version="20.02.00">
  <process-def name=":AutoPilot-AD-Utilities:REST:Get">
    <parameters>
      <input global="false" required="false">
        <description>The name of the Adapter to use for this Process. </description>
        <from>adapter name</from>
        <to>adapter name</to>
      </input>
      <input global="false" required="true">
        <description>The URL defining the location of the content to be obtained.
</description>
        <from>url</from>
        <to>url</to>
      </input>
      <input global="false" required="false">
        <description>Defines the headers for the REST GET request in the JSON format.

Sample:

{
"headers" :
        { 
        "headerName" : "headerValue",
        "authorization" :
            {
 	           "type" : "basic",
			"user-name" : "myUser",
			"password" : "myPassword"
			 
			}
          }
}</description>
        <from>headers</from>
        <to>headers</to>
      </input>
      <input global="false" required="false">
        <description>The optional data to be sent to the target url with DELETE method.

Sample Fomat for any JSON data:


	{
	--- any json ---
	}


Format for Multipart data:


	{
		"entry": [
        	{ "key":"", "value":"", "content-type":""},
        	{"key":"", "value":"", "content-type":""}
          ]
	}


</description>
        <from>body</from>
        <to>body</to>
      </input>
      <input global="false" required="false">
        <description>Indicates the desired data type for the Adapter response.
Valid values: JSON (default), XML</description>
        <from>return data format</from>
        <to>return data format</to>
      </input>
      <input global="false" required="false">
        <description>Specifies whether to establish a secure connection.
Valid values: true, false
Default value: false</description>
        <from>use ssl certificate</from>
        <to>use ssl certificate</to>
      </input>
      <input global="false" required="false">
        <description>Specifies whether to install certificates.
Valid values: true, false
Default value: false</description>
        <from>install certificate</from>
        <to>install certificate</to>
      </input>
      <input global="false" required="false">
        <description>Specifies whether to allow unsigned certificates from trusted zones.
Valid values: true, false
Default value: false</description>
        <from>allow unsigned certificate</from>
        <to>allow unsigned certificate</to>
      </input>
      <input global="false" required="false">
        <description>Specifies the Java standard Trust Key Store Pass Phrase.
Default value: changeit</description>
        <from>pass phrase</from>
        <to>pass phrase</to>
      </input>
      <input global="false" required="false">
        <description>Specify Character set name to encode or decode the characters.
E.g.
Character set     Supporting Language
Shift_JIS          : Japanese character set.
Big5	              : Traditional Chinese character set.
ISO-8859-2	   :  ISO character set for Central European languages.</description>
        <from>character set</from>
        <to>character set</to>
      </input>
      <input global="false" required="false">
        <description>Specifies the format in which the public (X.509 certificate) and private keys used for signing the HTTP Request  will be provided. The keys can be provided via Java Keystore (JKS) or PEM/DER files or unencrypted Base64-encoded PEM format.

Valid values: keystore, key-files and key-data</description>
        <from>signature mode</from>
        <to>signature mode</to>
      </input>
      <input global="false" required="false">
        <description>Specifies the file containing Private Key used to sign the HTTP Request using the signing algorithm. The formats supported by the adapter are -

1) Base64-encoded PEM (Privacy Enhanced Mail) format
2) DER (Definite Encoding Rules) format

Private key file is required when signature mode is 'key-files'</description>
        <from>private key file</from>
        <to>private key file</to>
      </input>
      <input global="false" required="false">
        <description>Specifies the file containing X509 Certificate (Public Key). The formats supported by the adapter are -

1) Base64-encoded unencrypted PEM (Privacy Enhanced Mail) format
2) DER (Definite Encoding Rules) format

Certificate file is required when signature mode is 'key-files'</description>
        <from>certificate file</from>
        <to>certificate file</to>
      </input>
      <input global="false" required="false">
        <description>XML specifying the Private Key in Base64-encoded PEM format. 

Example -

&lt;private-key-data&gt;-----BEGIN PRIVATE KEY-----
MIICdQIBADANBgkqhkiG9w0BAQEFAASCAl8wggJbAgEAAoGBAKomKro6VbW4PeQtUhNzZpSH26vb
BTBtH1r4EjnIv4vnhSyyA62ewpROVNn0SpvjoBFwE88HcX3tXym/zbVgtdPke9K+SYHP6CWdiLqn
........
-----END PRIVATE KEY-----&lt;/private-key-data&gt;

Private key data is required when signature mode is 'key-data'</description>
        <from>private key data</from>
        <to>private key data</to>
      </input>
      <input global="false" required="false">
        <description>XML specifying the X509 Certificate (Public Key) in unencrypted Base64-encoded PEM format.

Example -

&lt;certificate-data&gt;-----BEGIN CERTIFICATE-----
MIICdzCCAeCgAwIBAgIFXseN1xYwDQYJKoZIhvcNAQEFBQAwUzELMAkGA1UEBhMC
VVMxEzARBgNVBAoTCkFtYXpvbi5jb20xDDAKBgNVBAsTA0FXUzEhMB8GA1UEAxMY
........
-----END CERTIFICATE-----&lt;/certificate-data&gt;

certificate data is required when signature mode is 'key-data'</description>
        <from>certificate data</from>
        <to>certificate data</to>
      </input>
      <input global="false" required="false">
        <description>Specifies the path to the keystore containing the client certificate.

KeyStore file  is required when signature mode is 'keystore'</description>
        <from>key store file</from>
        <to>key store file</to>
      </input>
      <input global="false" required="false">
        <description>Specifies the password of the keystore file.

KeyStore passphrase  is required when signature mode is 'keystore'</description>
        <from>key store password</from>
        <to>key store password</to>
      </input>
      <input global="false" required="false">
        <description>Specifies the password of the key stored in key store file.</description>
        <from>key password</from>
        <to>key password</to>
      </input>
      <input global="false" required="false">
        <description>Specifies the alias name in the keystore that identifies the Public Key Certificate (PKC), the web server uses to authenticate the client.

client alias  is required when signature mode is 'keystore'</description>
        <from>client alias</from>
        <to>client alias</to>
      </input>
      <input global="false" required="false">
        <description>Specifies if redirects should be enabled.
Valid values - true,false
Default value - true</description>
        <from>enable redirects</from>
        <to>enable redirects</to>
      </input>
      <input global="false" required="false">
        <description>Enable downloading of attachment/file.</description>
        <from>download attachment</from>
        <to>download-attachment</to>
      </input>
      <input global="false" required="false">
        <description>Specify the directory where downloaded file will be saved.</description>
        <from>download directory</from>
        <to>download-directory</to>
      </input>
      <input global="false" required="false">
        <description>Specifies the time (in seconds) to wait when establishing a connection.
Default value: 10 seconds (if not specified in request and configuration)</description>
        <from>request timeout</from>
        <to>request timeout</to>
      </input>
      <input global="false" required="false">
        <description>This input parameter allow user to ignore or retain new line break marker in adapter response

If true: The new line break character/marker (if exist) is ignored and adapter response returned in single line.

If false: The new line break character/marker (if exist) is preserved in adapter response

Default value = true

Let's suppose the URL returns below response while access through the browser
----
one
two
three
four
----

HTTP adapter response for same URL with value of in parameter set to "ignore line break in response"

If set to true (which is default value)
The response returns in message body is 

&lt;message-body&gt;onetwothreefour&lt;/message-body&gt;


if set to false -

The response returns in message body is 

&lt;message-body&gt;one
two
three
four
&lt;/message-body&gt;

Please Note: This situation mostly occurs when response data content is of type is text/plain</description>
        <from>ignore line break in response</from>
        <to>ignore line break in response</to>
      </input>
      <input global="false" required="false">
        <from>secure protocols</from>
        <to>secure protocols</to>
      </input>
      <output global="false" required="false">
        <description>The HTTP status code from the Adapter response.</description>
        <to>adapter response</to>
        <from>adapter response</from>
      </output>
    </parameters>
    <access />
    <sequence>
      <switch>
        <meta>
          <documentation />
          <run-mode-handling>
            <run-mode>OCP</run-mode>
            <allow-step-into>true</allow-step-into>
          </run-mode-handling>
          <checkpoint>false</checkpoint>
        </meta>
        <execute-all-applicable-cases>false</execute-all-applicable-cases>
        <default>
          <sequence />
        </default>
        <case>
          <condition>
            <document>
              <input>
                <from>adapter name</from>
              </input>
            </document>
            <xpath-expression>
              <xpath-replacement-tokens />
              <xpath><![CDATA[string-length(.)=0]]></xpath>
            </xpath-expression>
          </condition>
          <sequence>
            <assign>
              <assignment>
                <output>
                  <to>adapter name</to>
                  <value>RESTAdapter</value>
                </output>
              </assignment>
              <meta>
                <documentation />
                <checkpoint>false</checkpoint>
              </meta>
              <location>:switch[1]:sequence[2]:assign[1]</location>
            </assign>
          </sequence>
        </case>
        <location>:switch[1]</location>
      </switch>
      <call-process>
        <process-name>:AutoPilot-AD-Utilities:Common:Construct REST Adapter Request</process-name>
        <parameters>
          <input>
            <value>get</value>
            <to>request action</to>
          </input>
          <input>
            <from>adapter name</from>
            <to>adapter name</to>
          </input>
          <input>
            <from>url</from>
            <to>url</to>
          </input>
          <input>
            <from>headers</from>
            <to>headers</to>
          </input>
          <input>
            <from>body</from>
            <to>body</to>
          </input>
          <input>
            <from>return data format</from>
            <to>return data format</to>
          </input>
          <input>
            <from>use ssl certificate</from>
            <to>use ssl certificate</to>
          </input>
          <input>
            <from>install certificate</from>
            <to>install certificate</to>
          </input>
          <input>
            <from>allow unsigned certificate</from>
            <to>allow unsigned certificate</to>
          </input>
          <input>
            <from>pass phrase</from>
            <to>pass phrase</to>
          </input>
          <input>
            <from>character set</from>
            <to>character set</to>
          </input>
          <input>
            <from>signature mode</from>
            <to>signature mode</to>
          </input>
          <input>
            <from>private key file</from>
            <to>private key file</to>
          </input>
          <input>
            <from>certificate file</from>
            <to>certificate file</to>
          </input>
          <input>
            <from>private key data</from>
            <to>private key data</to>
          </input>
          <input>
            <from>certificate data</from>
            <to>certificate data</to>
          </input>
          <input>
            <from>key store file</from>
            <to>key store file</to>
          </input>
          <input>
            <from>key store password</from>
            <to>key store password</to>
          </input>
          <input>
            <from>key password</from>
            <to>key password</to>
          </input>
          <input>
            <from>client alias</from>
            <to>client alias</to>
          </input>
          <input>
            <from>enable redirects</from>
            <to>enable redirects</to>
          </input>
          <input>
            <from>download-attachment</from>
            <to>download attachment</to>
          </input>
          <input>
            <from>download-directory</from>
            <to>download directory</to>
          </input>
          <input>
            <from>request timeout</from>
            <to>request timeout</to>
          </input>
          <input>
            <from>ignore line break in response</from>
            <to>ignore line break in response</to>
          </input>
          <input>
            <from>secure protocols</from>
            <to>secure protocols</to>
          </input>
          <output>
            <from>adapter request xml</from>
            <to>adapter request xml</to>
          </output>
        </parameters>
        <meta>
          <documentation />
          <run-mode-handling>
            <run-mode>OCP</run-mode>
            <allow-step-into>false</allow-step-into>
          </run-mode-handling>
          <checkpoint>false</checkpoint>
        </meta>
        <location>:call-process[1]</location>
      </call-process>
      <call-adapter>
        <use-system-adapter>false</use-system-adapter>
        <parameters>
          <input global="false">
            <from>adapter name</from>
          </input>
          <input>
            <value>
              <adapter-request>
                <peer-location>
                  <location>any</location>
                </peer-location>
              </adapter-request>
            </value>
          </input>
          <input global="false">
            <from>adapter request xml</from>
          </input>
          <input global="false">
            <from>adapter request xml</from>
          </input>
          <output global="false">
            <to>adapter response</to>
          </output>
        </parameters>
        <meta>
          <documentation />
          <checkpoint>false</checkpoint>
        </meta>
        <before-execution>
          <log>
            <level>debug</level>
            <parameters>
              <input>
                <value>Adapter Request to Execute..</value>
              </input>
              <input>
                <from>adapter request xml</from>
              </input>
            </parameters>
          </log>
        </before-execution>
        <after-execution>
          <log>
            <level>debug</level>
            <parameters>
              <input>
                <value>Adapter response:</value>
              </input>
              <input>
                <from>adapter response</from>
              </input>
            </parameters>
          </log>
        </after-execution>
        <location>:call-adapter[1]</location>
      </call-adapter>
      <switch>
        <meta>
          <documentation />
          <run-mode-handling>
            <run-mode>OCP</run-mode>
            <allow-step-into>true</allow-step-into>
          </run-mode-handling>
          <checkpoint>false</checkpoint>
        </meta>
        <execute-all-applicable-cases>false</execute-all-applicable-cases>
        <default>
          <sequence />
        </default>
        <case>
          <condition>
            <document>
              <input>
                <from>adapter response</from>
              </input>
            </document>
            <xpath-expression>
              <xpath-replacement-tokens />
              <xpath><![CDATA[starts-with(., "{")]]></xpath>
            </xpath-expression>
          </condition>
          <sequence>
            <utility>
              <string>
                <concat>
                  <input>
                    <concat>
                      <input>
                        <value>{"rest-adapter-response":</value>
                      </input>
                    </concat>
                  </input>
                  <input>
                    <from>adapter response</from>
                  </input>
                  <input>
                    <concat>
                      <input>
                        <value>}</value>
                      </input>
                    </concat>
                  </input>
                </concat>
              </string>
              <output global="false">
                <to>adapter response</to>
              </output>
              <meta>
                <documentation />
                <checkpoint>false</checkpoint>
              </meta>
              <location>:switch[2]:sequence[2]:utility[1]</location>
            </utility>
          </sequence>
        </case>
        <location>:switch[2]</location>
      </switch>
    </sequence>
    <meta>
      <expose-to>
        <consumer>RULE</consumer>
        <consumer>SCHEDULE</consumer>
      </expose-to>
      <documentation>
        <description>Get 
       Gets HTML content via a URL. </description>
        <version>1.0</version>
      </documentation>
      <logging-options>
        <is-enabled>false</is-enabled>
        <log-file-name></log-file-name>
      </logging-options>
      <peer-location>
        <location>any</location>
      </peer-location>
      <record-metrics>false</record-metrics>
      <process-id>3a18981b-393a-4763-b430-23ac1303a32d</process-id>
      <author>admin</author>
      <category></category>
      <status></status>
      <keywords></keywords>
      <systems></systems>
      <last-modified-by>aoadmin</last-modified-by>
      <last-modified>1619437796062</last-modified>
    </meta>
  </process-def>
</process>