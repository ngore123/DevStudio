<process draft="false" dev-studio-version="7.6.01.00">
  <process-def name=":AutoPilot-AD-Utilities:JMS:Send Body">
    <parameters>
      <input global="false" required="false">
        <description>The name of the Adapter to use for this Process. 

</description>
        <from>adapter name</from>
        <to>adapter name</to>
      </input>
      <input global="false" required="true">
        <description>The destination queue.</description>
        <from>destination</from>
        <to>destination</to>
      </input>
      <input global="false" required="true">
        <description>The body to send. This must be in
XML format with a root element of
&lt;body&gt;and one or more child
elements of &lt;message&gt; containing
the content to be sent.</description>
        <from>body</from>
        <to>body</to>
      </input>
      <input global="false" required="false">
        <description>The JMS message header to send. This must be in
XML format with a root element of
&lt;header&gt;and any of below childs
element:
1. &lt;reply-to&gt;
2. &lt;expiration&gt;
3. &lt;correlation-id&gt;
4. &lt;jms-type&gt;
5. &lt;priority&gt;
6. &lt;delivey-mode&gt;

See below sample example:
&lt;header&gt;
 &lt;reply-to&gt;tempQueue&lt;/reply-to&gt;
 &lt;expiration&gt;100&lt;/expiration&gt;
 &lt;correlation-id&gt;test co id&lt;/correlation-id&gt;
 &lt;type&gt;Actor&lt;/type&gt;
 &lt;priority&gt;2&lt;/priority&gt;
&lt;/header&gt;</description>
        <from>header</from>
        <to>header</to>
      </input>
      <input global="false" required="false">
        <description>Contains the properties list for the command.
This must be in XML format with a root element of
&lt;properties&gt;and one or more child
elements of &lt;property&gt; containing
the content to be sent.
See below sample example:
&lt;properties&gt;
       &lt;property&gt;
          &lt;name&gt;Emp id&lt;/name&gt;
          &lt;value type="Integer"&gt;31100&lt;/value&gt;
       &lt;/property&gt;
       &lt;property&gt;
          &lt;name&gt;Emp Nmae&lt;/name&gt;
          &lt;value type="String"&gt;Mr. Bean&lt;/value&gt;
       &lt;/property&gt;
            .
            .
       &lt;property&gt;
          &lt;name&gt;Work hours&lt;/name&gt;
          &lt;value type="Float"&gt;38.87&lt;/value&gt;
       &lt;/property&gt;
    &lt;/properties&gt;
</description>
        <from>properties</from>
        <to>properties</to>
      </input>
      <input global="false" required="false">
        <description>Actor adapter will wait for this much amount of time for reply to message. If message comes before than this timeout adapter will proceeds with sending next message. Value would be in mili-seconds. Adapter synchronous request/response behavior will be depending on this tag. If this tag is present in adapter request then adapter will send messages synchronously.</description>
        <from>request response wait timeout</from>
        <to>request response wait timeout</to>
      </input>
      <input global="false" required="false">
        <description>Specify the character set to encode bytes messages</description>
        <from>character set</from>
        <to>character set</to>
      </input>
      <output global="false" required="false">
        <description>An adapter response contains the result returned from an adapter request. The contents of the response will vary by adapter.</description>
        <to>Adapter response</to>
        <from>Adapter response</from>
      </output>
    </parameters>
    <access />
    <sequence>
      <switch>
        <meta>
          <documentation />
          <run-mode-handling>
            <run-mode>OCP</run-mode>
            <allow-step-into>true</allow-step-into>
          </run-mode-handling>
          <checkpoint>false</checkpoint>
        </meta>
        <execute-all-applicable-cases>false</execute-all-applicable-cases>
        <default>
          <sequence />
        </default>
        <case>
          <condition>
            <document>
              <input>
                <from>adapter name</from>
              </input>
            </document>
            <xpath-expression>
              <xpath-replacement-tokens />
              <xpath><![CDATA[string-length(.)=0]]></xpath>
            </xpath-expression>
          </condition>
          <sequence>
            <assign>
              <assignment>
                <output>
                  <to>adapter name</to>
                  <value>JMSAdapter</value>
                </output>
              </assignment>
              <meta>
                <documentation />
                <checkpoint>false</checkpoint>
              </meta>
              <location>:switch[1]:sequence[2]:assign[1]</location>
            </assign>
          </sequence>
        </case>
        <location>:switch[1]</location>
      </switch>
      <assign>
        <assignment>
          <output>
            <to>body</to>
            <value>
              <empty />
            </value>
          </output>
          <xslt-stylesheet>
            <stylesheet-replacement-tokens>
              <replacement-token name="body">
                <input global="false">
                  <from>body</from>
                </input>
              </replacement-token>
              <replacement-token name="header">
                <input global="false">
                  <from>header</from>
                </input>
              </replacement-token>
              <replacement-token name="properties">
                <input global="false">
                  <from>properties</from>
                </input>
              </replacement-token>
            </stylesheet-replacement-tokens>
            <stylesheet><![CDATA[<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="1.0">
  <xsl:output indent="no" />
  <xsl:template match="/">
    <request>${body}${header}${properties}</request>
  </xsl:template>
</xsl:stylesheet>]]></stylesheet>
          </xslt-stylesheet>
        </assignment>
        <meta>
          <documentation />
          <checkpoint>false</checkpoint>
        </meta>
        <location>:assign[1]</location>
      </assign>
      <assign>
        <assignment>
          <document>
            <input>
              <from>body</from>
            </input>
          </document>
          <result>
            <output>
              <to>adapter request</to>
            </output>
          </result>
          <xslt-stylesheet>
            <stylesheet-replacement-tokens>
              <replacement-token name="destination">
                <input global="false">
                  <from>destination</from>
                </input>
              </replacement-token>
              <replacement-token name="header">
                <input global="false">
                  <from>header</from>
                </input>
              </replacement-token>
              <replacement-token name="properties">
                <input global="false">
                  <from>properties</from>
                </input>
              </replacement-token>
              <replacement-token name="time-out">
                <input global="false">
                  <from>request response wait timeout</from>
                </input>
              </replacement-token>
              <replacement-token name="character set">
                <input global="false">
                  <from>character set</from>
                </input>
              </replacement-token>
            </stylesheet-replacement-tokens>
            <stylesheet><![CDATA[<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="1.0">
  <xsl:output indent="yes" />
  <xsl:template match="/">
    <request-data>
      <jmsRequest>
        <xsl:if test="//header">
          <xsl:copy-of select="//header/*" />
        </xsl:if>
        <xsl:if test="//properties">
          <xsl:copy-of select="//properties" />
        </xsl:if>
        <dest>${destination}</dest>
        <xsl:if test="string-length('${time-out}')&gt;0">
          <request-response-wait-timeout>
            <xsl:text disable-output-escaping="no">${time-out}</xsl:text>
          </request-response-wait-timeout>
        </xsl:if>
        <xsl:if test="string-length('${character set}')&gt;0">
          <character-set>
            <xsl:text disable-output-escaping="no">${character set}</xsl:text>
          </character-set>
        </xsl:if>
        <xsl:for-each select="//body">
          <xsl:copy-of select="." />
        </xsl:for-each>
      </jmsRequest>
    </request-data>
  </xsl:template>
</xsl:stylesheet>]]></stylesheet>
          </xslt-stylesheet>
        </assignment>
        <meta>
          <documentation />
          <checkpoint>false</checkpoint>
        </meta>
        <location>:assign[2]</location>
      </assign>
      <call-adapter>
        <parameters>
          <input global="false">
            <from>adapter name</from>
          </input>
          <input>
            <value>
              <adapter-request>
                <peer-location>
                  <location>any</location>
                </peer-location>
              </adapter-request>
            </value>
          </input>
          <input global="false">
            <from>adapter request</from>
          </input>
          <input global="false">
            <from>adapter request</from>
          </input>
          <output global="false">
            <to>Adapter response</to>
          </output>
        </parameters>
        <meta>
          <documentation />
          <checkpoint>false</checkpoint>
        </meta>
        <before-execution>
          <log>
            <level>debug</level>
            <parameters>
              <input>
                <value>Adapter request</value>
              </input>
              <input>
                <from>adapter request</from>
              </input>
            </parameters>
          </log>
        </before-execution>
        <after-execution>
          <log>
            <level>debug</level>
            <parameters>
              <input>
                <value>Adapter response</value>
              </input>
              <input>
                <from>Adapter response</from>
              </input>
            </parameters>
          </log>
        </after-execution>
        <location>:call-adapter[1]</location>
      </call-adapter>
    </sequence>
    <meta>
      <expose-to>
        <consumer>RULE</consumer>
        <consumer>SCHEDULE</consumer>
      </expose-to>
      <documentation>
        <description>Send Messages  
         Sends a set of JMS messages to a designated JMS destination.  </description>
        <version>1.0</version>
      </documentation>
      <peer-location>
        <location>any</location>
      </peer-location>
      <record-metrics>false</record-metrics>
      <process-id>899d7f15-c1ad-338f-8a99-ab670c882a45</process-id>
      <author />
      <category />
      <status />
      <keywords />
      <systems />
      <last-modified-by />
      <last-modified>1282140719198</last-modified>
    </meta>
  </process-def>
</process>