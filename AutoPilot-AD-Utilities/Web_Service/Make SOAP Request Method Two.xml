<process draft="false" dev-studio-version="7.6.02.02">
  <process-def name=":AutoPilot-AD-Utilities:Web_Service:Make SOAP Request Method Two">
    <parameters>
      <input global="false" required="false">
        <description>The adapter name. The default is SOAPAdapter.</description>
        <from>adapter name</from>
        <to>adapter name</to>
      </input>
      <input global="false" required="true">
        <description>The URL for the remote SOAP service. 
(URL - http://x.y or https://x.y)Yes. 
</description>
        <from>soap url</from>
        <to>soap url</to>
      </input>
      <input global="false" required="false">
        <description>The username to use for login
on the remote host.</description>
        <from>username</from>
        <to>username</to>
      </input>
      <input global="false" required="false">
        <description>The password to use for login
on the remote host.
</description>
        <from>password</from>
        <to>password</to>
      </input>
      <input global="false" required="false">
        <description>The action to be performed the
by SOAP request.
</description>
        <from>soap action</from>
        <to>soap action</to>
      </input>
      <input global="false" required="false">
        <description>The SOAP version to use.
Valid values: 1.1, 1.2</description>
        <from>soap version</from>
        <to>soap version</to>
      </input>
      <input global="false" required="false">
        <description>Contains specific header
content, as required by the web
service.</description>
        <from>soap header content</from>
        <to>soap header content</to>
      </input>
      <input global="false" required="true">
        <description>Contains the specific body content as required by the web service.  One and only one element must be contained within this block. 
</description>
        <from>soap body content</from>
        <to>soap body content</to>
      </input>
      <input global="false" required="false">
        <description>This parameter will permit a connection to persist for multiple requests within a Process. A connection is named when established, and subsequent requests can specify this named connection to be re- used for a request. The connection will remain available until the 
endpoint of the Process, or until the connection is terminated with a &lt;terminate-on-exit&gt; element. 
</description>
        <from>connection name</from>
        <to>connection name</to>
      </input>
      <input global="false" required="false">
        <description>Defines the termination of a named connection.  Valid values: true or false.</description>
        <from>terminate on exit</from>
        <to>terminate on exit</to>
      </input>
      <input global="false" required="false">
        <description>Specifies if Chunked Transfer Encoding is enabled or disabled.
Valid values: true or false.</description>
        <from>chunked encoding</from>
        <to>chunked encoding</to>
      </input>
      <input global="false" required="false">
        <description>An XML document representing the list of custom HTTP headers to be added to the outgoing SOAP request.

Sample XML -

&lt;http-request-headers&gt;
  &lt;http-request-header&gt;
    &lt;name&gt;&lt;/name&gt;
    &lt;value&gt;&lt;/value&gt;
  &lt;/http-request-header&gt;
  &lt;http-request-header&gt;
    &lt;name&gt;&lt;/name&gt;
    &lt;value&gt;&lt;/value&gt;
  &lt;/http-request-header&gt;
  .
  .
  .
&lt;/http-request-headers&gt;</description>
        <from>http request headers</from>
        <to>http request headers</to>
      </input>
      <input global="false" required="false">
        <description>Specifies whether to establish a secure connection.
Valid values: true, false
Default value: true for HTTPS protocol
				  false for HTTP protocol            	</description>
        <from>use ssl certificate</from>
        <to>use ssl certificate</to>
      </input>
      <input global="false" required="false">
        <description>Specifies whether to install certificates.
Valid values: true, false
Default value: false</description>
        <from>install certificate</from>
        <to>install certificate</to>
      </input>
      <input global="false" required="false">
        <description>Specifies whether to allow unsigned certificates from trusted zones.
Valid values: true, false
Default value: false</description>
        <from>allow unsigned certificate</from>
        <to>allow unsigned certificate</to>
      </input>
      <input global="false" required="false">
        <description>Specifies the password of the truststore file.
Default value: changeit</description>
        <from>pass phrase</from>
        <to>pass phrase</to>
      </input>
      <output global="false" required="false">
        <description>An adapter response contains the result returned from an adapter request. The contents of the response will vary by adapter.</description>
        <to>adapter response</to>
        <from>adapter response</from>
      </output>
      <output global="false" required="false">
        <description>This is the status returned in the adapter response.  Valid values are success and error.</description>
        <to>status</to>
        <from>status</from>
      </output>
      <output global="false" required="false">
        <description>This attribute contains a message in the form of a text string whenever the status attribute contains "error".  If the status contains success then error message is empty.</description>
        <to>error message</to>
        <from>error message</from>
      </output>
    </parameters>
    <access />
    <sequence>
      <spawn>
        <meta>
          <documentation />
          <run-mode-handling>
            <run-mode>OCP</run-mode>
            <allow-step-into>true</allow-step-into>
          </run-mode-handling>
          <checkpoint>false</checkpoint>
        </meta>
        <sequence>
          <switch>
            <meta>
              <documentation />
              <run-mode-handling>
                <run-mode>OCP</run-mode>
                <allow-step-into>true</allow-step-into>
              </run-mode-handling>
              <checkpoint>false</checkpoint>
            </meta>
            <execute-all-applicable-cases>false</execute-all-applicable-cases>
            <default>
              <sequence />
            </default>
            <case>
              <condition>
                <document>
                  <input>
                    <from>adapter name</from>
                  </input>
                </document>
                <xpath-expression>
                  <xpath-replacement-tokens />
                  <xpath><![CDATA[string-length(.)=0]]></xpath>
                </xpath-expression>
              </condition>
              <sequence>
                <assign>
                  <assignment>
                    <output>
                      <to>adapter name</to>
                      <value>SOAPAdapter</value>
                    </output>
                  </assignment>
                  <meta>
                    <documentation />
                    <checkpoint>false</checkpoint>
                  </meta>
                  <location>:spawn[1]:sequence[1]:switch[1]:sequence[2]:assign[1]</location>
                </assign>
              </sequence>
            </case>
            <location>:spawn[1]:sequence[1]:switch[1]</location>
          </switch>
        </sequence>
        <sequence>
          <utility>
            <string>
              <lowercase>
                <input>
                  <from>terminate on exit</from>
                </input>
              </lowercase>
            </string>
            <output global="false">
              <to>terminate on exit</to>
            </output>
            <meta>
              <documentation />
              <checkpoint>false</checkpoint>
            </meta>
            <location>:spawn[1]:sequence[2]:utility[1]</location>
          </utility>
          <switch>
            <meta>
              <documentation />
              <run-mode-handling>
                <run-mode>OCP</run-mode>
                <allow-step-into>true</allow-step-into>
              </run-mode-handling>
              <checkpoint>false</checkpoint>
            </meta>
            <execute-all-applicable-cases>false</execute-all-applicable-cases>
            <default>
              <sequence />
            </default>
            <case applies-if-any-condition-true="false">
              <condition>
                <document>
                  <input>
                    <from>terminate on exit</from>
                  </input>
                </document>
                <xpath-expression>
                  <xpath-replacement-tokens />
                  <xpath><![CDATA[string(.)!='true']]></xpath>
                </xpath-expression>
              </condition>
              <condition>
                <document>
                  <input>
                    <from>terminate on exit</from>
                  </input>
                </document>
                <xpath-expression>
                  <xpath-replacement-tokens />
                  <xpath><![CDATA[string(.)!='false']]></xpath>
                </xpath-expression>
              </condition>
              <sequence>
                <assign>
                  <assignment>
                    <output>
                      <to>terminate on exit</to>
                      <value>
                        <empty />
                      </value>
                    </output>
                  </assignment>
                  <meta>
                    <documentation />
                    <checkpoint>false</checkpoint>
                  </meta>
                  <location>:spawn[1]:sequence[2]:switch[1]:sequence[2]:assign[1]</location>
                </assign>
              </sequence>
            </case>
            <location>:spawn[1]:sequence[2]:switch[1]</location>
          </switch>
        </sequence>
        <location>:spawn[1]</location>
      </spawn>
      <assign>
        <assignment>
          <document>
            <input>
              <from>soap body content</from>
            </input>
          </document>
          <result>
            <output>
              <to>adapter request</to>
            </output>
          </result>
          <xslt-stylesheet>
            <stylesheet-replacement-tokens>
              <replacement-token name="username">
                <input global="false">
                  <from>username</from>
                </input>
              </replacement-token>
              <replacement-token name="password">
                <input global="false">
                  <from>password</from>
                </input>
              </replacement-token>
              <replacement-token name="soap url">
                <input global="false">
                  <from>soap url</from>
                </input>
              </replacement-token>
              <replacement-token name="soap action">
                <input global="false">
                  <from>soap action</from>
                </input>
              </replacement-token>
              <replacement-token name="soap version">
                <input global="false">
                  <from>soap version</from>
                </input>
              </replacement-token>
              <replacement-token name="soap header content">
                <input global="false">
                  <from>soap header content</from>
                </input>
              </replacement-token>
              <replacement-token name="connection name">
                <input global="false">
                  <from>connection name</from>
                </input>
              </replacement-token>
              <replacement-token name="terminate on exit">
                <input global="false">
                  <from>terminate on exit</from>
                </input>
              </replacement-token>
              <replacement-token name="chunked encoding">
                <input global="false">
                  <from>chunked encoding</from>
                </input>
              </replacement-token>
              <replacement-token name="http request headers">
                <input global="false">
                  <from>http request headers</from>
                </input>
              </replacement-token>
              <replacement-token name="use ssl certificate">
                <input global="false">
                  <from>use ssl certificate</from>
                </input>
              </replacement-token>
              <replacement-token name="install certificate">
                <input global="false">
                  <from>install certificate</from>
                </input>
              </replacement-token>
              <replacement-token name="allow unsigned certificate">
                <input global="false">
                  <from>allow unsigned certificate</from>
                </input>
              </replacement-token>
              <replacement-token name="pass phrase">
                <input global="false">
                  <from>pass phrase</from>
                </input>
              </replacement-token>
            </stylesheet-replacement-tokens>
            <stylesheet><![CDATA[<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="1.0">
  <xsl:output indent="yes" />
  <xsl:template match="/">
    <request-data>
      <soap-rpc-request>
        <xsl:if test="string-length('${use ssl certificate}')!=0">
          <use-ssl-certificate>${use ssl certificate}</use-ssl-certificate>
        </xsl:if>
        <xsl:if test="string-length('$[install certificate]')!=0">
          <install-certificate>${install certificate}</install-certificate>
        </xsl:if>
        <xsl:if test="string-length('$[allow unsigned certificate]')!=0">
          <allow-unsigned-certificate>${allow unsigned certificate}</allow-unsigned-certificate>
        </xsl:if>
        <xsl:if test="string-length('$[passphrase]')!=0">
          <passphrase>${pass phrase}</passphrase>
        </xsl:if>
        <xsl:if test="string-length('${connection name}')!=0">
          <connection>
            <name>$[connection name]</name>
            <xsl:if test="string-length('${terminate on exit}')!=0">
              <terminate-on-exit>${terminate on exit}</terminate-on-exit>
            </xsl:if>
          </connection>
        </xsl:if>
        <soap-url>$[soap url]</soap-url>
        <xsl:if test="string-length('${username}')!=0">
          <username>${username}</username>
          <password>${password}</password>
        </xsl:if>
        <xsl:if test="string-length('${soap action}')!=0">
          <soap-action>${soap action}</soap-action>
        </xsl:if>
        <xsl:if test="string-length('${soap version}')!=0">
          <xsl:choose>
            <xsl:when test="'${soap version}'= 1.1">
              <soap-version>${soap version}</soap-version>
            </xsl:when>
            <xsl:otherwise>
              <soap-version>
                <xsl:text disable-output-escaping="no">1.1</xsl:text>
              </soap-version>
            </xsl:otherwise>
          </xsl:choose>
        </xsl:if>
        <chunked-encoding>
          <xsl:choose>
            <xsl:when test="string-length('${chunked encoding}')!=0">${chunked encoding}</xsl:when>
            <xsl:otherwise>
              <xsl:text disable-output-escaping="no">true</xsl:text>
            </xsl:otherwise>
          </xsl:choose>
        </chunked-encoding>
        ${http request headers}
        <soap-header-content>${soap header content}</soap-header-content>
        <soap-body-content>
          <xsl:copy-of select="node()/*" />
        </soap-body-content>
      </soap-rpc-request>
    </request-data>
  </xsl:template>
</xsl:stylesheet>]]></stylesheet>
          </xslt-stylesheet>
        </assignment>
        <meta>
          <documentation />
          <checkpoint>false</checkpoint>
        </meta>
        <location>:assign[1]</location>
      </assign>
      <call-adapter>
        <parameters>
          <input global="false">
            <from>adapter name</from>
          </input>
          <input>
            <value>
              <adapter-request>
                <peer-location>
                  <location>any</location>
                </peer-location>
              </adapter-request>
            </value>
          </input>
          <input global="false">
            <from>adapter request</from>
          </input>
          <input global="false">
            <from>adapter request</from>
          </input>
          <output global="false">
            <to>adapter response</to>
          </output>
        </parameters>
        <meta>
          <documentation />
          <checkpoint>false</checkpoint>
        </meta>
        <before-execution>
          <log>
            <level>debug</level>
            <parameters>
              <input>
                <value>Adapter request</value>
              </input>
              <input>
                <from>adapter request</from>
              </input>
            </parameters>
          </log>
        </before-execution>
        <after-execution>
          <log>
            <level>debug</level>
            <parameters>
              <input>
                <value>Adapter response</value>
              </input>
              <input>
                <from>adapter response</from>
              </input>
            </parameters>
          </log>
        </after-execution>
        <location>:call-adapter[1]</location>
      </call-adapter>
      <assign>
        <assignment>
          <document>
            <input>
              <from>adapter response</from>
            </input>
          </document>
          <result>
            <output>
              <to>status</to>
            </output>
          </result>
          <xpath-expression>
            <xpath-replacement-tokens />
            <xpath><![CDATA[//metadata/status/text()]]></xpath>
          </xpath-expression>
        </assignment>
        <meta>
          <documentation />
          <checkpoint>false</checkpoint>
        </meta>
        <location>:assign[2]</location>
      </assign>
      <switch>
        <meta>
          <documentation />
          <run-mode-handling>
            <run-mode>OCP</run-mode>
            <allow-step-into>true</allow-step-into>
          </run-mode-handling>
          <checkpoint>false</checkpoint>
        </meta>
        <execute-all-applicable-cases>false</execute-all-applicable-cases>
        <default>
          <sequence>
            <assign>
              <assignment>
                <output>
                  <to>error message</to>
                  <value>
                    <empty />
                  </value>
                </output>
              </assignment>
              <meta>
                <documentation />
                <checkpoint>false</checkpoint>
              </meta>
              <location>:switch[1]:sequence[1]:assign[1]</location>
            </assign>
          </sequence>
        </default>
        <case>
          <condition>
            <document>
              <input>
                <from>status</from>
              </input>
            </document>
            <xpath-expression>
              <xpath-replacement-tokens />
              <xpath><![CDATA[text()="error"]]></xpath>
            </xpath-expression>
          </condition>
          <sequence>
            <assign>
              <assignment>
                <document>
                  <input>
                    <from>adapter response</from>
                  </input>
                </document>
                <result>
                  <output>
                    <to>error message</to>
                  </output>
                </result>
                <xpath-expression>
                  <xpath-replacement-tokens />
                  <xpath><![CDATA[//metadata/error/text()]]></xpath>
                </xpath-expression>
              </assignment>
              <meta>
                <documentation />
                <checkpoint>false</checkpoint>
              </meta>
              <location>:switch[1]:sequence[2]:assign[1]</location>
            </assign>
          </sequence>
        </case>
        <location>:switch[1]</location>
      </switch>
    </sequence>
    <meta>
      <expose-to>
        <consumer>RULE</consumer>
        <consumer>SCHEDULE</consumer>
      </expose-to>
      <documentation>
        <description>This SOAP Request Method relies on the adapter to implement SOAP and requires only the header and body payloads to be specified. The adapter provides access control through the use of the following parameters: username, password, connection name and terminate on exit.  HTTPS is supported. 

</description>
        <version>1.0</version>
      </documentation>
      <peer-location>
        <location>any</location>
      </peer-location>
      <record-metrics>false</record-metrics>
      <process-id>459cb020-7604-37a5-b830-95c14412693f</process-id>
      <author>admin</author>
      <category></category>
      <status></status>
      <keywords></keywords>
      <systems></systems>
      <last-modified-by>admin</last-modified-by>
      <last-modified>1320742858367</last-modified>
    </meta>
  </process-def>
</process>