<process draft="false" dev-studio-version="20.02.00">
  <process-def name=":AutoPilot-AD-Utilities:Terminal:SFTP:chmod">
    <parameters>
      <input global="false" required="false">
        <description>The name of the Adapter to use for this Process.</description>
        <from>adapter name</from>
        <to>adapter name</to>
      </input>
      <input global="false" required="false">
        <description>Identifies the target defined in the SFTP Actor Adapter configuration (in Grid Manager).</description>
        <from>target</from>
        <to>target</to>
      </input>
      <input global="false" required="false">
        <description>The host name or IP address of the remote host.</description>
        <from>host name</from>
        <to>host name</to>
      </input>
      <input global="false" required="false">
        <description>The port on which the remote host listens.</description>
        <from>port</from>
        <to>port</to>
      </input>
      <input global="false" required="false">
        <description>User name to be used for remote host authentication.</description>
        <from>user name</from>
        <to>user name</to>
      </input>
      <input global="false" required="false">
        <description>The password that corresponds with the user name provided.</description>
        <from>password</from>
        <to>password</to>
      </input>
      <input global="false" required="false">
        <description>The method of encryption used
for the password value provided.
Valid values: Base64, Plain
With a value of 'Base64' for this
input, the value provided for the
password input should be a Base64
encoded value. With a value of
'Plain' the value provided for the
password input should be plain
text.</description>
        <from>password encryption type</from>
        <to>password encryption type</to>
      </input>
      <input global="false" required="false">
        <description>Identifies the path to the local
known_hosts file. This file will be
used when performing key
verification.</description>
        <from>known hosts config</from>
        <to>known hosts config</to>
      </input>
      <input global="false" required="false">
        <description>Indicates whether a connection
should continue if key
verification fails.
Valid values: true, false
With a value of 'true', the
connection will be maintained
when connecting to an unknown
or mismatched system. With a
value of 'false' the connection will
be dropped and the Adapter
response will return an error.</description>
        <from>allow unknown hosts</from>
        <to>allow unknown hosts</to>
      </input>
      <input global="false" required="false">
        <description>Identifies the path and file name for the local SSH key file</description>
        <from>private key file</from>
        <to>private key file</to>
      </input>
      <input global="false" required="false">
        <description>Preference of the algorithm used
to encrypt the public key.
Valid values: ssh-dss, ssh-rsa</description>
        <from>preferred pk algorithm</from>
        <to>preferred pk algorithm</to>
      </input>
      <input global="false" required="true">
        <description>The remote path, including file
name. The permissions on this file
will be changed.</description>
        <from>file name</from>
        <to>file name</to>
      </input>
      <input global="false" required="true">
        <description>The permissions that will be assigned to the specified file.
</description>
        <from>permissions</from>
        <to>permissions</to>
      </input>
      <input global="false" required="false">
        <description>Specify Character set name to encode od decode the characters.
E.g.
Character set     Supporting Language
Shift_JIS          : Japanese character set.
Big5	              : Traditional Chinese character set.
ISO-8859-2	   :  ISO character set for Central European languages.</description>
        <from>character set</from>
        <to>character set</to>
      </input>
      <input global="false" required="false">
        <description>If set to 'true', it enables the use of pseudo terminals when invoking SSH connections. Please do not specify prompt in adapter request and configuration for this target if this option is selected. 

Valid Values:

true
false

Default : true
</description>
        <from>use pseudo terminal</from>
        <to>use pseudo terminal</to>
      </input>
      <input global="false" required="false">
        <description>Specify how long (in seconds) the connection to be established on the target server</description>
        <from>establish connection timeout</from>
        <to>establish connection timeout</to>
      </input>
      <input global="false" required="false">
        <description>Specifies the time, in seconds, to wait for the expected prompt to return

If the expected prompt is not returned before the specified period has elapsed, an error message is returned.

Default value: 60 seconds</description>
        <from>timeout secs</from>
        <to>timeout secs</to>
      </input>
      <output global="false" required="true">
        <description>An adapter response contains the result returned from an adapter request. The contents of the response will vary by adapter.</description>
        <to>adapter response</to>
        <from>adapter response</from>
      </output>
    </parameters>
    <access />
    <sequence>
      <switch>
        <meta>
          <documentation />
          <run-mode-handling>
            <run-mode>OCP</run-mode>
            <allow-step-into>true</allow-step-into>
          </run-mode-handling>
          <checkpoint>false</checkpoint>
        </meta>
        <execute-all-applicable-cases>false</execute-all-applicable-cases>
        <default>
          <sequence />
        </default>
        <case>
          <condition>
            <document>
              <input>
                <from>adapter name</from>
              </input>
            </document>
            <xpath-expression>
              <xpath-replacement-tokens />
              <xpath><![CDATA[string-length(.)=0]]></xpath>
            </xpath-expression>
          </condition>
          <sequence>
            <assign>
              <assignment>
                <output>
                  <to>adapter name</to>
                  <value>SFTPActorAdapter</value>
                </output>
              </assignment>
              <meta>
                <documentation />
                <checkpoint>false</checkpoint>
              </meta>
              <location>:switch[1]:sequence[2]:assign[1]</location>
            </assign>
          </sequence>
        </case>
        <location>:switch[1]</location>
      </switch>
      <assign>
        <assignment>
          <document>
            <input>
              <from>establish connection timeout</from>
            </input>
          </document>
          <result>
            <output>
              <to>establish connection timeout</to>
            </output>
          </result>
          <xslt-stylesheet>
            <stylesheet-replacement-tokens />
            <stylesheet><![CDATA[<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="1.0">
  <xsl:output indent="no" />
  <xsl:template match="/">
    <value>
      <xsl:choose>
        <xsl:when test="number(.)&gt;0">
          <xsl:value-of select="." disable-output-escaping="no" />
        </xsl:when>
        <xsl:otherwise>
          <xsl:text disable-output-escaping="no">60</xsl:text>
        </xsl:otherwise>
      </xsl:choose>
    </value>
  </xsl:template>
</xsl:stylesheet>]]></stylesheet>
          </xslt-stylesheet>
        </assignment>
        <assignment>
          <document>
            <input>
              <from>timeout secs</from>
            </input>
          </document>
          <result>
            <output>
              <to>timeout secs</to>
            </output>
          </result>
          <xslt-stylesheet>
            <stylesheet-replacement-tokens />
            <stylesheet><![CDATA[<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="1.0">
  <xsl:output indent="no" />
  <xsl:template match="/">
    <value>
      <xsl:choose>
        <xsl:when test="number(.)&gt;0">
          <xsl:value-of select="." disable-output-escaping="no" />
        </xsl:when>
        <xsl:otherwise>
          <xsl:text disable-output-escaping="no">60</xsl:text>
        </xsl:otherwise>
      </xsl:choose>
    </value>
  </xsl:template>
</xsl:stylesheet>]]></stylesheet>
          </xslt-stylesheet>
        </assignment>
        <meta>
          <documentation />
          <checkpoint>false</checkpoint>
        </meta>
        <location>:assign[1]</location>
      </assign>
      <assign>
        <assignment>
          <document>
            <input>
              <from>target</from>
            </input>
          </document>
          <result>
            <output>
              <to>adapter request</to>
            </output>
          </result>
          <xslt-stylesheet>
            <stylesheet-replacement-tokens>
              <replacement-token name="target">
                <input global="false">
                  <from>target</from>
                </input>
              </replacement-token>
              <replacement-token name="host name">
                <input global="false">
                  <from>host name</from>
                </input>
              </replacement-token>
              <replacement-token name="user name">
                <input global="false">
                  <from>user name</from>
                </input>
              </replacement-token>
              <replacement-token name="password">
                <input global="false">
                  <from>password</from>
                </input>
              </replacement-token>
              <replacement-token name="known hosts config">
                <input global="false">
                  <from>known hosts config</from>
                </input>
              </replacement-token>
              <replacement-token name="allow unknown hosts">
                <input global="false">
                  <from>allow unknown hosts</from>
                </input>
              </replacement-token>
              <replacement-token name="preferred pk algorithm">
                <input global="false">
                  <from>preferred pk algorithm</from>
                </input>
              </replacement-token>
              <replacement-token name="port">
                <input global="false">
                  <from>port</from>
                </input>
              </replacement-token>
              <replacement-token name="permissions">
                <input global="false">
                  <from>permissions</from>
                </input>
              </replacement-token>
              <replacement-token name="password encryption type">
                <input global="false">
                  <from>password encryption type</from>
                </input>
              </replacement-token>
              <replacement-token name="file name">
                <input global="false">
                  <from>file name</from>
                </input>
              </replacement-token>
              <replacement-token name="charSet">
                <input global="false">
                  <from>character set</from>
                </input>
              </replacement-token>
              <replacement-token name="establish connection timeout">
                <input global="false">
                  <from>establish connection timeout</from>
                </input>
              </replacement-token>
              <replacement-token name="timeout secs">
                <input global="false">
                  <from>timeout secs</from>
                </input>
              </replacement-token>
              <replacement-token name="private key file">
                <input global="false">
                  <from>private key file</from>
                </input>
              </replacement-token>
              <replacement-token name="use pseudo terminal">
                <input global="false">
                  <from>use pseudo terminal</from>
                </input>
              </replacement-token>
            </stylesheet-replacement-tokens>
            <stylesheet><![CDATA[<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="1.0">
  <xsl:output method="xml" indent="yes" />
  <xsl:template match="/">
    <request-data>
      <sftp-request>
        <targets>
          <xsl:if test="string-length('${target}')!=0">
            <target name="${target}" />
          </xsl:if>
          <xsl:if test="string-length('${host name}')!=0">
            <target>
              <host>
                <xsl:text disable-output-escaping="no">${host name}</xsl:text>
              </host>
              <xsl:if test="string-length('${port}')=0">
                <port>
                  <xsl:text>22</xsl:text>
                </port>
              </xsl:if>
              <xsl:if test="string-length('${port}')!=0">
                <port>
                  <xsl:text disable-output-escaping="no">${port}</xsl:text>
                </port>
              </xsl:if>
              <userName>${user name}</userName>
              <xsl:choose>
                <xsl:when test="string('${password encryption type}')=&quot;Base64&quot;">
                  <password encryption-type="${password encryption type}">
                    <xsl:text disable-output-escaping="no">$[password]</xsl:text>
                  </password>
                </xsl:when>
                <xsl:otherwise>
                  <password>${password}</password>
                </xsl:otherwise>
              </xsl:choose>
              <xsl:if test="string-length('${establish connection timeout}')!=0">
                <establish-connection-timeout-secs>
                  <xsl:text disable-output-escaping="no">${establish connection timeout}</xsl:text>
                </establish-connection-timeout-secs>
              </xsl:if>
              <xsl:if test="string-length('${timeout secs}')!=0">
                <timeout-secs>
                  <xsl:text disable-output-escaping="no">${timeout secs}</xsl:text>
                </timeout-secs>
              </xsl:if>
              <xsl:if test="string-length('${known hosts config}')!=0">
                <known-hosts-config>
                  <xsl:text>${known hosts config}</xsl:text>
                </known-hosts-config>
              </xsl:if>
              <xsl:if test="string-length('${private key file}')!=0">
                <private-key-file>
                  <xsl:text disable-output-escaping="no">${private key file}</xsl:text>
                </private-key-file>
              </xsl:if>
              <xsl:if test="string-length('${allow unknown hosts}')!=0">
                <xsl:choose>
                  <xsl:when test="'${allow unknown hosts}'='true'">
                    <allow-unknown-hosts>
                      <xsl:text>${allow unknown hosts}</xsl:text>
                    </allow-unknown-hosts>
                  </xsl:when>
                  <xsl:when test="'${allow unknown hosts}'='false'">
                    <allow-unknown-hosts>
                      <xsl:text>${allow unknown hosts}</xsl:text>
                    </allow-unknown-hosts>
                  </xsl:when>
                  <xsl:otherwise>
                    <allow-unknown-hosts>
                      <xsl:text>false</xsl:text>
                    </allow-unknown-hosts>
                  </xsl:otherwise>
                </xsl:choose>
              </xsl:if>
              <use-pseudo-terminal>
                <xsl:text disable-output-escaping="no">${use pseudo terminal}</xsl:text>
              </use-pseudo-terminal>
              <xsl:choose>
                <xsl:when test="'${preferred pk algorithm}'='ssh-dss'">
                  <preferred-pk-algorithm>
                    <xsl:text>${preferred pk algorithm}</xsl:text>
                  </preferred-pk-algorithm>
                </xsl:when>
                <xsl:when test="'${preferred pk algorithm}'='ssh-rsa'">
                  <preferred-pk-algorithm>
                    <xsl:text>${preferred pk algorithm}</xsl:text>
                  </preferred-pk-algorithm>
                </xsl:when>
                <xsl:otherwise>
                  <preferred-pk-algorithm>
                    <xsl:text>ssh-rsa</xsl:text>
                  </preferred-pk-algorithm>
                </xsl:otherwise>
              </xsl:choose>
              <xsl:if test="string-length('$[charSet]')&gt;0">
                <character-set>
                  <xsl:text disable-output-escaping="no">${charSet}</xsl:text>
                </character-set>
              </xsl:if>
            </target>
          </xsl:if>
        </targets>
        <commands>
          <chmod>
            <file>
              <xsl:text disable-output-escaping="no">${file name}</xsl:text>
            </file>
            <permissions>
              <xsl:text disable-output-escaping="no">${permissions}</xsl:text>
            </permissions>
          </chmod>
        </commands>
      </sftp-request>
    </request-data>
  </xsl:template>
</xsl:stylesheet>]]></stylesheet>
          </xslt-stylesheet>
        </assignment>
        <meta>
          <documentation />
          <checkpoint>false</checkpoint>
        </meta>
        <location>:assign[2]</location>
      </assign>
      <call-adapter>
        <use-system-adapter>false</use-system-adapter>
        <parameters>
          <input global="false">
            <from>adapter name</from>
          </input>
          <input>
            <value>
              <adapter-request>
                <peer-location>
                  <location>any</location>
                </peer-location>
              </adapter-request>
            </value>
          </input>
          <input global="false">
            <from>adapter request</from>
          </input>
          <input global="false">
            <from>adapter request</from>
          </input>
          <output global="false">
            <to>adapter response</to>
          </output>
        </parameters>
        <meta>
          <documentation />
          <checkpoint>false</checkpoint>
        </meta>
        <before-execution>
          <log>
            <level>debug</level>
            <parameters>
              <input>
                <value>Adapter request</value>
              </input>
              <input>
                <from>adapter request</from>
              </input>
            </parameters>
          </log>
        </before-execution>
        <after-execution>
          <log>
            <level>debug</level>
            <parameters>
              <input>
                <value>Adapter response</value>
              </input>
              <input>
                <from>adapter response</from>
              </input>
            </parameters>
          </log>
        </after-execution>
        <location>:call-adapter[1]</location>
      </call-adapter>
    </sequence>
    <meta>
      <expose-to>
        <consumer>RULE</consumer>
        <consumer>SCHEDULE</consumer>
      </expose-to>
      <documentation>
        <description>chmod
        Changes the permissions for a specified file.</description>
        <version>1.0</version>
      </documentation>
      <logging-options>
        <is-enabled>false</is-enabled>
        <log-file-name></log-file-name>
      </logging-options>
      <peer-location>
        <location>any</location>
      </peer-location>
      <record-metrics>false</record-metrics>
      <process-id>7bc122d3-af56-34d4-b72f-650b02dbbaf6</process-id>
      <author>admin</author>
      <category></category>
      <status></status>
      <keywords></keywords>
      <systems></systems>
      <last-modified-by>aoadmin</last-modified-by>
      <last-modified>1609835573983</last-modified>
    </meta>
  </process-def>
</process>