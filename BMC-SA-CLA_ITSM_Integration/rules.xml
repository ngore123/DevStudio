<?xml version="1.0" encoding="UTF-8"?>
<process>
   <process-def name=":BMC-SA-CLA_ITSM_Integration:rules">
      <sequence>
         <switch>
            <meta>
               <peer-location>
                  <location>any</location>
               </peer-location>
            </meta>
            <execute-all-applicable-cases>true</execute-all-applicable-cases>
            <case name="evaluateEntriesFromAutomation" applies-if-any-condition-true="false">
               <condition>
                  <document>
                     <input>
                        <from>inputevent</from>
                     </input>
                  </document>
                  <xpath-expression>
                     <xpath><![CDATA[number(//response-row-count)>0]]></xpath>
                  </xpath-expression>
                  <gui-data>
                     <from><![CDATA[number(//response-row-count)]]></from>
                     <fromKey><![CDATA[5765]]></fromKey>
                     <to><![CDATA[0]]></to>
                     <operator><![CDATA[>]]></operator>
                     <type><![CDATA[String]]></type>
                  </gui-data>
               </condition>
               <condition>
                  <document>
                     <input>
                        <from>inputevent</from>
                     </input>
                  </document>
                  <xpath-expression>
                     <xpath><![CDATA[//sql-monitor-event/row[1]/column[@name='ORIGIN']/text()='Automation']]></xpath>
                  </xpath-expression>
                  <gui-data>
                     <from><![CDATA[//sql-monitor-event/row[1]/column[@name='ORIGIN']/text()]]></from>
                     <fromKey><![CDATA[5766]]></fromKey>
                     <to><![CDATA['Automation']]></to>
                     <operator><![CDATA[=]]></operator>
                     <type><![CDATA[String]]></type>
                  </gui-data>
               </condition>
               <condition>
                  <document>
                     <input>
                        <from>inputevent</from>
                     </input>
                  </document>
                  <xpath-expression>
                     <xpath><![CDATA[contains(//sql-monitor-event/row[1]/column[@name='STATUS']/text(), "Ready") or contains(//sql-monitor-event/row[1]/column[@name='STATUS']/text(), "Failed")='true']]></xpath>
                  </xpath-expression>
                  <gui-data>
                     <from><![CDATA[contains(//sql-monitor-event/row[1]/column[@name='STATUS']/text(), "Ready") or contains(//sql-monitor-event/row[1]/column[@name='STATUS']/text(), "Failed")]]></from>
                     <fromKey><![CDATA[5767]]></fromKey>
                     <to><![CDATA['true']]></to>
                     <operator><![CDATA[=]]></operator>
                     <type><![CDATA[String]]></type>
                  </gui-data>
               </condition>
               <sequence>
                  <schedule-job>
                     <parameters>
                        <input required="false">
                           <from>inputevent</from>
                           <to>inputevent</to>
                        </input>
                     </parameters>
                     <group>BMC-SA-CLA_ITSM_Integration</group>
                     <name-prefix>evaluateEntriesFromAutomation</name-prefix>
                     <process-name>:BMC-SA-CLA_ITSM_Integration:ITSM_Integration:BMC_AR_SYSTEM:SendMessageToRemedy</process-name>
                     <unique-id>fc02fcf1-9507-47ee-b837-db12f3860a59</unique-id>
                  </schedule-job>
               </sequence>
            </case>
            <case name="evaluateEntriesFromRemedy" applies-if-any-condition-true="false">
               <condition>
                  <document>
                     <input>
                        <from>inputevent</from>
                     </input>
                  </document>
                  <xpath-expression>
                     <xpath><![CDATA[number(//response-row-count)>0]]></xpath>
                  </xpath-expression>
                  <gui-data>
                     <from><![CDATA[number(//response-row-count)]]></from>
                     <fromKey><![CDATA[5768]]></fromKey>
                     <to><![CDATA[0]]></to>
                     <operator><![CDATA[>]]></operator>
                     <type><![CDATA[String]]></type>
                  </gui-data>
               </condition>
               <condition>
                  <document>
                     <input>
                        <from>inputevent</from>
                     </input>
                  </document>
                  <xpath-expression>
                     <xpath><![CDATA[//sql-monitor-event/row[1]/column[@name='ORIGIN']/text()='Remedy']]></xpath>
                  </xpath-expression>
                  <gui-data>
                     <from><![CDATA[//sql-monitor-event/row[1]/column[@name='ORIGIN']/text()]]></from>
                     <fromKey><![CDATA[5769]]></fromKey>
                     <to><![CDATA['Remedy']]></to>
                     <operator><![CDATA[=]]></operator>
                     <type><![CDATA[String]]></type>
                  </gui-data>
               </condition>
               <condition>
                  <document>
                     <input>
                        <from>inputevent</from>
                     </input>
                  </document>
                  <xpath-expression>
                     <xpath><![CDATA[contains(//sql-monitor-event/row[1]/column[@name='STATUS']/text(), "Ready") or contains(//sql-monitor-event/row[1]/column[@name='STATUS']/text(), "Failed")='true']]></xpath>
                  </xpath-expression>
                  <gui-data>
                     <from><![CDATA[contains(//sql-monitor-event/row[1]/column[@name='STATUS']/text(), "Ready") or contains(//sql-monitor-event/row[1]/column[@name='STATUS']/text(), "Failed")]]></from>
                     <fromKey><![CDATA[5770]]></fromKey>
                     <to><![CDATA['true']]></to>
                     <operator><![CDATA[=]]></operator>
                     <type><![CDATA[String]]></type>
                  </gui-data>
               </condition>
               <sequence>
                  <schedule-job>
                     <parameters>
                        <input required="false">
                           <from>inputevent</from>
                           <to>inputevent</to>
                        </input>
                     </parameters>
                     <group>BMC-SA-CLA_ITSM_Integration</group>
                     <name-prefix>evaluateEntriesFromRemedy</name-prefix>
                     <process-name>:BMC-SA-CLA_ITSM_Integration:ITSM_Integration:Blade:SendMessageToBlade</process-name>
                     <unique-id>edc69393-6956-4291-a39d-c8676d5fb329</unique-id>
                  </schedule-job>
               </sequence>
            </case>
         </switch>
      </sequence>
      <meta>
         <peer-location>
            <location>any</location>
         </peer-location>
      </meta>
      <parameters>
         <input>
            <from>inputevent</from>
            <to>inputevent</to>
         </input>
      </parameters>
   </process-def>
</process>

