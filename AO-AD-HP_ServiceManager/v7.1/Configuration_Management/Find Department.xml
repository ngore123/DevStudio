<process draft="false" dev-studio-version="7.6.01.02">
  <process-def name=":AO-AD-HP_ServiceManager:v7.1:Configuration_Management:Find Department">
    <parameters>
      <input global="false" required="false">
        <description>The name of the adapter to use to handle the request. Default adapter name: HPSMActor.</description>
        <from>adapter name</from>
        <to>adapter name</to>
      </input>
      <input global="false" required="true">
        <description>The items for the adapter request. This should be an XML document with a root element named "items" having multiple child "item" elements, which should contain the data necessary to execute the specific request. 


Find Department 

This wrapper finds a 'Department'

Sample Item Xml:

&lt;items&gt;
	&lt;item&gt;
		&lt;operation-name&gt;retrieve-department&lt;/operation-name&gt;
		&lt;model&gt;
		  &lt;keys&gt;
			&lt;department&gt;
				&lt;value&gt;C-0001/D-0001&lt;/value&gt;
				&lt;type&gt;String&lt;/type&gt;
			&lt;/department&gt;
			&lt;company&gt;
				&lt;value&gt;C-0001&lt;/value&gt;
				&lt;type&gt;String&lt;/type&gt;
			&lt;/company&gt;
		  &lt;/keys&gt;
		  &lt;instance&gt;
		  
			&lt;department-name&gt;
			  &lt;value&gt;D-0001&lt;/value&gt;
			  &lt;type&gt;String&lt;/type&gt;
			&lt;/department-name&gt;
			&lt;company&gt;
				&lt;value&gt;C-0001&lt;/value&gt;
				&lt;type&gt;String&lt;/type&gt;
			&lt;/company&gt;
			
			&lt;department-i-d&gt;
			  &lt;value&gt;department i d&lt;/value&gt;
			  &lt;type&gt;String&lt;/type&gt;
			&lt;/department-i-d&gt;
			&lt;department-s-l-a&gt;
			  &lt;value&gt;155&lt;/value&gt;
			  &lt;type&gt;Decimal&lt;/type&gt;
			&lt;/department-s-l-a&gt;
			&lt;parent-department&gt;
			  &lt;value&gt;parent department&lt;/value&gt;
			  &lt;type&gt;String&lt;/type&gt;
			&lt;/parent-department&gt;
			&lt;cost-manager&gt;
			  &lt;value&gt;cost manager&lt;/value&gt;
			  &lt;type&gt;String&lt;/type&gt;
			&lt;/cost-manager&gt;
		  &lt;/instance&gt;
		&lt;/model&gt;
	&lt;/item&gt;
&lt;/items&gt;
Elements’ Description: 

Locating any record takes place as follows:-

The fields inside instance describe the record. 

Following are cases,

Case1: You provide (either in &lt;keys&gt; or in &lt;instance&gt; or in both) only key then the record is uniquely located.

Case2: You provide (either in &lt;keys&gt; or in &lt;instance&gt; or in both) key element(s) along with some other elements then the record is located only by key elements. All other elements get ignored. Record would get searched on the basis of the key element(s).

Case3: You provide (either in &lt;keys&gt; or in &lt;instance&gt; or in both) only those elements  that are not key. Then the record is located by logically ANDing all those elements.

Case4: You don’t provide anything. Then all  records would be fetched.


 NOTE:  For a given pattern string P is said to be matched with text string T if the string P is prefix string of T. for example, 

P = xyz 
T = xyz123 
Then P is matched with T. 

If, 
P = xyz
T = 1xyz23 
Then P is not matched with T.

etc.

this means, if you’re searching for vendor, and you’ve given vendor name to be “abc” and if there are two records with vendor name “abc123” and “abc456” then both these record would be fetched.

Complete Elements’ Description: 

item [Required]
	
	This is a child of &lt;items&gt;. This &lt;item&gt; tag can be multiple times to support "multiple items 	support". 

operation-name [Required] : 

	This is used to specify the operation that needs to be performed.

	Valid values:
&lt;operation-name&gt;retrieve-department&lt;/operation-name&gt; is valid operation name 	element.

model [Required]: It is the parent tag for containing all other tags.
	 
keys [Required] : used to specify the search criteria.


Instance [Required] :
It can have many child elements. The children of this element describe fields of a record.

Department [Optional]: 
	Valid values: any string. This should be in the following format : "Company"/"Dept Name"

Department-name[Optional]: Name of the department. 

Name of this field in the application: General &gt; Dept Name. 

Valid Values: any string.  

Company[Optional]: The company name. 

	Name of this element in the application: General &gt; Company. 

Valid Values: Any string.This should be a valid Company value.

Department-i-d[Optional]: The department ID. 

	Name of this element in the application: General &gt; Dept Code. 

	Valid Values: Any string. 

Department-s-l-a [Optional] : The SLA associated with department. 

	Name of this element in the application: General &gt; SLA

	Valid Values: 

Parent-department [Optional]: The parent department. 
	
	Name of this element in the application: General &gt; Parent Department. 

Valid Values: Any string. This should be a valid department value.

Cost-center [Optional]: The cost center.

	Name of this element in the application: General &gt; Cost Center. 

	Valid Values: Any string. 
</description>
        <from>items</from>
        <to>items</to>
      </input>
      <input global="false" required="false">
        <description>Provide username/password in form of xml. 

This input parameter is required when the user wants to override the default values for username and password provided in the adapter configuration. This is required for cases where an operation cannot be executed with the default username/password provided in the adapter configuration and only user with special permissions can execute the operation. Examples of such operations can be - 'approve-change', 'deny-change', 'close-change', 'approve-task'

Sample XML Format: 

&lt;connection-parameters&gt;
	&lt;alternate-username&gt;USERNAME&lt;/alternate-username&gt;
	&lt;alternate-password&gt;PASSWORD&lt;/alternate-password&gt;
&lt;/connection-parameters&gt;</description>
        <from>connection parameters</from>
        <to>connection parameters</to>
      </input>
      <output global="false" required="false">
        <description>The adapter response containing the results. </description>
        <to>adapter response</to>
        <from>adapter response</from>
      </output>
    </parameters>
    <access />
    <sequence>
      <switch>
        <meta>
          <documentation />
          <run-mode-handling>
            <run-mode>OCP</run-mode>
            <allow-step-into>true</allow-step-into>
          </run-mode-handling>
          <checkpoint>false</checkpoint>
        </meta>
        <execute-all-applicable-cases>false</execute-all-applicable-cases>
        <default>
          <sequence>
            <call-process>
              <process-name>:AO-AD-HP_ServiceManager:Utilities:Operation Name Error Reporting</process-name>
              <parameters>
                <input>
                  <value>retrieve-department</value>
                  <to>operation name</to>
                </input>
                <input>
                  <from>items</from>
                  <to>items</to>
                </input>
              </parameters>
              <meta>
                <documentation />
                <run-mode-handling>
                  <run-mode>OCP</run-mode>
                  <allow-step-into>false</allow-step-into>
                </run-mode-handling>
                <checkpoint>false</checkpoint>
              </meta>
              <location>:switch[1]:sequence[1]:call-process[1]</location>
            </call-process>
          </sequence>
        </default>
        <case>
          <condition>
            <document>
              <input>
                <from>items</from>
              </input>
            </document>
            <xpath-expression>
              <xpath-replacement-tokens />
              <xpath><![CDATA[(//operation-name)[1]/text() = 'retrieve-department']]></xpath>
            </xpath-expression>
          </condition>
          <sequence>
            <assign>
              <assignment>
                <document>
                  <input>
                    <from>items</from>
                  </input>
                </document>
                <result>
                  <output>
                    <to>items</to>
                  </output>
                </result>
                <xslt-stylesheet>
                  <stylesheet-replacement-tokens />
                  <stylesheet><![CDATA[<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="1.0">
  <xsl:output indent="no" />
  <xsl:template match="/">
    <items>
      <xsl:for-each select="//item">
        <item>
          <entity-type>
            <xsl:text disable-output-escaping="no">department</xsl:text>
          </entity-type>
          <xsl:copy-of select="./*" />
        </item>
      </xsl:for-each>
    </items>
  </xsl:template>
</xsl:stylesheet>]]></stylesheet>
                </xslt-stylesheet>
              </assignment>
              <meta>
                <documentation />
                <checkpoint>false</checkpoint>
              </meta>
              <location>:switch[1]:sequence[2]:assign[1]</location>
            </assign>
            <call-process>
              <process-name>:AO-AD-HP_ServiceManager:Utilities:Configuration_Management:Find Configuration Item Utility</process-name>
              <parameters>
                <input>
                  <from>adapter name</from>
                  <to>adapter name</to>
                </input>
                <input>
                  <from>items</from>
                  <to>items</to>
                </input>
                <input>
                  <from>connection parameters</from>
                  <to>connection parameters</to>
                </input>
                <output>
                  <from>adapter response</from>
                  <to>adapter response</to>
                </output>
              </parameters>
              <meta>
                <documentation />
                <run-mode-handling>
                  <run-mode>OCP</run-mode>
                  <allow-step-into>false</allow-step-into>
                </run-mode-handling>
                <checkpoint>false</checkpoint>
              </meta>
              <location>:switch[1]:sequence[2]:call-process[1]</location>
            </call-process>
          </sequence>
        </case>
        <location>:switch[1]</location>
      </switch>
    </sequence>
    <meta>
      <expose-to>
        <consumer>RULE</consumer>
        <consumer>SCHEDULE</consumer>
      </expose-to>
      <documentation>
        <description>
Find Department 

This wrapper finds a 'Department' 
</description>
        <version>1.0</version>
      </documentation>
      <peer-location>
        <location>any</location>
      </peer-location>
      <record-metrics>false</record-metrics>
      <process-id>987aea7f-151c-3fa4-a73f-fc6b35299ee1</process-id>
      <author />
      <category />
      <status />
      <keywords />
      <systems />
      <last-modified-by />
      <last-modified>1290594366330</last-modified>
    </meta>
  </process-def>
</process>