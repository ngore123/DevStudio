<process draft="false" dev-studio-version="7.6.01.02">
  <process-def name=":AO-AD-HP_ServiceManager:v7.1:Service_Desk_Management:Find Interaction">
    <parameters>
      <input global="false" required="false">
        <description>            The name of the adapter to use to handle the request. Default adapter name: HPSMActor. 
</description>
        <from>adapter name</from>
        <to>adapter name</to>
      </input>
      <input global="false" required="true">
        <description>The items for the adapter request. This should be an XML document with a root element named "items" having a child "item", which should contain the data necessary to execute the specific request. To execute multiple item, give multiple &lt;item&gt; element in the &lt;items&gt; element. 


Find Interaction 

This wrapper finds an interaction record.
Sample Item Xml:

&lt;items&gt;
	&lt;item&gt;
		&lt;operation-name&gt;retrieve-interaction&lt;/operation-name&gt;
          &lt;model&gt;
            &lt;keys&gt;
              &lt;call-i-d&gt;
                &lt;value&gt;Incident1005&lt;/value&gt;
                &lt;type&gt;String&lt;/type&gt;
              &lt;/call-i-d&gt;
            &lt;/keys&gt;
            &lt;instance&gt;
              &lt;call-i-d&gt;
                &lt;value&gt;Incident1005&lt;/value&gt;
                &lt;type&gt;String&lt;/type&gt;
              &lt;/call-i-d&gt;
              &lt;callback-contact&gt;
                &lt;value&gt;PETERS, JEFF&lt;/value&gt;
                &lt;type&gt;String&lt;/type&gt;
              &lt;/callback-contact&gt;
              &lt;notify-by&gt;
                &lt;value&gt;notify by&lt;/value&gt;
                &lt;type&gt;String&lt;/type&gt;
              &lt;/notify-by&gt;
              &lt;category&gt;
                &lt;value&gt;telecoms&lt;/value&gt;
                &lt;type&gt;String&lt;/type&gt;
              &lt;/category&gt;
              &lt;subcategory&gt;
                &lt;value&gt;fixed infrastructure&lt;/value&gt;
                &lt;type&gt;String&lt;/type&gt;
              &lt;/subcategory&gt;
              &lt;product-type&gt;
                &lt;value&gt;fixed infrastructure&lt;/value&gt;
                &lt;type&gt;String&lt;/type&gt;
              &lt;/product-type&gt;
              &lt;problem-type&gt;
                &lt;value&gt;none&lt;/value&gt;
                &lt;type&gt;String&lt;/type&gt;
              &lt;/problem-type&gt;
              &lt;initial-impact&gt;
                &lt;value&gt;1&lt;/value&gt;
                &lt;type&gt;String&lt;/type&gt;
              &lt;/initial-impact&gt;
              &lt;severity&gt;
                &lt;value&gt;1&lt;/value&gt;
                &lt;type&gt;String&lt;/type&gt;
              &lt;/severity&gt;
              &lt;description&gt;
                &lt;type&gt;Array&lt;/type&gt;
                &lt;description&gt;
                  &lt;element&gt;
                    &lt;value&gt;description line 1&lt;/value&gt;
                    &lt;type&gt;String&lt;/type&gt;
                  &lt;/element&gt;
                  &lt;element&gt;
                    &lt;value&gt;description line 2&lt;/value&gt;
                    &lt;type&gt;String&lt;/type&gt;
                  &lt;/element&gt;
                &lt;/description&gt;
              &lt;/description&gt;
			  &lt;title&gt;
				&lt;value&gt;test title&lt;/value&gt;
				&lt;type&gt;String&lt;/type&gt;
			  &lt;/title&gt;
              &lt;open-time&gt;
                &lt;value&gt;2008.11.01 08:00:00&lt;/value&gt;
                &lt;type&gt;DateTime&lt;/type&gt;
              &lt;/open-time&gt;
              &lt;update-time&gt;
                &lt;value&gt;2008.11.01 08:00:00&lt;/value&gt;
                &lt;type&gt;DateTime&lt;/type&gt;
              &lt;/update-time&gt;
              &lt;opened-by&gt;
                &lt;value&gt;opened by&lt;/value&gt;
                &lt;type&gt;String&lt;/type&gt;
              &lt;/opened-by&gt;
                &lt;service&gt;
                &lt;value&gt;&lt;![CDATA[Handheld, PDA &amp; Telephony]]&gt;&lt;/value&gt;
                &lt;type&gt;String&lt;/type&gt;
              &lt;/service&gt;
              &lt;call-owner&gt;
                &lt;value&gt;Call owner&lt;/value&gt;
                &lt;type&gt;String&lt;/type&gt;
              &lt;/call-owner&gt;
              &lt;status&gt;
                &lt;value&gt;Status&lt;/value&gt;
                &lt;type&gt;String&lt;/type&gt;
              &lt;/status&gt;
              &lt;caller-department&gt;
                &lt;value&gt;caller deparment&lt;/value&gt;
                &lt;type&gt;String&lt;/type&gt;
              &lt;/caller-department&gt;
              &lt;close-time&gt;
                &lt;value&gt;2008.11.01 08:00:00&lt;/value&gt;
                &lt;type&gt;DateTime&lt;/type&gt;
              &lt;/close-time&gt;
              &lt;closed-by&gt;
                &lt;value&gt;closed by&lt;/value&gt;
                &lt;type&gt;String&lt;/type&gt;
              &lt;/closed-by&gt;
              &lt;knowledge-candidate&gt;
                &lt;value&gt;true&lt;/value&gt;
                &lt;type&gt;Boolean&lt;/type&gt;
              &lt;/knowledge-candidate&gt;
              &lt;SLAAgreement-i-d&gt;
                &lt;value&gt;1&lt;/value&gt;
                &lt;type&gt;Int&lt;/type&gt;
              &lt;/SLAAgreement-i-d&gt;
              &lt;priority&gt;
                &lt;value&gt;1&lt;/value&gt;
                &lt;type&gt;String&lt;/type&gt;
              &lt;/priority&gt;
              &lt;failed-entitlement&gt;
                &lt;value&gt;true&lt;/value&gt;
                &lt;type&gt;Boolean&lt;/type&gt;
              &lt;/failed-entitlement&gt;
              &lt;resolution-code&gt;
                &lt;value&gt;resolution code&lt;/value&gt;
                &lt;type&gt;String&lt;/type&gt;
              &lt;/resolution-code&gt;
              &lt;company&gt;
                &lt;value&gt;company&lt;/value&gt;
                &lt;type&gt;String&lt;/type&gt;
              &lt;/company&gt;
              &lt;contact-name&gt;
                &lt;value&gt;PETERS, JEFF&lt;/value&gt;
                &lt;type&gt;String&lt;/type&gt;
              &lt;/contact-name&gt;
              &lt;reported-by-contact&gt;
                &lt;value&gt;PETERS, JEFF&lt;/value&gt;
                &lt;type&gt;String&lt;/type&gt;
              &lt;/reported-by-contact&gt;
              &lt;reported-by-different-contact&gt;
                &lt;value&gt;true&lt;/value&gt;
                &lt;type&gt;Boolean&lt;/type&gt;
              &lt;/reported-by-different-contact&gt;
              &lt;location-full-name&gt;
                &lt;value&gt;location full name&lt;/value&gt;
                &lt;type&gt;String&lt;/type&gt;
              &lt;/location-full-name&gt;
              &lt;entered-by-e-s-s&gt;
                &lt;value&gt;true&lt;/value&gt;
                &lt;type&gt;Boolean&lt;/type&gt;
              &lt;/entered-by-e-s-s&gt;
              &lt;SLABreached&gt;
                &lt;value&gt;true&lt;/value&gt;
                &lt;type&gt;Boolean&lt;/type&gt;
              &lt;/SLABreached&gt;
              &lt;s-l-a-agreement-i-d&gt;
                &lt;value&gt;1&lt;/value&gt;
                &lt;type&gt;Int&lt;/type&gt;
              &lt;/s-l-a-agreement-i-d&gt;
              &lt;s-l-a-breached&gt;
                &lt;value&gt;true&lt;/value&gt;
                &lt;type&gt;Boolean&lt;/type&gt;
              &lt;/s-l-a-breached&gt;
            &lt;/instance&gt;
          &lt;/model&gt;
&lt;/item&gt;
&lt;/items&gt;


Elementsâ€™ Description:  

item [Required]:
This is a child of &lt;items&gt;. This &lt;item&gt; tag can be multiple times to support "multiple items support". 

model [Required]: It is the parent tag for containing all other tags.

keys [Required]: used to define a search criteria to find a unique interaction record.

Instance [Required]: It can have many child elements. The child elements describe fields of a record.

Operation-name [Required]:
	Valid values: retrieve-interaction

Call-i-d [Optional]: 
	Valid values: any string.
	
callback-contact [Optional]:
     Name of this field in the application : Primary Contact &gt; Contact for this interaction
	Valid values: any string.
	
notify-by [Optional]: 
	Valid values: any string. 

category [Optional]:
	Valid values: any valid category value.

subcategory [Optional]:
	Name of this tag in the application: Area
	Valid values: any valid subcategory value.

product-type [Optional]:
	Name of this tag in the application: Sub-area
	Valid values: any valid product-type value.

problem-type [Optional]: 
	Valid values: any string.

Initial-impact [Optional]:
     Name of this field in the application : Impact
	Valid values: any string.
	Existing entries:

	1, 2, 3, 4. 
	1 &gt; Enterprise, 2 &gt; Site/Dept, 3 &gt; Multiple User, 4 &gt; User.

Severity[Optional]: 
	Name of field in the application: Urgency
	Valid values: any string.
	Existing entries:
	1, 2, 3, 4.
	1 &gt; critical, 2 &gt; high, 3 &gt; average, 4 &gt; low.

Description [Optional]: 
	Valid values: It's an array type of element with each of its element of string type.
	
Title [Optional]	
	Valid values; Any string

service[Optional]:
      Valid values: : Any valid Service value
 
open-time [Optional]:
	Valid values: any input in date time format.

update-time [Optional]:
	Valid values: any input in date time format.

Opened-by [Optional]:
	Valid values: any string.

call-owner [Optional]:
	Valid values: any string.

status [Optional]:
	Valid values: any string.
	
caller-department [Optional]: 
	Valid values: any string.

close-time [Optional]:
	Valid values: any input in date time format. 

Closed-by [Optional]:
	Valid values: any string.

knowledge-candidate [Optional]:
	Valid values: true, false.

SLAAgreement-i-d [Optional]:
	Valid values: any string.
	
Priority [Optional]:
	Valid values: any string.
	Existing entries: 
	1, 2, 3, 4.
	1 &gt; Enterprise, 2 &gt; Site/Dept, 3 &gt; Multiple User, 4 &gt; User

failed-entitlement [Optional]:
	Valid values: true, false.

resolution-code [Optional]:
	Valid values: any string.

company [Optional]:
	Valid values: any string.

contact-name [Optional]:
	Valid value: any string.

reported-by-contact [Optional]:
	Valid values: any string.

reported-by-different-contact [Optional]:
	Valid value: true, false.

location-full-name [Optional]:
	Valid values: any string.

entered-by-e-s-s [Optional]: 
	Valid values: true, false.

SLABreached [Optional]:
	Valid values: true, false.

s-l-a-agreement-i-d [Optional]:
	Valid values: any integer input. 

s-l-a-breached [Optional]:
	Valid values: true, false.


Note: For including special characters in String fields , special characters should be wrapped with CDATA tag. Sample:  &lt;value&gt;&lt;![CDATA[Handheld, PDA &amp; Telephony]]&gt;&lt;/value&gt; </description>
        <from>items</from>
        <to>items</to>
      </input>
      <input global="false" required="false">
        <description>Provide username/password in form of xml. 

This input parameter is required when the user wants to override the default values for username and password provided in the adapter configuration. This is required for cases where an operation cannot be executed with the default username/password provided in the adapter configuration and only user with special permissions can execute the operation. Examples of such operations can be - 'approve-change', 'deny-change', 'close-change', 'approve-task'

Sample XML Format: 

&lt;connection-parameters&gt;
	&lt;alternate-username&gt;USERNAME&lt;/alternate-username&gt;
	&lt;alternate-password&gt;PASSWORD&lt;/alternate-password&gt;
&lt;/connection-parameters&gt;</description>
        <from>connection parameters</from>
        <to>connection parameters</to>
      </input>
      <output global="false" required="false">
        <description> The adapter response containing the results. </description>
        <to>adapter response</to>
        <from>adapter response</from>
      </output>
    </parameters>
    <access />
    <sequence>
      <switch>
        <meta>
          <documentation />
          <run-mode-handling>
            <run-mode>OCP</run-mode>
            <allow-step-into>true</allow-step-into>
          </run-mode-handling>
          <checkpoint>false</checkpoint>
        </meta>
        <execute-all-applicable-cases>false</execute-all-applicable-cases>
        <default>
          <sequence>
            <call-process>
              <process-name>:AO-AD-HP_ServiceManager:Utilities:Operation Name Error Reporting</process-name>
              <parameters>
                <input>
                  <value>retrieve-interaction</value>
                  <to>operation name</to>
                </input>
                <input>
                  <from>items</from>
                  <to>items</to>
                </input>
              </parameters>
              <meta>
                <documentation />
                <run-mode-handling>
                  <run-mode>OCP</run-mode>
                  <allow-step-into>false</allow-step-into>
                </run-mode-handling>
                <checkpoint>false</checkpoint>
              </meta>
              <location>:switch[1]:sequence[1]:call-process[1]</location>
            </call-process>
          </sequence>
        </default>
        <case>
          <condition>
            <document>
              <input>
                <from>items</from>
              </input>
            </document>
            <xpath-expression>
              <xpath-replacement-tokens />
              <xpath><![CDATA[(//operation-name)[1]/text() = 'retrieve-interaction']]></xpath>
            </xpath-expression>
          </condition>
          <sequence>
            <call-process>
              <process-name>:AO-AD-HP_ServiceManager:Utilities:Set Default Adapter Name</process-name>
              <parameters>
                <input>
                  <from>adapter name</from>
                  <to>adapter name</to>
                </input>
                <output>
                  <from>adapter name</from>
                  <to>adapter name</to>
                </output>
              </parameters>
              <meta>
                <documentation />
                <run-mode-handling>
                  <run-mode>OCP</run-mode>
                  <allow-step-into>false</allow-step-into>
                </run-mode-handling>
                <checkpoint>false</checkpoint>
              </meta>
              <location>:switch[1]:sequence[2]:call-process[1]</location>
            </call-process>
            <assign>
              <assignment>
                <document>
                  <input>
                    <from>items</from>
                  </input>
                </document>
                <result>
                  <output>
                    <to>request element</to>
                  </output>
                </result>
                <xpath-expression>
                  <xpath-replacement-tokens />
                  <xpath><![CDATA[concat((//operation-name)[1], "-request")]]></xpath>
                </xpath-expression>
              </assignment>
              <assignment>
                <document>
                  <input>
                    <from>connection parameters</from>
                  </input>
                </document>
                <result>
                  <output>
                    <to>username</to>
                  </output>
                </result>
                <xpath-expression>
                  <xpath-replacement-tokens />
                  <xpath><![CDATA[(//alternate-username)[1]/text()]]></xpath>
                </xpath-expression>
              </assignment>
              <assignment>
                <document>
                  <input>
                    <from>connection parameters</from>
                  </input>
                </document>
                <result>
                  <output>
                    <to>password</to>
                  </output>
                </result>
                <xpath-expression>
                  <xpath-replacement-tokens />
                  <xpath><![CDATA[(//alternate-password)[1]/text()]]></xpath>
                </xpath-expression>
              </assignment>
              <meta>
                <documentation />
                <checkpoint>false</checkpoint>
              </meta>
              <location>:switch[1]:sequence[2]:assign[1]</location>
            </assign>
            <assign>
              <assignment>
                <document>
                  <input>
                    <from>items</from>
                  </input>
                </document>
                <result>
                  <output>
                    <to>adapter request</to>
                  </output>
                </result>
                <xslt-stylesheet>
                  <stylesheet-replacement-tokens>
                    <replacement-token name="items">
                      <input global="false">
                        <from>items</from>
                      </input>
                    </replacement-token>
                    <replacement-token name="request element">
                      <input global="false">
                        <from>request element</from>
                      </input>
                    </replacement-token>
                    <replacement-token name="username">
                      <input global="false">
                        <from>username</from>
                      </input>
                    </replacement-token>
                    <replacement-token name="password">
                      <input global="false">
                        <from>password</from>
                      </input>
                    </replacement-token>
                  </stylesheet-replacement-tokens>
                  <stylesheet><![CDATA[<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="1.0">
  <xsl:output indent="no" />
  <xsl:template match="/">
    <request-data>
      <hp-service-manager-request>
        <xsl:if test="string('${username}') != ''">
          <username>${username}</username>
        </xsl:if>
        <xsl:if test="string('${password}') != ''">
          <password>${password}</password>
        </xsl:if>
        <entity>
          <xsl:text disable-output-escaping="no">servicedesk</xsl:text>
        </entity>
        <entity-type>
          <xsl:copy-of select="(//entity-type)[1]/text()" />
        </entity-type>
        <request>
          <operation-name>
            <xsl:copy-of select="(//operation-name)[1]/text()" />
          </operation-name>
          <xsl:for-each select="/items/item">
            <parameters>
              <xsl:element name="${request element}">
                <xsl:copy-of select="./model" />
              </xsl:element>
            </parameters>
          </xsl:for-each>
        </request>
      </hp-service-manager-request>
    </request-data>
  </xsl:template>
</xsl:stylesheet>]]></stylesheet>
                </xslt-stylesheet>
              </assignment>
              <meta>
                <documentation />
                <checkpoint>false</checkpoint>
              </meta>
              <location>:switch[1]:sequence[2]:assign[2]</location>
            </assign>
            <call-adapter>
              <parameters>
                <input global="false">
                  <from>adapter name</from>
                </input>
                <input>
                  <value>
                    <adapter-request>
                      <peer-location>
                        <location>any</location>
                      </peer-location>
                      <request-action>invoke</request-action>
                    </adapter-request>
                  </value>
                </input>
                <input global="false">
                  <from>adapter request</from>
                </input>
                <input global="false">
                  <from>adapter request</from>
                </input>
                <output global="false">
                  <to>adapter response</to>
                </output>
              </parameters>
              <meta>
                <documentation />
                <checkpoint>false</checkpoint>
              </meta>
              <before-execution>
                <log>
                  <level>debug</level>
                  <parameters>
                    <input>
                      <value>Adapter Request:</value>
                    </input>
                    <input>
                      <from>adapter request</from>
                    </input>
                    <input>
                      <from>adapter name</from>
                    </input>
                  </parameters>
                </log>
              </before-execution>
              <after-execution>
                <log>
                  <level>debug</level>
                  <parameters>
                    <input>
                      <value>Adapter Response:</value>
                    </input>
                    <input>
                      <from>adapter response</from>
                    </input>
                  </parameters>
                </log>
              </after-execution>
              <location>:switch[1]:sequence[2]:call-adapter[1]</location>
            </call-adapter>
          </sequence>
        </case>
        <location>:switch[1]</location>
      </switch>
    </sequence>
    <meta>
      <expose-to>
        <consumer>RULE</consumer>
        <consumer>SCHEDULE</consumer>
      </expose-to>
      <documentation>
        <description>Find Interaction 

This wrapper finds (retrieve) an interaction record.
</description>
        <version>1.0</version>
      </documentation>
      <peer-location>
        <location>any</location>
      </peer-location>
      <record-metrics>false</record-metrics>
      <process-id>02414a33-c935-30e4-b24b-ac58e7669b6a</process-id>
      <author />
      <category />
      <status />
      <keywords />
      <systems />
      <last-modified-by />
      <last-modified>1290594410315</last-modified>
    </meta>
  </process-def>
</process>