<process draft="false" dev-studio-version="7.6.03">
  <process-def name=":BMC-SA-Service_Desk_Automation:Utilities:Get Response XML Using Template">
    <parameters>
      <input global="false" required="true">
        <description>Target name, like host name, ip address, host:port, application name, etc.</description>
        <from>target name</from>
        <to>target name</to>
      </input>
      <input global="false" required="true">
        <description>request type like 'reset password', 'unlock account', etc. Without the surrounding quotes.</description>
        <from>request type</from>
        <to>request type</to>
      </input>
      <input global="false" required="true">
        <description>success or failure</description>
        <from>status</from>
        <to>status</to>
      </input>
      <input global="false" required="true">
        <description>A numeric value in terms of seconds</description>
        <from>time taken seconds</from>
        <to>time taken seconds</to>
      </input>
      <input global="false" required="false">
        <description>Indicates data type of the response data.

Supported values: text/xml
Default value: xml</description>
        <from>data type</from>
        <to>data type</to>
      </input>
      <input global="false" required="false">
        <description>Optional: Custom error code, if any, when status is failure</description>
        <from>error code</from>
        <to>error code</to>
      </input>
      <input global="false" required="false">
        <description>Optional: Error summary text when status is failure.</description>
        <from>error summary</from>
        <to>error summary</to>
      </input>
      <input global="false" required="false">
        <description>Optional: Error detail text when status is failure.</description>
        <from>error details</from>
        <to>error details</to>
      </input>
      <input global="false" required="false">
        <description>Optional: A guide to the user on how to remediate to get a success response when the response status is failure.</description>
        <from>resolution steps</from>
        <to>resolution steps</to>
      </input>
      <input global="false" required="false">
        <description>Optional: Location of log file(s) related to this task.</description>
        <from>log info</from>
        <to>log info</to>
      </input>
      <input global="false" required="false">
        <description>Optional: Actual response from the target.</description>
        <from>target response</from>
        <to>target response</to>
      </input>
      <output global="false" required="false">
        <to>response xml</to>
        <from>response xml</from>
      </output>
    </parameters>
    <access />
    <sequence>
      <call-process>
        <process-name>:BMC-SA-Service_Desk_Automation:Utilities:Read Configuration</process-name>
        <parameters>
          <input>
            <value>RequestResponseTemplate</value>
            <to>configuration group</to>
          </input>
          <output>
            <from>configuration xml</from>
            <to>configuration xml</to>
          </output>
        </parameters>
        <meta>
          <documentation />
          <run-mode-handling>
            <run-mode>OCP</run-mode>
            <allow-step-into>false</allow-step-into>
          </run-mode-handling>
          <checkpoint>false</checkpoint>
        </meta>
        <location>:call-process[1]</location>
      </call-process>
      <assign>
        <assignment>
          <document>
            <input>
              <from>configuration xml</from>
            </input>
          </document>
          <result>
            <output>
              <to>response xml</to>
            </output>
          </result>
          <xslt-stylesheet>
            <stylesheet-replacement-tokens>
              <replacement-token name="target name">
                <input global="false">
                  <from>target name</from>
                </input>
              </replacement-token>
              <replacement-token name="request type">
                <input global="false">
                  <from>request type</from>
                </input>
              </replacement-token>
              <replacement-token name="time taken seconds">
                <input global="false">
                  <from>time taken seconds</from>
                </input>
              </replacement-token>
              <replacement-token name="status">
                <input global="false">
                  <from>status</from>
                </input>
              </replacement-token>
              <replacement-token name="error code">
                <input global="false">
                  <from>error code</from>
                </input>
              </replacement-token>
              <replacement-token name="error summary">
                <input global="false">
                  <from>error summary</from>
                </input>
              </replacement-token>
              <replacement-token name="error details">
                <input global="false">
                  <from>error details</from>
                </input>
              </replacement-token>
              <replacement-token name="log info">
                <input global="false">
                  <from>log info</from>
                </input>
              </replacement-token>
              <replacement-token name="resolution steps">
                <input global="false">
                  <from>resolution steps</from>
                </input>
              </replacement-token>
              <replacement-token name="target response">
                <input global="false">
                  <from>target response</from>
                </input>
              </replacement-token>
              <replacement-token name="data type">
                <input global="false">
                  <from>data type</from>
                </input>
              </replacement-token>
            </stylesheet-replacement-tokens>
            <stylesheet><![CDATA[<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns:xalan="http://xml.apache.org/xalan" version="1.0">
  <xsl:output indent="no" />
  <xsl:variable name="rootNodeName" select="name(/*/*[1])" />
  <xsl:variable name="headerChildName" select="name(/*/*/*[1])" />
  <xsl:variable name="requestChildName" select="name(/*/*/*[2])" />
  <xsl:variable name="bodyChildName" select="name(/*/*/*[3])" />
  <xsl:template name="SetText">
    <xsl:param name="elementName" />
    <xsl:param name="textValue" />
    <xsl:element name="{$elementName}">
      <xsl:choose>
        <xsl:when test="string-length(normalize-space($textValue)) &gt; 0">
          <xsl:value-of select="$textValue" disable-output-escaping="no" />
        </xsl:when>
        <xsl:otherwise>
          <xsl:text></xsl:text>
        </xsl:otherwise>
      </xsl:choose>
    </xsl:element>
  </xsl:template>
  <xsl:template name="SetResponse">
    <xsl:param name="elementName" />
    <xsl:element name="{$elementName}">
      <xsl:variable name="responseXML">${target response}</xsl:variable>
      <xsl:copy-of select="xalan:nodeset($responseXML)" />
    </xsl:element>
  </xsl:template>
  <xsl:template match="/">
    <xsl:element name="{$rootNodeName}">
      <xsl:element name="{$headerChildName}">
        <xsl:call-template name="SetText">
          <xsl:with-param name="elementName" select="'target-name'" />
          <xsl:with-param name="textValue" select="'${target name}'" />
        </xsl:call-template>
        <xsl:call-template name="SetText">
          <xsl:with-param name="elementName" select="'request-type'" />
          <xsl:with-param name="textValue" select="'${request type}'" />
        </xsl:call-template>
        <xsl:call-template name="SetText">
          <xsl:with-param name="elementName" select="'time-taken-seconds'" />
          <xsl:with-param name="textValue" select="'${time taken seconds}'" />
        </xsl:call-template>
        <xsl:call-template name="SetText">
          <xsl:with-param name="elementName" select="'status'" />
          <xsl:with-param name="textValue" select="'${status}'" />
        </xsl:call-template>
        <xsl:if test="string-length(normalize-space('${error code}')) &gt; 0">
          <xsl:call-template name="SetText">
            <xsl:with-param name="elementName" select="'error-code'" />
            <xsl:with-param name="textValue" select="'${error code}'" />
          </xsl:call-template>
        </xsl:if>
        <xsl:if test="string-length(normalize-space('${error summary}')) &gt; 0">
          <xsl:call-template name="SetText">
            <xsl:with-param name="elementName" select="'error-summary'" />
            <xsl:with-param name="textValue" select="'${error summary}'" />
          </xsl:call-template>
        </xsl:if>
        <xsl:if test="string-length(normalize-space('${error details}')) &gt; 0">
          <xsl:call-template name="SetText">
            <xsl:with-param name="elementName" select="'error-details'" />
            <xsl:with-param name="textValue" select="'${error details}'" />
          </xsl:call-template>
        </xsl:if>
        <xsl:if test="string-length(normalize-space('${resolution steps}')) &gt; 0">
          <xsl:call-template name="SetText">
            <xsl:with-param name="elementName" select="'resolution-steps'" />
            <xsl:with-param name="textValue" select="'${resolution steps}'" />
          </xsl:call-template>
        </xsl:if>
        <xsl:if test="string-length(normalize-space('${log info}')) &gt; 0">
          <xsl:call-template name="SetText">
            <xsl:with-param name="elementName" select="'log-info'" />
            <xsl:with-param name="textValue" select="'${log info}'" />
          </xsl:call-template>
        </xsl:if>
        <xsl:if test="string-length(normalize-space('${data type}')) &gt; 0">
          <xsl:call-template name="SetText">
            <xsl:with-param name="elementName" select="'data-type'" />
            <xsl:with-param name="textValue" select="'${data type}'" />
          </xsl:call-template>
        </xsl:if>
      </xsl:element>
      <xsl:element name="{$bodyChildName}">
        <response>
          <xsl:call-template name="SetResponse">
            <xsl:with-param name="elementName" select="&quot;target-response&quot;" />
          </xsl:call-template>
        </response>
      </xsl:element>
    </xsl:element>
  </xsl:template>
</xsl:stylesheet>]]></stylesheet>
          </xslt-stylesheet>
        </assignment>
        <meta>
          <documentation />
          <checkpoint>false</checkpoint>
        </meta>
        <location>:assign[1]</location>
      </assign>
    </sequence>
    <meta>
      <expose-to>
        <consumer>RULE</consumer>
        <consumer>SCHEDULE</consumer>
        <consumer>SOAP</consumer>
      </expose-to>
      <documentation>
        <description>Given a set of input parameters, return a response XML using the response template.</description>
        <version></version>
      </documentation>
      <peer-location>
        <location>any</location>
      </peer-location>
      <record-metrics>false</record-metrics>
      <process-id>daa7160c-ac47-4d8c-a11c-9361055e9fa2</process-id>
      <author>Ranganath Samudrala</author>
      <category></category>
      <status></status>
      <keywords></keywords>
      <systems></systems>
      <last-modified-by>admin</last-modified-by>
      <last-modified>1443513608015</last-modified>
    </meta>
  </process-def>
</process>