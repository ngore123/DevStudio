<process draft="false" dev-studio-version="20.02.00">
  <process-def name=":AO-AD-ServiceNow:v1.0:Incident_Management:Update Incident">
    <parameters>
      <input global="false" required="false">
        <description>The name of the adapter to use to handle the request. 
Default adapter name: ServiceNowActor.</description>
        <from>adapter name</from>
        <to>adapter name</to>
      </input>
      <input global="false" required="true">
        <description>Updates an incident using Import Set in ServiceNow.

A Sample items Xml can be: 

&lt;items&gt;
	&lt;proxy-settings&gt;
         &lt;host&gt;10.128.1.2&lt;/host&gt;
         &lt;port&gt;808&lt;/port&gt;
         &lt;user-name&gt;test&lt;/user-name&gt;
         &lt;password&gt;test&lt;/password&gt;
     &lt;/proxy-settings&gt;
	&lt;item&gt;
		&lt;connection-parameters&gt;
			&lt;user-name&gt;admin&lt;/user-name&gt;
			&lt;password&gt;admin&lt;/password&gt;
		&lt;/connection-parameters&gt;
		&lt;query&gt;
			&lt;number&gt;aaMax&lt;/number&gt;
			&lt;caller-id&gt;System Administrator&lt;/caller-id&gt;
			&lt;location&gt;Americas&lt;/location&gt;
			&lt;cmdb-ci&gt;*JEMPLOYEE-IBM&lt;/cmdb-ci&gt;
			&lt;impact&gt;Low&lt;/impact&gt;
			&lt;urgency&gt;Low&lt;/urgency&gt;
			&lt;priority&gt;Planning&lt;/priority&gt;
			&lt;knowledge&gt;1&lt;/knowledge&gt;
			&lt;short-description&gt;short desc&lt;/short-description&gt;
			&lt;opened-at&gt;2010-04-03 13:02:39&lt;/opened-at&gt;
			&lt;opened-by&gt;System Administrator&lt;/opened-by&gt;
			&lt;category&gt;inquiry&lt;/category&gt;
			&lt;escalation&gt;Normal&lt;/escalation&gt;
			&lt;assignment-group&gt;Service Desk&lt;/assignment-group&gt;
			&lt;assigned-to&gt;Beth Anglin&lt;/assigned-to&gt;
			&lt;comments&gt;mycomments&lt;/comments&gt;
			&lt;work-notes&gt;myworknotes&lt;/work-notes&gt;
		&lt;/query&gt;
		&lt;update&gt;
			&lt;caller-id&gt;System Administrator&lt;/caller-id&gt;
			&lt;location&gt;Americas&lt;/location&gt;
			&lt;cmdb-ci&gt;*JEMPLOYEE-IBM&lt;/cmdb-ci&gt;
			&lt;impact&gt;Low&lt;/impact&gt;
			&lt;urgency&gt;Low&lt;/urgency&gt;
			&lt;priority&gt;Planning&lt;/priority&gt;
			&lt;incident-state&gt;7&lt;/incident-state&gt;
			&lt;knowledge&gt;1&lt;/knowledge&gt;
			&lt;short-description&gt;short desc&lt;/short-description&gt;
			&lt;opened-at&gt;2010-04-03 13:02:39&lt;/opened-at&gt;
			&lt;opened-by&gt;System Administrator&lt;/opened-by&gt;
		&lt;/update&gt;
	&lt;/item&gt;
&lt;/items&gt;

Elements' Description: 

proxy-settings[Optional] - Parent tag that contains proxy server information. This is a child of "items" tag.

Following tags are valid only if "proxy-settings" is provided.

host[Conditional] - IP or hostname of proxy server. This is required if "proxy-settings" is provided.

port[Conditional] - Port on which the proxy server is listening for requests. This is required if "proxy-settings" is provided.

user-name[Optional] - Username required to authenticate against the proxy server.

password[Optional] - Password required to authenticate against the proxy server.
	Password can be encrypted by specifying the encryption type attribute.
	For example: &lt;password encryption-type = "Base64"&gt;cGFzc3dvcmQ=&lt;/password&gt;

item [Required]: This is a child of &lt;items&gt;. This &lt;item&gt; tag can be multiple times to support "multiple items support".


connection-parameters [Optional]: It is parent tag of 'username' and 'password'. It is required when the user wants to override the default values for username and password provided in the adapter configuration. 

user-name [Optional]: 
     Valid value:  Username to be used to execute the request.

	Note: Required if &lt;connection-parameters&gt; tag is specified in request.


password [Optional]: 
     Valid value: Password to be used to execute the request.
	Password can be encrypted by specifying the encryption type attribute.
	For example: &lt;password encryption-type = "Base64"&gt;cGFzc3dvcmQ=&lt;/password&gt;
		
	Note: Required if &lt;connection-parameters&gt; tag is specified in request.


query [Optional]: The elements under &lt;query&gt; tag are used to locate the 'incident' to be updated. If multiple matching 'incidents' are found, then all these are updated. 


To update all the "incident" records provide a tag named "all" inside "query" tag.

Sample XML to update all "incident" records:

&lt;items&gt;
	&lt;item&gt;
		&lt;query&gt;
			&lt;all/&gt;
		&lt;/query&gt;
		&lt;update&gt;
			&lt;u_incident_comment&gt;inserted by import set&lt;/u_incident_comment&gt;
			&lt;u_incident_uid&gt;INC_ISR001&lt;/u_incident_uid&gt;
		&lt;/update&gt;
	&lt;/item&gt;
&lt;/items&gt;


Description of elements under &lt;query&gt; element:

number [Optional]: 
	Name of this element in the application: Number
	Valid value: any valid 'Number' of the incident.
	
caller-id [Optional]:
	Name of this element in the application: Caller
	Valid value:  Any valid value supported by the application.

location [Optional]:
	Name of this element in the application: Location
	Valid value:  Any valid value supported by the application.
	
cmdb-ci [Optional]:
	Name of this element in the application: Configuration item
	Valid value:  Any valid value supported by the application.
	
impact [Optional]:
	Name of this element in the application: Impact
	Valid value: Any valid value supported by the application. Service-now application allows you to personalize this list. But when using an item from your personalized list, you must use its value and not the label or name of the item.

urgency [Optional]:
	Name of this element in the application: Urgency
	Valid value: Any valid value supported by the application. Service-now application allows you to personalize this list. But when using an item from your personalized list, you must use its value and not the label or name of the item.

priority [Optional]:
	Name of this element in the application: Priority
	Valid value: Any valid value supported by the application. Service-now application allows you to personalize this list. But when using an item from your personalized list, you must use its value and not the label or name of the item.

knowledge [Optional]:
	Name of this element in the application: Knowledge (check box)
	Valid value: 0, 1

short-description [Optional]:
	Name of this element in the application: Short description
	Valid value: any string.
	
opened-at [Optional]:
	Name of this element in the application: Opened
	Valid value: value in date-time format "YYYY-MM-DD hh:mm:ss".

opened-by [Optional]:
	Name of this element in the application: Opened by
	Valid value:  Any valid value supported by the application.
	
incident-state [Optional]:
	Name of this element in the application: Incident state
	Valid value: Any valid value supported by the application. Service-now application allows you to personalize this list. But when using an item from your personalized list, you must use its value and not the label or name of the item.

category [Optional]:
	Name of this element in the application: Category
	Valid value: Any valid value supported by the application. Service-now application allows you to personalize this list. But when using an item from your personalized list, you must use its value and not the label or name of the item.

escalation [Optional]:
	Name of this element in the application: Escalation
	Valid value: Any valid value supported by the application. Service-now application allows you to personalize this list. But when using an item from your personalized list, you must use its value and not the label or name of the item.

assignment-group [Optional]:
	Name of this element in the application: Assignment group
	Valid value:  Any valid value supported by the application.

assigned-to [Optional]:
	Name of this element in the application: Assigned to
	Valid value:  Any valid value supported by the application.
	
comments [Optional]:
	Name of this element in the application: Additional comments
	Valid value: any string.

work-notes [Optional]:
	Name of this element in the application: Work notes
	Valid value: any string.

update [Optional]: The elements under &lt;update&gt; tag contain values for fields being updated in the target import set. If this element is not specified then no field of 'incident' gets updated.

There are no defined set of child parameters for this tag. The set of parameters will be defined by the import set that the user has defined in the ServiceNow application for incident.  "Find Import Set Fields" under "Utilities" section can be used to find the valid list of parameters for a particular import set.</description>
        <from>items</from>
        <to>items</to>
      </input>
      <output global="false" required="false">
        <description>Returned adapter response is captured in this context parameter.</description>
        <to>adapter response</to>
        <from>adapter response</from>
      </output>
    </parameters>
    <access />
    <sequence>
      <assign>
        <assignment>
          <output>
            <to>valid operation name</to>
            <value>update-incident</value>
          </output>
        </assignment>
        <meta>
          <documentation />
          <checkpoint>false</checkpoint>
        </meta>
        <location>:assign[1]</location>
      </assign>
      <assign>
        <assignment>
          <document>
            <input>
              <from>items</from>
            </input>
          </document>
          <result>
            <output>
              <to>items</to>
            </output>
          </result>
          <xslt-stylesheet>
            <stylesheet-replacement-tokens />
            <stylesheet><![CDATA[<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="1.0">
  <xsl:output indent="no" />
  <xsl:template match="/">
    <items>
      <operation-name>
        <xsl:text disable-output-escaping="no">update-incident</xsl:text>
      </operation-name>
      <xsl:copy-of select="./items/*" />
    </items>
  </xsl:template>
</xsl:stylesheet>]]></stylesheet>
          </xslt-stylesheet>
        </assignment>
        <meta>
          <documentation />
          <checkpoint>false</checkpoint>
        </meta>
        <location>:assign[2]</location>
      </assign>
      <call-process>
        <process-name>:AO-AD-ServiceNow:Utilities:Execute Request</process-name>
        <parameters>
          <input>
            <from>adapter name</from>
            <to>adapter name</to>
          </input>
          <input>
            <from>items</from>
            <to>items</to>
          </input>
          <input>
            <from>valid operation name</from>
            <to>valid operation name</to>
          </input>
          <output>
            <from>adapter response</from>
            <to>adapter response</to>
          </output>
        </parameters>
        <meta>
          <documentation />
          <run-mode-handling>
            <run-mode>OCP</run-mode>
            <allow-step-into>false</allow-step-into>
          </run-mode-handling>
          <checkpoint>false</checkpoint>
        </meta>
        <after-execution>
          <console-output>
            <type>INFO</type>
          </console-output>
        </after-execution>
        <location>:call-process[1]</location>
      </call-process>
    </sequence>
    <meta>
      <expose-to>
        <consumer>RULE</consumer>
        <consumer>SCHEDULE</consumer>
      </expose-to>
      <documentation>
        <description>Update Incident

This wrapper updates an incident.</description>
        <version></version>
      </documentation>
      <logging-options>
        <is-enabled>false</is-enabled>
        <log-file-name></log-file-name>
      </logging-options>
      <peer-location>
        <location>any</location>
      </peer-location>
      <record-metrics>false</record-metrics>
      <process-id>10ee4efc-3fcb-32d0-9b2b-9d5885d31191</process-id>
      <author>admin</author>
      <category></category>
      <status></status>
      <keywords></keywords>
      <systems></systems>
      <last-modified-by>aoadmin</last-modified-by>
      <last-modified>1588227288261</last-modified>
    </meta>
  </process-def>
</process>