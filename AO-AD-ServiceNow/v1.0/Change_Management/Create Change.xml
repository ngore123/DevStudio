<process draft="false" dev-studio-version="20.02.00">
  <process-def name=":AO-AD-ServiceNow:v1.0:Change_Management:Create Change">
    <parameters>
      <input global="false" required="false">
        <description>The name of the adapter to use to handle the request. 
Default adapter name: ServiceNowActor.</description>
        <from>adapter name</from>
        <to>adapter name</to>
      </input>
      <input global="false" required="true">
        <description>Sample items Xml: 

&lt;items&gt;
	&lt;proxy-settings&gt;
		&lt;host&gt;10.128.1.2&lt;/host&gt;
		&lt;port&gt;808&lt;/port&gt;
		&lt;user-name&gt;test&lt;/user-name&gt;
		&lt;password&gt;test&lt;/password&gt;
	&lt;/proxy-settings&gt;
	&lt;item&gt;
		&lt;connection-parameters&gt;
			&lt;user-name&gt;admin&lt;/user-name&gt;
			&lt;password&gt;admin&lt;/password&gt;
		&lt;/connection-parameters&gt;
		&lt;assigned-to&gt;Beth Anglin&lt;/assigned-to&gt;
		&lt;cmdb-ci&gt;*JEMPLOYEE-IBM&lt;/cmdb-ci&gt;
		&lt;requested-by&gt;ITIL User&lt;/requested-by&gt;
		&lt;priority&gt;Low&lt;/priority&gt;
		&lt;short-description&gt;short desc&lt;/short-description&gt;
		&lt;approval&gt;Not Yet Requested&lt;/approval&gt;
		&lt;category&gt;Other&lt;/category&gt;
		&lt;type&gt;normal&lt;/type&gt;
		&lt;state&gt;-5&lt;/state&gt;
		&lt;risk&gt;Moderate&lt;/risk&gt;
		&lt;description&gt;desc&lt;/description&gt;
		&lt;work-notes&gt;my notes&lt;/work-notes&gt;
		&lt;requested-by-date&gt;2010-03-29 13:30:45&lt;/requested-by-date&gt;
		&lt;start-date&gt;2010-03-29 13:30:48&lt;/start-date&gt;
		&lt;end-date&gt;2010-03-29 13:30:50&lt;/end-date&gt;
		&lt;work-start&gt;2010-03-29 13:30:53&lt;/work-start&gt;
		&lt;work-end&gt;2010-03-29 13:30:56&lt;/work-end&gt;
		&lt;change-plan&gt;change plan&lt;/change-plan&gt;
		&lt;backout-plan&gt;backout plan&lt;/backout-plan&gt;
		&lt;test-plan&gt;test plan&lt;/test-plan&gt;
		&lt;template-name&gt;change_template&lt;/template-name&gt;
	&lt;/item&gt;
&lt;/items&gt;


Elements' Description: 

proxy-settings[Optional] - Parent tag that contains proxy server information. This is a child of "items" tag.

Following tags are valid only if "proxy-settings" is provided.

host[Conditional] - IP or hostname of proxy server. This is required if "proxy-settings" is provided.

port[Conditional] - Port on which the proxy server is listening for requests. This is required if "proxy-settings" is provided.

user-name[Optional] - Username required to authenticate against the proxy server.

password[Optional] - Password required to authenticate against the proxy server.
	Password can be encrypted by specifying the encryption type attribute.
	For example: &lt;password encryption-type = "Base64"&gt;cGFzc3dvcmQ=&lt;/password&gt;

item [Required]: This is a child of &lt;items&gt;. This &lt;item&gt; tag can be multiple times to support "multiple items support".

connection-parameters [Optional]: It is parent tag of 'username' and 'password'. It is required when the user wants to override the default values for username and password provided in the adapter configuration. 

user-name [Optional]: 
     Valid value:  Username to be used to execute the request.

	Note: Required if &lt;connection-parameters&gt; tag is specified in request.

password [Optional]: 
     Valid value: Password to be used to execute the request.
	Password can be encrypted by specifying the encryption type attribute.
	For example: &lt;password encryption-type = "Base64"&gt;cGFzc3dvcmQ=&lt;/password&gt;

	Note: Required if &lt;connection-parameters&gt; tag is specified in request.
		

assigned-to [Optional]: 
	Name of this element in the application: Assigned to
	Valid value:  Any valid value supported by the application.
	Default value: None.

cmdb-ci [Optional]: 
	Name of this element in the application: Configuration Item
	Valid value:  Any valid value supported by the application.
	Default value: None.
	
requested-by[Optional]:
	Name of this element in the application: Requested by
	Valid value:  Any valid value supported by the application.
	Default value: user who creates the change.

priority [Optional]:	
	Name of this element in the application: Priority
	Valid value: Any valid value supported by the application. Service-now application allows you to personalize this list. But when using an item from your personalized list, you must use its value and not the label or name of the item.
	Default value: Low
	
short-description [Optional]:
	Name of this element in the application: Short description
	Valid value: any string.
	Default value: None.

approval [Optional]:
	Name of this element in the application: Approval
	Valid value: Any valid value supported by the application. Service-now application allows you to personalize this list. But when using an item from your personalized list, you must use its value and not the label or name of the item.
	Default: Not Yet Requested

category [Optional]: 
	Name of this element in the application: Category
	Valid value: Any valid value supported by the application. Service-now application allows you to personalize this list. But when using an item from your personalized list, you must use its value and not the label or name of the item.
	Default value: Other
	
type [Optional]:
	Name of this element in the application: Type
	Valid value: Any valid value supported by the application. Service-now application allows you to personalize this list. But when using an item from your personalized list, you must use its value and not the label or name of the item.
	Default value: Normal
	
state [Optional]:
	Name of this element in the application: State
	Valid value: Any valid value supported by the application. Service-now application allows you to personalize this list. But when using an item from your personalized list, you must use its value and not the label or name of the item.
	Default value: New

risk [Optional]:
	Name of this element in the application: Risk
	Valid value: Any valid value supported by the application. Service-now application allows you to personalize this list. But when using an item from your personalized list, you must use its value and not the label or name of the item.
	Default value: Moderate

description [Optional]:
	Name of this element in the application: Description
	Valid value: any string.
	Default value: None.

work-notes [Optional]:
	Name of this element in the application: Work Notes
	Valid value: any string.
	Default value: None.
	
requested-by-date [Optional]:
	Name of this element in the application: Requested by date
	Valid value: value in date-time format "YYYY-MM-DD hh:mm:ss". If an invalid value is specified then change record is created without populating this field.
	Default value: None.

start-date [Optional]:
	Name of this element in the application: Planned start date
	Valid value: value in date-time format "YYYY-MM-DD hh:mm:ss". If an invalid value is specified then change record is created without populating this field.
	Default value: None.

end-date [Optional]:
	Name of this element in the application: Planned end date
	Valid value: value in date-time format "YYYY-MM-DD hh:mm:ss". If an invalid value is specified then change record is created without populating this field.
	Default value: None.

work-start [Optional]:
	Name of this element in the application: Work start
	Valid value: value in date-time format "YYYY-MM-DD hh:mm:ss". If an invalid value is specified then change record is created without populating this field.
	Default value: None.

work-end [Optional]:
	Name of this element in the application: Work end
	Valid value: value in date-time format "YYYY-MM-DD hh:mm:ss". If an invalid value is specified then change record is created without populating this field.
	Default value: None.

change-plan [Optional]:
	Name of this element in the application: Change plan
	Valid value: any string.
	Default value: None.

backout-plan [Optional]:
	Name of this element in the application: Backout plan
	Valid value: any string.
	Default value: None.
	
test-plan [Optional]: 
	Name of this element in the application: Test plan
	Valid value: any string.
	Default value: None.

template-name [Optional]: 
	Name of change template used to create change ticket
	Valid value: any string.
	Default value: None.</description>
        <from>items</from>
        <to>items</to>
      </input>
      <output global="false" required="false">
        <description>Returned adapter response is captured in this context parameter.</description>
        <to>adapter response</to>
        <from>adapter response</from>
      </output>
    </parameters>
    <access />
    <sequence>
      <assign>
        <assignment>
          <document>
            <input>
              <from>items</from>
            </input>
          </document>
          <result>
            <output>
              <to>change template</to>
            </output>
          </result>
          <xpath-expression>
            <xpath-replacement-tokens />
            <xpath><![CDATA[string(//template-name)]]></xpath>
          </xpath-expression>
        </assignment>
        <meta>
          <documentation />
          <checkpoint>false</checkpoint>
        </meta>
        <location>:assign[1]</location>
      </assign>
      <switch>
        <meta>
          <documentation />
          <run-mode-handling>
            <run-mode>OCP</run-mode>
            <allow-step-into>true</allow-step-into>
          </run-mode-handling>
          <checkpoint>false</checkpoint>
        </meta>
        <execute-all-applicable-cases>false</execute-all-applicable-cases>
        <default>
          <sequence />
        </default>
        <case>
          <condition>
            <document>
              <input>
                <from>change template</from>
              </input>
            </document>
            <xpath-expression>
              <xpath-replacement-tokens />
              <xpath><![CDATA[string-length(normalize-space(.))>0]]></xpath>
            </xpath-expression>
          </condition>
          <sequence>
            <assign>
              <assignment>
                <input>
                  <compose-xml>
                    <fragment type="string" encode="false">
                      <input>
                        <value>&lt;items&gt;
  &lt;item&gt;
    &lt;importset-table&gt;sys_template&lt;/importset-table&gt;
    &lt;name&gt;</value>
                      </input>
                    </fragment>
                    <fragment type="string" encode="true">
                      <input required="false">
                        <from>change template</from>
                      </input>
                    </fragment>
                    <fragment type="string" encode="false">
                      <input>
                        <value>&lt;/name&gt;
  &lt;/item&gt;
&lt;/items&gt;</value>
                      </input>
                    </fragment>
                  </compose-xml>
                </input>
                <output>
                  <to>find template details items</to>
                </output>
              </assignment>
              <meta>
                <documentation />
                <checkpoint>false</checkpoint>
              </meta>
              <location>:switch[1]:sequence[2]:assign[1]</location>
            </assign>
            <call-process>
              <process-name>:AO-AD-ServiceNow:v1.0:Import_Set:Find Import Set Record</process-name>
              <parameters>
                <input>
                  <from>adapter name</from>
                  <to>adapter name</to>
                </input>
                <input>
                  <from>find template details items</from>
                  <to>items</to>
                </input>
                <output>
                  <from>adapter response</from>
                  <to>find template details response</to>
                </output>
              </parameters>
              <meta>
                <documentation />
                <run-mode-handling>
                  <run-mode>OCP</run-mode>
                  <allow-step-into>false</allow-step-into>
                </run-mode-handling>
                <checkpoint>false</checkpoint>
              </meta>
              <location>:switch[1]:sequence[2]:call-process[1]</location>
            </call-process>
            <assign>
              <assignment>
                <document>
                  <input>
                    <from>find template details response</from>
                  </input>
                </document>
                <result>
                  <output>
                    <to>template string</to>
                  </output>
                </result>
                <xpath-expression>
                  <xpath-replacement-tokens />
                  <xpath><![CDATA[string(//template)]]></xpath>
                </xpath-expression>
              </assignment>
              <meta>
                <documentation />
                <checkpoint>false</checkpoint>
              </meta>
              <after-execution>
                <log>
                  <level>debug</level>
                  <parameters>
                    <input>
                      <from>template string</from>
                    </input>
                  </parameters>
                </log>
              </after-execution>
              <location>:switch[1]:sequence[2]:assign[2]</location>
            </assign>
            <call-process>
              <process-name>:AO-AD-ServiceNow:Utilities:Tokenize String</process-name>
              <parameters>
                <input>
                  <from>template string</from>
                  <to>string</to>
                </input>
                <input>
                  <value>^</value>
                  <to>delimiter</to>
                </input>
                <output>
                  <from>tokens</from>
                  <to>template tokens</to>
                </output>
              </parameters>
              <meta>
                <documentation />
                <run-mode-handling>
                  <run-mode>OCP</run-mode>
                  <allow-step-into>false</allow-step-into>
                </run-mode-handling>
                <checkpoint>false</checkpoint>
              </meta>
              <location>:switch[1]:sequence[2]:call-process[2]</location>
            </call-process>
            <for-each>
              <document>
                <input>
                  <from>template tokens</from>
                </input>
              </document>
              <result>
                <output>
                  <to>template token</to>
                </output>
              </result>
              <xpath-expression>
                <xpath-replacement-tokens />
                <xpath><![CDATA[//token]]></xpath>
              </xpath-expression>
              <meta>
                <documentation />
                <run-mode-handling>
                  <run-mode>OCP</run-mode>
                  <allow-step-into>true</allow-step-into>
                </run-mode-handling>
                <checkpoint>false</checkpoint>
              </meta>
              <sequence>
                <switch>
                  <meta>
                    <documentation />
                    <run-mode-handling>
                      <run-mode>OCP</run-mode>
                      <allow-step-into>true</allow-step-into>
                    </run-mode-handling>
                    <checkpoint>false</checkpoint>
                  </meta>
                  <execute-all-applicable-cases>false</execute-all-applicable-cases>
                  <default>
                    <sequence />
                  </default>
                  <case>
                    <condition>
                      <document>
                        <input>
                          <from>template token</from>
                        </input>
                      </document>
                      <xpath-expression>
                        <xpath-replacement-tokens />
                        <xpath><![CDATA[contains(., "=")]]></xpath>
                      </xpath-expression>
                    </condition>
                    <sequence>
                      <assign>
                        <assignment>
                          <document>
                            <input>
                              <from>template token</from>
                            </input>
                          </document>
                          <result>
                            <output>
                              <to>key</to>
                            </output>
                          </result>
                          <xpath-expression>
                            <xpath-replacement-tokens />
                            <xpath><![CDATA[substring-before(., "=")]]></xpath>
                          </xpath-expression>
                        </assignment>
                        <assignment>
                          <document>
                            <input>
                              <from>template token</from>
                            </input>
                          </document>
                          <result>
                            <output>
                              <to>value</to>
                            </output>
                          </result>
                          <xpath-expression>
                            <xpath-replacement-tokens />
                            <xpath><![CDATA[substring-after(., "=")]]></xpath>
                          </xpath-expression>
                        </assignment>
                        <meta>
                          <documentation />
                          <checkpoint>false</checkpoint>
                        </meta>
                        <location>:switch[1]:sequence[2]:switch[1]:sequence[2]:assign[1]</location>
                      </assign>
                      <utility>
                        <string>
                          <regex>
                            <input>
                              <from>key</from>
                            </input>
                            <expression>
                              <search case-sensitive="false">_</search>
                              <replace replace-all="true">-</replace>
                            </expression>
                          </regex>
                        </string>
                        <output global="false">
                          <to>key</to>
                        </output>
                        <meta>
                          <documentation />
                          <checkpoint>false</checkpoint>
                        </meta>
                        <location>:switch[1]:sequence[2]:switch[1]:sequence[2]:utility[1]</location>
                      </utility>
                      <assign>
                        <assignment>
                          <document>
                            <input>
                              <from>items</from>
                            </input>
                          </document>
                          <result>
                            <output>
                              <to>items</to>
                            </output>
                          </result>
                          <xslt-stylesheet>
                            <stylesheet-replacement-tokens>
                              <replacement-token name="key">
                                <input global="false">
                                  <from>key</from>
                                </input>
                              </replacement-token>
                              <replacement-token name="value">
                                <input global="false">
                                  <from>value</from>
                                </input>
                              </replacement-token>
                            </stylesheet-replacement-tokens>
                            <stylesheet><![CDATA[<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="1.0">
  <xsl:output indent="no" />
  <xsl:template match="/">
    <items>
      <xsl:copy-of select="//proxy-settings" />
      <xsl:for-each select="//item">
        <item>
          <xsl:copy-of select="*" />
          <xsl:if test="string(./${key})=''">
            <xsl:element name="${key}">${value}</xsl:element>
          </xsl:if>
        </item>
      </xsl:for-each>
    </items>
  </xsl:template>
</xsl:stylesheet>]]></stylesheet>
                          </xslt-stylesheet>
                        </assignment>
                        <meta>
                          <documentation />
                          <checkpoint>false</checkpoint>
                        </meta>
                        <location>:switch[1]:sequence[2]:switch[1]:sequence[2]:assign[2]</location>
                      </assign>
                    </sequence>
                  </case>
                  <location>:switch[1]:sequence[2]:switch[1]</location>
                </switch>
              </sequence>
              <location>:switch[1]:sequence[2]:for-each[1]</location>
            </for-each>
          </sequence>
        </case>
        <location>:switch[1]</location>
      </switch>
      <assign>
        <assignment>
          <output>
            <to>valid operation name</to>
            <value>create-change</value>
          </output>
        </assignment>
        <meta>
          <documentation />
          <checkpoint>false</checkpoint>
        </meta>
        <location>:assign[2]</location>
      </assign>
      <assign>
        <assignment>
          <document>
            <input>
              <from>items</from>
            </input>
          </document>
          <result>
            <output>
              <to>items</to>
            </output>
          </result>
          <xslt-stylesheet>
            <stylesheet-replacement-tokens />
            <stylesheet><![CDATA[<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="1.0">
  <xsl:output indent="no" />
  <xsl:template match="/">
    <items>
      <operation-name>
        <xsl:text disable-output-escaping="no">create-change</xsl:text>
      </operation-name>
      <xsl:copy-of select="./items/*" />
    </items>
  </xsl:template>
</xsl:stylesheet>]]></stylesheet>
          </xslt-stylesheet>
        </assignment>
        <meta>
          <documentation />
          <checkpoint>false</checkpoint>
        </meta>
        <location>:assign[3]</location>
      </assign>
      <call-process>
        <process-name>:AO-AD-ServiceNow:Utilities:Execute Request</process-name>
        <parameters>
          <input>
            <from>adapter name</from>
            <to>adapter name</to>
          </input>
          <input>
            <from>items</from>
            <to>items</to>
          </input>
          <input>
            <from>valid operation name</from>
            <to>valid operation name</to>
          </input>
          <output>
            <from>adapter response</from>
            <to>adapter response</to>
          </output>
        </parameters>
        <meta>
          <documentation />
          <run-mode-handling>
            <run-mode>OCP</run-mode>
            <allow-step-into>false</allow-step-into>
          </run-mode-handling>
          <checkpoint>false</checkpoint>
        </meta>
        <after-execution>
          <console-output>
            <type>INFO</type>
          </console-output>
        </after-execution>
        <location>:call-process[1]</location>
      </call-process>
    </sequence>
    <meta>
      <expose-to>
        <consumer>RULE</consumer>
        <consumer>SCHEDULE</consumer>
      </expose-to>
      <documentation>
        <description>Create Change

This wrapper creates a change.</description>
        <version></version>
      </documentation>
      <logging-options>
        <is-enabled>false</is-enabled>
        <log-file-name></log-file-name>
      </logging-options>
      <peer-location>
        <location>any</location>
      </peer-location>
      <record-metrics>false</record-metrics>
      <process-id>278e72e8-369c-4ff8-a322-132f23092773</process-id>
      <author>admin</author>
      <category></category>
      <status></status>
      <keywords></keywords>
      <systems></systems>
      <last-modified-by>aoadmin</last-modified-by>
      <last-modified>1588136465761</last-modified>
    </meta>
  </process-def>
</process>