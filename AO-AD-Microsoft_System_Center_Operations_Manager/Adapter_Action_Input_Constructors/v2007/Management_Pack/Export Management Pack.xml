<process draft="false" dev-studio-version="7.6.01.02">
  <process-def name=":AO-AD-Microsoft_System_Center_Operations_Manager:Adapter_Action_Input_Constructors:v2007:Management_Pack:Export Management Pack">
    <parameters>
      <input global="false" required="false">
        <description>
timeout-secs[Optional]
	Time in seconds after which the request will time-out of not completed. Default is: 60 secs
</description>
        <from>timeout secs</from>
        <to>timeout secs</to>
      </input>
      <input global="false" required="false">
        <description>managementpack-prop-key[Optional]
	This tag contains the name of the property of management pack by which we want to filter the search.
	Valid values - Name,KeyToken,Version,Id,VersionId,References,Sealed,ContentReadable,FriendlyName,DisplayName,Description,
DefaultLanguageCode,LockObject

Note: both managementpack-id and managementpack-name take precedence over this field. So if user has provided either of managementpack-id and managementpack-name then this field gets ignored.</description>
        <from>managementpack prop key</from>
        <to>managementpack prop key</to>
      </input>
      <input global="false" required="false">
        <description>managementpack-prop-val[Optional]
	This tag contains the value of the property specified in managementpack-prop-key.
	
Note: both managementpack-id and managementpack-name take precedence over this field. So if user has provided either of managementpack-id and managementpack-name then this field gets ignored.	</description>
        <from>managementpack prop val</from>
        <to>managementpack prop val</to>
      </input>
      <input global="false" required="false">
        <description>
operand[Optional]
	This tag specifies the operation that will be applied between 'managementpack-prop-key' and 'managementpack-prop-val'.

Valid values - equals, not equals, matches
</description>
        <from>operand</from>
        <to>operand</to>
      </input>
      <input global="false" required="true">
        <description>
export-path[Required]
	The path where management packs will be exported.

NOTE: There are a few discrepencies in the naming between SCOM application and API.
		 1. In the SCOM application, the value provided in ID is actually mapped to 'Name' attribute of management pack in SCOM API.
		 2. In the SCOM application, the value provided in Name is actually mapped to 'DisplayName' attribute of management pack in SCOM API.</description>
        <from>export path</from>
        <to>export path</to>
      </input>
      <input global="false" required="false">
        <description>managementpack-id[optional]
	The id of the management pack that will be exported by the wrapper.

Note: This field takes precedence over following fields- managementpack-prop-key, managementpack-prop-val, and managementpack-name. So if use has provided managementpack-id then all other fields, i.e., managementpack-prop-key, managementpack-prop-val, and managementpack-name get ignored.</description>
        <from>managementpack id</from>
        <to>managementpack id</to>
      </input>
      <input global="false" required="false">
        <description>managementpack-name[Optional]
	The name of the management pack that will be exported by the wrapper.


Note: This field takes precedence over following fields- managementpack-prop-key, managementpack-prop-val. But note managementpack-id takes precedence over this key. So, if user has provided managementpack-name but not managementpack-id then, the fields managementpack-prop-key, managementpack-prop-val get ignored. However, if user has provided managementpack-id as well then managementpack-name get ignored and managementpack-id get considered.</description>
        <from>managementpack name</from>
        <to>managementpack name</to>
      </input>
      <output global="false" required="false">
        <to>items xml</to>
        <from>items xml</from>
      </output>
    </parameters>
    <access />
    <sequence>
      <switch>
        <meta>
          <documentation />
          <run-mode-handling>
            <run-mode>OCP</run-mode>
            <allow-step-into>true</allow-step-into>
          </run-mode-handling>
          <checkpoint>false</checkpoint>
        </meta>
        <execute-all-applicable-cases>false</execute-all-applicable-cases>
        <default>
          <sequence>
            <assign>
              <assignment>
                <output>
                  <to>items xml</to>
                  <value>
                    <root />
                  </value>
                </output>
                <xslt-stylesheet>
                  <stylesheet-replacement-tokens>
                    <replacement-token name="timeout secs">
                      <input global="false">
                        <from>timeout secs</from>
                      </input>
                    </replacement-token>
                    <replacement-token name="tok1">
                      <input global="false">
                        <from>managementpack prop key</from>
                      </input>
                    </replacement-token>
                    <replacement-token name="tok2">
                      <input global="false">
                        <from>managementpack prop val</from>
                      </input>
                    </replacement-token>
                    <replacement-token name="tok3">
                      <input global="false">
                        <from>operand</from>
                      </input>
                    </replacement-token>
                    <replacement-token name="tok4">
                      <input global="false">
                        <from>export path</from>
                      </input>
                    </replacement-token>
                  </stylesheet-replacement-tokens>
                  <stylesheet><![CDATA[<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="1.0">
  <xsl:output indent="no" />
  <xsl:template match="/">
    <items>
      <item>
        <operation-name>
          <xsl:text disable-output-escaping="no">export-managementpack</xsl:text>
        </operation-name>
        <timeout-secs>
          <xsl:value-of select="'${timeout secs}'" disable-output-escaping="no" />
        </timeout-secs>
        <command-parameters>
          <managementpack>
            <filters>
              <filter>
                <managementpack-prop-key>
                  <xsl:value-of select="'${tok1}'" disable-output-escaping="no" />
                </managementpack-prop-key>
                <managementpack-prop-val>
                  <xsl:value-of select="'${tok2}'" disable-output-escaping="no" />
                </managementpack-prop-val>
                <operand>
                  <xsl:value-of select="'${tok3}'" disable-output-escaping="no" />
                </operand>
              </filter>
            </filters>
          </managementpack>
          <export-path>
            <xsl:value-of select="'${tok4}'" disable-output-escaping="no" />
          </export-path>
        </command-parameters>
      </item>
    </items>
  </xsl:template>
</xsl:stylesheet>]]></stylesheet>
                </xslt-stylesheet>
              </assignment>
              <meta>
                <documentation />
                <checkpoint>false</checkpoint>
              </meta>
              <after-execution>
                <log>
                  <level>debug</level>
                  <parameters>
                    <input>
                      <value>Item Xml:</value>
                    </input>
                    <input>
                      <from>items xml</from>
                    </input>
                  </parameters>
                </log>
              </after-execution>
              <location>:switch[1]:sequence[1]:assign[1]</location>
            </assign>
          </sequence>
        </default>
        <case>
          <condition>
            <document>
              <input>
                <from>managementpack id</from>
              </input>
            </document>
            <xpath-expression>
              <xpath-replacement-tokens>
                <replacement-token name="managementpack id">
                  <input global="false">
                    <from>managementpack id</from>
                  </input>
                </replacement-token>
              </xpath-replacement-tokens>
              <xpath><![CDATA[string('${managementpack id}') != ""]]></xpath>
            </xpath-expression>
          </condition>
          <sequence>
            <console-output>
              <type>INFO</type>
              <summary>
                <concat>
                  <input>
                    <value></value>
                  </input>
                </concat>
              </summary>
              <detail>
                <concat>
                  <input>
                    <value></value>
                  </input>
                </concat>
              </detail>
            </console-output>
            <assign>
              <assignment>
                <output>
                  <to>items xml</to>
                  <value>
                    <root />
                  </value>
                </output>
                <xslt-stylesheet>
                  <stylesheet-replacement-tokens>
                    <replacement-token name="timeout secs">
                      <input global="false">
                        <from>timeout secs</from>
                      </input>
                    </replacement-token>
                    <replacement-token name="tok4">
                      <input global="false">
                        <from>export path</from>
                      </input>
                    </replacement-token>
                    <replacement-token name="tok1">
                      <input global="false">
                        <from>managementpack id</from>
                      </input>
                    </replacement-token>
                  </stylesheet-replacement-tokens>
                  <stylesheet><![CDATA[<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="1.0">
  <xsl:output indent="no" />
  <xsl:template match="/">
    <items>
      <item>
        <operation-name>
          <xsl:text disable-output-escaping="no">export-managementpack</xsl:text>
        </operation-name>
        <timeout-secs>
          <xsl:value-of select="'${timeout secs}'" disable-output-escaping="no" />
        </timeout-secs>
        <command-parameters>
          <managementpack>
            <managementpack-id>
              <xsl:value-of select="'${tok1}'" disable-output-escaping="no" />
            </managementpack-id>
          </managementpack>
          <export-path>
            <xsl:value-of select="'${tok4}'" disable-output-escaping="no" />
          </export-path>
        </command-parameters>
      </item>
    </items>
  </xsl:template>
</xsl:stylesheet>]]></stylesheet>
                </xslt-stylesheet>
              </assignment>
              <meta>
                <documentation />
                <checkpoint>false</checkpoint>
              </meta>
              <after-execution>
                <log>
                  <level>debug</level>
                  <parameters>
                    <input>
                      <value>Item Xml:</value>
                    </input>
                    <input>
                      <from>items xml</from>
                    </input>
                  </parameters>
                </log>
              </after-execution>
              <location>:switch[1]:sequence[2]:assign[1]</location>
            </assign>
          </sequence>
        </case>
        <case>
          <condition>
            <document>
              <input>
                <from>managementpack name</from>
              </input>
            </document>
            <xpath-expression>
              <xpath-replacement-tokens>
                <replacement-token name="managementpack name">
                  <input global="false">
                    <from>managementpack name</from>
                  </input>
                </replacement-token>
              </xpath-replacement-tokens>
              <xpath><![CDATA[string('${managementpack name}') != ""]]></xpath>
            </xpath-expression>
          </condition>
          <sequence>
            <console-output>
              <type>INFO</type>
              <summary>
                <concat>
                  <input>
                    <value></value>
                  </input>
                </concat>
              </summary>
              <detail>
                <concat>
                  <input>
                    <value></value>
                  </input>
                </concat>
              </detail>
            </console-output>
            <assign>
              <assignment>
                <output>
                  <to>items xml</to>
                  <value>
                    <root />
                  </value>
                </output>
                <xslt-stylesheet>
                  <stylesheet-replacement-tokens>
                    <replacement-token name="timeout secs">
                      <input global="false">
                        <from>timeout secs</from>
                      </input>
                    </replacement-token>
                    <replacement-token name="tok4">
                      <input global="false">
                        <from>export path</from>
                      </input>
                    </replacement-token>
                    <replacement-token name="tok1">
                      <input global="false">
                        <from>managementpack name</from>
                      </input>
                    </replacement-token>
                  </stylesheet-replacement-tokens>
                  <stylesheet><![CDATA[<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="1.0">
  <xsl:output indent="no" />
  <xsl:template match="/">
    <items>
      <item>
        <operation-name>
          <xsl:text disable-output-escaping="no">export-managementpack</xsl:text>
        </operation-name>
        <timeout-secs>
          <xsl:value-of select="'${timeout secs}'" disable-output-escaping="no" />
        </timeout-secs>
        <command-parameters>
          <managementpack>
            <managementpack-name>
              <xsl:value-of select="'${tok1}'" disable-output-escaping="no" />
            </managementpack-name>
          </managementpack>
          <export-path>
            <xsl:value-of select="'${tok4}'" disable-output-escaping="no" />
          </export-path>
        </command-parameters>
      </item>
    </items>
  </xsl:template>
</xsl:stylesheet>]]></stylesheet>
                </xslt-stylesheet>
              </assignment>
              <meta>
                <documentation />
                <checkpoint>false</checkpoint>
              </meta>
              <after-execution>
                <log>
                  <level>debug</level>
                  <parameters>
                    <input>
                      <value>Item Xml:</value>
                    </input>
                    <input>
                      <from>items xml</from>
                    </input>
                  </parameters>
                </log>
              </after-execution>
              <location>:switch[1]:sequence[3]:assign[1]</location>
            </assign>
          </sequence>
        </case>
        <location>:switch[1]</location>
      </switch>
    </sequence>
    <meta>
      <expose-to>
        <consumer>RULE</consumer>
        <consumer>SCHEDULE</consumer>
      </expose-to>
      <documentation>
        <description>Utility to create items xml for the process - "Export Management Pack"</description>
        <version></version>
      </documentation>
      <peer-location>
        <location>any</location>
      </peer-location>
      <record-metrics>false</record-metrics>
      <process-id>e9b2b37a-b8c9-3021-9b89-1cb102bc0896</process-id>
      <author />
      <category />
      <status />
      <keywords />
      <systems />
      <last-modified-by />
      <last-modified>1290598684876</last-modified>
    </meta>
  </process-def>
</process>