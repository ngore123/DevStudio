<?xml version="1.0" encoding="UTF-8"?>
<process>
   <process-def name=":BladeLogic-SA-ITSM_Integration:rules">
      <sequence>
         <switch>
            <meta>
               <peer-location>
                  <location>any</location>
               </peer-location>
            </meta>
            <execute-all-applicable-cases>true</execute-all-applicable-cases>
            <case name="Operator Initiated Change - BMC AR System Alert" applies-if-any-condition-true="false">
               <condition>
                  <document>
                     <input>
                        <from>inputevent</from>
                     </input>
                  </document>
                  <xpath-expression>
                     <xpath><![CDATA[starts-with(//text/text(), 'Operator Initiated Change')='true']]></xpath>
                  </xpath-expression>
                  <gui-data>
                     <from><![CDATA[starts-with(//text/text(), 'Operator Initiated Change')]]></from>
                     <fromKey><![CDATA[3303]]></fromKey>
                     <to><![CDATA['true']]></to>
                     <operator><![CDATA[=]]></operator>
                     <type><![CDATA[String]]></type>
                  </gui-data>
               </condition>
               <condition>
                  <document>
                     <input>
                        <from>inputevent</from>
                     </input>
                  </document>
                  <xpath-expression>
                     <xpath><![CDATA[starts-with(substring-after(//text/text(), ':'), 'BMC BladeLogic')='true']]></xpath>
                  </xpath-expression>
                  <gui-data>
                     <from><![CDATA[starts-with(substring-after(//text/text(), ':'), 'BMC BladeLogic')]]></from>
                     <fromKey><![CDATA[3304]]></fromKey>
                     <to><![CDATA['true']]></to>
                     <operator><![CDATA[=]]></operator>
                     <type><![CDATA[String]]></type>
                  </gui-data>
               </condition>
               <sequence>
                  <schedule-job>
                     <parameters>
                        <input required="false">
                           <from>inputevent</from>
                           <to>inputevent</to>
                        </input>
                     </parameters>
                     <group>BladeLogic-SA-ITSM_Integration</group>
                     <name-prefix>Operator Initiated Change - BMC AR System Alert</name-prefix>
                     <process-name>:BladeLogic-SA-ITSM_Integration:BMC_BladeLogic:Update Approval Status</process-name>
                  </schedule-job>
               </sequence>
            </case>
            <case name="Operator Initiated Change - BMC Remedyforce Event" applies-if-any-condition-true="false">
               <condition>
                  <document>
                     <input>
                        <from>inputevent</from>
                     </input>
                  </document>
                  <xpath-expression>
                     <xpath><![CDATA[starts-with(//body/bodypart/text(), 'Operator Initiated Change')='true']]></xpath>
                  </xpath-expression>
                  <gui-data>
                     <from><![CDATA[starts-with(//body/bodypart/text(), 'Operator Initiated Change')]]></from>
                     <fromKey><![CDATA[6187]]></fromKey>
                     <to><![CDATA['true']]></to>
                     <operator><![CDATA[=]]></operator>
                     <type><![CDATA[String]]></type>
                  </gui-data>
               </condition>
               <condition>
                  <document>
                     <input>
                        <from>inputevent</from>
                     </input>
                  </document>
                  <xpath-expression>
                     <xpath><![CDATA[starts-with(substring-after(//body/bodypart/text(), ':'), 'BMC BladeLogic')='true']]></xpath>
                  </xpath-expression>
                  <gui-data>
                     <from><![CDATA[starts-with(substring-after(//body/bodypart/text(), ':'), 'BMC BladeLogic')]]></from>
                     <fromKey><![CDATA[6188]]></fromKey>
                     <to><![CDATA['true']]></to>
                     <operator><![CDATA[=]]></operator>
                     <type><![CDATA[String]]></type>
                  </gui-data>
               </condition>
               <sequence>
                  <schedule-job>
                     <parameters>
                        <input required="false">
                           <from>inputevent</from>
                           <to>inputevent</to>
                        </input>
                     </parameters>
                     <group>BladeLogic-SA-ITSM_Integration</group>
                     <name-prefix>Operator Initiated Change - BMC Remedyforce Event</name-prefix>
                     <process-name>:BladeLogic-SA-ITSM_Integration:BMC_BladeLogic:Update Approval Status</process-name>
                  </schedule-job>
               </sequence>
            </case>
            <case name="Operator Initiated Change - ServiceNow" applies-if-any-condition-true="false">
               <condition>
                  <document>
                     <input>
                        <from>inputevent</from>
                     </input>
                  </document>
                  <xpath-expression>
                     <xpath><![CDATA[contains(normalize-space(substring-after(//body/bodypart, "Short Description:")), "Operator Initiated Change") and contains(//body/bodypart, "Schedule ID")='true']]></xpath>
                  </xpath-expression>
                  <gui-data>
                     <from><![CDATA[contains(normalize-space(substring-after(//body/bodypart, "Short Description:")), "Operator Initiated Change") and contains(//body/bodypart, "Schedule ID")]]></from>
                     <fromKey><![CDATA[7077]]></fromKey>
                     <to><![CDATA['true']]></to>
                     <operator><![CDATA[=]]></operator>
                     <type><![CDATA[String]]></type>
                  </gui-data>
               </condition>
               <sequence>
                  <schedule-job>
                     <parameters>
                        <input required="false">
                           <from>inputevent</from>
                           <to>inputevent</to>
                        </input>
                     </parameters>
                     <group>BladeLogic-SA-ITSM_Integration</group>
                     <name-prefix>Operator Initiated Change - ServiceNow</name-prefix>
                     <process-name>:BladeLogic-SA-ITSM_Integration:BMC_BladeLogic:Update Approval Status</process-name>
                  </schedule-job>
               </sequence>
            </case>
            <case name="Remedy Initiated Change - BMC AR System Alert" applies-if-any-condition-true="false">
               <condition>
                  <document>
                     <input>
                        <from>inputevent</from>
                     </input>
                  </document>
                  <xpath-expression>
                     <xpath><![CDATA[starts-with(//text/text(), 'Remedy Initiated Change')='true']]></xpath>
                  </xpath-expression>
                  <gui-data>
                     <from><![CDATA[starts-with(//text/text(), 'Remedy Initiated Change')]]></from>
                     <fromKey><![CDATA[3305]]></fromKey>
                     <to><![CDATA['true']]></to>
                     <operator><![CDATA[=]]></operator>
                     <type><![CDATA[String]]></type>
                  </gui-data>
               </condition>
               <condition>
                  <document>
                     <input>
                        <from>inputevent</from>
                     </input>
                  </document>
                  <xpath-expression>
                     <xpath><![CDATA[starts-with(substring-after(//text/text(), ':'), 'BMC BladeLogic')='true']]></xpath>
                  </xpath-expression>
                  <gui-data>
                     <from><![CDATA[starts-with(substring-after(//text/text(), ':'), 'BMC BladeLogic')]]></from>
                     <fromKey><![CDATA[3306]]></fromKey>
                     <to><![CDATA['true']]></to>
                     <operator><![CDATA[=]]></operator>
                     <type><![CDATA[String]]></type>
                  </gui-data>
               </condition>
               <sequence>
                  <schedule-job>
                     <parameters>
                        <input required="false">
                           <from>inputevent</from>
                           <to>inputevent</to>
                        </input>
                     </parameters>
                     <group>BladeLogic-SA-ITSM_Integration</group>
                     <name-prefix>Remedy Initiated Change - BMC AR System Alert</name-prefix>
                     <process-name>:BladeLogic-SA-ITSM_Integration:BMC_BladeLogic:Request Job</process-name>
                  </schedule-job>
               </sequence>
            </case>
            <case name="Remedy Initiated Change - BMC Remedyforce Event" applies-if-any-condition-true="false">
               <condition>
                  <document>
                     <input>
                        <from>inputevent</from>
                     </input>
                  </document>
                  <xpath-expression>
                     <xpath><![CDATA[starts-with(//body/bodypart/text(), 'Remedyforce Initiated Change')='true']]></xpath>
                  </xpath-expression>
                  <gui-data>
                     <from><![CDATA[starts-with(//body/bodypart/text(), 'Remedyforce Initiated Change')]]></from>
                     <fromKey><![CDATA[6189]]></fromKey>
                     <to><![CDATA['true']]></to>
                     <operator><![CDATA[=]]></operator>
                     <type><![CDATA[String]]></type>
                  </gui-data>
               </condition>
               <condition>
                  <document>
                     <input>
                        <from>inputevent</from>
                     </input>
                  </document>
                  <xpath-expression>
                     <xpath><![CDATA[starts-with(substring-after(//body/bodypart/text(), ':'), 'BMC BladeLogic')='true']]></xpath>
                  </xpath-expression>
                  <gui-data>
                     <from><![CDATA[starts-with(substring-after(//body/bodypart/text(), ':'), 'BMC BladeLogic')]]></from>
                     <fromKey><![CDATA[6190]]></fromKey>
                     <to><![CDATA['true']]></to>
                     <operator><![CDATA[=]]></operator>
                     <type><![CDATA[String]]></type>
                  </gui-data>
               </condition>
               <sequence>
                  <schedule-job>
                     <parameters>
                        <input required="false">
                           <from>inputevent</from>
                           <to>inputevent</to>
                        </input>
                     </parameters>
                     <group>BladeLogic-SA-ITSM_Integration</group>
                     <name-prefix>Remedy Initiated Change - BMC Remedyforce Event</name-prefix>
                     <process-name>:BladeLogic-SA-ITSM_Integration:BMC_BladeLogic:Request Job</process-name>
                  </schedule-job>
               </sequence>
            </case>
            <case name="ServiceNow Initiated Change - ServiceNow Event" applies-if-any-condition-true="false">
               <condition>
                  <document>
                     <input>
                        <from>inputevent</from>
                     </input>
                  </document>
                  <xpath-expression>
                     <xpath><![CDATA[starts-with(normalize-space(substring-after(//body/bodypart, "Short Description:")), "ServiceNow Initiated Change") and starts-with(normalize-space(substring-after(//body/bodypart, "Target:")), "BladeLogic")='true']]></xpath>
                  </xpath-expression>
                  <gui-data>
                     <from><![CDATA[starts-with(normalize-space(substring-after(//body/bodypart, "Short Description:")), "ServiceNow Initiated Change") and starts-with(normalize-space(substring-after(//body/bodypart, "Target:")), "BladeLogic")]]></from>
                     <fromKey><![CDATA[7082]]></fromKey>
                     <to><![CDATA['true']]></to>
                     <operator><![CDATA[=]]></operator>
                     <type><![CDATA[String]]></type>
                  </gui-data>
               </condition>
               <sequence>
                  <schedule-job>
                     <parameters>
                        <input required="false">
                           <from>inputevent</from>
                           <to>inputevent</to>
                        </input>
                     </parameters>
                     <group>BladeLogic-SA-ITSM_Integration</group>
                     <name-prefix>ServiceNow Initiated Change - ServiceNow Event</name-prefix>
                     <process-name>:BladeLogic-SA-ITSM_Integration:BMC_BladeLogic:Request Job</process-name>
                  </schedule-job>
               </sequence>
            </case>
         </switch>
      </sequence>
      <meta>
         <peer-location>
            <location>any</location>
         </peer-location>
      </meta>
      <parameters>
         <input>
            <from>inputevent</from>
            <to>inputevent</to>
         </input>
      </parameters>
   </process-def>
</process>

