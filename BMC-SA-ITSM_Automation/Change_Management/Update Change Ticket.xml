<process draft="false" dev-studio-version="20.02.00">
  <process-def name=":BMC-SA-ITSM_Automation:Change_Management:Update Change Ticket">
    <parameters>
      <input global="false" required="true">
        <description>String Value - The ID of the change to be updated.</description>
        <from>ChangeID</from>
        <to>ChangeID</to>
      </input>
      <input global="false" required="false">
        <description>String Value. The ID of the task associated to the Change.
 
Not supported by ServiceNow.</description>
        <from>TaskID</from>
        <to>TaskID</to>
      </input>
      <input global="false" required="false">
        <description>Valid values:

BMC_AR_System (default), ServiceNow</description>
        <from>ITSMPlatform</from>
        <to>ITSMPlatform</to>
      </input>
      <input global="false" required="false">
        <description>String Value - The new Status value to be updated.

Valid Values for BMC_AR_System:
New 
In Progress
Completed 
Cancelled


Valid Values for ServiceNow:
New
Assess
Authorize
Scheduled
Implement
Review
Closed
Canceled</description>
        <from>Status</from>
        <to>Status</to>
      </input>
      <input global="false" required="false">
        <description>String Value - the status reason to be updated.

Valid Values for BMC_AR_System:
Success
Failed
To Be Re-Scheduled

Valid Values for ServiceNow:
Successful
Successful with issues
Unsuccessful
</description>
        <from>StatusReason</from>
        <to>StatusReason</to>
      </input>
      <input global="false" required="false">
        <description>String Value - Text string to store in workinfo summary of the Change ticket.
 
Not supported by ServiceNow.</description>
        <from>ChangeWorkInfoNotes</from>
        <to>ChangeWorkInfoNotes</to>
      </input>
      <input global="false" required="false">
        <description>String Value - requestedl start date of the Change ticket.

Remedy Example: 1262304060  (epoch) 


ServiceNow Example: 1262304060  (epoch) </description>
        <from>RequestedStartDate</from>
        <to>RequestedStartDate</to>
      </input>
      <input global="false" required="false">
        <description>String Value - requested end date of the Change ticket.

Remedy Example: 1262304060  (epoch) 

ServiceNow Example: 1262304060  (epoch) </description>
        <from>RequestedEndDate</from>
        <to>RequestedEndDate</to>
      </input>
      <input global="false" required="false">
        <description>String Value - additional notes to be added to the Change Ticket.</description>
        <from>AdditionalNotes</from>
        <to>AdditionalNotes</to>
      </input>
      <input global="false" required="false">
        <description>The Impact of the Change Ticket.

Valid Values for BMC Remedy:
1-Extensive/Widespread
2-Significant/Large
3-Moderate/Limited
4-Minor/Localized

Sample Values for ServiceNow:
1 - High
2 - Medium
3 - Low</description>
        <from>Impact</from>
        <to>Impact</to>
      </input>
      <input global="false" required="false">
        <description>The Urgency of the Change Ticket.

Valid Values for BMC Remedy:
1-Critical
2-High
3-Medium
4-Low


Sample Values for ServiceNow:
1 - High
2 - Medium
3 - Low</description>
        <from>Urgency</from>
        <to>Urgency</to>
      </input>
      <input global="false" required="false">
        <description>The Class of the Change Ticket.

Valid Values for BMC Remedy:
Emergency
Expedited
Latent
Normal
No Impact
Standard

Valid Values for ServiceNow:
Standard
Normal
Emergency</description>
        <from>ChangeClass</from>
        <to>ChangeClass</to>
      </input>
      <input global="false" required="false">
        <description>The Reason of the Change Class specified in the Change Ticket.
 
Valid Values for BMC Remedy:

Customer/business need
Insufficient lead-time
Known error correction
Scheduling conflict

Not supported by ServiceNow.</description>
        <from>ChangeClassReason</from>
        <to>ChangeClassReason</to>
      </input>
      <input global="false" required="false">
        <description>The Environment of the Change.

Valid Values for BMC Remedy:

Production
Model Office
Hot Backup
Development

Not supported by ServiceNow.</description>
        <from>ChangeEnvironment</from>
        <to>ChangeEnvironment</to>
      </input>
      <input global="false" required="false">
        <description>The reason for which this Change Ticket was created.

Valid Values for BMC Remedy:
Fix/Repair
New Functionality
Maintenance
Upgrade
Other


Sample values for ServiceNow
Problem resolution
User requested
New or removed CI
Hardware upgrade
Software upgrade
Network requirements
Business requirements
Legislation
Location changed
Product or service changed
Other</description>
        <from>ReasonForChange</from>
        <to>ReasonForChange</to>
      </input>
      <input global="false" required="false">
        <description>Comma separated list of the associated CI's names.</description>
        <from>CINameList</from>
        <to>CINameList</to>
      </input>
      <input global="false" required="false">
        <description>Comma separated list of the associated CI's Recon IDs.
 
Not supported by ServiceNow.</description>
        <from>CIReconIDList</from>
        <to>CIReconIDList</to>
      </input>
      <input global="false" required="false">
        <description>Change &lt;Location Company

Sample values for Remedy
Calbro Services


Sample values for ServiceNow:
ACME Africa</description>
        <from>LocationCompany</from>
        <to>LocationCompany</to>
      </input>
      <input global="false" required="false">
        <description>CategorizationTier1
 
Not supported by ServiceNow.</description>
        <from>CategorizationTier1</from>
        <to>CategorizationTier1</to>
      </input>
      <input global="false" required="false">
        <description>CategorizationTier2
 
Not supported by ServiceNow.</description>
        <from>CategorizationTier2</from>
        <to>CategorizationTier2</to>
      </input>
      <input global="false" required="false">
        <description>CategorizationTier3
 
Not supported by ServiceNow.</description>
        <from>CategorizationTier3</from>
        <to>CategorizationTier3</to>
      </input>
      <input global="false" required="false">
        <description>Product Category Tier 1

e.g
Hardware/Miscellanous/Network
 
Not supported by ServiceNow.</description>
        <from>ProductCatTier1</from>
        <to>ProductCatTier1</to>
      </input>
      <input global="false" required="false">
        <description>Product Category Tier 2
 
Not supported by ServiceNow.</description>
        <from>ProductCatTier2</from>
        <to>ProductCatTier2</to>
      </input>
      <input global="false" required="false">
        <description>Product Category Tier 3
 
Not supported by ServiceNow.</description>
        <from>ProductCatTier3</from>
        <to>ProductCatTier3</to>
      </input>
      <input global="false" required="false">
        <description>Name of the Product.
 
Not supported by ServiceNow.</description>
        <from>ProductName</from>
        <to>ProductName</to>
      </input>
      <input global="false" required="false">
        <description>Model Version of the product.
 
Not supported by ServiceNow.</description>
        <from>ProductModelVersion</from>
        <to>ProductModelVersion</to>
      </input>
      <input global="false" required="false">
        <description>Manufacturer of the product.
 
Not supported by ServiceNow.</description>
        <from>Manufacturer</from>
        <to>Manufacturer</to>
      </input>
      <input global="false" required="false">
        <description>=&gt; Only applicable for Remedy.

Maps to SourceID.

Usually name of the host server.
 
Not supported by ServiceNow.</description>
        <from>HostName</from>
        <to>HostName</to>
      </input>
      <input global="false" required="false">
        <description>ID of the Job represented in source EM.
 
Not supported by ServiceNow.</description>
        <from>JobID</from>
        <to>JobID</to>
      </input>
      <input global="false" required="false">
        <description>Version of the job as represented in source EM.
 
Not supported by ServiceNow.</description>
        <from>JobVersion</from>
        <to>JobVersion</to>
      </input>
      <input global="false" required="false">
        <description>Instance ID of the job for which this process has been invoked.
 
Not supported by ServiceNow.</description>
        <from>JobInstanceID</from>
        <to>JobInstanceID</to>
      </input>
      <input global="false" required="false">
        <description>Job name of the job for which this process has been invoked.
 
Not supported by ServiceNow.</description>
        <from>JobName</from>
        <to>JobName</to>
      </input>
      <input global="false" required="false">
        <description>Description of the job for which this process has been invoked.
 
Not supported by ServiceNow.</description>
        <from>JobDetailedDescription</from>
        <to>JobDetailedDescription</to>
      </input>
      <input global="false" required="false">
        <description>The type of the job for which this process has been invoked.
 
Not supported by ServiceNow.</description>
        <from>JobType</from>
        <to>JobType</to>
      </input>
      <input global="false" required="false">
        <description>Assignment Group

Valid value for ServiceNow:
Application Development</description>
        <from>VendorAssigneeGroups</from>
        <to>VendorAssigneeGroups</to>
      </input>
      <input global="false" required="false">
        <description>Extra field for feature customization.</description>
        <from>Character01</from>
        <to>Character01</to>
      </input>
      <input global="false" required="false">
        <description>Extra field for feature customization.</description>
        <from>Character02</from>
        <to>Character02</to>
      </input>
      <input global="false" required="false">
        <description>Extra field for feature customization.</description>
        <from>Character03</from>
        <to>Character03</to>
      </input>
      <input global="false" required="false">
        <description>Extra field for feature customization.</description>
        <from>Character04</from>
        <to>Character04</to>
      </input>
      <input global="false" required="false">
        <description>Extra field for feature customization.</description>
        <from>Character05</from>
        <to>Character05</to>
      </input>
      <input global="false" required="false">
        <description>Extra field for feature customization.</description>
        <from>Character06</from>
        <to>Character06</to>
      </input>
      <input global="false" required="false">
        <description>Extra field for feature customization.</description>
        <from>Character07</from>
        <to>Character07</to>
      </input>
      <input global="false" required="false">
        <description>Extra field for feature customization.</description>
        <from>Character08</from>
        <to>Character08</to>
      </input>
      <input global="false" required="false">
        <description>Extra field for feature customization.</description>
        <from>Character09</from>
        <to>Character09</to>
      </input>
      <input global="false" required="false">
        <description>Extra field for feature customization.</description>
        <from>Character10</from>
        <to>Character10</to>
      </input>
      <output global="false" required="false">
        <to>json response</to>
        <from>json response</from>
      </output>
    </parameters>
    <access />
    <sequence>
      <assign>
        <meta>
          <documentation />
          <checkpoint>false</checkpoint>
        </meta>
        <after-execution>
          <log>
            <level>debug</level>
            <parameters>
              <input>
                <value>Inputs Received -</value>
              </input>
              <input>
                <from>ChangeID</from>
              </input>
              <input>
                <from>TaskID</from>
              </input>
              <input>
                <from>Status</from>
              </input>
              <input>
                <from>StatusReason</from>
              </input>
              <input>
                <from>ChangeWorkInfoNotes</from>
              </input>
              <input>
                <from>AdditionalNotes</from>
              </input>
              <input>
                <from>CINameList</from>
              </input>
              <input>
                <from>CIReconIDList</from>
              </input>
              <input>
                <from>ChangeClass</from>
              </input>
              <input>
                <from>ChangeClassReason</from>
              </input>
              <input>
                <from>ChangeEnvironment</from>
              </input>
              <input>
                <from>Impact</from>
              </input>
              <input>
                <from>Urgency</from>
              </input>
            </parameters>
          </log>
        </after-execution>
        <location>:assign[1]</location>
      </assign>
      <call-process>
        <process-name>:BMC-SA-ITSM_Configuration:Read Default ITSM Name</process-name>
        <parameters>
          <output>
            <from>default_mapping_source</from>
            <to>default itsm</to>
          </output>
        </parameters>
        <meta>
          <documentation />
          <run-mode-handling>
            <run-mode>OCP</run-mode>
            <allow-step-into>false</allow-step-into>
          </run-mode-handling>
          <checkpoint>false</checkpoint>
        </meta>
        <location>:call-process[1]</location>
      </call-process>
      <assign>
        <assignment>
          <document>
            <input>
              <from>default itsm</from>
            </input>
          </document>
          <result>
            <output>
              <to>ITSMPlatform</to>
            </output>
          </result>
          <xslt-stylesheet>
            <stylesheet-replacement-tokens>
              <replacement-token name="itsm">
                <input global="false">
                  <from>ITSMPlatform</from>
                </input>
              </replacement-token>
            </stylesheet-replacement-tokens>
            <stylesheet><![CDATA[<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="1.0">
  <xsl:output indent="no" />
  <xsl:template match="/">
    <result>
      <xsl:choose>
        <xsl:when test="string-length('${itsm}')&gt;0">${itsm}</xsl:when>
        <xsl:otherwise>
          <xsl:value-of select="." disable-output-escaping="no" />
        </xsl:otherwise>
      </xsl:choose>
    </result>
  </xsl:template>
</xsl:stylesheet>]]></stylesheet>
          </xslt-stylesheet>
        </assignment>
        <meta>
          <documentation />
          <checkpoint>false</checkpoint>
        </meta>
        <after-execution>
          <log>
            <level>debug</level>
            <parameters>
              <input>
                <value>***PUJA</value>
              </input>
              <input>
                <from>ITSMPlatform</from>
              </input>
            </parameters>
          </log>
        </after-execution>
        <location>:assign[2]</location>
      </assign>
      <switch>
        <meta>
          <documentation />
          <run-mode-handling>
            <run-mode>OCP</run-mode>
            <allow-step-into>true</allow-step-into>
          </run-mode-handling>
          <checkpoint>false</checkpoint>
        </meta>
        <execute-all-applicable-cases>false</execute-all-applicable-cases>
        <default>
          <sequence>
            <call-process>
              <process-name>:AutoPilot-OA-ITSM_Automation:Utilities:Generate Response</process-name>
              <parameters>
                <input>
                  <value>failure</value>
                  <to>status</to>
                </input>
                <input>
                  <concat>
                    <input>
                      <value>Failed to update change. Unsupported ITSM Platform Set - </value>
                    </input>
                    <input required="false">
                      <from>ITSMPlatform</from>
                    </input>
                  </concat>
                  <to>error message</to>
                </input>
                <input>
                  <value>Update Change Ticket</value>
                  <to>request type</to>
                </input>
                <input>
                  <concat>
                    <input>
                      <value>Failed to update change. Unsupported ITSM Platform Set - </value>
                    </input>
                    <input required="false">
                      <from>ITSMPlatform</from>
                    </input>
                  </concat>
                  <to>data</to>
                </input>
                <output>
                  <from>json response</from>
                  <to>json response</to>
                </output>
              </parameters>
              <meta>
                <documentation />
                <run-mode-handling>
                  <run-mode>OCP</run-mode>
                  <allow-step-into>false</allow-step-into>
                </run-mode-handling>
                <checkpoint>false</checkpoint>
              </meta>
              <location>:switch[1]:sequence[1]:call-process[1]</location>
            </call-process>
          </sequence>
        </default>
        <case>
          <condition>
            <document>
              <input>
                <from>ITSMPlatform</from>
              </input>
            </document>
            <xpath-expression>
              <xpath-replacement-tokens />
              <xpath><![CDATA[string(.) = "BMC_AR_System"]]></xpath>
            </xpath-expression>
          </condition>
          <sequence>
            <call-process>
              <process-name>:BMC-SA-ITSM_Automation:Utilities:Validate Input</process-name>
              <parameters>
                <input>
                  <from>ITSMPlatform</from>
                  <to>ConfigurationName</to>
                </input>
                <input>
                  <from>Urgency</from>
                  <to>Urgency</to>
                </input>
                <input>
                  <from>Impact</from>
                  <to>Impact</to>
                </input>
                <input>
                  <from>RequestedStartDate</from>
                  <to>StartDate</to>
                </input>
                <input>
                  <from>RequestedStartDate</from>
                  <to>EndDate</to>
                </input>
                <input>
                  <from>Status</from>
                  <to>Status</to>
                </input>
                <input>
                  <from>StatusReason</from>
                  <to>StatusReason</to>
                </input>
                <input>
                  <from>ChangeClass</from>
                  <to>ChangeClass</to>
                </input>
                <input>
                  <from>ChangeClassReason</from>
                  <to>ChangeClassReason</to>
                </input>
                <input>
                  <from>ReasonForChange</from>
                  <to>ReasonForChange</to>
                </input>
                <input>
                  <from>ChangeEnvironment</from>
                  <to>ChangeEnvironment</to>
                </input>
                <input>
                  <value>true</value>
                  <to>Validate</to>
                </input>
                <output>
                  <from>urgency validation failure</from>
                  <to>urgency validation failure</to>
                </output>
                <output>
                  <from>change class validation failure</from>
                  <to>change class validation failure</to>
                </output>
                <output>
                  <from>class reason validation failure</from>
                  <to>class reason validation failure</to>
                </output>
                <output>
                  <from>impact validation failure</from>
                  <to>impact validation failure</to>
                </output>
                <output>
                  <from>reason change validation failure</from>
                  <to>reason change validation failure</to>
                </output>
                <output>
                  <from>status validation failure</from>
                  <to>status validation failure</to>
                </output>
                <output>
                  <from>status reason validation failure</from>
                  <to>status reason validation failure</to>
                </output>
                <output>
                  <from>start date validation failure</from>
                  <to>start date validation failure</to>
                </output>
                <output>
                  <from>end date validation failure</from>
                  <to>end date validation failure</to>
                </output>
                <output>
                  <from>consolidated validation failure</from>
                  <to>consolidated validation failure</to>
                </output>
              </parameters>
              <meta>
                <documentation />
                <run-mode-handling>
                  <run-mode>OCP</run-mode>
                  <allow-step-into>false</allow-step-into>
                </run-mode-handling>
                <checkpoint>false</checkpoint>
              </meta>
              <location>:switch[1]:sequence[2]:call-process[1]</location>
            </call-process>
            <switch>
              <meta>
                <documentation />
                <run-mode-handling>
                  <run-mode>OCP</run-mode>
                  <allow-step-into>true</allow-step-into>
                </run-mode-handling>
                <checkpoint>false</checkpoint>
              </meta>
              <execute-all-applicable-cases>false</execute-all-applicable-cases>
              <default>
                <sequence>
                  <call-process>
                    <process-name>:AutoPilot-OA-ITSM_Automation:Utilities:Generate Response</process-name>
                    <parameters>
                      <input>
                        <value>failure</value>
                        <to>status</to>
                      </input>
                      <input>
                        <concat>
                          <input>
                            <value>Following validations failed  - [</value>
                          </input>
                          <input required="false">
                            <from>consolidated validation failure</from>
                          </input>
                          <input>
                            <value>]</value>
                          </input>
                        </concat>
                        <to>error message</to>
                      </input>
                      <input>
                        <value>Update Change Ticket</value>
                        <to>request type</to>
                      </input>
                      <input>
                        <concat>
                          <input>
                            <value>Following validations failed  - [</value>
                          </input>
                          <input required="false">
                            <from>consolidated validation failure</from>
                          </input>
                          <input>
                            <value>]</value>
                          </input>
                        </concat>
                        <to>data</to>
                      </input>
                      <output>
                        <from>json response</from>
                        <to>json response</to>
                      </output>
                    </parameters>
                    <meta>
                      <documentation />
                      <run-mode-handling>
                        <run-mode>OCP</run-mode>
                        <allow-step-into>false</allow-step-into>
                      </run-mode-handling>
                      <checkpoint>false</checkpoint>
                    </meta>
                    <location>:switch[1]:sequence[2]:switch[1]:sequence[1]:call-process[1]</location>
                  </call-process>
                </sequence>
              </default>
              <case>
                <condition>
                  <document>
                    <input>
                      <from>consolidated validation failure</from>
                    </input>
                  </document>
                  <xpath-expression>
                    <xpath-replacement-tokens />
                    <xpath><![CDATA[normalize-space(.)]]></xpath>
                  </xpath-expression>
                  <xpath-expression>
                    <xpath-replacement-tokens />
                    <xpath><![CDATA[string-length(.)]]></xpath>
                  </xpath-expression>
                  <xpath-expression>
                    <xpath-replacement-tokens />
                    <xpath><![CDATA[number(.) = 0]]></xpath>
                  </xpath-expression>
                </condition>
                <sequence>
                  <call-process>
                    <process-name>:BMC-SA-ITSM_Configuration:Read AR Details</process-name>
                    <parameters>
                      <output>
                        <from>ServerUrl</from>
                        <to>ServerUrl</to>
                      </output>
                      <output>
                        <from>Username</from>
                        <to>Username</to>
                      </output>
                      <output>
                        <from>Password</from>
                        <to>Password</to>
                      </output>
                      <output>
                        <from>CommunicationProtocol</from>
                        <to>communication protocol</to>
                      </output>
                      <output>
                        <from>AdapterName</from>
                        <to>AdapterName</to>
                      </output>
                      <output>
                        <from>CreateChangeInterface</from>
                        <to>CreateChangeInterface</to>
                      </output>
                      <output>
                        <from>OutboundChangeInterface</from>
                        <to>OutboundChangeInterface</to>
                      </output>
                      <output>
                        <from>ChangeSource</from>
                        <to>ChangeSource</to>
                      </output>
                      <output>
                        <from>Keystore</from>
                        <to>Keystore</to>
                      </output>
                      <output>
                        <from>Truststore</from>
                        <to>Truststore</to>
                      </output>
                      <output>
                        <from>Passphrase</from>
                        <to>Passphrase</to>
                      </output>
                    </parameters>
                    <meta>
                      <documentation />
                      <run-mode-handling>
                        <run-mode>OCP</run-mode>
                        <allow-step-into>false</allow-step-into>
                      </run-mode-handling>
                      <checkpoint>false</checkpoint>
                    </meta>
                    <location>:switch[1]:sequence[2]:switch[1]:sequence[2]:call-process[1]</location>
                  </call-process>
                  <call-process>
                    <process-name>:AutoPilot-OA-ITSM_Automation:Change_Management:Do Update</process-name>
                    <parameters>
                      <input>
                        <from>ChangeID</from>
                        <to>ChangeID</to>
                      </input>
                      <input>
                        <from>TaskID</from>
                        <to>TaskID</to>
                      </input>
                      <input>
                        <from>ITSMPlatform</from>
                        <to>ITSMPlatform</to>
                      </input>
                      <input>
                        <from>Status</from>
                        <to>Status</to>
                      </input>
                      <input>
                        <from>StatusReason</from>
                        <to>StatusReason</to>
                      </input>
                      <input>
                        <from>ChangeWorkInfoNotes</from>
                        <to>ChangeWorkInfoNotes</to>
                      </input>
                      <input>
                        <from>RequestedStartDate</from>
                        <to>RequestedStartDate</to>
                      </input>
                      <input>
                        <from>RequestedEndDate</from>
                        <to>RequestedEndDate</to>
                      </input>
                      <input>
                        <from>AdditionalNotes</from>
                        <to>AdditionalNotes</to>
                      </input>
                      <input>
                        <from>Impact</from>
                        <to>Impact</to>
                      </input>
                      <input>
                        <from>Urgency</from>
                        <to>Urgency</to>
                      </input>
                      <input>
                        <from>ChangeClass</from>
                        <to>ChangeClass</to>
                      </input>
                      <input>
                        <from>ChangeClassReason</from>
                        <to>ChangeClassReason</to>
                      </input>
                      <input>
                        <from>ChangeEnvironment</from>
                        <to>ChangeEnvironment</to>
                      </input>
                      <input>
                        <from>ReasonForChange</from>
                        <to>ReasonForChange</to>
                      </input>
                      <input>
                        <from>CINameList</from>
                        <to>CINameList</to>
                      </input>
                      <input>
                        <from>CIReconIDList</from>
                        <to>CIReconIDList</to>
                      </input>
                      <input>
                        <from>LocationCompany</from>
                        <to>LocationCompany</to>
                      </input>
                      <input>
                        <from>CategorizationTier1</from>
                        <to>CategorizationTier1</to>
                      </input>
                      <input>
                        <from>CategorizationTier2</from>
                        <to>CategorizationTier2</to>
                      </input>
                      <input>
                        <from>CategorizationTier3</from>
                        <to>CategorizationTier3</to>
                      </input>
                      <input>
                        <from>ProductCatTier1</from>
                        <to>ProductCatTier1</to>
                      </input>
                      <input>
                        <from>ProductCatTier2</from>
                        <to>ProductCatTier2</to>
                      </input>
                      <input>
                        <from>ProductCatTier3</from>
                        <to>ProductCatTier3</to>
                      </input>
                      <input>
                        <from>ProductName</from>
                        <to>ProductName</to>
                      </input>
                      <input>
                        <from>ProductModelVersion</from>
                        <to>ProductModelVersion</to>
                      </input>
                      <input>
                        <from>Manufacturer</from>
                        <to>Manufacturer</to>
                      </input>
                      <input>
                        <from>HostName</from>
                        <to>HostName</to>
                      </input>
                      <input>
                        <from>JobID</from>
                        <to>JobID</to>
                      </input>
                      <input>
                        <from>JobVersion</from>
                        <to>JobVersion</to>
                      </input>
                      <input>
                        <from>JobInstanceID</from>
                        <to>JobInstanceID</to>
                      </input>
                      <input>
                        <from>JobName</from>
                        <to>JobName</to>
                      </input>
                      <input>
                        <from>JobDetailedDescription</from>
                        <to>JobDetailedDescription</to>
                      </input>
                      <input>
                        <from>JobType</from>
                        <to>JobType</to>
                      </input>
                      <input>
                        <from>VendorAssigneeGroups</from>
                        <to>VendorAssigneeGroups</to>
                      </input>
                      <input>
                        <from>Character01</from>
                        <to>Character01</to>
                      </input>
                      <input>
                        <from>Character02</from>
                        <to>Character02</to>
                      </input>
                      <input>
                        <from>Character03</from>
                        <to>Character03</to>
                      </input>
                      <input>
                        <from>Character04</from>
                        <to>Character04</to>
                      </input>
                      <input>
                        <from>Character05</from>
                        <to>Character05</to>
                      </input>
                      <input>
                        <from>Character06</from>
                        <to>Character06</to>
                      </input>
                      <input>
                        <from>Character07</from>
                        <to>Character07</to>
                      </input>
                      <input>
                        <from>Character08</from>
                        <to>Character08</to>
                      </input>
                      <input>
                        <from>Character09</from>
                        <to>Character09</to>
                      </input>
                      <input>
                        <from>Character10</from>
                        <to>Character10</to>
                      </input>
                      <input>
                        <from>AdapterName</from>
                        <to>AdapterName</to>
                      </input>
                      <input>
                        <from>ServerUrl</from>
                        <to>ServerURL</to>
                      </input>
                      <input>
                        <from>communication protocol</from>
                        <to>CommunicationProtocol</to>
                      </input>
                      <input>
                        <from>Username</from>
                        <to>UserName</to>
                      </input>
                      <input>
                        <from>Password</from>
                        <to>Password</to>
                      </input>
                      <input>
                        <from>Keystore</from>
                        <to>Keystore</to>
                      </input>
                      <input>
                        <from>Truststore</from>
                        <to>TrustStore</to>
                      </input>
                      <input>
                        <from>Passphrase</from>
                        <to>Passphrase</to>
                      </input>
                      <input>
                        <from>OutboundChangeInterface</from>
                        <to>OutboundChangeInterface</to>
                      </input>
                      <input>
                        <from>CreateChangeInterface</from>
                        <to>CreateChangeInterface</to>
                      </input>
                      <output>
                        <from>json response</from>
                        <to>json response</to>
                      </output>
                    </parameters>
                    <meta>
                      <documentation />
                      <run-mode-handling>
                        <run-mode>OCP</run-mode>
                        <allow-step-into>false</allow-step-into>
                      </run-mode-handling>
                      <checkpoint>false</checkpoint>
                    </meta>
                    <location>:switch[1]:sequence[2]:switch[1]:sequence[2]:call-process[2]</location>
                  </call-process>
                </sequence>
              </case>
              <location>:switch[1]:sequence[2]:switch[1]</location>
            </switch>
          </sequence>
        </case>
        <case>
          <condition>
            <document>
              <input>
                <from>ITSMPlatform</from>
              </input>
            </document>
            <xpath-expression>
              <xpath-replacement-tokens />
              <xpath><![CDATA[string(.) = "ServiceNow"]]></xpath>
            </xpath-expression>
          </condition>
          <sequence>
            <assign>
              <assignment>
                <input global="true">
                  <configuration>:BMC-SA-ITSM_Configuration:ITSM:ServiceNow:ChangeManagement:STATUS_MAPPING</configuration>
                </input>
                <output>
                  <to>status configuration</to>
                </output>
              </assignment>
              <assignment>
                <document>
                  <input>
                    <from>status configuration</from>
                  </input>
                </document>
                <result>
                  <output>
                    <to>Status</to>
                  </output>
                </result>
                <xslt-stylesheet>
                  <stylesheet-replacement-tokens>
                    <replacement-token name="Status">
                      <input global="false">
                        <from>Status</from>
                      </input>
                    </replacement-token>
                  </stylesheet-replacement-tokens>
                  <stylesheet><![CDATA[<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="1.0">
  <xsl:output indent="no" />
  <xsl:template match="/">
    <value>
      <xsl:choose>
        <xsl:when test="string-length('${Status}') &gt; 0">
          <xsl:choose>
            <xsl:when test="boolean(//mapping[@name='${Status}'])">
              <xsl:value-of select="//mapping[@name='${Status}']/text()" disable-output-escaping="no" />
            </xsl:when>
            <xsl:otherwise>${Status}</xsl:otherwise>
          </xsl:choose>
        </xsl:when>
      </xsl:choose>
    </value>
  </xsl:template>
</xsl:stylesheet>]]></stylesheet>
                </xslt-stylesheet>
              </assignment>
              <assignment>
                <document>
                  <input>
                    <from>StatusReason</from>
                  </input>
                </document>
                <result>
                  <output>
                    <to>StatusReason</to>
                  </output>
                </result>
                <xslt-stylesheet>
                  <stylesheet-replacement-tokens>
                    <replacement-token name="Status">
                      <input global="false">
                        <from>Status</from>
                      </input>
                    </replacement-token>
                  </stylesheet-replacement-tokens>
                  <stylesheet><![CDATA[<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="1.0">
  <xsl:output indent="no" />
  <xsl:template match="/">
    <value>
      <xsl:choose>
        <xsl:when test="'${Status}' = 'Closed' and string-length(.) = 0">
          <xsl:text disable-output-escaping="no">Successful</xsl:text>
        </xsl:when>
        <xsl:otherwise>
          <xsl:value-of select="string(.)" disable-output-escaping="no" />
        </xsl:otherwise>
      </xsl:choose>
    </value>
  </xsl:template>
</xsl:stylesheet>]]></stylesheet>
                </xslt-stylesheet>
              </assignment>
              <assignment>
                <output>
                  <to>StartDate</to>
                  <value>0</value>
                </output>
              </assignment>
              <assignment>
                <output>
                  <to>EndDate</to>
                  <value>0</value>
                </output>
              </assignment>
              <meta>
                <documentation />
                <checkpoint>false</checkpoint>
              </meta>
              <location>:switch[1]:sequence[3]:assign[1]</location>
            </assign>
            <switch>
              <meta>
                <documentation />
                <run-mode-handling>
                  <run-mode>OCP</run-mode>
                  <allow-step-into>true</allow-step-into>
                </run-mode-handling>
                <checkpoint>false</checkpoint>
              </meta>
              <execute-all-applicable-cases>false</execute-all-applicable-cases>
              <default>
                <sequence />
              </default>
              <case applies-if-any-condition-true="true">
                <condition>
                  <document>
                    <input>
                      <from>RequestedStartDate</from>
                    </input>
                  </document>
                  <xpath-expression>
                    <xpath-replacement-tokens />
                    <xpath><![CDATA[string-length(.) > 0]]></xpath>
                  </xpath-expression>
                </condition>
                <condition>
                  <document>
                    <input>
                      <from>RequestedEndDate</from>
                    </input>
                  </document>
                  <xpath-expression>
                    <xpath-replacement-tokens />
                    <xpath><![CDATA[string-length(.) > 0]]></xpath>
                  </xpath-expression>
                </condition>
                <sequence>
                  <call-process>
                    <process-name>:BMC-SA-ITSM_Automation:common:Format Epoch to Date</process-name>
                    <parameters>
                      <input>
                        <from>RequestedStartDate</from>
                        <to>start date</to>
                      </input>
                      <input>
                        <from>RequestedEndDate</from>
                        <to>end date</to>
                      </input>
                      <input global="true">
                        <configuration>:BMC-SA-ITSM_Configuration:ITSM:ServiceNow:ChangeManagement:DEFAULT_DATE_FORMAT</configuration>
                        <to>date format</to>
                      </input>
                      <input global="true">
                        <configuration>:BMC-SA-ITSM_Configuration:ITSM:ServiceNow:UserDefaults:TimeZone</configuration>
                        <to>timezone</to>
                      </input>
                      <output>
                        <from>start date</from>
                        <to>StartDate</to>
                      </output>
                      <output>
                        <from>end date</from>
                        <to>EndDate</to>
                      </output>
                    </parameters>
                    <meta>
                      <documentation />
                      <run-mode-handling>
                        <run-mode>OCP</run-mode>
                        <allow-step-into>false</allow-step-into>
                      </run-mode-handling>
                      <checkpoint>false</checkpoint>
                    </meta>
                    <location>:switch[1]:sequence[3]:switch[1]:sequence[2]:call-process[1]</location>
                  </call-process>
                </sequence>
              </case>
              <location>:switch[1]:sequence[3]:switch[1]</location>
            </switch>
            <switch>
              <meta>
                <documentation />
                <run-mode-handling>
                  <run-mode>OCP</run-mode>
                  <allow-step-into>true</allow-step-into>
                </run-mode-handling>
                <checkpoint>false</checkpoint>
              </meta>
              <execute-all-applicable-cases>false</execute-all-applicable-cases>
              <default>
                <sequence />
              </default>
              <case>
                <condition>
                  <document>
                    <input>
                      <from>Status</from>
                    </input>
                  </document>
                  <xpath-expression>
                    <xpath-replacement-tokens />
                    <xpath><![CDATA[string(.) = "Closed"]]></xpath>
                  </xpath-expression>
                </condition>
                <sequence>
                  <call-process>
                    <process-name>:AutoPilot-OA-Task_Management:Searches:Get Tasks by Change ID</process-name>
                    <parameters>
                      <input>
                        <value>ServiceNow</value>
                        <to>configuration name</to>
                      </input>
                      <input>
                        <from>ChangeID</from>
                        <to>change id</to>
                      </input>
                      <output>
                        <from>tasks</from>
                        <to>tasks</to>
                      </output>
                      <output>
                        <from>success status</from>
                        <to>success status</to>
                      </output>
                      <output>
                        <from>status message</from>
                        <to>status message</to>
                      </output>
                    </parameters>
                    <meta>
                      <documentation />
                      <run-mode-handling>
                        <run-mode>OCP</run-mode>
                        <allow-step-into>false</allow-step-into>
                      </run-mode-handling>
                      <checkpoint>false</checkpoint>
                    </meta>
                    <location>:switch[1]:sequence[3]:switch[2]:sequence[2]:call-process[1]</location>
                  </call-process>
                  <assign>
                    <assignment>
                      <document>
                        <input>
                          <from>tasks</from>
                        </input>
                      </document>
                      <result>
                        <output>
                          <to>items</to>
                        </output>
                      </result>
                      <xslt-stylesheet>
                        <stylesheet-replacement-tokens />
                        <stylesheet><![CDATA[<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="1.0">
  <xsl:output indent="no" />
  <xsl:template match="@*|node()">
    <xsl:copy>
      <xsl:apply-templates select="@*|node()" />
    </xsl:copy>
  </xsl:template>
  <xsl:template match="Tasks">
    <items>
      <xsl:apply-templates select="@*|node()" />
    </items>
  </xsl:template>
  <xsl:template match="Task">
    <xsl:apply-templates select="task-id">
      <xsl:with-param name="status" select="status/text()" />
    </xsl:apply-templates>
  </xsl:template>
  <xsl:template match="task-id">
    <xsl:param name="status" />
    <xsl:choose>
      <xsl:when test="$status = 'Open' or $status = 'In Progress' or $status = 'Pending'">
        <item>
          <query>
            <number>
              <xsl:apply-templates select="node()" />
            </number>
          </query>
          <update>
            <number>
              <xsl:apply-templates select="node()" />
            </number>
            <state>
              <xsl:text disable-output-escaping="no">3</xsl:text>
            </state>
          </update>
        </item>
      </xsl:when>
    </xsl:choose>
  </xsl:template>
</xsl:stylesheet>]]></stylesheet>
                      </xslt-stylesheet>
                    </assignment>
                    <meta>
                      <documentation />
                      <checkpoint>false</checkpoint>
                    </meta>
                    <location>:switch[1]:sequence[3]:switch[2]:sequence[2]:assign[1]</location>
                  </assign>
                  <call-process>
                    <process-name>:AO-AD-ServiceNow:Update Items</process-name>
                    <parameters>
                      <input>
                        <value>ServiceNowActor</value>
                        <to>adapter name</to>
                      </input>
                      <input>
                        <value>task</value>
                        <to>item type</to>
                      </input>
                      <input>
                        <from>items</from>
                        <to>items</to>
                      </input>
                      <input>
                        <value>v1.0</value>
                        <to>version</to>
                      </input>
                      <output>
                        <from>adapter response</from>
                        <to>adapter response</to>
                      </output>
                    </parameters>
                    <meta>
                      <documentation />
                      <run-mode-handling>
                        <run-mode>OCP</run-mode>
                        <allow-step-into>false</allow-step-into>
                      </run-mode-handling>
                      <checkpoint>false</checkpoint>
                    </meta>
                    <location>:switch[1]:sequence[3]:switch[2]:sequence[2]:call-process[2]</location>
                  </call-process>
                </sequence>
              </case>
              <location>:switch[1]:sequence[3]:switch[2]</location>
            </switch>
            <assign>
              <assignment>
                <input>
                  <from>ChangeID</from>
                </input>
                <output>
                  <to>change</to>
                  <concept type="AutoPilot-OA-Change_Management:Change">
                    <attribute>change-id</attribute>
                  </concept>
                </output>
              </assignment>
              <assignment>
                <input>
                  <from>Status</from>
                </input>
                <output>
                  <to>change</to>
                  <concept type="AutoPilot-OA-Change_Management:Change">
                    <attribute>status</attribute>
                  </concept>
                </output>
              </assignment>
              <assignment>
                <input>
                  <from>StatusReason</from>
                </input>
                <output>
                  <to>change</to>
                  <concept type="AutoPilot-OA-Change_Management:Change">
                    <attribute>status-reason</attribute>
                  </concept>
                </output>
              </assignment>
              <assignment>
                <input>
                  <from>StatusReason</from>
                </input>
                <output>
                  <to>change</to>
                  <concept type="AutoPilot-OA-Change_Management:Change">
                    <attribute>closing-comment-line1</attribute>
                  </concept>
                </output>
              </assignment>
              <assignment>
                <document>
                  <input>
                    <from>RequestedStartDate</from>
                  </input>
                </document>
                <result>
                  <output>
                    <to>change</to>
                    <concept type="AutoPilot-OA-Change_Management:Change">
                      <attribute>scheduled-start-date</attribute>
                    </concept>
                  </output>
                </result>
                <xslt-stylesheet>
                  <stylesheet-replacement-tokens>
                    <replacement-token name="StartDate">
                      <input global="false">
                        <from>StartDate</from>
                      </input>
                    </replacement-token>
                  </stylesheet-replacement-tokens>
                  <stylesheet><![CDATA[<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="1.0">
  <xsl:output indent="no" />
  <xsl:template match="/">
    <value>
      <xsl:choose>
        <xsl:when test="string-length(.) &gt; 0">${StartDate}</xsl:when>
      </xsl:choose>
    </value>
  </xsl:template>
</xsl:stylesheet>]]></stylesheet>
                </xslt-stylesheet>
              </assignment>
              <assignment>
                <document>
                  <input>
                    <from>RequestedEndDate</from>
                  </input>
                </document>
                <result>
                  <output>
                    <to>change</to>
                    <concept type="AutoPilot-OA-Change_Management:Change">
                      <attribute>scheduled-end-date</attribute>
                    </concept>
                  </output>
                </result>
                <xslt-stylesheet>
                  <stylesheet-replacement-tokens>
                    <replacement-token name="EndDate">
                      <input global="false">
                        <from>EndDate</from>
                      </input>
                    </replacement-token>
                  </stylesheet-replacement-tokens>
                  <stylesheet><![CDATA[<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="1.0">
  <xsl:output indent="no" />
  <xsl:template match="/">
    <value>
      <xsl:choose>
        <xsl:when test="string-length(.) &gt; 0">${EndDate}</xsl:when>
      </xsl:choose>
    </value>
  </xsl:template>
</xsl:stylesheet>]]></stylesheet>
                </xslt-stylesheet>
              </assignment>
              <assignment>
                <input>
                  <from>Impact</from>
                </input>
                <output>
                  <to>change</to>
                  <concept type="AutoPilot-OA-Change_Management:Change">
                    <attribute>impact</attribute>
                  </concept>
                </output>
              </assignment>
              <assignment>
                <input>
                  <from>Urgency</from>
                </input>
                <output>
                  <to>change</to>
                  <concept type="AutoPilot-OA-Change_Management:Change">
                    <attribute>urgency</attribute>
                  </concept>
                </output>
              </assignment>
              <assignment>
                <input>
                  <from>ChangeClass</from>
                </input>
                <output>
                  <to>change</to>
                  <concept type="AutoPilot-OA-Change_Management:Change">
                    <attribute>change-type</attribute>
                  </concept>
                </output>
              </assignment>
              <assignment>
                <input>
                  <from>CINameList</from>
                </input>
                <output>
                  <to>change</to>
                  <concept type="AutoPilot-OA-Change_Management:Change">
                    <attribute>configuration-item</attribute>
                  </concept>
                </output>
              </assignment>
              <assignment>
                <input>
                  <from>AdditionalNotes</from>
                </input>
                <output>
                  <to>change</to>
                  <concept type="AutoPilot-OA-Change_Management:Change">
                    <attribute>worklog-details</attribute>
                  </concept>
                </output>
              </assignment>
              <assignment>
                <input>
                  <from>ReasonForChange</from>
                </input>
                <output>
                  <to>change</to>
                  <concept type="AutoPilot-OA-Change_Management:Change">
                    <attribute>reason-for-change</attribute>
                  </concept>
                </output>
              </assignment>
              <assignment>
                <input>
                  <from>LocationCompany</from>
                </input>
                <output>
                  <to>change</to>
                  <concept type="AutoPilot-OA-Change_Management:Change">
                    <attribute>company</attribute>
                  </concept>
                </output>
              </assignment>
              <assignment>
                <input>
                  <from>VendorAssigneeGroups</from>
                </input>
                <output>
                  <to>change</to>
                  <concept type="AutoPilot-OA-Change_Management:Change">
                    <attribute>assignee-groups</attribute>
                  </concept>
                </output>
              </assignment>
              <assignment>
                <document>
                  <input>
                    <from>change</from>
                  </input>
                </document>
                <result>
                  <output>
                    <to>changes</to>
                  </output>
                </result>
                <xslt-stylesheet>
                  <stylesheet-replacement-tokens>
                    <replacement-token name="change">
                      <input global="false">
                        <from>change</from>
                      </input>
                    </replacement-token>
                  </stylesheet-replacement-tokens>
                  <stylesheet><![CDATA[<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="1.0">
  <xsl:output indent="yes" cdata-section-elements="location" />
  <xsl:template match="/">
    <Changes>
      <xsl:choose>
        <xsl:when test="string-length(//change) &gt; 0">
          <xsl:copy-of select="//change" />
        </xsl:when>
        <xsl:otherwise>${change}</xsl:otherwise>
      </xsl:choose>
    </Changes>
  </xsl:template>
</xsl:stylesheet>]]></stylesheet>
                </xslt-stylesheet>
              </assignment>
              <meta>
                <documentation />
                <checkpoint>false</checkpoint>
              </meta>
              <after-execution>
                <log>
                  <level>debug</level>
                  <parameters>
                    <input>
                      <value>Show contents of change</value>
                    </input>
                    <input>
                      <from>change</from>
                    </input>
                  </parameters>
                </log>
              </after-execution>
              <location>:switch[1]:sequence[3]:assign[2]</location>
            </assign>
            <call-process>
              <process-name>:AutoPilot-OA-Change_Management:Update Changes</process-name>
              <parameters>
                <input>
                  <from>ITSMPlatform</from>
                  <to>configuration name</to>
                </input>
                <input>
                  <from>changes</from>
                  <to>changes</to>
                </input>
                <output>
                  <from>changes</from>
                  <to>changes</to>
                </output>
                <output>
                  <from>failed changes</from>
                  <to>failed changes</to>
                </output>
                <output>
                  <from>success count</from>
                  <to>success count</to>
                </output>
                <output>
                  <from>failure count</from>
                  <to>failure count</to>
                </output>
                <output>
                  <from>success status</from>
                  <to>success status</to>
                </output>
                <output>
                  <from>status message</from>
                  <to>status message</to>
                </output>
                <output>
                  <from>consolidated status</from>
                  <to>consolidated status</to>
                </output>
              </parameters>
              <meta>
                <documentation />
                <run-mode-handling>
                  <run-mode>OCP</run-mode>
                  <allow-step-into>false</allow-step-into>
                </run-mode-handling>
                <checkpoint>false</checkpoint>
              </meta>
              <location>:switch[1]:sequence[3]:call-process[1]</location>
            </call-process>
            <assign>
              <assignment>
                <document>
                  <input>
                    <from>success status</from>
                  </input>
                </document>
                <result>
                  <output>
                    <to>response</to>
                  </output>
                </result>
                <xslt-stylesheet>
                  <stylesheet-replacement-tokens />
                  <stylesheet><![CDATA[<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="1.0">
  <xsl:output indent="no" />
  <xsl:template match="/">
    <response-data>
      <xsl:choose>
        <xsl:when test="string(.) = 'success'">
          <status-message>
            <xsl:text disable-output-escaping="no">Change Request updated successfully.</xsl:text>
          </status-message>
        </xsl:when>
        <xsl:otherwise>
          <xsl:text disable-output-escaping="no">Failed to update change.</xsl:text>
        </xsl:otherwise>
      </xsl:choose>
    </response-data>
  </xsl:template>
</xsl:stylesheet>]]></stylesheet>
                </xslt-stylesheet>
              </assignment>
              <meta>
                <documentation />
                <checkpoint>false</checkpoint>
              </meta>
              <after-execution>
                <log>
                  <level>debug</level>
                  <parameters>
                    <input>
                      <from>response</from>
                    </input>
                  </parameters>
                </log>
              </after-execution>
              <location>:switch[1]:sequence[3]:assign[3]</location>
            </assign>
            <call-process>
              <process-name>:AutoPilot-OA-ITSM_Automation:Utilities:Generate Response</process-name>
              <parameters>
                <input>
                  <from>success status</from>
                  <to>status</to>
                </input>
                <input>
                  <value>Update Change Ticket</value>
                  <to>request type</to>
                </input>
                <input>
                  <from>response</from>
                  <to>data</to>
                </input>
                <output>
                  <from>json response</from>
                  <to>json response</to>
                </output>
              </parameters>
              <meta>
                <documentation />
                <run-mode-handling>
                  <run-mode>OCP</run-mode>
                  <allow-step-into>false</allow-step-into>
                </run-mode-handling>
                <checkpoint>false</checkpoint>
              </meta>
              <location>:switch[1]:sequence[3]:call-process[2]</location>
            </call-process>
          </sequence>
        </case>
        <location>:switch[1]</location>
      </switch>
      <assign>
        <meta>
          <documentation />
          <checkpoint>false</checkpoint>
        </meta>
        <before-execution>
          <log>
            <level>debug</level>
            <parameters>
              <input>
                <value>Output</value>
              </input>
              <input>
                <from>json response</from>
              </input>
            </parameters>
          </log>
        </before-execution>
        <location>:assign[3]</location>
      </assign>
    </sequence>
    <meta>
      <expose-to>
        <consumer>RULE</consumer>
        <consumer>SCHEDULE</consumer>
        <consumer>OCP</consumer>
      </expose-to>
      <documentation>
        <description></description>
        <version></version>
      </documentation>
      <logging-options>
        <is-enabled>true</is-enabled>
        <log-file-name>Update-Change-Ticket</log-file-name>
      </logging-options>
      <peer-location>
        <location>any</location>
      </peer-location>
      <record-metrics>true</record-metrics>
      <process-id>fbc892b1-1a00-43da-bbc5-e3510bb08f76</process-id>
      <author>admin</author>
      <category></category>
      <status></status>
      <keywords></keywords>
      <systems></systems>
      <last-modified-by>aoadmin</last-modified-by>
      <last-modified>1604382413447</last-modified>
    </meta>
  </process-def>
</process>