<process draft="false" dev-studio-version="7.6.01.00">
  <process-def name=":AutoPilot-OA-Operating_System_Utilities:Logging:Update Event Log Create Trace">
    <parameters>
      <input global="false" required="true">
        <description>XML document conforming to the Connection Details Concept that contains the information required to execute a command via command line.</description>
        <from>connection details</from>
        <to>connection details</to>
      </input>
      <input global="false" required="true">
        <description>Specifies the name of the collection object.</description>
        <from>collection name</from>
        <to>collection name</to>
      </input>
      <input global="false" required="true">
        <description>Specifies the providers (trace data collectors) to use for trace data collection. Use logman query providers to find the PName (named providers) from the registered provider list. Use the -pf option to list multiple providers. The -pf option identifies the input file containing the provider names. The provider names are enclosed by quotation marks ("")</description>
        <from>provider name</from>
        <to>provider name</to>
      </input>
      <input global="false" required="true">
        <description>Enter GUIDs enclosed by braces, flag masks, and integers (enable level). The flags are either in hexadecimal (OXFFFF) or (flag, flag) format.</description>
        <from>provider guid or flag masks or enable level</from>
        <to>flag guid or level</to>
      </input>
      <input global="false" required="true">
        <description>-o {Path or DSN!CounterLog}
Specifies the pathname of the output file that collects performance counter and trace data, or the location of the SQL database and dataset. To specify SQL using the DSN!CounterLog format, use the -f option in the command line. By default, the collection log file name is the collection query name suffixed by either .blg for performance counters, or .etl for trace data.</description>
        <from>output path</from>
        <to>output path</to>
      </input>
      <input global="false" required="true">
        <description>-f {bin or bincirc or csv or tsv or SQL}
Specifies the file format used for collecting performance counter and trace data. You can use binary, circular binary, comma and tab separated, or SQL database formats when collecting performance counters. You must use the -o option in the command line with the DNS!counter_log option. For SQL database formats, the Database System Name (DSN) must be predefined, and administrative credentials granted to write to the database. The dataset CounterLog is created in the database, and is specified by the DSN. Defaults to binary.</description>
        <from>output format</from>
        <to>output format</to>
      </input>
      <input global="false" required="false">
        <description>-maxValue
Specifies the maximum size of the collected log file in megabytes. If the log file exceeds the maximum size</description>
        <from>maximum file size</from>
        <to>max value</to>
      </input>
      <input global="false" required="false">
        <description>-ln LoggerName
Specifies a user-defined name for the event trace logging session. By default</description>
        <from>user defined logger name</from>
        <to>logger name</to>
      </input>
      <input global="false" required="false">
        <description>-bsValue
Specifies the buffer size in N kilobytes for trace data collections.</description>
        <from>buffer size</from>
        <to>buffer size</to>
      </input>
      <input global="false" required="false">
        <description>-ft[[HH:]MM:]SS
Specifies the flush timer interval in minutes and seconds for trace data collections.</description>
        <from>flush timer</from>
        <to>flush timer</to>
      </input>
      <input global="false" required="false">
        <description>-nb Min Max
Specifies the minimum and maximum number of buffers for trace data collection. Minimum default is the number of processors on the system plus two. Maximum default is at 25.
</description>
        <from>number of buffers</from>
        <to>number of buffers</to>
      </input>
      <input global="false" required="false">
        <description>-fd LoggerName
Flushes all the active buffers of an existing event trace session to a disk. Use this command in conjunction with the -ln LoggerName option.</description>
        <from>flush active buffers</from>
        <to>flush active buffers</to>
      </input>
      <input global="false" required="false">
        <description>configFileName
Specifies the pathname of the settings file that contains command line parameters.</description>
        <from>config filename</from>
        <to>config filename</to>
      </input>
      <input global="false" required="false">
        <description>-rf [[HH:]MM:]SS
Specifies that collections run for a set period of time.</description>
        <from>run period</from>
        <to>run period</to>
      </input>
      <input global="false" required="false">
        <description>-u UserName Password
Specifies the account name and password the collection query uses on local or remote systems. To start collecting data for collection queries, log Performance Logs and Alerts to the remote system. You need to use this option or the Run As command when you set up a configuration on a local computer that saves the performance data to a remote SQL server. You can use * as your password in the command line to produce a prompt for the password. The password does not appear when you type it at the password prompt.</description>
        <from>username and password</from>
        <to>username and password</to>
      </input>
      <input global="false" required="false">
        <description>-b M/D/YYYYH:MM:SS[{ AM or PM}]
Specifies begin-time for collections in a 24-hour format. You can also specify begin-time for collections in a 12-hour format by adding AM or PM in the command line. By default, the current day and time is used unless otherwise specified. Use the manual start option to start the collection immediately.</description>
        <from>begin</from>
        <to>begin</to>
      </input>
      <input global="false" required="false">
        <description>-e M/D/YYYYH:MM:SS[{ AM or PM}]
Specifies end-time for collections in a 24-hour format. You can also specify end-time for collections in a 12-hour format by adding AM or PM in the command line. By default, the current day and time is used unless otherwise specified. Use the manual stop and then the repeat option to specify a stop time before the actual current time, or you will receive an error message.</description>
        <from>end</from>
        <to>end</to>
      </input>
      <input global="false" required="false">
        <description>-v {NNNNN or MMDDHHMM}
Attaches the version control information to the end of the output file and path name. Use numeric NNNNNN format, or date format MMDDHHMM (month, day, 24-hour, minute) for version control.</description>
        <from>version control</from>
        <to>version control</to>
      </input>
      <output global="false" required="true">
        <description>XML document consisting of one or more &lt;line&gt; elements that contain the command response. Each  &lt;line&gt; element contains an index attribute indicating the order in which the information was returned by the command.</description>
        <to>output</to>
        <from>command output</from>
      </output>
      <output global="false" required="true">
        <description>Did the operation Succeed? Valid value: true.</description>
        <to>success</to>
        <from>exit code</from>
      </output>
    </parameters>
    <access />
    <sequence>
      <switch>
        <meta>
          <documentation />
          <run-mode-handling>
            <run-mode>OCP</run-mode>
            <allow-step-into>true</allow-step-into>
          </run-mode-handling>
          <checkpoint>false</checkpoint>
        </meta>
        <execute-all-applicable-cases>false</execute-all-applicable-cases>
        <default>
          <sequence />
        </default>
        <case applies-if-any-condition-true="false">
          <condition>
            <document>
              <input>
                <from>output format</from>
              </input>
            </document>
            <xpath-expression>
              <xpath-replacement-tokens />
              <xpath><![CDATA[. !='bin']]></xpath>
            </xpath-expression>
          </condition>
          <condition>
            <document>
              <input>
                <from>output format</from>
              </input>
            </document>
            <xpath-expression>
              <xpath-replacement-tokens />
              <xpath><![CDATA[. !='bincirc']]></xpath>
            </xpath-expression>
          </condition>
          <condition>
            <document>
              <input>
                <from>output format</from>
              </input>
            </document>
            <xpath-expression>
              <xpath-replacement-tokens />
              <xpath><![CDATA[. != 'csv']]></xpath>
            </xpath-expression>
          </condition>
          <condition>
            <document>
              <input>
                <from>output format</from>
              </input>
            </document>
            <xpath-expression>
              <xpath-replacement-tokens />
              <xpath><![CDATA[. !='tsv']]></xpath>
            </xpath-expression>
          </condition>
          <condition>
            <document>
              <input>
                <from>output format</from>
              </input>
            </document>
            <xpath-expression>
              <xpath-replacement-tokens />
              <xpath><![CDATA[. !='SQL']]></xpath>
            </xpath-expression>
          </condition>
          <sequence>
            <assign>
              <assignment>
                <output>
                  <to>output format</to>
                  <value>
                    <empty />
                  </value>
                </output>
              </assignment>
              <meta>
                <documentation />
                <checkpoint>false</checkpoint>
              </meta>
              <location>:switch[1]:sequence[2]:assign[1]</location>
            </assign>
          </sequence>
        </case>
        <location>:switch[1]</location>
      </switch>
      <call-process>
        <process-name>:AutoPilot-OA-Common_Utilities:Invoke Command</process-name>
        <parameters>
          <input>
            <from>connection details</from>
            <to>connection details</to>
          </input>
          <input>
            <value>
              <empty />
            </value>
            <xslt-stylesheet>
              <stylesheet-replacement-tokens>
                <replacement-token name="collection name">
                  <input global="false">
                    <from>collection name</from>
                  </input>
                </replacement-token>
                <replacement-token name="provider name">
                  <input global="false">
                    <from>provider name</from>
                  </input>
                </replacement-token>
                <replacement-token name="flag guid or level">
                  <input global="false">
                    <from>flag guid or level</from>
                  </input>
                </replacement-token>
                <replacement-token name="output path">
                  <input global="false">
                    <from>output path</from>
                  </input>
                </replacement-token>
                <replacement-token name="output format">
                  <input global="false">
                    <from>output format</from>
                  </input>
                </replacement-token>
                <replacement-token name="max value">
                  <input global="false">
                    <from>max value</from>
                  </input>
                </replacement-token>
                <replacement-token name="flush timer">
                  <input global="false">
                    <from>flush timer</from>
                  </input>
                </replacement-token>
                <replacement-token name="logger name">
                  <input global="false">
                    <from>logger name</from>
                  </input>
                </replacement-token>
                <replacement-token name="flush active buffers">
                  <input global="false">
                    <from>flush active buffers</from>
                  </input>
                </replacement-token>
                <replacement-token name="buffer size">
                  <input global="false">
                    <from>buffer size</from>
                  </input>
                </replacement-token>
                <replacement-token name="number of buffers">
                  <input global="false">
                    <from>number of buffers</from>
                  </input>
                </replacement-token>
                <replacement-token name="config filename">
                  <input global="false">
                    <from>config filename</from>
                  </input>
                </replacement-token>
                <replacement-token name="run period">
                  <input global="false">
                    <from>run period</from>
                  </input>
                </replacement-token>
                <replacement-token name="username and password">
                  <input global="false">
                    <from>username and password</from>
                  </input>
                </replacement-token>
                <replacement-token name="begin">
                  <input global="false">
                    <from>begin</from>
                  </input>
                </replacement-token>
                <replacement-token name="end">
                  <input global="false">
                    <from>end</from>
                  </input>
                </replacement-token>
                <replacement-token name="version control">
                  <input global="false">
                    <from>version control</from>
                  </input>
                </replacement-token>
              </stylesheet-replacement-tokens>
              <stylesheet><![CDATA[<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="1.0">
  <xsl:output indent="yes" />
  <xsl:template match="/">
    <fat-command>
      <command os-id="Cisco IOS">
        <xsl:text disable-output-escaping="no">show</xsl:text>
      </command>
      <command os-id="Linux">
        <xsl:text disable-output-escaping="no">/bin/echo "Not Supported"</xsl:text>
      </command>
      <command os-id="SunOS">
        <xsl:text disable-output-escaping="no">/usr/bin/echo "Not Supported"</xsl:text>
      </command>
      <command os-id="Windows Default">
        <xsl:text disable-output-escaping="no">logman create trace "${collection name}" -p "$[provider name]" $[flag guid or level] -o "$[output path]" -f ${output format}</xsl:text>
        <xsl:if test="string-length('${begin}')!=0">
          <xsl:text disable-output-escaping="no"> -b ${begin}</xsl:text>
        </xsl:if>
        <xsl:if test="string-length('${end}')!=0">
          <xsl:text disable-output-escaping="no"> -e ${end}</xsl:text>
        </xsl:if>
        <xsl:if test="string-length('${max value}')!=0">
          <xsl:text disable-output-escaping="no"> -max ${max value}</xsl:text>
        </xsl:if>
        <xsl:if test="string-length('${flush timer}')!=0">
          <xsl:text disable-output-escaping="no"> -ft ${flush timer}</xsl:text>
        </xsl:if>
        <xsl:if test="string-length('${logger name}')!=0">
          <xsl:text disable-output-escaping="no"> -ln ${logger name}</xsl:text>
        </xsl:if>
        <xsl:if test="string-length('${version control}')!=0">
          <xsl:text disable-output-escaping="no"> -v ${version control}</xsl:text>
        </xsl:if>
        <xsl:if test="string-length('${flush active buffers}')!=0">
          <xsl:text disable-output-escaping="no"> -fd ${flush active buffers}</xsl:text>
        </xsl:if>
        <xsl:if test="string-length('${buffer size}')!=0">
          <xsl:text disable-output-escaping="no"> -bs ${buffer size}</xsl:text>
        </xsl:if>
        <xsl:if test="string-length('${number of buffers}')!=0">
          <xsl:text disable-output-escaping="no"> -nb ${number of buffers}</xsl:text>
        </xsl:if>
        <xsl:if test="string-length('${config filename}')!=0">
          <xsl:text disable-output-escaping="no"> -config $[config filename]</xsl:text>
        </xsl:if>
        <xsl:if test="string-length('${run period}')!=0">
          <xsl:text disable-output-escaping="no"> -rf ${run period}</xsl:text>
        </xsl:if>
        <xsl:if test="string-length('$[username and password]')!=0">
          <xsl:text disable-output-escaping="no"> -u $[username and password]</xsl:text>
        </xsl:if>
      </command>
    </fat-command>
  </xsl:template>
</xsl:stylesheet>]]></stylesheet>
            </xslt-stylesheet>
            <to>command</to>
          </input>
          <output>
            <from>command output</from>
            <to>command output</to>
          </output>
          <output>
            <from>exit code</from>
            <to>exit code</to>
            <xpath-expression>
              <xpath-replacement-tokens />
              <xpath><![CDATA[string(.)=0]]></xpath>
            </xpath-expression>
          </output>
        </parameters>
        <meta>
          <documentation />
          <run-mode-handling>
            <run-mode>OCP</run-mode>
            <allow-step-into>false</allow-step-into>
          </run-mode-handling>
          <checkpoint>false</checkpoint>
        </meta>
        <after-execution>
          <console-output>
            <type>INFO</type>
            <summary>
              <concat>
                <input>
                  <value></value>
                </input>
              </concat>
            </summary>
            <detail>
              <concat>
                <input>
                  <value></value>
                </input>
              </concat>
            </detail>
          </console-output>
        </after-execution>
        <location>:call-process[1]</location>
      </call-process>
    </sequence>
    <meta>
      <expose-to>
        <consumer>RULE</consumer>
        <consumer>SCHEDULE</consumer>
      </expose-to>
      <documentation>
        <description>Manages and schedules event trace log collections on local and remote systems.</description>
        <version>1.0</version>
      </documentation>
      <peer-location>
        <location>any</location>
      </peer-location>
      <record-metrics>false</record-metrics>
      <process-id>3c99fd5c-fb8e-3ccf-887b-05b767adcfe4</process-id>
      <author />
      <category />
      <status />
      <keywords />
      <systems />
      <last-modified-by />
      <last-modified>1291031873476</last-modified>
    </meta>
  </process-def>
</process>