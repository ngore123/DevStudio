<process draft="false" dev-studio-version="7.5.02.08">
  <process-def name=":AutoPilot-OA-Operating_System_Utilities:Service_Controller:Update SC Failure">
    <parameters>
      <input global="false" required="true">
        <description>XML document conforming to the Connection Details Concept that contains the information required to execute a command via command line.</description>
        <from>connection details</from>
        <to>connection details</to>
      </input>
      <input global="false" required="false">
        <description>Specifies the name of the remote server on which the service is located. The name must use the Universal Naming Convention (UNC) format ("\\myserver"). To run SC.exe locally</description>
        <from>server name</from>
        <to>server name</to>
      </input>
      <input global="false" required="true">
        <description>Specifies the service name returned by the getkeyname operation.</description>
        <from>service name</from>
        <to>service name</to>
      </input>
      <input global="false" required="false">
        <description>Specifies the length of the period (in seconds) with no failures after which the failure count should be reset to 0. This parameter must be used in conjunction with the actions= parameter.</description>
        <from>error free period</from>
        <to>reset</to>
      </input>
      <input global="false" required="false">
        <description>Specifies the failure actions and their delay time (in milliseconds) separated by the forward slash (/). The following actions are valid: run, restart, and reboot. This parameter must be used in conjunction with the reset= parameter. Use actions= "" to take no action upon failure.</description>
        <from>failure actions and delay time</from>
        <to>actions</to>
      </input>
      <input global="false" required="false">
        <description>Specifies the message to be broadcast upon failure of the service.</description>
        <from>broadcast message</from>
        <to>reboot</to>
      </input>
      <input global="false" required="false">
        <description>Specifies the command line to be run upon failure of the service. For more information about how to run a batch or VBS file upon failure, see Remarks.</description>
        <from>command line</from>
        <to>command</to>
      </input>
      <output global="false" required="true">
        <description>XML document consisting of one or more &lt;line&gt; elements that contain the command response. Each  &lt;line&gt; element contains an index attribute indicating the order in which the information was returned by the command.</description>
        <to>output</to>
        <from>command output</from>
      </output>
      <output global="false" required="true">
        <description>Did the operation Succeed? Valid value: true.</description>
        <to>success</to>
        <from>exit code</from>
      </output>
    </parameters>
    <access />
    <sequence>
      <call-process>
        <process-name>:AutoPilot-OA-Common_Utilities:Invoke Command</process-name>
        <parameters>
          <input>
            <from>connection details</from>
            <to>connection details</to>
          </input>
          <input>
            <value>
              <empty />
            </value>
            <xslt-stylesheet>
              <stylesheet-replacement-tokens>
                <replacement-token name="server name">
                  <input global="false">
                    <from>server name</from>
                  </input>
                </replacement-token>
                <replacement-token name="service name">
                  <input global="false">
                    <from>service name</from>
                  </input>
                </replacement-token>
                <replacement-token name="actions">
                  <input global="false">
                    <from>actions</from>
                  </input>
                </replacement-token>
                <replacement-token name="reset">
                  <input global="false">
                    <from>reset</from>
                  </input>
                </replacement-token>
                <replacement-token name="reboot">
                  <input global="false">
                    <from>reboot</from>
                  </input>
                </replacement-token>
                <replacement-token name="command">
                  <input global="false">
                    <from>command</from>
                  </input>
                </replacement-token>
              </stylesheet-replacement-tokens>
              <stylesheet><![CDATA[<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="1.0">
  <xsl:output indent="yes" />
  <xsl:template match="/">
    <fat-command>
      <command os-id="Cisco IOS">
        <xsl:text disable-output-escaping="no">show</xsl:text>
      </command>
      <command os-id="Linux">
        <xsl:text disable-output-escaping="no">/bin/echo "Not Supported"</xsl:text>
      </command>
      <command os-id="SunOS">
        <xsl:text disable-output-escaping="no">/usr/bin/echo "Not Supported"</xsl:text>
      </command>
      <command os-id="Windows Default">
        <xsl:text disable-output-escaping="no">sc</xsl:text>
        <xsl:if test="string-length('$[server name]')!=0">
          <xsl:text disable-output-escaping="no"> $[server name]</xsl:text>
        </xsl:if>
        <xsl:text disable-output-escaping="no"> failure</xsl:text>
        <xsl:if test="string-length('${service name}')!=0">
          <xsl:text disable-output-escaping="no"> ${service name}</xsl:text>
        </xsl:if>
        <xsl:if test="string-length('${reset}')!=0">
          <xsl:text disable-output-escaping="no"> reset= ${reset}</xsl:text>
        </xsl:if>
        <xsl:if test="string-length('${reboot}')!=0">
          <xsl:text disable-output-escaping="no"> reboot= "${reboot}"</xsl:text>
        </xsl:if>
        <xsl:if test="string-length('${command}')!=0">
          <xsl:text disable-output-escaping="no"> command= ${command}</xsl:text>
        </xsl:if>
        <xsl:if test="string-length('${actions}')!=0">
          <xsl:text disable-output-escaping="no"> actions= ${actions}</xsl:text>
        </xsl:if>
      </command>
    </fat-command>
  </xsl:template>
</xsl:stylesheet>]]></stylesheet>
            </xslt-stylesheet>
            <to>command</to>
          </input>
          <output>
            <from>command output</from>
            <to>command output</to>
          </output>
          <output>
            <from>exit code</from>
            <to>exit code</to>
            <xpath-expression>
              <xpath-replacement-tokens />
              <xpath><![CDATA[string(.)=0]]></xpath>
            </xpath-expression>
          </output>
        </parameters>
        <meta>
          <documentation />
          <run-mode-handling>
            <run-mode>SEMI_AUTOMATIC</run-mode>
            <allow-step-into>false</allow-step-into>
          </run-mode-handling>
          <checkpoint>false</checkpoint>
        </meta>
        <after-execution>
          <console-output>
            <type>INFO</type>
            <summary>
              <concat>
                <input>
                  <value></value>
                </input>
              </concat>
            </summary>
            <detail>
              <concat>
                <input>
                  <value></value>
                </input>
              </concat>
            </detail>
          </console-output>
        </after-execution>
        <location>:call-process[1]</location>
      </call-process>
    </sequence>
    <meta>
      <expose-to>
        <consumer>RULE</consumer>
        <consumer>SCHEDULE</consumer>
      </expose-to>
      <documentation>
        <description>Specifies what action to take upon failure of the service.</description>
        <version>1.0</version>
      </documentation>
      <peer-location>
        <location>any</location>
      </peer-location>
      <record-metrics>false</record-metrics>
    </meta>
  </process-def>
</process>