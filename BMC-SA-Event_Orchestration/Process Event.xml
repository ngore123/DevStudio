<process draft="false" dev-studio-version="20.02.00">
  <process-def name=":BMC-SA-Event_Orchestration:Process Event">
    <parameters>
      <input global="false" required="true">
        <description>Event data in JSON format as below:

{
            "p_origin": "NT_JOBS_PROCESS.5812.PROCStatus", 
            "mc_tool_address": "", 
            "mc_origin_sev": "4", 
            "mc_propagations": "[pn_server_clm-pun-sodket:800,ts_event_gateway:1369]", 
            "itsm_manufacturer": "", 
            "p_owner": "Patrol", 
            "mc_parameter_threshold": "", 
            "mc_modhist": "[pncell_clm-pun-sodket]", 
            "p_expectancy": "STORED", 
            "p_instance": "5812", 
            "itsm_location": "", 
            "mc_origin_key": "296515", 
            "mc_object_owner": "", 
            "pes": "0", 
            "mc_tool_time": "1546596606", 
            "mc_smc_impact": "IMPACTING", 
            "mc_cause": "0", 
            "mc_bad_slot_names": "[]", 
            "mc_host_address": "10.133.189.31", 
            "date_reception": "1546596606", 
            "p_agent": "clm-pun-sodm1b_3188", 
            "mc_using_organization_id": "", 
            "mc_tool_id": "", 
            "event_handle": "2011", 
            "pes_icon_name": "", 
            "mc_event_model_version": "1.1.00", 
            "mc_associations": "[]", 
            "p_type": "ALARM", 
            "mc_abstraction": "[]", 
            "status": "OPEN", 
            "mc_relationships": "0/0", 
            "mc_smc_type": "BMC_ComputerSystem", 
            "mc_object_uri": "", 
            "mc_timeout": "0", 
            "p_diary_text": "[]", 
            "p_diary_operator": "[]", 
            "mc_location": "Unknown", 
            "mc_origin_class": "PATROL Agent", 
            "pes_alert_time": "", 
            "pes_custom_id2": "", 
            "mc_client_address": "10.133.142.206", 
            "pes_custom_id1": "", 
            "mc_long_msg": "", 
            "pn_parameter_id": 501004513, 
            "pes_ave10": "", 
            "mc_tool_key": "", 
            "mc_tool_rule": "", 
            "pn_device_name": "clm-pun-sodm1b_3188", 
            "mc_tool_sev": "", 
            "mc_smc_causes": "[]", 
            "pes_last10_ts": "", 
            "itsm_model_version": "", 
            "pes_last10_tp": "0", 
            "mc_smc_effects": "[]", 
            "mc_tool_uri": "", 
            "mc_collectors": "[1.1,2.1.1,3.1.1,4.1,5.1,7.13.1,13.1.1]", 
            "mc_history": "[]", 
            "p_status": "OPEN", 
            "pn_detail_diag_count": "0", 
            "mc_abstracted": "[]", 
            "mc_origin": "clm-pun-sodls9:3192", 
            "mc_date_modification": "1546596622", 
            "mc_event_subcategory": "SYSTEM", 
            "pes_parent_instance": "", 
            "pn_object_id": "5417", 
            "mc_using_organization": "", 
            "mc_host_class": "NT6.2 ", 
            "mc_object_class": "NT_JOBS_PROCESS", 
            "mc_bad_slot_values": "[]", 
            "p_agent_address": "10.133.189.31", 
            "itsm_incident_id": "", 
            "date": "20190103221006.000000-720", 
            "mc_original_priority": "PRIORITY_5", 
            "msg": "PROCStatus for NT_JOBS_PROCESS/5812 is in ALARM current value is 1.000000", 
            "p_class_group": "", 
            "mc_service": "", 
            "itsm_type": "", 
            "event_identification_type": "Internal", 
            "mc_tool_class": "PATROL Agent", 
            "mc_smc_id": "clm-pun-sodket_25", 
            "repeat_count": "0", 
            "CLASS": "PATROL_EV", 
            "p_class": "11", 
            "mc_parameter_value": "1.000000", 
            "mc_owner": "", 
            "mc_parameter": "PROCStatus", 
            "mc_parameter_unit": "", 
            "mc_priority": "PRIORITY_5", 
            "mc_account": "", 
            "itsm_category": "", 
            "mc_notes": "[]", 
            "mc_object": "5812", 
            "mc_host_id": "25", 
            "pes_alert_date": "", 
            "adapter_host": "", 
            "mc_incident_report_time": "0", 
            "p_source_id": "296515", 
            "pes_tz": "", 
            "mc_effects": "[]", 
            "pes_param_status": "", 
            "server_id": "4", 
            "pes_patrol_home": "", 
            "mc_operations": "[0x5c2f310e,im_internal.mrl:refine dden_policy_rule,PATROL_EVENT,Dynamic Data Enrichment,']", 
            "p_handler": "Patrol", 
            "mc_smc_priority": "0", 
            "p_agent_port": "3192", 
            "p_agent_version": "V11.0.00i", 
            "pn_object_class_id": "501004", 
            "mc_original_severity": "CRITICAL", 
            "p_diary": "", 
            "itsm_item": "", 
            "pes_user_defined": "", 
            "mc_local_reception_time": "1546596622", 
            "mc_event_relations": "[]", 
            "pes_alarm_min": "", 
            "mc_tool": "clm-pun-sodls9:3192", 
            "p_args": "[Alarm #1,global,PROCStatus,NT_JOBS_PROCESS.5812,1,1.00,1]", 
            "itsm_product_name": "", 
            "duration": "0", 
            "pn_detail_diag": "0", 
            "pes_alarm_max": "", 
            "administrator": "", 
            "mc_host": "clm-pun-sodm1b_3188", 
            "mc_smc_alias": "BMC_ComputerSystem:clm-pun-sodm1b_3188", 
            "mc_event_category": "", 
            "p_catalog": "0", 
            "pes_tcp_port": "0", 
            "itsm_company": "", 
            "mc_ueid": "clm-pun-sodls9@10.133.189.31:3192.1544850413.296515", 
            "mc_arrival_time": "1546596622", 
            "itsm_operational_category3": "", 
            "itsm_operational_category2": "", 
            "itsm_operational_category1": "", 
            "severity": "CRITICAL", 
            "p_application": "NT_JOBS_PROCESS", 
            "p_diary_time": "[]", 
            "mc_notification_history": "[]", 
            "itsm_incident_status": "", 
            "pes_last10": "", 
            "mc_tool_suggestion": "", 
            "mc_action_count": "0", 
            "mc_incident_time": "1546596606", 
            "mc_relation_source": "", 
            "p_node": "clm-pun-sodm1b_3188", 
            "pes_udp_port": "0", 
            "mc_acl": "[]"
        }</description>
        <from>event data</from>
        <to>event data</to>
      </input>
      <input global="false" required="true">
        <description>A string that is a combination of eventType-actionType-actionName - for example: ServiceDown-Remediation-Restart.</description>
        <from>action id</from>
        <to>action id</to>
      </input>
      <output global="false" required="false">
        <to>process event data</to>
        <from>process event data</from>
      </output>
    </parameters>
    <access />
    <sequence>
      <call-process>
        <process-name>:BMC-SA-Event_Orchestration:Utilities:Extract Event and Configuration Data</process-name>
        <parameters>
          <input>
            <from>event data</from>
            <to>event data</to>
          </input>
          <input>
            <from>action id</from>
            <to>action id</to>
          </input>
          <output>
            <from>event source type</from>
            <to>event source type</to>
          </output>
          <output>
            <from>itsm type</from>
            <to>itsm type</to>
          </output>
          <output>
            <from>event type</from>
            <to>event type</to>
          </output>
          <output>
            <from>all configurations</from>
            <to>all configurations</to>
          </output>
          <output>
            <from>event data</from>
            <to>event data</to>
          </output>
          <output>
            <from>error message</from>
            <to>error message</to>
          </output>
          <output>
            <from>authentication token</from>
            <to>authentication token</to>
          </output>
          <output>
            <from>target connection data</from>
            <to>target connection data</to>
          </output>
          <output>
            <from>flags</from>
            <to>flags</to>
          </output>
          <output>
            <from>itsm data</from>
            <to>itsm data</to>
          </output>
          <output>
            <from>action id</from>
            <to>action id</to>
          </output>
          <output>
            <from>ts auth token</from>
            <to>ts auth token</to>
          </output>
          <output>
            <from>itsm authentication token</from>
            <to>itsm authentication token</to>
          </output>
        </parameters>
        <meta>
          <documentation />
          <run-mode-handling>
            <run-mode>OCP</run-mode>
            <allow-step-into>false</allow-step-into>
          </run-mode-handling>
          <checkpoint>false</checkpoint>
        </meta>
        <location>:call-process[1]</location>
      </call-process>
      <call-process>
        <process-name>:BMC-SA-Event_Orchestration:Triage:Pre-Triage Actions</process-name>
        <parameters>
          <input>
            <from>event source type</from>
            <to>event source type</to>
          </input>
          <input>
            <from>itsm type</from>
            <to>itsm type</to>
          </input>
          <input>
            <from>event type</from>
            <to>event type</to>
          </input>
          <input>
            <from>all configurations</from>
            <to>all configurations</to>
          </input>
          <input>
            <from>event data</from>
            <to>event data</to>
          </input>
          <input>
            <from>authentication token</from>
            <to>authentication token</to>
          </input>
          <input>
            <from>target connection data</from>
            <to>target connection data</to>
          </input>
          <input>
            <from>flags</from>
            <to>flags</to>
          </input>
          <input>
            <from>ts auth token</from>
            <to>event source authentication token</to>
          </input>
          <input>
            <from>itsm authentication token</from>
            <to>itsm authentication token</to>
          </input>
          <output>
            <from>pre triage response data</from>
            <to>pre triage response data</to>
          </output>
          <output>
            <from>flags</from>
            <to>flags</to>
          </output>
        </parameters>
        <meta>
          <documentation />
          <run-mode-handling>
            <run-mode>OCP</run-mode>
            <allow-step-into>false</allow-step-into>
          </run-mode-handling>
          <checkpoint>false</checkpoint>
        </meta>
        <location>:call-process[2]</location>
      </call-process>
      <call-process>
        <process-name>:BMC-SA-Event_Orchestration:Triage:Perform Triage</process-name>
        <parameters>
          <input>
            <from>event source type</from>
            <to>event source type</to>
          </input>
          <input>
            <from>itsm type</from>
            <to>itsm type</to>
          </input>
          <input>
            <from>event type</from>
            <to>event type</to>
          </input>
          <input>
            <from>all configurations</from>
            <to>all configurations</to>
          </input>
          <input>
            <from>event data</from>
            <to>event data</to>
          </input>
          <input>
            <from>authentication token</from>
            <to>authentication token</to>
          </input>
          <input>
            <from>target connection data</from>
            <to>target connection data</to>
          </input>
          <input>
            <from>pre triage response data</from>
            <to>pre triage response data</to>
          </input>
          <input>
            <from>flags</from>
            <to>flags</to>
          </input>
          <input>
            <from>ts auth token</from>
            <to>ts auth token</to>
          </input>
          <input>
            <from>action id</from>
            <to>action id</to>
          </input>
          <input>
            <from>itsm authentication token</from>
            <to>itsm authentication token</to>
          </input>
          <output>
            <from>triage response</from>
            <to>triage response</to>
          </output>
          <output>
            <from>flags</from>
            <to>flags</to>
          </output>
        </parameters>
        <meta>
          <documentation />
          <run-mode-handling>
            <run-mode>OCP</run-mode>
            <allow-step-into>false</allow-step-into>
          </run-mode-handling>
          <checkpoint>false</checkpoint>
        </meta>
        <location>:call-process[3]</location>
      </call-process>
      <call-process>
        <process-name>:BMC-SA-Event_Orchestration:Triage:Post-Triage Actions</process-name>
        <parameters>
          <input>
            <from>event source type</from>
            <to>event source type</to>
          </input>
          <input>
            <from>itsm type</from>
            <to>itsm type</to>
          </input>
          <input>
            <from>event type</from>
            <to>event type</to>
          </input>
          <input>
            <from>all configurations</from>
            <to>all configurations</to>
          </input>
          <input>
            <from>event data</from>
            <to>event data</to>
          </input>
          <input>
            <from>authentication token</from>
            <to>authentication token</to>
          </input>
          <input>
            <from>target connection data</from>
            <to>target connection data</to>
          </input>
          <input>
            <from>flags</from>
            <to>flags</to>
          </input>
          <input>
            <from>triage response</from>
            <to>triage response</to>
          </input>
          <input>
            <from>ts auth token</from>
            <to>ts auth token</to>
          </input>
          <input>
            <from>action id</from>
            <to>action id</to>
          </input>
          <input>
            <from>itsm data</from>
            <to>itsm data</to>
          </input>
          <input>
            <from>itsm authentication token</from>
            <to>itsm authentication token</to>
          </input>
          <output>
            <from>post triage response data</from>
            <to>post triage response data</to>
          </output>
          <output>
            <from>flags</from>
            <to>flags</to>
          </output>
          <output>
            <from>event data</from>
            <to>event data</to>
          </output>
          <output>
            <from>itsm data</from>
            <to>itsm data</to>
          </output>
        </parameters>
        <meta>
          <documentation />
          <run-mode-handling>
            <run-mode>OCP</run-mode>
            <allow-step-into>false</allow-step-into>
          </run-mode-handling>
          <checkpoint>false</checkpoint>
        </meta>
        <location>:call-process[4]</location>
      </call-process>
      <call-process>
        <process-name>:BMC-SA-Event_Orchestration:Remediate:Pre-Remediation Actions</process-name>
        <parameters>
          <input>
            <from>event source type</from>
            <to>event source type</to>
          </input>
          <input>
            <from>itsm type</from>
            <to>itsm type</to>
          </input>
          <input>
            <from>event type</from>
            <to>event type</to>
          </input>
          <input>
            <from>all configurations</from>
            <to>all configurations</to>
          </input>
          <input>
            <from>event data</from>
            <to>event data</to>
          </input>
          <input>
            <from>authentication token</from>
            <to>authentication token</to>
          </input>
          <input>
            <from>target connection data</from>
            <to>target connection data</to>
          </input>
          <input>
            <from>post triage response data</from>
            <to>post triage response data</to>
          </input>
          <input>
            <from>flags</from>
            <to>flags</to>
          </input>
          <input>
            <from>itsm data</from>
            <to>itsm data</to>
          </input>
          <input>
            <from>ts auth token</from>
            <to>ts auth token</to>
          </input>
          <input>
            <from>action id</from>
            <to>action id</to>
          </input>
          <input>
            <from>itsm authentication token</from>
            <to>itsm authentication token</to>
          </input>
          <output>
            <from>pre remediation response data</from>
            <to>pre remediation response data</to>
          </output>
          <output>
            <from>flags</from>
            <to>flags</to>
          </output>
        </parameters>
        <meta>
          <documentation />
          <run-mode-handling>
            <run-mode>OCP</run-mode>
            <allow-step-into>false</allow-step-into>
          </run-mode-handling>
          <checkpoint>false</checkpoint>
        </meta>
        <location>:call-process[5]</location>
      </call-process>
      <call-process>
        <process-name>:BMC-SA-Event_Orchestration:Remediate:Perform Remediation</process-name>
        <parameters>
          <input>
            <from>event source type</from>
            <to>event source type</to>
          </input>
          <input>
            <from>itsm type</from>
            <to>itsm type</to>
          </input>
          <input>
            <from>all configurations</from>
            <to>all configurations</to>
          </input>
          <input>
            <from>event data</from>
            <to>event data</to>
          </input>
          <input>
            <from>event type</from>
            <to>event type</to>
          </input>
          <input>
            <from>authentication token</from>
            <to>authentication token</to>
          </input>
          <input>
            <from>target connection data</from>
            <to>target connection data</to>
          </input>
          <input>
            <from>pre remediation response data</from>
            <to>pre remediation response data</to>
          </input>
          <input>
            <from>flags</from>
            <to>flags</to>
          </input>
          <input>
            <from>ts auth token</from>
            <to>ts auth token</to>
          </input>
          <input>
            <from>action id</from>
            <to>action id</to>
          </input>
          <input>
            <from>itsm authentication token</from>
            <to>itsm authentication token</to>
          </input>
          <output>
            <from>flags</from>
            <to>flags</to>
          </output>
          <output>
            <from>remediation response</from>
            <to>remediation response</to>
          </output>
        </parameters>
        <meta>
          <documentation />
          <run-mode-handling>
            <run-mode>OCP</run-mode>
            <allow-step-into>false</allow-step-into>
          </run-mode-handling>
          <checkpoint>false</checkpoint>
        </meta>
        <location>:call-process[6]</location>
      </call-process>
      <call-process>
        <process-name>:BMC-SA-Event_Orchestration:Remediate:Post-Remediation Actions</process-name>
        <parameters>
          <input>
            <from>event source type</from>
            <to>event source type</to>
          </input>
          <input>
            <from>itsm type</from>
            <to>itsm type</to>
          </input>
          <input>
            <from>event type</from>
            <to>event type</to>
          </input>
          <input>
            <from>all configurations</from>
            <to>all configurations</to>
          </input>
          <input>
            <from>event data</from>
            <to>event data</to>
          </input>
          <input>
            <from>authentication token</from>
            <to>authentication token</to>
          </input>
          <input>
            <from>target connection data</from>
            <to>target connection data</to>
          </input>
          <input>
            <from>flags</from>
            <to>flags</to>
          </input>
          <input>
            <from>pre remediation response data</from>
            <to>change</to>
            <xpath-expression>
              <xpath-replacement-tokens />
              <xpath><![CDATA[//change/text()]]></xpath>
            </xpath-expression>
          </input>
          <input>
            <from>post triage response data</from>
            <to>itsm data</to>
          </input>
          <input>
            <from>ts auth token</from>
            <to>ts auth token</to>
          </input>
          <input>
            <from>action id</from>
            <to>action id</to>
          </input>
          <input>
            <from>itsm authentication token</from>
            <to>itsm authentication token</to>
          </input>
          <output>
            <from>post remediation response data</from>
            <to>post remediation response data</to>
          </output>
          <output>
            <from>flags</from>
            <to>flags</to>
          </output>
        </parameters>
        <meta>
          <documentation />
          <run-mode-handling>
            <run-mode>OCP</run-mode>
            <allow-step-into>false</allow-step-into>
          </run-mode-handling>
          <checkpoint>false</checkpoint>
        </meta>
        <after-execution>
          <log>
            <level>debug</level>
            <parameters>
              <input>
                <value>==== Process Event Output=====</value>
              </input>
              <input>
                <from>triage response</from>
              </input>
              <input>
                <from>post triage response data</from>
              </input>
              <input>
                <from>pre remediation response data</from>
              </input>
              <input>
                <from>remediation response data</from>
              </input>
            </parameters>
          </log>
        </after-execution>
        <location>:call-process[7]</location>
      </call-process>
      <call-process>
        <process-name>:BMC-SA-Event_Orchestration:Utilities:Construct Response</process-name>
        <parameters>
          <input>
            <from>triage response</from>
            <to>triage response</to>
          </input>
          <input>
            <from>remediation response</from>
            <to>remediation response</to>
          </input>
          <input>
            <from>post remediation response data</from>
            <to>va.idation response</to>
          </input>
          <output>
            <from>process event data</from>
            <to>process event data</to>
          </output>
        </parameters>
        <meta>
          <documentation />
          <run-mode-handling>
            <run-mode>OCP</run-mode>
            <allow-step-into>false</allow-step-into>
          </run-mode-handling>
          <checkpoint>false</checkpoint>
        </meta>
        <location>:call-process[8]</location>
      </call-process>
    </sequence>
    <meta>
      <expose-to>
        <consumer>RULE</consumer>
        <consumer>SCHEDULE</consumer>
        <consumer>OCP</consumer>
        <consumer>SOAP</consumer>
      </expose-to>
      <documentation>
        <description>Accepts an event from an rule and perform Triage and Remdiation.
1. Extract configuration related to the event 
2. Perform Triage
3. Perform Remediation.

Note: Extracting configurtion data can determine if Triage and Remediation should proceed. The decision to proceed further is taken inside each workflow in the beginning.</description>
        <version></version>
      </documentation>
      <logging-options>
        <is-enabled>true</is-enabled>
        <log-file-name>Process-Event.log</log-file-name>
      </logging-options>
      <peer-location>
        <location>any</location>
      </peer-location>
      <record-metrics>true</record-metrics>
      <process-id>a5b60b1b-f0ff-4887-9d74-e4042e910341</process-id>
      <author>Ranganath Samudrala</author>
      <category>Event Orchestration</category>
      <status></status>
      <keywords></keywords>
      <systems></systems>
      <last-modified-by>aoadmin</last-modified-by>
      <last-modified>1594653766476</last-modified>
    </meta>
  </process-def>
</process>