<process draft="false" dev-studio-version="7.6.02.05">
  <process-def name=":RBA-AD-VMware_Infrastructure:Utilities:v5.0:VM_Configuration_Operations:Construct Item for Update CPU Configuration">
    <parameters>
      <input global="false" required="true">
        <description>Virtual machine used to make the method call.  

Valid value:  String
</description>
        <from>virtual machine</from>
        <to>virtual machine</to>
      </input>
      <input global="false" required="false">
        <description>Number of virtual processors in a virtual machine.

Valid values: Number

Note: This number (number of virtual CPUs) must be a multiple of the number of Cores per Socket.
</description>
        <from>number of CPUs</from>
        <to>number of CPUs</to>
      </input>
      <input global="false" required="false">
        <description>Number of cores among which to distribute CPUs in this virtual machine. 

This element is only supported in vSphere version 5.0 and above.

Valid Values : Number

Note: Number of Cores per Socket cannot be greater than the number of virtual CPUs in the VM.</description>
        <from>number of Cores per Socket</from>
        <to>number of Cores per Socket</to>
      </input>
      <input global="false" required="false">
        <description>Indicates whether or not virtual processors can be added to the virtual machine while it is running. This attribute can only be set when the virtual machine is powered-off. 

Valid Values : true, false</description>
        <from>CPU hot add enabled</from>
        <to>CPU hot add enabled</to>
      </input>
      <input global="false" required="false">
        <description>Indicates whether or not virtual processors can be removed from the virtual machine while it is running. This attribute can only be set when the virtual machine is powered-off. 

Valid Values : true, false</description>
        <from>CPU hot remove enabled</from>
        <to>CPU hot remove enabled</to>
      </input>
      <input global="false" required="false">
        <description>CPU allocation reservation [optional]
        Amount of resource that is guaranteed available to the virtual machine or resource pool. Reserved resources are not wasted if they are not used. If the utilization is less than the reservation, the resources can be utilized by other running virtual machines. Unit is MHz.</description>
        <from>CPU allocation reservation</from>
        <to>CPU allocation reservation</to>
      </input>
      <input global="false" required="false">
        <description>CPU allocation limit [optional]
The utilization of a virtual machine/resource pool will not exceed this limit, even if there are available resources. This is typically used to ensure a consistent performance of virtual machines / resource pools independent of available resources. If set to -1, then there is no fixed limit on resource usage (only bounded by available resources and shares). Unit is MHz. </description>
        <from>CPU allocation limit</from>
        <to>CPU allocation limit</to>
      </input>
      <input global="false" required="false">
        <description>CPU allocation shares [optional]
The number of shares allocated. Used to determine resource allocation in case of resource contention. This value is only set if level is set to custom. If level is not set to custom, this value is ignored. Therefore, only shares with custom values can be compared. 
There is no unit for this value. It is a relative measure based on the settings for other resource pools.</description>
        <from>CPU allocation shares</from>
        <to>CPU allocation shares</to>
      </input>
      <input global="false" required="false">
        <description>CPU allocation level [optional]
          The allocation level. The level is a simplified view of shares. Levels map to a pre-determined set of numeric values for shares. If the shares value does not map to a predefined size, then the level is set as custom.

valid values: 
custom - Shares are specified in the "shares" column.  
high - Shares = 2000 * number of virtual CPUs
low - Shares = 500 * number of virtual CPUs
normal - Shares = 1000 * number of virtual CPUs</description>
        <from>CPU allocation level</from>
        <to>CPU allocation level</to>
      </input>
      <output global="false" required="false">
        <to>items</to>
        <from>items</from>
      </output>
    </parameters>
    <access />
    <sequence>
      <call-process>
        <process-name>:RBA-AD-VMware_Infrastructure:Utilities:VM_Configuration_Operations:Construct CPU Allocation Parameters</process-name>
        <parameters>
          <input>
            <from>CPU allocation reservation</from>
            <to>CPU allocation reservation</to>
          </input>
          <input>
            <from>CPU allocation limit</from>
            <to>CPU allocation limit</to>
          </input>
          <input>
            <from>CPU allocation shares</from>
            <to>CPU allocation shares</to>
          </input>
          <input>
            <from>CPU allocation level</from>
            <to>CPU allocation level</to>
          </input>
          <output>
            <from>cpu allocation</from>
            <to>cpu allocation</to>
          </output>
        </parameters>
        <meta>
          <documentation />
          <run-mode-handling>
            <run-mode>OCP</run-mode>
            <allow-step-into>false</allow-step-into>
          </run-mode-handling>
          <checkpoint>false</checkpoint>
        </meta>
        <after-execution>
          <console-output>
            <type>INFO</type>
            <summary>
              <concat>
                <input>
                  <value></value>
                </input>
              </concat>
            </summary>
            <detail>
              <concat>
                <input>
                  <value></value>
                </input>
              </concat>
            </detail>
          </console-output>
        </after-execution>
        <location>:call-process[1]</location>
      </call-process>
      <assign>
        <assignment>
          <output>
            <to>items</to>
            <value>
              <empty />
            </value>
          </output>
          <xslt-stylesheet>
            <stylesheet-replacement-tokens>
              <replacement-token name="num-cpus">
                <input global="false">
                  <from>number of CPUs</from>
                </input>
              </replacement-token>
              <replacement-token name="vm">
                <input global="false">
                  <from>virtual machine</from>
                </input>
              </replacement-token>
              <replacement-token name="cpu allocation">
                <input global="false">
                  <from>cpu allocation</from>
                </input>
              </replacement-token>
              <replacement-token name="CPU hot add enabled">
                <input global="false">
                  <from>CPU hot add enabled</from>
                </input>
              </replacement-token>
              <replacement-token name="CPU hot remove enabled">
                <input global="false">
                  <from>CPU hot remove enabled</from>
                </input>
              </replacement-token>
              <replacement-token name="number of Cores per Socket">
                <input global="false">
                  <from>number of Cores per Socket</from>
                </input>
              </replacement-token>
            </stylesheet-replacement-tokens>
            <stylesheet><![CDATA[<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="1.0">
  <xsl:output indent="no" />
  <xsl:template match="/">
    <items>
      <item>
        <parameters>
          <virtual-machine>${vm}</virtual-machine>
          <spec>
            <num-cpus>${num-cpus}</num-cpus>
            <num-cores-per-socket>${number of Cores per Socket}</num-cores-per-socket>
            <cpu-hot-add-enabled>${CPU hot add enabled}</cpu-hot-add-enabled>
            <cpu-hot-remove-enabled>${CPU hot remove enabled}</cpu-hot-remove-enabled>
            ${cpu allocation}
          </spec>
        </parameters>
      </item>
    </items>
  </xsl:template>
</xsl:stylesheet>]]></stylesheet>
          </xslt-stylesheet>
        </assignment>
        <meta>
          <documentation />
          <checkpoint>false</checkpoint>
        </meta>
        <location>:assign[1]</location>
      </assign>
    </sequence>
    <meta>
      <expose-to>
        <consumer>RULE</consumer>
        <consumer>SCHEDULE</consumer>
      </expose-to>
      <documentation>
        <description>Constructs &lt;items&gt; for Update CPU Configuration operation</description>
        <version></version>
      </documentation>
      <peer-location>
        <location>any</location>
      </peer-location>
      <record-metrics>false</record-metrics>
      <process-id>ba198071-8c1b-3a25-ac12-31ad6a579070</process-id>
      <author>admin</author>
      <category></category>
      <status></status>
      <keywords></keywords>
      <systems></systems>
      <last-modified-by>admin</last-modified-by>
      <last-modified>1363088453229</last-modified>
    </meta>
  </process-def>
</process>