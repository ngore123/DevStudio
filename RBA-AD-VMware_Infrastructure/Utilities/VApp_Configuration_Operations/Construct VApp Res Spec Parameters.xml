<process draft="false" dev-studio-version="7.6.01.04">
  <process-def name=":RBA-AD-VMware_Infrastructure:Utilities:VApp_Configuration_Operations:Construct VApp Res Spec Parameters">
    <parameters>
      <input global="false" required="false">
        <description>In a resource pool with an expandable reservation, the reservation on a resource pool can grow beyond the specified value, if the parent resource pool has unreserved resources. A non-expandable reservation is called a fixed reservation. This property is ignored for virtual machines.

Valid value: “true” and “false”
</description>
        <from>cpu allocation expandable reservation</from>
        <to>cpu allocation expandable reservation</to>
      </input>
      <input global="false" required="false">
        <description>The utilization of a virtual machine or a resource pool must not
exceed this limit, even if there are available resources
This is typically used to ensure a consistent performance of virtual
machines or resource pools independent of available resources. If
limit is set to -1, there is no fixed limit on resource usage and is only
bounded by available resources and shares.
The unit of measurement is MHz.

valid value:Number
</description>
        <from>cpu allocation limit</from>
        <to>cpu allocation limit</to>
      </input>
      <input global="false" required="false">
        <description>Amount of resource that is guaranteed available to the virtual
machine or resource pool
Reserved resources are not wasted if they are not used. If the
utilization is less than the reservation, the resources can be used by
other running virtual machines.
The amount of CPU to be reserved should be less than the CPU limit
specified for the virtual machine.
Valid value: Number
</description>
        <from>cpu allocation reservation</from>
        <to>cpu allocation reservation</to>
      </input>
      <input global="false" required="false">
        <description>The number of shares allocated
The value is used to determine resource allocation in the case of
resource contention. There is no unit for this value. It is a relative
measure based on the settings for other resource pools. This value is
only set if the level is set to custom. Only shares with custom values
can be compared.
If this level is not set to custom, this value is ignored.
Valid value: Number
</description>
        <from>cpu allocation shares</from>
        <to>cpu allocation shares</to>
      </input>
      <input global="false" required="false">
        <description>The allocation level
The level is a simplified view of shares. Levels map to a predetermined
set of numeric values for shares.
Valid values:
■ custom - Shares are specified in the shares column.
■ high - Shares = 2000 * number of virtual CPUs.
■ low - Shares = 500 * number of virtual CPUs.
■ normal - Shares = 1000 * number of virtual CPUs.
If the shares value does not map to a predefined size, the level is set
as custom.

Valid value: String
</description>
        <from>cpu allocation level</from>
        <to>cpu allocation level</to>
      </input>
      <input global="false" required="false">
        <description>In a resource pool with an expandable reservation, the reservation on a resource pool can grow beyond the specified value, if the parent resource pool has unreserved resources. A non-expandable reservation is called a fixed reservation. This property is ignored for virtual machines.

Valid value: “true” and “false”
</description>
        <from>memory allocation expandable reservation</from>
        <to>memory allocation expandable reservation</to>
      </input>
      <input global="false" required="false">
        <description>The utilization of a virtual machine or a resource pool must not
exceed this limit, even if there are available resources
This is typically used to ensure a consistent performance of virtual
machines or resource pools independent of available resources. If
limit is set to -1, there is no fixed limit on resource usage and is only
bounded by available resources and shares.
The unit of measurement is MHz.

valid value: Number
</description>
        <from>memory allocation limit</from>
        <to>memory allocation limit</to>
      </input>
      <input global="false" required="false">
        <description>Amount of resource that is guaranteed available to the virtual
appliance or resource pool
Reserved resources are not wasted if they are not used. If the
utilization is less than the reservation, the resources can be used by
other running vapp.
The amount of Memory to be reserved should be less than the Memory limit
specified for the virtual machine.

Valid value: Number
</description>
        <from>memory allocation reservation</from>
        <to>memory allocation reservation</to>
      </input>
      <input global="false" required="false">
        <description>The number of shares allocated
The value is used to determine resource allocation in the case of
resource contention. There is no unit for this value. It is a relative
measure based on the settings for other resource pools. This value is
only set if the level is set to custom. Only shares with custom values
can be compared.
If this level is not set to custom, this value is ignored.

valid value: Number
</description>
        <from>memory allocation shares</from>
        <to>memory allocation shares</to>
      </input>
      <input global="false" required="false">
        <description>The allocation level
The level is a simplified view of shares. Levels map to a predetermined
set of numeric values for shares.
Valid values:
■ custom - Shares are specified in the shares column.
■ high - Shares = 2000 * number of virtual CPUs.
■ low - Shares = 500 * number of virtual CPUs.
■ normal - Shares = 1000 * number of virtual CPUs.
If the shares value does not map to a predefined size, the level is set
as custom.

valid value: String</description>
        <from>memory allocation level</from>
        <to>memory allocation level</to>
      </input>
      <output global="false" required="false">
        <to>res spec</to>
        <from>res spec</from>
      </output>
    </parameters>
    <access />
    <sequence>
      <spawn>
        <meta>
          <documentation />
          <run-mode-handling>
            <run-mode>OCP</run-mode>
            <allow-step-into>true</allow-step-into>
          </run-mode-handling>
          <checkpoint>false</checkpoint>
        </meta>
        <sequence>
          <call-process>
            <process-name>:RBA-AD-VMware_Infrastructure:Utilities:VApp_Configuration_Operations:Construct VApp CPU Allocation Parameters</process-name>
            <parameters>
              <input>
                <from>cpu allocation expandable reservation</from>
                <to>cpu allocation expandable reservation</to>
              </input>
              <input>
                <from>cpu allocation reservation</from>
                <to>cpu allocation reservation</to>
              </input>
              <input>
                <from>cpu allocation limit</from>
                <to>cpu allocation limit</to>
              </input>
              <input>
                <from>cpu allocation shares</from>
                <to>cpu allocation shares</to>
              </input>
              <input>
                <from>cpu allocation level</from>
                <to>cpu allocation level</to>
              </input>
              <output>
                <from>cpu allocation</from>
                <to>cpu allocation</to>
              </output>
            </parameters>
            <meta>
              <documentation />
              <run-mode-handling>
                <run-mode>OCP</run-mode>
                <allow-step-into>false</allow-step-into>
              </run-mode-handling>
              <checkpoint>false</checkpoint>
            </meta>
            <location>:spawn[1]:sequence[1]:call-process[1]</location>
          </call-process>
        </sequence>
        <sequence>
          <call-process>
            <process-name>:RBA-AD-VMware_Infrastructure:Utilities:VApp_Configuration_Operations:Construct VApp Memory Allocation Parameters</process-name>
            <parameters>
              <input>
                <from>memory allocation expandable reservation</from>
                <to>memory allocation expandable reservation</to>
              </input>
              <input>
                <from>memory allocation reservation</from>
                <to>memory allocation reservation</to>
              </input>
              <input>
                <from>memory allocation limit</from>
                <to>memory allocation limit</to>
              </input>
              <input>
                <from>memory allocation shares</from>
                <to>memory allocation shares</to>
              </input>
              <input>
                <from>memory allocation level</from>
                <to>memory allocation level</to>
              </input>
              <output>
                <from>memory allocation</from>
                <to>memory allocation</to>
              </output>
            </parameters>
            <meta>
              <documentation />
              <run-mode-handling>
                <run-mode>OCP</run-mode>
                <allow-step-into>false</allow-step-into>
              </run-mode-handling>
              <checkpoint>false</checkpoint>
            </meta>
            <location>:spawn[1]:sequence[2]:call-process[1]</location>
          </call-process>
        </sequence>
        <location>:spawn[1]</location>
      </spawn>
      <assign>
        <assignment>
          <output>
            <to>res spec</to>
            <value>
              <empty />
            </value>
          </output>
          <xslt-stylesheet>
            <stylesheet-replacement-tokens>
              <replacement-token name="cpu allocation">
                <input global="false">
                  <from>cpu allocation</from>
                </input>
              </replacement-token>
              <replacement-token name="memory allocation">
                <input global="false">
                  <from>memory allocation</from>
                </input>
              </replacement-token>
            </stylesheet-replacement-tokens>
            <stylesheet><![CDATA[<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="1.0">
  <xsl:output indent="no" />
  <xsl:template match="/">
    <res-spec>${cpu allocation}${memory allocation}</res-spec>
  </xsl:template>
</xsl:stylesheet>]]></stylesheet>
          </xslt-stylesheet>
        </assignment>
        <meta>
          <documentation />
          <checkpoint>false</checkpoint>
        </meta>
        <location>:assign[1]</location>
      </assign>
    </sequence>
    <meta>
      <expose-to>
        <consumer>RULE</consumer>
        <consumer>SCHEDULE</consumer>
      </expose-to>
      <documentation>
        <description>Constructs complex &lt;res-spec&gt; parameter.</description>
        <version></version>
      </documentation>
      <peer-location>
        <location>any</location>
      </peer-location>
      <record-metrics>false</record-metrics>
      <process-id>520ebcd3-28be-4163-9ebc-a6647d9ac53e</process-id>
      <author>admin</author>
      <category></category>
      <status></status>
      <keywords></keywords>
      <systems></systems>
      <last-modified-by>admin</last-modified-by>
      <last-modified>1297319391041</last-modified>
    </meta>
  </process-def>
</process>