<process draft="false" dev-studio-version="7.6.01.02">
  <process-def name=":AO-AD-NetAPP_Storage:v4.0:Data_Set:Create Data Set">
    <parameters>
      <input global="false" required="false">
        <description>The name of the adapter. Default Name: NetAppActor</description>
        <from>adapter name</from>
        <to>adapter name</to>
      </input>
      <input global="false" required="true">
        <description>Create a new, empty data set.  

Sample Items XML:

&lt;items&gt;
&lt;item&gt;
		&lt;targets&gt;
			&lt;target&gt;
				&lt;host&gt;10.10.10.10&lt;/host&gt;
				&lt;user-name&gt;userName&lt;/user-name&gt;
				&lt;password&gt;password&lt;/password&gt;
				&lt;protocol&gt;http&lt;/protocol&gt;
				&lt;port&gt;8088&lt;/port&gt;                                
			&lt;/target&gt;
		&lt;/targets&gt;
	&lt;target&gt;server1&lt;/target&gt;
	&lt;dataset-contact&gt;test@globallogic.com&lt;/dataset-contact&gt;
	&lt;dataset-description&gt;test desc&lt;/dataset-description&gt;
	&lt;dataset-name&gt;testds1&lt;/dataset-name&gt;
	&lt;dataset-access-details&gt;
		&lt;ip-address&gt;12.12.12.12&lt;/ip-address&gt;
		&lt;netmask&gt;255.255.255.0&lt;/netmask&gt;
	&lt;/dataset-access-details&gt;
	&lt;dataset-metadata&gt;
		&lt;dfm-metadata-field&gt;
			&lt;field-name&gt;test field&lt;/field-name&gt;
			&lt;field-value&gt;test value&lt;/field-value&gt;
		&lt;/dfm-metadata-field&gt;
	&lt;/dataset-metadata&gt;
	&lt;dataset-owner&gt;test&lt;/dataset-owner&gt;
	&lt;protection-policy-name-or-id&gt;Back up&lt;/protection-policy-name-or-id&gt;
	&lt;provisioning-policy-name-or-id&gt;policy_sdp&lt;/provisioning-policy-name-or-id&gt;
	&lt;requires-non-disruptive-restore&gt;false&lt;/requires-non-disruptive-restore&gt;
	&lt;is-suspended&gt;false&lt;/is-suspended&gt;
	&lt;timezone-name&gt;GMT&lt;/timezone-name&gt;
	&lt;volume-qtree-name-prefix&gt;bmc&lt;/volume-qtree-name-prefix&gt;
	&lt;is-application-data&gt;true&lt;/is-application-data&gt;
	&lt;application-name&gt;Name of the application&lt;/application-name&gt;
	&lt;application-server-name&gt;Name of the server&lt;/application-server-name&gt;
	&lt;application-version&gt;2.1&lt;/application-version&gt;
	&lt;is-application-responsible-for-primary-backup&gt;true&lt;/is-application-responsible-for-primary-backup&gt;
	&lt;is-application-managing-primary-backup-retention&gt;true&lt;/is-application-managing-primary-backup-retention&gt;
	&lt;carry-primary-backup-retention&gt;true&lt;/carry-primary-backup-retention&gt;
	&lt;vfiler-name-or-id&gt;test-vfiler&lt;/vfiler-name-or-id&gt;
&lt;/item&gt;
&lt;/items&gt;

Parameters Description:

targets [Conditional] 

        It is parent XML element for &lt;target&gt; XML element. 
        The &lt;target&gt; XML element is used to specify dynamic targets at request level. 
        Note: The &lt;targets&gt; XML element is required if the adapter configuration is empty in Grid Manager. 

target [Conditional] 
        It is child XML element of &lt;targets&gt; XML element. This element is used to specify dynamic targets at request level. 

        Using dynamic targets you can define connection information for a remote host within an adapter request. This allows you to configure an adapter in Grid Manager, by specifying configuration information in an adapter request. 

        Note: (1) Adapter configuration specified using request level dynamic targets takes precedence over Grid Manager level configuration information. (2) If request level dynamic target is specified using &lt;targets&gt; XML element, then the &lt;target&gt; element which is child of &lt;item&gt; element is ignored. (3) This element is required if &lt;targets&gt; XML element is present in the adapter request. 

host [Conditional] 
Host name or IP address of server on which NetApp DataFabric Manager is running. 
Note: This element is required if &lt;targets&gt; XML element is present in the adapter request. 

user-name [Conditional] 
NetApp DataFabric Manager login username. 
Note: This element is required if &lt;targets&gt; XML element is present in the adapter request. 

password [Conditional] 
NetApp DataFabric Manager login password. 

You can encrypt the password by specifying the encryption type attribute. 
For example: &lt;password encryption-type = "Base64"&gt;cGFzc3dvcmQ=&lt;/password&gt;. 
Note: This element is required if &lt;targets&gt; XML element is present in the adapter request. 

protocol [Optional] 
Communication protocol used by adapter. Valid value is http or https. Default value is http. 

port [Optional] 
Port on which NetApp DataFabric Manager is enabled. Default value is 8088 for http protocol and 8488 for https protocol. 

target [Optional] 
It is child XML element of &lt;item&gt; XML element. 
You can use this element to specify the connection information for a DFM Server. For this a comma separated list of configuration names can be specified. This executes the request simultaneously on all DFM servers identified by the configuration names. 
Valid values: 
1. The values specified for &lt;target&gt; XML element must be same as the values that have been specified for the name attribute of &lt;config&gt; element in Grid Manager adapter configuration. 
2. You can provide "ALL" as the value. In this case the request will get executed on all the DFM servers defined in Grid Manager adapter configuration. 
3. You can specify multiple comma separated names to allow simultaneous execution of requests across multiple DFM servers. 
4. You can skip this element. In that case the request will be executed on the first defined Grid Manager adapter configuration. 
You can leave this element empty. In that case the request will be executed on the first defined Grid Manager adapter configuration. 

Note: This element is ignored if request level dynamic target is specified using &lt;targets&gt; XML element.



dataset-contact[Optional]
 Contact for the data set, such as the owner's e-mail address.  
 
dataset-description[Optional] 
	Description of the new data set, up to 255 characters long.  
	
dataset-metadata[Optional]
 Opaque metadata for data set. Metadata is usually set and interpreted by an application that is using the data set. DFM does not look into the contents of the metadata. 

dfm-metadata-field[Optional]
	This is the parent field that contains one metadata information. This is defined using the following key/value tags - field-name,field-value.

field-name[Optional] 
	Name of the metadata field. Field names are up to 255 characters in length and are case- insensitive. This is required if dataset-metadata is present.

field-value[Optional] 
	Arbitrary, user-defined data expressed as a string. The string is opaque to the server and must not exceed 16384 (16k) characters in length. This is required if dataset-metadata is present.
 
dataset-name[Required]
	Name of the new data set.  

dataset-access-details[Optional]
	Data access details for a dataset that needs to be configured and provisioned in a way that it is capable of transparent migration. This enables all the storage in the primary node of the dataset to be migrated to a different physical resource without having to reconfigure the clients accessing this storage.

ip-address[Optional]
	IP address in dotted decimal format. (for example, "192.168.11.12"). The length of this string cannot be more than 16 characters. This tag is required if dataset access details needs to be provided.

netmask[Optional]
	Netmask for the IP Address in dotted decimal notation. As input, this is valid only when ip-address is also provided in dataset-access-details. Provisioning Manager will create a vFiler unit whose IP Address will be the one configured as ip-address and it will be bound to an interface with this netmask.
	
dataset-owner[Optional]
	Name of the owner of the data set, up to 255 characters long.

is-suspended[Optional] 
	This is a boolean field. True if an administrator has chosen to suspend this data set for all automated actions (data protection and conformance check of the data set). Default is False.

protection-policy-name-or-id[Optional]
	Name or identifier of the protection policy to associate with this data set. The dataprotection license is required for this input.
	
provisioning-policy-name-or-id[Optional]
	Name or identifier of the provisioning policy to be associated with the primary node of the data set. The members of the primary node are provisioned based on this policy. Once the provisioning policy is associated with the data set node, the storage in the node is periodically monitored for conformance with the policy.  

requires-non-disruptive-restore[Optional]
	This is a boolean field. If true then the data set will be configured to enable non-disruptive restores from backup destinations. Default value is false. 
 
timezone-name[Optional]
	Timezone to assign to the root node. If specified, the value must be a timezone-name returned by timezone-list-info-iter-next. If no timezone is assigned, then the default system timezone will be used.

volume-qtree-name-prefix[Optional]
	Prefix for volume and qtree names, up to 60 characters long. The allowed characters are a to z A to Z 0 to 9 ' ' (space) . (period) _ (underscore) - (hyphen) If any other characters are included, an error is returned.	

is-application-data[Optional]
	This is a boolean field. If true, the data set is an application data set managed by an external application. Because backups must be coordinated between the application and DFM, transfers move backups between nodes instead of creating new backups. Policies for which this behavior is not supported may not be assigned to application data sets. Conversion of a non-application data set to an application data set is not allowed. The default value is false.

application-info[Optional]
	This input is used only if is-application-data is true. It contains information about the application which manages this dataset.

application-name[Optional]
	Name of an application, up to 255 characters long. For example: "SnapManager for Oracle". This input is used only if is-application-data is true. This input is a required input if is-application-data is true.

application-server-name[Optional]
	The name of the server the application is running on, up to 255 characters long. This is the name of the host server, rather than the name of the client application. This input is used only if is-application-data is true. This input is a required input if is-application-data is true.

application-version[Optional]
	Version of an application, up to 255 characters long. For example: "2.1". This input is used only if is-application-data is true. This input is a required input if is-application-data is true.

is-application-responsible-for-primary-backup[Optional]
	This is a boolean field. DFM creates primary backup versions only if this option is false. This input is used only if is-application-data is true.  This input is a required input if is-application-data is true. Valid values - true, false
	
carry-primary-backup-retention[Optional]
	This is a boolean field. This input is used only if is-application-data is true. If this input is true, retention type of the primary backup is assigned to its replicas on the other nodes of the dataset. An exception is made if the dp-backup-start API with retention-type specified, starts the replication. In that case, the retention type specified in dp-backup-start is assigned to the replicas thereby overriding the retention type of the primary backup. If a scheduled event starts the replication, retention type specified in the schedule event is ignored.
If this input is false, retention type of the primary backup is ignored when assigning retention type to its replicas. Depending on how the backup transfer job was started, the retention type specified either in dp-backup-start API or the one specified in the schedule is assigned to the replica of the primary backup.

When this input is false, replicas of the primary backup may get an undesired retention type if the schedules are not configured very carefully. Therefore, it is recommended that any new users of the API should always set this input to true.

Note that even if the retention type of primary and secondary backups is the same, the retention duration may be different for them. The retention duration is specified for each node in the data protection policy. See dp-policy-node-info for more details.

Always present in the output.

Default is true.

is-application-managing-primary-backup-retention[Optional]
	This is a boolean field. If this input is true, Protection Manager does not enforce retention settings in the policy on the primary backups. Application is responsible for deleting primary backups, possibly by invoking dp-backup-version-delete API.
If this input is false, Protection Manager deletes the primary backups according to the retention settings specified in the policy.

Always present in the output.

Default is false.

vfiler-name-or-id [optional]
	Name or identifier of the vFiler unit to be attached to the primary node of the dataset. If a vFiler unit is attached, then all members provisioned into this node will be exported over this vFiler unit.</description>
        <from>items</from>
        <to>items</to>
      </input>
      <output global="false" required="false">
        <to>adapter response</to>
        <from>adapter response</from>
      </output>
    </parameters>
    <access />
    <sequence>
      <assign>
        <assignment>
          <output>
            <to>operation name</to>
            <value>create-dataset</value>
          </output>
        </assignment>
        <meta>
          <documentation />
          <checkpoint>false</checkpoint>
        </meta>
        <location>:assign[1]</location>
      </assign>
      <call-process>
        <process-name>:AO-AD-NetAPP_Storage:Utilities:Invoke Adapter Request</process-name>
        <parameters>
          <input>
            <from>adapter name</from>
            <to>adapter name</to>
          </input>
          <input>
            <from>items</from>
            <to>items</to>
          </input>
          <input>
            <from>operation name</from>
            <to>operation name</to>
          </input>
          <output>
            <from>adapter response</from>
            <to>adapter response</to>
          </output>
        </parameters>
        <meta>
          <documentation />
          <run-mode-handling>
            <run-mode>OCP</run-mode>
            <allow-step-into>false</allow-step-into>
          </run-mode-handling>
          <checkpoint>false</checkpoint>
        </meta>
        <after-execution>
          <console-output>
            <type>INFO</type>
            <summary>
              <concat>
                <input>
                  <value></value>
                </input>
              </concat>
            </summary>
            <detail>
              <concat>
                <input>
                  <value></value>
                </input>
              </concat>
            </detail>
          </console-output>
        </after-execution>
        <location>:call-process[1]</location>
      </call-process>
    </sequence>
    <meta>
      <expose-to>
        <consumer>RULE</consumer>
        <consumer>SCHEDULE</consumer>
      </expose-to>
      <documentation>
        <description>Create a new, empty data set.</description>
        <version></version>
      </documentation>
      <peer-location>
        <location>any</location>
      </peer-location>
      <record-metrics>false</record-metrics>
      <process-id>a3bbe34d-9d00-3993-8598-fd4747aeee23</process-id>
      <author />
      <category />
      <status />
      <keywords />
      <systems />
      <last-modified-by />
      <last-modified>1290598194891</last-modified>
    </meta>
  </process-def>
</process>