<process draft="false" dev-studio-version="7.6.01.02">
  <process-def name=":AO-AD-NetAPP_Storage:v4.0:Data_Set:Provision Member Of SAN Data Set">
    <parameters>
      <input global="false" required="false">
        <description>The name of the adapter. Default Name: NetAppActor</description>
        <from>adapter name</from>
        <to>adapter name</to>
      </input>
      <input global="false" required="true">
        <description>Provision a new member into the effective primary node of a SAN type data set.

Sample Items XML:

&lt;items&gt;
&lt;item&gt;
		&lt;targets&gt;
			&lt;target&gt;
				&lt;host&gt;10.10.10.10&lt;/host&gt;
				&lt;user-name&gt;userName&lt;/user-name&gt;
				&lt;password&gt;password&lt;/password&gt;
				&lt;protocol&gt;http&lt;/protocol&gt;
				&lt;port&gt;8088&lt;/port&gt;                                
			&lt;/target&gt;
		&lt;/targets&gt;
	&lt;target&gt;server1&lt;/target&gt;
	&lt;dataset-name-or-id&gt;test1&lt;/dataset-name-or-id&gt;
	&lt;size&gt;21000000&lt;/size&gt;
	&lt;name&gt;vol3&lt;/name&gt;
	&lt;dry-run&gt;true&lt;/dry-run&gt;
	&lt;include-dry-run-reason-details&gt;false&lt;/include-dry-run-reason-details&gt;
	&lt;comments&gt;
		&lt;provision-member-comment&gt;
			&lt;comment-field-name-or-id&gt;id&lt;/comment-field-name-or-id&gt;
			&lt;comment-value&gt;value&lt;/comment-value&gt;
		&lt;/provision-member-comment&gt;
	&lt;/comments&gt;
	&lt;create-new-vfiler&gt;false&lt;/create-new-vfiler&gt;
	&lt;description&gt;test desc&lt;/description&gt;
	&lt;resource-name-or-id&gt;simeth0:aggr0&lt;/resource-name-or-id&gt;
	&lt;initial-snapshot-space&gt;2000000&lt;/initial-snapshot-space&gt;
	&lt;maximum-snapshot-space&gt;3000000&lt;/maximum-snapshot-space&gt;
	&lt;maximum-data-size&gt;3000000&lt;/maximum-data-size&gt;
	&lt;force&gt;true&lt;/force&gt;
	&lt;dataset-export-info&gt;
		&lt;dataset-export-protocol&gt;fcp&lt;/dataset-export-protocol&gt;
		&lt;dataset-lun-mapping-info&gt;
			&lt;igroup-os-type&gt;windows&lt;/igroup-os-type&gt;
			&lt;lun-mapping-initiators&gt;
				&lt;lun-mapping-initiator&gt;
					&lt;hostname&gt;12.12.12.12&lt;/hostname&gt;
					&lt;initiator-id&gt;aaaaaaaaaaaaaaaa&lt;/initiator-id&gt;
				&lt;/lun-mapping-initiator&gt;
			&lt;/lun-mapping-initiators&gt;
		&lt;/dataset-lun-mapping-info&gt;
	&lt;/dataset-export-info&gt;
	&lt;vfiler-name-or-id&gt;test filer&lt;/vfiler-name-or-id&gt;
	&lt;online-migration&gt;true&lt;/online-migration&gt;
&lt;/item&gt;
&lt;/items&gt;

Parameters Description:

targets [Conditional] 

        It is parent XML element for &lt;target&gt; XML element. 
        The &lt;target&gt; XML element is used to specify dynamic targets at request level. 
        Note: The &lt;targets&gt; XML element is required if the adapter configuration is empty in Grid Manager. 

target [Conditional] 
        It is child XML element of &lt;targets&gt; XML element. This element is used to specify dynamic targets at request level. 

        Using dynamic targets you can define connection information for a remote host within an adapter request. This allows you to configure an adapter in Grid Manager, by specifying configuration information in an adapter request. 

        Note: (1) Adapter configuration specified using request level dynamic targets takes precedence over Grid Manager level configuration information. (2) If request level dynamic target is specified using &lt;targets&gt; XML element, then the &lt;target&gt; element which is child of &lt;item&gt; element is ignored. (3) This element is required if &lt;targets&gt; XML element is present in the adapter request. 

host [Conditional] 
Host name or IP address of server on which NetApp DataFabric Manager is running. 
Note: This element is required if &lt;targets&gt; XML element is present in the adapter request. 

user-name [Conditional] 
NetApp DataFabric Manager login username. 
Note: This element is required if &lt;targets&gt; XML element is present in the adapter request. 

password [Conditional] 
NetApp DataFabric Manager login password. 

You can encrypt the password by specifying the encryption type attribute. 
For example: &lt;password encryption-type = "Base64"&gt;cGFzc3dvcmQ=&lt;/password&gt;. 
Note: This element is required if &lt;targets&gt; XML element is present in the adapter request. 

protocol [Optional] 
Communication protocol used by adapter. Valid value is http or https. Default value is http. 

port [Optional] 
Port on which NetApp DataFabric Manager is enabled. Default value is 8088 for http protocol and 8488 for https protocol. 

target [Optional] 
It is child XML element of &lt;item&gt; XML element. 
You can use this element to specify the connection information for a DFM Server. For this a comma separated list of configuration names can be specified. This executes the request simultaneously on all DFM servers identified by the configuration names. 
Valid values: 
1. The values specified for &lt;target&gt; XML element must be same as the values that have been specified for the name attribute of &lt;config&gt; element in Grid Manager adapter configuration. 
2. You can provide "ALL" as the value. In this case the request will get executed on all the DFM servers defined in Grid Manager adapter configuration. 
3. You can specify multiple comma separated names to allow simultaneous execution of requests across multiple DFM servers. 
4. You can skip this element. In that case the request will be executed on the first defined Grid Manager adapter configuration. 
You can leave this element empty. In that case the request will be executed on the first defined Grid Manager adapter configuration. 

Note: This element is ignored if request level dynamic target is specified using &lt;targets&gt; XML element.



dataset-name-or-id[Required]
	The name of the dataset whose member will be provisioned.

description[Optional]
	Description of the provisioning request. The length of this string cannot be more than 255 characters.
  
initial-snapshot-space[Optional]
	Applicable when provisioning members in SAN data sets (i.e. data sets associated with provisioning policy of type 'san'). Specify the initial disk space in bytes that needs to be allocated upfront for Snapshot copies of the member. Range: [1..2^63-1]

maximum-snapshot-space[Required]
	Applicable when provisioning members in SAN data sets (i.e. data sets associated with provisioning policy of type 'san'). Specify the maximum disk space in bytes for the Snapshot copies of the member. Once the space consumed by Snapshot copies reaches this value, further Snapshot copies will fail. Range: [1..2^63-1] 
 
maximum-data-size[Optional]
	Maximum storage space for the dataset member. Applicable when provisioning members in NFS data sets (i.e. datasets associated with provisioning policy of type 'nas' and export over 'NFS' protocol). Storage clients can write data up to this limit if the containing aggregate has space. The value is specified in bytes. Range: [1..2^63-1] 

force[Optional]
	This is a boolean field. By default, force is false. If true, and an edit is already in progress on the specified dataset or an object the dataset is dependent on (such as a data protection policy), the previous edit session is rolled back and a new edit session is begun.

resource-name-or-id[Optional]
	Name or identifier of the resource object from which storage space will be provisioned. valid types of objects are:- 
    		* Filer 
	     * Aggregate 
	The filer or aggregate specified should belong to the resource pool(s) associated with primary node of the dataset.

name[Optional] 
	Name of the storage container. If this is a NAS data set, i.e the provisioning policy associated with the primary node of the data set is of type 'nas', then this name corresponds to the qtree created. If this is a SAN data set, i.e the provisioning policy associated with the primary node of the data set is of type 'san', then this name corresponds to the LUN or volume that will be provisioned as part of this request. The length of this string cannot be more than 255 characters.
If this tag is not provided, a name for storage to be provisioned will be deduced automatically which will have the following format - StorageyyyyMMddHHmmss

size[Required] 
	Size for the data set member. The value is in bytes. Range: [1..2^63-1] 

dry-run[Optional]
	This is a boolean field. If true, return the dry-run-results list as well as the conformance-alerts list. The dry-run-results list contains actions that would be taken should the changes be committed without actually committing the changes. The conformance-alerts list contains high level alerts to notify a user of conditions that will impact any attempt to commit the changes. A conformance alert may warn that if the changes are committed, one or more rebaseline operations may be done. The conformance alerts may also warn of conditions that exist that may prevent the sucessful conformance of datasets. The edit lock is not released after a dry run. By default, dry-run is false.

include-dry-run-reason-details[Optional]
	This is a boolean field. If true or omitted, then include any possible dry-run-reason-details along with the associated dry-run-result element. Default value is true. If false, the dry-run-reason-details will not be returned.

comments[Optional]
	Comments to be associated with the provisioning request.

provision-member-comment[Optional]
	One comment field to fill in as part of the request.

comment-field-name-or-id[Optional]
	Name or identifier of the comment field.

comment-value[Optional]
	Value of the comment field. An empty string can be used to unset the value of the comment field for this object.

create-new-vfiler[Optional]
	This is a boolean field. True, if new vFiler Unit needs to be created during provisioning. The provisioned storage container is then moved to the vFiler Unit. 'dataset-access-details' should be defined while creating a dataset if this is 'true'. The default value is 'false'.

dataset-export-info[Optional]
	Specifies the SAN export settings for the the provisioning member. Member level export settings cannot be specified, if export settings have been configured at node level.

dataset-export-protocol[Optional]
	Specifies the protocol over which members of the dataset node will be exported. This value is always returned. If omitted during a modify operation, the existing value is not changed. If specified as 'none' in a modify operation, the existing settings will be cleared. Default value is 'none'.
Valid values - fcp,iscsi,none

dataset-lun-mapping-info[Optional]
	Specifies the hosts and/or initiators to which LUNs in this dataset node will be mapped, and the igroup OS type. This field may be present only if the dataset-export-protocol is 'fcp' or 'iscsi'.

igroup-os-type[Optional]
	Specifies the OS type for initiators to map LUNs in the dataset node to. Possible values are: 'windows', 'windows_gpt', 'windows_2008', 'hpux', 'aix, 'linux, 'solaris', 'vmware' and 'netware'. Here "windows_gpt" refers to Windows using GPT (GUID Partition Type) partitioning style and "windows_2008" refers to Windows Longhorn systems.

lun-mapping-initiators[Optional]
	Specifies the initiators to map LUNs in the dataset node to, and, optionally, the host to which they belong.

lun-mapping-initiator[Optional]
	Specifies an initiator to map LUNs in the dataset node to, and, optionally, the host to which it belongs.

hostname[Optional]
	Specifies the name of the host which owns the initiator.

initiator-id[Optional]
	Specifies an initiator id on a host to which a LUN should be mapped.For FCP initiators, this is a string composed of 16 hexadecimal digits. For iSCSI initiators, this is an initiator name in the dotted-domain notation.

vfiler-name-or-id[Optional]
	Name or id of the vFiler Unit, if specified the newly provisioned dataset member will be moved to the specified vFiler Unit and accessed via the vFiler Unit's IP addresses. Ignored for storage-service-dataset-provision.

online-migration[Optional]
	This is a boolean field. If True, online migration pre checks will be done on this filer before provisioning. This parameter is valid only if create-new-vfiler flag is TRUE OR vfiler-name-or-id is specified.</description>
        <from>items</from>
        <to>items</to>
      </input>
      <output global="false" required="false">
        <to>adapter response</to>
        <from>adapter response</from>
      </output>
    </parameters>
    <access />
    <sequence>
      <assign>
        <assignment>
          <output>
            <to>operation name</to>
            <value>dataset-provision-member</value>
          </output>
        </assignment>
        <meta>
          <documentation />
          <checkpoint>false</checkpoint>
        </meta>
        <location>:assign[1]</location>
      </assign>
      <call-process>
        <process-name>:AO-AD-NetAPP_Storage:Utilities:Invoke Adapter Request</process-name>
        <parameters>
          <input>
            <from>adapter name</from>
            <to>adapter name</to>
          </input>
          <input>
            <from>items</from>
            <to>items</to>
          </input>
          <input>
            <from>operation name</from>
            <to>operation name</to>
          </input>
          <output>
            <from>adapter response</from>
            <to>adapter response</to>
          </output>
        </parameters>
        <meta>
          <documentation />
          <run-mode-handling>
            <run-mode>OCP</run-mode>
            <allow-step-into>false</allow-step-into>
          </run-mode-handling>
          <checkpoint>false</checkpoint>
        </meta>
        <after-execution>
          <console-output>
            <type>INFO</type>
            <summary>
              <concat>
                <input>
                  <value></value>
                </input>
              </concat>
            </summary>
            <detail>
              <concat>
                <input>
                  <value></value>
                </input>
              </concat>
            </detail>
          </console-output>
        </after-execution>
        <location>:call-process[1]</location>
      </call-process>
    </sequence>
    <meta>
      <expose-to>
        <consumer>RULE</consumer>
        <consumer>SCHEDULE</consumer>
      </expose-to>
      <documentation>
        <description>Provision a new member into the effective primary node of a SAN type data set.</description>
        <version></version>
      </documentation>
      <peer-location>
        <location>any</location>
      </peer-location>
      <record-metrics>false</record-metrics>
      <process-id>1b877dec-74d6-3592-a498-c71d738e6d66</process-id>
      <author />
      <category />
      <status />
      <keywords />
      <systems />
      <last-modified-by />
      <last-modified>1290598197485</last-modified>
    </meta>
  </process-def>
</process>