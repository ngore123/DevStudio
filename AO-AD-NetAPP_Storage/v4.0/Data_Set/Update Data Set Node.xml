<process draft="false" dev-studio-version="7.6.01.02">
  <process-def name=":AO-AD-NetAPP_Storage:v4.0:Data_Set:Update Data Set Node">
    <parameters>
      <input global="false" required="false">
        <description>The name of the adapter. Default Name: NetAppActor</description>
        <from>adapter name</from>
        <to>adapter name</to>
      </input>
      <input global="false" required="true">
        <description>Modify node attributes of a dataset. Export settings can also be modified using this wrapper.

Sample Items XML for NFS use case:

&lt;items&gt;
&lt;item&gt;
		&lt;targets&gt;
			&lt;target&gt;
				&lt;host&gt;10.10.10.10&lt;/host&gt;
				&lt;user-name&gt;userName&lt;/user-name&gt;
				&lt;password&gt;password&lt;/password&gt;
				&lt;protocol&gt;http&lt;/protocol&gt;
				&lt;port&gt;8088&lt;/port&gt;                                
			&lt;/target&gt;
		&lt;/targets&gt;
	&lt;target&gt;server1&lt;/target&gt;
	&lt;dataset-name-or-id&gt;test1&lt;/dataset-name-or-id&gt;
	&lt;force&gt;true&lt;/force&gt;
	&lt;dp-node-name&gt;Primary data&lt;/dp-node-name&gt;
	&lt;online-migration&gt;true&lt;/online-migration&gt;
	&lt;resourcepool-name-or-id&gt;Gold&lt;/resourcepool-name-or-id&gt;
	&lt;provisioning-policy-name-or-id&gt;Gold&lt;/provisioning-policy-name-or-id&gt;
	&lt;relinquish-vfiler&gt;false&lt;/relinquish-vfiler&gt;
	&lt;vfiler-name-or-id&gt;test&lt;/vfiler-name-or-id&gt;
	&lt;dataset-access-details&gt;
		&lt;ip-address&gt;12.12.12.12&lt;/ip-address&gt;
		&lt;netmask&gt;255.255.255.0&lt;/netmask&gt;
	&lt;/dataset-access-details&gt;
	&lt;dataset-export-info&gt;
		&lt;dataset-export-protocol&gt;nfs&lt;/dataset-export-protocol&gt;
		&lt;dataset-nfs-export-setting&gt;
		  &lt;nfs-protocol-version&gt;v3&lt;/nfs-protocol-version&gt;
		  &lt;anonymous-access-user&gt;65534&lt;/anonymous-access-user&gt;
		  &lt;disable-setuid&gt;true&lt;/disable-setuid&gt;
		  &lt;disable-setuid&gt;true&lt;/disable-setuid&gt;
		  &lt;is-readonly-for-all-hosts&gt;false&lt;/is-readonly-for-all-hosts&gt;		  
		  &lt;is-readwrite-for-all-hosts&gt;true&lt;/is-readwrite-for-all-hosts&gt;		  
		  &lt;nfs-security-flavors&gt;
			&lt;nfs-security-flavor&gt;krb5&lt;/nfs-security-flavor&gt;
			&lt;nfs-security-flavor&gt;krb5p&lt;/nfs-security-flavor&gt;
			&lt;nfs-security-flavor&gt;sys&lt;/nfs-security-flavor&gt;
		  &lt;/nfs-security-flavors&gt;
		  &lt;nfs-export-root-hosts&gt;
			&lt;nfs-export-host&gt;
			  &lt;is-an-exception&gt;false&lt;/is-an-exception&gt;
			  &lt;hostname&gt;12.12.12.12&lt;/hostname&gt;
			&lt;/nfs-export-host&gt;
		  &lt;/nfs-export-root-hosts&gt;
		  &lt;nfs-export-rw-hosts&gt;
			&lt;nfs-export-host&gt;
			  &lt;is-an-exception&gt;false&lt;/is-an-exception&gt;
			  &lt;hostname&gt;12.12.12.12&lt;/hostname&gt;
			&lt;/nfs-export-host&gt;
		  &lt;/nfs-export-rw-hosts&gt;
		&lt;/dataset-nfs-export-setting&gt;
	&lt;/dataset-export-info&gt;
	&lt;timezone-name&gt;GMT&lt;/timezone-name&gt;
&lt;/item&gt;
&lt;/items&gt;

Sample Items XML for CIFS use case:

&lt;items&gt;
&lt;item&gt;
		&lt;targets&gt;
			&lt;target&gt;
				&lt;host&gt;10.10.10.10&lt;/host&gt;
				&lt;user-name&gt;userName&lt;/user-name&gt;
				&lt;password&gt;password&lt;/password&gt;
				&lt;protocol&gt;http&lt;/protocol&gt;
				&lt;port&gt;8088&lt;/port&gt;                                
			&lt;/target&gt;
		&lt;/targets&gt;
	&lt;target&gt;server1&lt;/target&gt;
	&lt;dataset-name-or-id&gt;test1&lt;/dataset-name-or-id&gt;
	&lt;force&gt;true&lt;/force&gt;
	&lt;dp-node-name&gt;Primary data&lt;/dp-node-name&gt;
	&lt;online-migration&gt;true&lt;/online-migration&gt;
	&lt;resourcepool-name-or-id&gt;Gold&lt;/resourcepool-name-or-id&gt;
	&lt;provisioning-policy-name-or-id&gt;Gold&lt;/provisioning-policy-name-or-id&gt;
	&lt;relinquish-vfiler&gt;true&lt;/relinquish-vfiler&gt;
	&lt;vfiler-name-or-id&gt;test&lt;/vfiler-name-or-id&gt;
	&lt;dataset-access-details&gt;
		&lt;ip-address&gt;12.12.12.12&lt;/ip-address&gt;
		&lt;netmask&gt;255.255.255.0&lt;/netmask&gt;
	&lt;/dataset-access-details&gt;
	&lt;dataset-export-info&gt;
		&lt;dataset-export-protocol&gt;cifs&lt;/dataset-export-protocol&gt;
		&lt;dataset-cifs-export-setting&gt;
		  &lt;cifs-domain&gt;synapse.com&lt;/cifs-domain&gt;
		  &lt;dataset-cifs-share-permissions&gt;
			&lt;dataset-cifs-share-permission&gt;
			  &lt;cifs-username&gt;Everyone&lt;/cifs-username&gt;
			  &lt;permission&gt;full_control&lt;/permission&gt;
			&lt;/dataset-cifs-share-permission&gt;
			&lt;dataset-cifs-share-permission&gt;
			  &lt;cifs-username&gt;test&lt;/cifs-username&gt;
			  &lt;permission&gt;read&lt;/permission&gt;
			&lt;/dataset-cifs-share-permission&gt;
		  &lt;/dataset-cifs-share-permissions&gt;
		&lt;/dataset-cifs-export-setting&gt;
	&lt;/dataset-export-info&gt;
	&lt;timezone-name&gt;GMT&lt;/timezone-name&gt;
&lt;/item&gt;
&lt;/items&gt;

Sample Items XML for SAN(LUN) use case:

&lt;items&gt;
&lt;item&gt;
		&lt;targets&gt;
			&lt;target&gt;
				&lt;host&gt;10.10.10.10&lt;/host&gt;
				&lt;user-name&gt;userName&lt;/user-name&gt;
				&lt;password&gt;password&lt;/password&gt;
				&lt;protocol&gt;http&lt;/protocol&gt;
				&lt;port&gt;8088&lt;/port&gt;                                
			&lt;/target&gt;
		&lt;/targets&gt;
	&lt;target&gt;server1&lt;/target&gt;
	&lt;dataset-name-or-id&gt;test1&lt;/dataset-name-or-id&gt;
	&lt;force&gt;true&lt;/force&gt;
	&lt;dp-node-name&gt;Primary data&lt;/dp-node-name&gt;
	&lt;online-migration&gt;true&lt;/online-migration&gt;
	&lt;resourcepool-name-or-id&gt;Gold&lt;/resourcepool-name-or-id&gt;
	&lt;provisioning-policy-name-or-id&gt;Gold&lt;/provisioning-policy-name-or-id&gt;
	&lt;relinquish-vfiler&gt;true&lt;/relinquish-vfiler&gt;
	&lt;vfiler-name-or-id&gt;test&lt;/vfiler-name-or-id&gt;
	&lt;dataset-access-details&gt;
		&lt;ip-address&gt;12.12.12.12&lt;/ip-address&gt;
		&lt;netmask&gt;255.255.255.0&lt;/netmask&gt;
	&lt;/dataset-access-details&gt;
	&lt;dataset-export-info&gt;
		&lt;dataset-export-protocol&gt;iscsi&lt;/dataset-export-protocol&gt;		
		&lt;dataset-lun-mapping-info&gt;
			&lt;igroup-os-type&gt;windows&lt;/igroup-os-type&gt;
			&lt;lun-mapping-initiators&gt;
				&lt;lun-mapping-initiator&gt;
					&lt;hostname&gt;12.12.12.12&lt;/hostname&gt;
					&lt;initiator-id&gt;iqn.1991-05.com.microsoft:d-13000.abc.com&lt;/initiator-id&gt;
				&lt;/lun-mapping-initiator&gt;
			&lt;/lun-mapping-initiators&gt;
		&lt;/dataset-lun-mapping-info&gt;
	&lt;/dataset-export-info&gt;
	&lt;timezone-name&gt;GMT&lt;/timezone-name&gt;
&lt;/item&gt;
&lt;/items&gt;

Parameters Description:
targets [Conditional] 

        It is parent XML element for &lt;target&gt; XML element. 
        The &lt;target&gt; XML element is used to specify dynamic targets at request level. 
        Note: The &lt;targets&gt; XML element is required if the adapter configuration is empty in Grid Manager. 

target [Conditional] 
        It is child XML element of &lt;targets&gt; XML element. This element is used to specify dynamic targets at request level. 

        Using dynamic targets you can define connection information for a remote host within an adapter request. This allows you to configure an adapter in Grid Manager, by specifying configuration information in an adapter request. 

        Note: (1) Adapter configuration specified using request level dynamic targets takes precedence over Grid Manager level configuration information. (2) If request level dynamic target is specified using &lt;targets&gt; XML element, then the &lt;target&gt; element which is child of &lt;item&gt; element is ignored. (3) This element is required if &lt;targets&gt; XML element is present in the adapter request. 

host [Conditional] 
Host name or IP address of server on which NetApp DataFabric Manager is running. 
Note: This element is required if &lt;targets&gt; XML element is present in the adapter request. 

user-name [Conditional] 
NetApp DataFabric Manager login username. 
Note: This element is required if &lt;targets&gt; XML element is present in the adapter request. 

password [Conditional] 
NetApp DataFabric Manager login password. 

You can encrypt the password by specifying the encryption type attribute. 
For example: &lt;password encryption-type = "Base64"&gt;cGFzc3dvcmQ=&lt;/password&gt;. 
Note: This element is required if &lt;targets&gt; XML element is present in the adapter request. 

protocol [Optional] 
Communication protocol used by adapter. Valid value is http or https. Default value is http. 

port [Optional] 
Port on which NetApp DataFabric Manager is enabled. Default value is 8088 for http protocol and 8488 for https protocol. 

target [Optional] 
It is child XML element of &lt;item&gt; XML element. 
You can use this element to specify the connection information for a DFM Server. For this a comma separated list of configuration names can be specified. This executes the request simultaneously on all DFM servers identified by the configuration names. 
Valid values: 
1. The values specified for &lt;target&gt; XML element must be same as the values that have been specified for the name attribute of &lt;config&gt; element in Grid Manager adapter configuration. 
2. You can provide "ALL" as the value. In this case the request will get executed on all the DFM servers defined in Grid Manager adapter configuration. 
3. You can specify multiple comma separated names to allow simultaneous execution of requests across multiple DFM servers. 
4. You can skip this element. In that case the request will be executed on the first defined Grid Manager adapter configuration. 
You can leave this element empty. In that case the request will be executed on the first defined Grid Manager adapter configuration. 

Note: This element is ignored if request level dynamic target is specified using &lt;targets&gt; XML element.


dataset-name-or-id[Required]
	The name of the dataset that whose attributes will be modified.

force[Optional]
	This is a boolean field. By default, force is false. If true, and an edit is already in progress on the specified dataset or an object the dataset is dependent on (such as a data protection policy), the previous edit session is rolled back and a new edit session is begun.
	
dp-node-name[Optional]
	Name of the node in the data protection policy that maps to the storage	set. dp-node-name must match exactly the name of one of the nodes in the data protection policy that is currently assigned to the data set.
If dp-node-name is not specified, then the storage set associated with the root node is modified.

online-migration[Optional]
	This is a boolean field. If true, will indicate that the migration cutover has to be non-disrputive. By default the migration will be assumed to be disruptive. Default: false.

resourcepool-name-or-id[Optional]
	Name or object identifier of a resource pool to assign to the storage set. If other resource pool(s) are already assigned to the	storage set, then this one will replace it. This will delete all the attached resource pools and add the new one. If the input value is the empty string "", then no resource pool will be assigned to the storage set i.e. all the attached resource pools will be removed. If this parameter is not supplied, then the storage set's resource pool assignment will not be changed.

provisioning-policy-name-or-id[Optional]
	Name or object identifier of the provisioning policy to be attached to the node. The implications of this are:
		1. Members of the storage set associated with node are checked for conformance with the provisioning policy.
		2. Any new members provisioned into the storage set will be based on this provisioning policy.

relinquish-vfiler[Optional]
	This is a boolean field. If true, relinquish the vFiler unit associated with the dataset. This will destroy the vFiler unit, move all the storage owned by the vFiler unit to the hosting storage system and re-export the dataset over the storage system. This option can be specified only when:
	1. The vFiler unit associated with the root node of the dataset has been created for transparent migration by Provisioning Manager. In this case is-vfiler-created-for-migration will be true in dataset-info returned by dataset-list-info-iter APIs.
	2. All storage of the vFiler unit belongs to the primary node of the dataset, except for the root storage.
Default value is false.

vfiler-name-or-id[Optional]
	Name or object identifier of the vFiler unit to be attached to the node. If there are any members currently in the node, they should belong to this vFiler unit. Any new member provisioned for this node, will be exported over this vFiler unit.

dataset-access-details[Optional]
	Data access details for a dataset that needs to be configured and provisioned in a way that it is capable of transparent migration. This enables all the storage in the primary node of the dataset to be migrated to a different physical resource without having to reconfigure the clients accessing this storage. This input is valid only when: - There are no members in the dataset. - There is no vFiler unit attached to the dataset. - The node being edited is the primary node of the dataset.

ip-address[Optional]
	IP address in dotted decimal format. (for example, "192.168.11.12"). The length of this string cannot be more than 16 characters.

netmask[Optional]
	Netmask for the IP Address in dotted decimal notation. As input, this is valid only when ip-address is also provided in dataset-access-details. Provisioning Manager will create a vFiler unit whose IP Address will be the one configured as ip-address and it will be bound to an interface with this netmask.

dataset-export-info[Optional]
	Specifies the NAS or SAN export settings for the the provisioning member. Member level export settings cannot be specified, if export settings have been configured at node level.

dataset-cifs-export-setting[Optional]
	The CIFS export settings for storage exported over CIFS. This field may be present only if the dataset-export-protocol is 'cifs' or 'mixed'.

cifs-domain[Optional]
	Name of the CIFS domain. If present, then only filers or vFilers belonging to this CIFS domain is considered for provisioning. If not present, then any filer is picked. Up to 255 characters.

dataset-cifs-share-permissions[Optional]
	Specifies the permissions granted to users on storage provisioned in this dataset node. This field may be present only if the dataset-export-protocol is 'cifs' or 'mixed'.

dataset-cifs-share-permission[Optional]
	 single permission granted to a user on CIFS shares within a dataset node.

cifs-username[Optional]
	Name of a user in the specified domain. The username may be the name of an actual domain user or one of the built-in names - 'administrator' or 'everyone'. This is required for defining 'dataset-cifs-share-permission'.

permission[Optional]
	Specifies the permissions granted to a user.This is required for defining 'dataset-cifs-share-permission'.

dataset-export-protocol[Optional]
	Specifies the protocol over which members of the dataset node will be exported. This value is always returned. If omitted during a modify operation, the existing value is not changed. If specified as 'none' in a modify operation, the existing settings will be cleared. Default value is 'none'. Depending on the export protocol, dataset-lun-mapping, or a combination of dataset-nfs-export-setting and dataset-cifs-share-permissions, should be specified in a modify operation, and will be returned in the iterator output.

dataset-lun-mapping-info[Optional]
	Specifies the hosts and/or initiators to which LUNs in this dataset node will be mapped, and the igroup OS type. This field may be present only if the dataset-export-protocol is 'fcp' or 'iscsi'.

igroup-os-type[Optional]
	Specifies the OS type for initiators to map LUNs in the dataset node to. Possible values are: 'windows', 'windows_gpt', 'windows_2008', 'hpux', 'aix, 'linux, 'solaris', 'vmware' and 'netware'. Here "windows_gpt" refers to Windows using GPT (GUID Partition Type) partitioning style and "windows_2008" refers to Windows Longhorn systems.

lun-mapping-initiators[Optional]
	Specifies the initiators to map LUNs in the dataset node to, and, optionally, the host to which they belong.

lun-mapping-initiator[Optional]
	Specifies an initiator to map LUNs in the dataset node to, and, optionally, the host to which it belongs.

hostname[Optional]
	Specifies the name of the host which owns the initiator.

initiator-id[Optional]
	Specifies an initiator id on a host to which a LUN should be mapped.For FCP initiators, this is a string composed of 16 hexadecimal digits. For iSCSI initiators, this is an initiator name in the dotted-domain notation.

dataset-nfs-export-setting[Optional]
	The NFS export settings for storage exported over NFS. This field may be present only if the dataset-export-protocol is 'nfs' or 'mixed'.

anonymous-access-user[Optional]
	If the client accessing the export is not present in the root access list for the export, the effective user for root is the value specified for this field. Default value is 65534 which maps to user nobody. It could be an integer Range: [0..65534] or a user name not more than 255 characters.

disable-setuid[Optional]
	This is a boolean field. If true, causes the server file system to ignore attempts to enable the setuid or setgid mode bits. Default value is true.

is-readonly-for-all-hosts[Optional]
	This is a boolean field. Specifies that all hosts receive read-only permissions on nfs exports in this dataset node. Equivalent to specifying "ro" on the filer. Default value is false. If true, is-readwrite-for-all-hosts must be false.

is-readwrite-for-all-hosts[Optional]
	This is a boolean field. Specifies that all hosts receive read-write permissions on nfs exports in this dataset node. Equivalent to specifying "rw" on the filer. Default value is false. If true, is-readonly-for-all-hosts must be false.

nfs-export-ro-hosts[Optional]
	A list of hosts with read-only permissions on exports in this dataset node. If a non empty list of nfs-export-ro-hosts is present along with is-readonly-for-all-hosts as true, then an error will be returned.

nfs-export-root-hosts[Optional]
	A list of hosts with the root user having read-only or read-write permissions on exports in this dataset node.

nfs-export-rw-hosts[Optional]
	A list of hosts with read-write permissions on exports in this dataset node. If a non empty list of nfs-export-rw-hosts is present along with is-readwrite-for-all-hosts as true, then an error will be returned.

nfs-export-host[Optional]
	Specifies a single host or all-hosts. A host can be a host name (DNS name), an IP address, a subnet or a domain name. If an 'all-hosts' entry is present, all other host name entries must be negated.

hostname[Optional]
	Specifies a single host name entry. A host name may be a DNS name, an IP address, a subnet (specified as &lt;subnet address&gt;/&lt;prefix length&gt; i.e. CIDR notation or '[network] &lt;subnet-address&gt; [netmask] &lt;netmask&gt;'), a domain, or a workgroup.

is-an-exception[Optional]
	This is a boolean field. Specifies that the rule does not apply to this host. Should be used when it is required to grant permissions to hosts in a subnet or a domain or all hosts excluding some. Default value is false.

nfs-security-flavors[Optional]
	List of strings specifying the security flavors supported on exports in this dataset node. If this field is not specified, the default value of 'sys' is assumed.

nfs-security-flavor[Optional]
	A security flavor to be applied on nfs exports. Possible values are 'none', 'sys' (Unix Style), 'krb5' (Kerberos v5) , krb5i' (Kerberos v5 integrity) and 'krb5p' (Kerberos v5 privacy). Default value is 'sys'.

nfs-protocol-version[Optional]
	NFS protocol version, valid values are "v2", "v3" and "v4". Default value is "v3". If set, the storage systems that have the given version enabled will be selected to provision storage for the dataset.

timezone-name[Optional]
	Timezone to assign to the storage set. The value must be either a timezone-name returned by timezone-list-info-iter-next, or the empty string "". If the value is "", no timezone is assigned to the storage set. Storage sets with no timezone assignment use the timezone of the resource pool assigned to them, or the system default if no timezone is assigned to the resource pool.</description>
        <from>items</from>
        <to>items</to>
      </input>
      <output global="false" required="false">
        <to>adapter response</to>
        <from>adapter response</from>
      </output>
    </parameters>
    <access />
    <sequence>
      <assign>
        <assignment>
          <output>
            <to>operation name</to>
            <value>update-dataset-node</value>
          </output>
        </assignment>
        <meta>
          <documentation />
          <checkpoint>false</checkpoint>
        </meta>
        <location>:assign[1]</location>
      </assign>
      <call-process>
        <process-name>:AO-AD-NetAPP_Storage:Utilities:Invoke Adapter Request</process-name>
        <parameters>
          <input>
            <from>adapter name</from>
            <to>adapter name</to>
          </input>
          <input>
            <from>items</from>
            <to>items</to>
          </input>
          <input>
            <from>operation name</from>
            <to>operation name</to>
          </input>
          <output>
            <from>adapter response</from>
            <to>adapter response</to>
          </output>
        </parameters>
        <meta>
          <documentation />
          <run-mode-handling>
            <run-mode>OCP</run-mode>
            <allow-step-into>false</allow-step-into>
          </run-mode-handling>
          <checkpoint>false</checkpoint>
        </meta>
        <after-execution>
          <console-output>
            <type>INFO</type>
            <summary>
              <concat>
                <input>
                  <value></value>
                </input>
              </concat>
            </summary>
            <detail>
              <concat>
                <input>
                  <value></value>
                </input>
              </concat>
            </detail>
          </console-output>
        </after-execution>
        <location>:call-process[1]</location>
      </call-process>
    </sequence>
    <meta>
      <expose-to>
        <consumer>RULE</consumer>
        <consumer>SCHEDULE</consumer>
      </expose-to>
      <documentation>
        <description>Modify node attributes of a dataset. Export settings can also be modified using this wrapper.</description>
        <version></version>
      </documentation>
      <peer-location>
        <location>any</location>
      </peer-location>
      <record-metrics>false</record-metrics>
      <process-id>4512a98c-d891-3ce0-9caa-8925cc014afa</process-id>
      <author />
      <category />
      <status />
      <keywords />
      <systems />
      <last-modified-by />
      <last-modified>1290598199188</last-modified>
    </meta>
  </process-def>
</process>