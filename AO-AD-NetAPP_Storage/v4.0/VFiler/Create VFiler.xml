<process draft="false" dev-studio-version="7.6.01.02">
  <process-def name=":AO-AD-NetAPP_Storage:v4.0:VFiler:Create VFiler">
    <parameters>
      <input global="false" required="false">
        <description>The name of the adapter. Default Name: NetAppActor</description>
        <from>adapter name</from>
        <to>adapter name</to>
      </input>
      <input global="false" required="true">
        <description>Create a new vFiler on a storage system. A vFiler can be created by either:
- Specifying the filer on which to create it.
- Specifying a resource pool. In this case, a filer is selected from the resource pool based on required licenses and in-built resource selection algorithm to evenly balance space and load in the resource pool and a vFiler will be created on the selected filer.

Sample Items XML:

&lt;items&gt;
	&lt;item&gt;
		&lt;targets&gt;
			&lt;target&gt;
				&lt;host&gt;10.10.10.10&lt;/host&gt;
				&lt;user-name&gt;userName&lt;/user-name&gt;
				&lt;password&gt;password&lt;/password&gt;
				&lt;protocol&gt;http&lt;/protocol&gt;
				&lt;port&gt;8088&lt;/port&gt;                                
			&lt;/target&gt;
		&lt;/targets&gt;
		&lt;target&gt;server1&lt;/target&gt;
		&lt;name&gt;testfiler&lt;/name&gt;
		&lt;resource-name-or-id&gt;12.12.12.12&lt;/resource-name-or-id&gt;
		&lt;ip-address&gt;13.13.13.13&lt;/ip-address&gt;
		&lt;dry-run&gt;true&lt;/dry-run&gt;
		&lt;allowed-protocols&gt;
			&lt;protocol&gt;nfs&lt;/protocol&gt;
			&lt;protocol&gt;iscsi&lt;/protocol&gt;
			&lt;protocol&gt;cifs&lt;/protocol&gt;
		&lt;/allowed-protocols&gt;
      	&lt;ipspace&gt;default-ipspace&lt;/ipspace&gt;
	&lt;/item&gt;
&lt;/items&gt;

Parameters Description

targets [Conditional] 

        It is parent XML element for &lt;target&gt; XML element. 
        The &lt;target&gt; XML element is used to specify dynamic targets at request level. 
        Note: The &lt;targets&gt; XML element is required if the adapter configuration is empty in Grid Manager. 

target [Conditional] 
        It is child XML element of &lt;targets&gt; XML element. This element is used to specify dynamic targets at request level. 

        Using dynamic targets you can define connection information for a remote host within an adapter request. This allows you to configure an adapter in Grid Manager, by specifying configuration information in an adapter request. 

        Note: (1) Adapter configuration specified using request level dynamic targets takes precedence over Grid Manager level configuration information. (2) If request level dynamic target is specified using &lt;targets&gt; XML element, then the &lt;target&gt; element which is child of &lt;item&gt; element is ignored. (3) This element is required if &lt;targets&gt; XML element is present in the adapter request. 

host [Conditional] 
Host name or IP address of server on which NetApp DataFabric Manager is running. 
Note: This element is required if &lt;targets&gt; XML element is present in the adapter request. 

user-name [Conditional] 
NetApp DataFabric Manager login username. 
Note: This element is required if &lt;targets&gt; XML element is present in the adapter request. 

password [Conditional] 
NetApp DataFabric Manager login password. 

You can encrypt the password by specifying the encryption type attribute. 
For example: &lt;password encryption-type = "Base64"&gt;cGFzc3dvcmQ=&lt;/password&gt;. 
Note: This element is required if &lt;targets&gt; XML element is present in the adapter request. 

protocol [Optional] 
Communication protocol used by adapter. Valid value is http or https. Default value is http. 

port [Optional] 
Port on which NetApp DataFabric Manager is enabled. Default value is 8088 for http protocol and 8488 for https protocol. 

target [Optional] 
It is child XML element of &lt;item&gt; XML element. 
You can use this element to specify the connection information for a DFM Server. For this a comma separated list of configuration names can be specified. This executes the request simultaneously on all DFM servers identified by the configuration names. 
Valid values: 
1. The values specified for &lt;target&gt; XML element must be same as the values that have been specified for the name attribute of &lt;config&gt; element in Grid Manager adapter configuration. 
2. You can provide "ALL" as the value. In this case the request will get executed on all the DFM servers defined in Grid Manager adapter configuration. 
3. You can specify multiple comma separated names to allow simultaneous execution of requests across multiple DFM servers. 
4. You can skip this element. In that case the request will be executed on the first defined Grid Manager adapter configuration. 
You can leave this element empty. In that case the request will be executed on the first defined Grid Manager adapter configuration. 

Note: This element is ignored if request level dynamic target is specified using &lt;targets&gt; XML element.


name[Required]
	Name of the new vFiler to be created. Only alphabets, number, hyphens and underscore characters are allowed. It can be a maximum of 64 characters.

resource-name-or-id[Required]
	Name or identifier of the hosting filer or resource pool from which to provision a new vFiler.

allowed-protocols[Optional]
	List of protocols that needs to be allowed access to the vFiler. If not specfied, none of the protocols will be allowed on the vFiler.

protocol[Optional]
	Name of the protocol. This tag is required if the list of allowed protocols needs to be provided. Possible values: "nfs", "cifs", "iscsi".

dry-run[Optional]
	Check if a vFiler can be created on the given resource-name-or-id. The hosting filer on which the vFiler is created will be returned. If there are any errors, because of which a vFiler cannot be created on the given resource-name-or-id, the API will throw an error. No changes are made to the resource-name-or-id when dry-run is true. Default value is false.

ip-address[Conditional]
	IP address of the new vFiler. This element is not required only when the API is run in dry-run mode.

ipspace[Optional]
	IP Space of the new vFiler. Only alphabets, number, hyphens and underscore characters are allowed. It can be a maximum of 64 characters. If not specified, vFiler is created in "default-ipspace".

</description>
        <from>items</from>
        <to>items</to>
      </input>
      <output global="false" required="false">
        <to>adapter response</to>
        <from>adapter response</from>
      </output>
    </parameters>
    <access />
    <sequence>
      <assign>
        <assignment>
          <output>
            <to>operation name</to>
            <value>create-vfiler</value>
          </output>
        </assignment>
        <meta>
          <documentation />
          <checkpoint>false</checkpoint>
        </meta>
        <location>:assign[1]</location>
      </assign>
      <call-process>
        <process-name>:AO-AD-NetAPP_Storage:Utilities:Invoke Adapter Request</process-name>
        <parameters>
          <input>
            <from>adapter name</from>
            <to>adapter name</to>
          </input>
          <input>
            <from>items</from>
            <to>items</to>
          </input>
          <input>
            <from>operation name</from>
            <to>operation name</to>
          </input>
          <output>
            <from>adapter response</from>
            <to>adapter response</to>
          </output>
        </parameters>
        <meta>
          <documentation />
          <run-mode-handling>
            <run-mode>OCP</run-mode>
            <allow-step-into>false</allow-step-into>
          </run-mode-handling>
          <checkpoint>false</checkpoint>
        </meta>
        <after-execution>
          <console-output>
            <type>INFO</type>
            <summary>
              <concat>
                <input>
                  <value></value>
                </input>
              </concat>
            </summary>
            <detail>
              <concat>
                <input>
                  <value></value>
                </input>
              </concat>
            </detail>
          </console-output>
        </after-execution>
        <location>:call-process[1]</location>
      </call-process>
    </sequence>
    <meta>
      <expose-to>
        <consumer>RULE</consumer>
        <consumer>SCHEDULE</consumer>
      </expose-to>
      <documentation>
        <description>Create a new vFiler on a storage system. A vFiler can be created by either:
- Specifying the filer on which to create it.
- Specifying a resource pool. In this case, a filer is selected from the resource pool based on required licenses and in-built resource selection algorithm to evenly balance space and load in the resource pool and a vFiler will be created on the selected filer.
</description>
        <version></version>
      </documentation>
      <peer-location>
        <location>any</location>
      </peer-location>
      <record-metrics>false</record-metrics>
      <process-id>edf772a4-97c0-35ec-b6cf-84f6630dee4b</process-id>
      <author />
      <category />
      <status />
      <keywords />
      <systems />
      <last-modified-by />
      <last-modified>1290598219688</last-modified>
    </meta>
  </process-def>
</process>