<process draft="false" dev-studio-version="7.8.02">
  <process-def name=":AMP-AD-BMC-Remedy-ARS:Find Items">
    <parameters>
      <input global="false" required="false">
        <description>The name of the adapter to use to handle the request.</description>
        <from>adapter name</from>
        <to>adapter name</to>
      </input>
      <input global="false" required="true">
        <description>&lt;items&gt;
&lt;item&gt;
&lt;schema&gt;Alert Events&lt;/schema&gt;
&lt;max-retrieve&gt;50&lt;/max-retrieve&gt; &lt;!-- (This paramete r is optional ) specify how many records to be retrieved that match the provided qualification --&gt;
&lt;key&gt;2&lt;/key&gt;
&lt;value&gt;Realops1&lt;/value&gt;
&lt;fields&gt;
&lt;field&gt;User&lt;/field&gt;
&lt;field&gt;Priority&lt;/field&gt;
&lt;field&gt;Source&lt;/field&gt;
&lt;/fields&gt;
&lt;/item&gt;
&lt;/items&gt;</description>
        <from>items</from>
        <to>items</to>
      </input>
      <input global="false" required="true">
        <description>Currently "v7.0", "v7.5", "v7.6", "v8.0", "v8.1", "v9.0", "v9.1" versions are supported</description>
        <from>version</from>
        <to>version</to>
      </input>
      <input global="false" required="true">
        <description> Identifies the item type. </description>
        <from>item type</from>
        <to>item type</to>
      </input>
      <input global="false" required="false">
        <description> This contains any metadata needed by the adapter to connect to the target</description>
        <from>connection parameters</from>
        <to>connection parameters</to>
      </input>
      <input global="false" required="false">
        <description>This parameter is used to specify whether attachment needs to be downloded with details or 
only with details in response.
If value set to true then attachment are downloaded on configured detination location (configurable through adapter configuration)on disk. if false then only attachment details are added in response.

Valid values:
1. true
2. false</description>
        <from>download attachments</from>
        <to>download attachments</to>
      </input>
      <input global="false" required="false">
        <description>This parameter is used to specify the attachment to be sent in adapter response 
itself in Base 64 encoded string and set this string in &lt;attachment-data&gt; element in response if valuse is set to true else &lt;attachment-data&gt; is not added in response. Default value is false.
Note: if &lt;retrieve-attachment-in-response&gt; is set to true then &lt;download-attachments&gt; parameter value is not considered.
Only attachment details are shown in response if "retrieve-attachment-in-response" and "download-attachments"parameter values are set to false.
Valid values:
1. true
2. false</description>
        <from>retrieve attachment in response</from>
        <to>retrieve attachment in response</to>
      </input>
      <output global="false" required="false">
        <to>adapter response</to>
        <from>response collection</from>
      </output>
    </parameters>
    <access />
    <sequence>
      <assign>
        <assignment>
          <document>
            <input>
              <from>item type</from>
            </input>
          </document>
          <result>
            <output>
              <to>response collection</to>
            </output>
          </result>
          <xslt-stylesheet>
            <stylesheet-replacement-tokens>
              <replacement-token name="item type">
                <input global="false">
                  <from>item type</from>
                </input>
              </replacement-token>
            </stylesheet-replacement-tokens>
            <stylesheet><![CDATA[<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="1.0">
  <xsl:output indent="yes" />
  <xsl:template match="/">
    <xsl:element name="${item type}-collection"></xsl:element>
  </xsl:template>
</xsl:stylesheet>]]></stylesheet>
          </xslt-stylesheet>
        </assignment>
        <meta>
          <documentation />
          <checkpoint>false</checkpoint>
        </meta>
        <location>:assign[1]</location>
      </assign>
      <for-each>
        <document>
          <input>
            <from>items</from>
          </input>
        </document>
        <result>
          <output>
            <to>item</to>
          </output>
        </result>
        <xpath-expression>
          <xpath-replacement-tokens />
          <xpath><![CDATA[//item]]></xpath>
        </xpath-expression>
        <meta>
          <documentation />
          <run-mode-handling>
            <run-mode>OCP</run-mode>
            <allow-step-into>true</allow-step-into>
          </run-mode-handling>
          <checkpoint>false</checkpoint>
        </meta>
        <sequence>
          <switch>
            <meta>
              <documentation />
              <run-mode-handling>
                <run-mode>OCP</run-mode>
                <allow-step-into>true</allow-step-into>
              </run-mode-handling>
              <checkpoint>false</checkpoint>
            </meta>
            <execute-all-applicable-cases>false</execute-all-applicable-cases>
            <default>
              <sequence />
            </default>
            <case>
              <condition>
                <document>
                  <input>
                    <from>version</from>
                  </input>
                </document>
                <xpath-expression>
                  <xpath-replacement-tokens />
                  <xpath><![CDATA[text()='v7.0']]></xpath>
                </xpath-expression>
              </condition>
              <sequence>
                <call-process>
                  <process-name>:AMP-AD-BMC-Remedy-ARS:v7.0:Get Entries</process-name>
                  <parameters>
                    <input>
                      <from>adapter name</from>
                      <to>adapter name</to>
                    </input>
                    <input>
                      <from>item</from>
                      <to>schema name</to>
                      <xpath-expression>
                        <xpath-replacement-tokens />
                        <xpath><![CDATA[//schema/text()]]></xpath>
                      </xpath-expression>
                    </input>
                    <input>
                      <from>item</from>
                      <to>requested fields</to>
                      <xslt-stylesheet>
                        <stylesheet-replacement-tokens />
                        <stylesheet><![CDATA[<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="1.0">
  <xsl:output indent="yes" />
  <xsl:template match="/">
    <xsl:copy-of select="//fields" />
  </xsl:template>
</xsl:stylesheet>]]></stylesheet>
                      </xslt-stylesheet>
                    </input>
                    <input>
                      <from>item</from>
                      <to>match condition</to>
                      <xpath-expression>
                        <xpath-replacement-tokens />
                        <xpath><![CDATA[//query/text()]]></xpath>
                      </xpath-expression>
                    </input>
                    <input>
                      <from>item</from>
                      <to>key1</to>
                      <xpath-expression>
                        <xpath-replacement-tokens />
                        <xpath><![CDATA[//key/text()]]></xpath>
                      </xpath-expression>
                    </input>
                    <input>
                      <from>item</from>
                      <to>value1</to>
                      <xpath-expression>
                        <xpath-replacement-tokens />
                        <xpath><![CDATA[//value/text()]]></xpath>
                      </xpath-expression>
                    </input>
                    <input>
                      <from>item</from>
                      <to>key2</to>
                      <xpath-expression>
                        <xpath-replacement-tokens />
                        <xpath><![CDATA[string(//key2)]]></xpath>
                      </xpath-expression>
                    </input>
                    <input>
                      <from>item</from>
                      <to>value2</to>
                      <xpath-expression>
                        <xpath-replacement-tokens />
                        <xpath><![CDATA[string(//value2)]]></xpath>
                      </xpath-expression>
                    </input>
                    <input>
                      <from>download attachments</from>
                      <to>download attachments</to>
                    </input>
                    <input>
                      <from>retrieve attachment in response</from>
                      <to>retrieve attachment in response</to>
                    </input>
                    <input>
                      <from>item</from>
                      <to>maximum records to retrieve</to>
                      <xpath-expression>
                        <xpath-replacement-tokens />
                        <xpath><![CDATA[//max-retrieve/text()]]></xpath>
                      </xpath-expression>
                    </input>
                    <output>
                      <from>adapter response</from>
                      <to>adapter response</to>
                    </output>
                  </parameters>
                  <meta>
                    <documentation />
                    <run-mode-handling>
                      <run-mode>OCP</run-mode>
                      <allow-step-into>false</allow-step-into>
                    </run-mode-handling>
                    <checkpoint>false</checkpoint>
                  </meta>
                  <location>:switch[1]:sequence[2]:call-process[1]</location>
                </call-process>
                <assign>
                  <assignment>
                    <document>
                      <input>
                        <from>response collection</from>
                      </input>
                    </document>
                    <result>
                      <output>
                        <to>response collection</to>
                      </output>
                    </result>
                    <xslt-stylesheet>
                      <stylesheet-replacement-tokens>
                        <replacement-token name="item type">
                          <input global="false">
                            <from>item type</from>
                          </input>
                        </replacement-token>
                        <replacement-token name="adapter response">
                          <input global="false">
                            <from>adapter response</from>
                          </input>
                        </replacement-token>
                      </stylesheet-replacement-tokens>
                      <stylesheet><![CDATA[<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="1.0">
  <xsl:output indent="yes" />
  <xsl:template match="/">
    <xsl:element name="${item type}-collection">
      <xsl:copy-of select="//${item type}-collection/*" />
      <xsl:element name="${item type}">
         ${adapter response}
       </xsl:element>
    </xsl:element>
  </xsl:template>
</xsl:stylesheet>]]></stylesheet>
                    </xslt-stylesheet>
                  </assignment>
                  <meta>
                    <documentation />
                    <checkpoint>false</checkpoint>
                  </meta>
                  <location>:switch[1]:sequence[2]:assign[1]</location>
                </assign>
              </sequence>
            </case>
            <case>
              <condition>
                <document>
                  <input>
                    <from>version</from>
                  </input>
                </document>
                <xpath-expression>
                  <xpath-replacement-tokens />
                  <xpath><![CDATA[text()='v7.5' or text()='v7.6' or text()='v8.0' or text()='v8.1' or text()='v9.0' or text()='v9.1']]></xpath>
                </xpath-expression>
              </condition>
              <sequence>
                <console-output>
                  <type>INFO</type>
                </console-output>
                <call-process>
                  <process-name>:AMP-AD-BMC-Remedy-ARS:v7.5:Get Entries</process-name>
                  <parameters>
                    <input>
                      <from>adapter name</from>
                      <to>adapter name</to>
                    </input>
                    <input>
                      <from>item</from>
                      <to>schema name</to>
                      <xpath-expression>
                        <xpath-replacement-tokens />
                        <xpath><![CDATA[//schema/text()]]></xpath>
                      </xpath-expression>
                    </input>
                    <input>
                      <from>item</from>
                      <to>requested fields</to>
                      <xslt-stylesheet>
                        <stylesheet-replacement-tokens />
                        <stylesheet><![CDATA[<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="1.0">
  <xsl:output indent="yes" />
  <xsl:template match="/">
    <xsl:copy-of select="//fields" />
  </xsl:template>
</xsl:stylesheet>]]></stylesheet>
                      </xslt-stylesheet>
                    </input>
                    <input>
                      <from>item</from>
                      <to>match condition</to>
                      <xpath-expression>
                        <xpath-replacement-tokens />
                        <xpath><![CDATA[//query/text()]]></xpath>
                      </xpath-expression>
                    </input>
                    <input>
                      <from>item</from>
                      <to>key1</to>
                      <xpath-expression>
                        <xpath-replacement-tokens />
                        <xpath><![CDATA[//key/text()]]></xpath>
                      </xpath-expression>
                    </input>
                    <input>
                      <from>item</from>
                      <to>value1</to>
                      <xpath-expression>
                        <xpath-replacement-tokens />
                        <xpath><![CDATA[//value/text()]]></xpath>
                      </xpath-expression>
                    </input>
                    <input>
                      <from>item</from>
                      <to>key2</to>
                      <xpath-expression>
                        <xpath-replacement-tokens />
                        <xpath><![CDATA[string(//key2)]]></xpath>
                      </xpath-expression>
                    </input>
                    <input>
                      <from>item</from>
                      <to>value2</to>
                      <xpath-expression>
                        <xpath-replacement-tokens />
                        <xpath><![CDATA[string(//value2)]]></xpath>
                      </xpath-expression>
                    </input>
                    <input>
                      <from>download attachments</from>
                      <to>download attachments</to>
                    </input>
                    <input>
                      <from>retrieve attachment in response</from>
                      <to>retrieve attachment in response</to>
                    </input>
                    <input>
                      <from>item</from>
                      <to>maximum records to retrieve</to>
                      <xpath-expression>
                        <xpath-replacement-tokens />
                        <xpath><![CDATA[//max-retrieve/text()]]></xpath>
                      </xpath-expression>
                    </input>
                    <output>
                      <from>adapter response</from>
                      <to>adapter response</to>
                    </output>
                  </parameters>
                  <meta>
                    <documentation />
                    <run-mode-handling>
                      <run-mode>OCP</run-mode>
                      <allow-step-into>false</allow-step-into>
                    </run-mode-handling>
                    <checkpoint>false</checkpoint>
                  </meta>
                  <location>:switch[1]:sequence[3]:call-process[1]</location>
                </call-process>
                <assign>
                  <assignment>
                    <document>
                      <input>
                        <from>response collection</from>
                      </input>
                    </document>
                    <result>
                      <output>
                        <to>response collection</to>
                      </output>
                    </result>
                    <xslt-stylesheet>
                      <stylesheet-replacement-tokens>
                        <replacement-token name="item type">
                          <input global="false">
                            <from>item type</from>
                          </input>
                        </replacement-token>
                        <replacement-token name="adapter response">
                          <input global="false">
                            <from>adapter response</from>
                          </input>
                        </replacement-token>
                      </stylesheet-replacement-tokens>
                      <stylesheet><![CDATA[<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="1.0">
  <xsl:output indent="yes" />
  <xsl:template match="/">
    <xsl:element name="${item type}-collection">
      <xsl:copy-of select="//${item type}-collection/*" />
      <xsl:element name="${item type}">
         ${adapter response}
       </xsl:element>
    </xsl:element>
  </xsl:template>
</xsl:stylesheet>]]></stylesheet>
                    </xslt-stylesheet>
                  </assignment>
                  <meta>
                    <documentation />
                    <checkpoint>false</checkpoint>
                  </meta>
                  <location>:switch[1]:sequence[3]:assign[1]</location>
                </assign>
              </sequence>
            </case>
            <location>:switch[1]</location>
          </switch>
        </sequence>
        <location>:for-each[1]</location>
      </for-each>
    </sequence>
    <meta>
      <expose-to>
        <consumer>RULE</consumer>
        <consumer>SCHEDULE</consumer>
      </expose-to>
      <documentation>
        <description>Find Item(s)
    Finds one or more items within a Remedy datastore. 

 </description>
        <version>1.0</version>
      </documentation>
      <logging-options>
        <is-enabled>false</is-enabled>
        <log-file-name></log-file-name>
      </logging-options>
      <peer-location>
        <location>any</location>
      </peer-location>
      <record-metrics>false</record-metrics>
      <process-id>b7a35204-1b72-3b06-b366-2d12f19bee19</process-id>
      <author>admin</author>
      <category></category>
      <status></status>
      <keywords></keywords>
      <systems></systems>
      <last-modified-by>admin</last-modified-by>
      <last-modified>1484541761998</last-modified>
    </meta>
  </process-def>
</process>