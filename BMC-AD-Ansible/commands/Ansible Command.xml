<process draft="false" dev-studio-version="20.02.00">
  <process-def name=":BMC-AD-Ansible:commands:Ansible Command">
    <parameters>
      <input global="false" required="false">
        <description>The name of the Adapter to use for this Process.</description>
        <from>adapter name</from>
        <to>adapter name</to>
      </input>
      <input global="false" required="false">
        <description>The host name or IP address of the remote host.</description>
        <from>host name</from>
        <to>host name</to>
      </input>
      <input global="false" required="false">
        <description>The port on which the remote host listens.</description>
        <from>port</from>
        <to>port</to>
      </input>
      <input global="false" required="false">
        <description>The user name to use for login on the remote host.</description>
        <from>user name</from>
        <to>user name</to>
      </input>
      <input global="false" required="false">
        <description>The password that corresponds
with the username provided.</description>
        <from>password</from>
        <to>password</to>
      </input>
      <input global="false" required="false">
        <description>The method of encryption used
for the password value provided.
Valid values: Base64, Plain
With a value of 'Base64' for this
input, the value provided for the
password input should be a Base64
encoded value. With a value of
'Plain' the value provided for the
password input should be plain
text.</description>
        <from>password encryption type</from>
        <to>password encryption type</to>
      </input>
      <input global="false" required="false">
        <description>Identifies the path to the local
known_hosts file. This file will be
used when performing key
verification.</description>
        <from>known hosts config</from>
        <to>known hosts config</to>
      </input>
      <input global="false" required="false">
        <description>Indicates whether a connection
should continue if key
verification fails.
Valid values: true, false
With a value of 'true', the
connection will be maintained
when connecting to an unknown
or mismatched system. With a
value of 'false' the connection will
be dropped and the Adapter
response will return an error.</description>
        <from>allow unknown hosts</from>
        <to>allow unknown hosts</to>
      </input>
      <input global="false" required="false">
        <description>Preference of the algorithm used
to encrypt the public key.
Valid values: ssh-dss, ssh-rsa</description>
        <from>preferred PK algorithm</from>
        <to>preferred PK algorithm</to>
      </input>
      <input global="false" required="false">
        <description>Identifies the path and file name for the local SSH key file</description>
        <from>private key file</from>
        <to>private key file</to>
      </input>
      <input global="false" required="false">
        <description>Identifies the passphrase (sequence of words or other text used to control access to a computer system) used to protect the private key file</description>
        <from>pass phrase</from>
        <to>pass phrase</to>
      </input>
      <input global="false" required="false">
        <description>To indicate whether the passphrase provided is encrypted</description>
        <from>pass phrase encryption type</from>
        <to>pass phrase encryption type</to>
      </input>
      <input global="false" required="false">
        <description>Specifies the private key data of the local ssh key file. 
  This element is used if the password element is not provided.
  If password and private Key Data both elements are provided,then private Key Data approach is used and    the password element is ignored.</description>
        <from>private key data</from>
        <to>private key data</to>
      </input>
      <input global="false" required="false">
        <description>The command to issue, along
with any arguments.</description>
        <from>command</from>
        <to>command</to>
      </input>
      <input global="false" required="false">
        <description>Time, in whole seconds, allotted
to complete the execution of the
command.</description>
        <from>command timeout</from>
        <to>command timeout</to>
      </input>
      <input global="false" required="false">
        <description>The specific group of managed nodes defined in inventory file</description>
        <from>inventory group</from>
        <to>inventory group</to>
      </input>
      <input global="false" required="false">
        <description>Inventory file in which managed nodes (remote hosts) are defined.
If not specified then default /etc/ansible/hosts file is considered by default for this command. There are various ways to define IPs/host in groups/non groups , pattern and range as well.</description>
        <from>inventory file path</from>
        <to>inventory file path</to>
      </input>
      <input global="false" required="false">
        <description>The ansible module to be specified to execute command .
default module is comand</description>
        <from>command module</from>
        <to>command module</to>
      </input>
      <input global="false" required="false">
        <description>This element is parent of &lt;option&gt; element to specify the ansible command CLI options</description>
        <from>cli options</from>
        <to>cli options</to>
      </input>
      <input global="false" required="false">
        <description>Specify Character set name to encode od decode the characters.
E.g.
Character set     Supporting Language
Shift_JIS          : Japanese character set.
Big5	              : Traditional Chinese character set.
ISO-8859-2	   :  ISO character set for Central European languages.</description>
        <from>character set</from>
        <to>character set</to>
      </input>
      <output global="false" required="false">
        <description>This output context contains actual response XML returned by this which that have the Command &amp; Command output value.</description>
        <to>adapter response</to>
        <from>adapter response</from>
      </output>
      <output global="false" required="false">
        <description>Status represents whether request executed successfully on serve.
Valid values:
1. true
2. false</description>
        <to>success</to>
        <from>success</from>
      </output>
      <output global="false" required="false">
        <description>output element contains the actual output of command</description>
        <to>output</to>
        <from>output</from>
      </output>
      <output global="false" required="false">
        <description>exit code represents the code on which request was executed 
if exit code is 0 then request executed on server successfully otherwise indicates the error</description>
        <to>exit code</to>
        <from>exit code</from>
      </output>
      <output global="false" required="false">
        <description>Error message in case of error status</description>
        <to>error</to>
        <from>error</from>
      </output>
    </parameters>
    <access />
    <sequence>
      <spawn>
        <meta>
          <documentation />
          <run-mode-handling>
            <run-mode>OCP</run-mode>
            <allow-step-into>true</allow-step-into>
          </run-mode-handling>
          <checkpoint>false</checkpoint>
        </meta>
        <sequence>
          <switch>
            <meta>
              <documentation />
              <run-mode-handling>
                <run-mode>OCP</run-mode>
                <allow-step-into>true</allow-step-into>
              </run-mode-handling>
              <checkpoint>false</checkpoint>
            </meta>
            <execute-all-applicable-cases>false</execute-all-applicable-cases>
            <default>
              <sequence />
            </default>
            <case>
              <condition>
                <document>
                  <input>
                    <from>command</from>
                  </input>
                </document>
                <xpath-expression>
                  <xpath-replacement-tokens>
                    <replacement-token name="command">
                      <input global="false">
                        <from>command</from>
                      </input>
                    </replacement-token>
                  </xpath-replacement-tokens>
                  <xpath><![CDATA[string-length(.)>0]]></xpath>
                </xpath-expression>
              </condition>
              <sequence>
                <assign>
                  <assignment>
                    <input>
                      <from>command</from>
                    </input>
                    <output>
                      <to>command</to>
                    </output>
                  </assignment>
                  <meta>
                    <documentation />
                    <checkpoint>false</checkpoint>
                  </meta>
                  <location>:spawn[1]:sequence[1]:switch[1]:sequence[2]:assign[1]</location>
                </assign>
              </sequence>
            </case>
            <location>:spawn[1]:sequence[1]:switch[1]</location>
          </switch>
        </sequence>
        <sequence>
          <switch>
            <meta>
              <documentation />
              <run-mode-handling>
                <run-mode>OCP</run-mode>
                <allow-step-into>true</allow-step-into>
              </run-mode-handling>
              <checkpoint>false</checkpoint>
            </meta>
            <execute-all-applicable-cases>false</execute-all-applicable-cases>
            <default>
              <sequence />
            </default>
            <case>
              <condition>
                <document>
                  <input>
                    <from>adapter name</from>
                  </input>
                </document>
                <xpath-expression>
                  <xpath-replacement-tokens>
                    <replacement-token name="adapter name">
                      <input global="false">
                        <from>adapter name</from>
                      </input>
                    </replacement-token>
                  </xpath-replacement-tokens>
                  <xpath><![CDATA[string-length(.)=0]]></xpath>
                </xpath-expression>
              </condition>
              <sequence>
                <assign>
                  <assignment>
                    <input global="true">
                      <configuration>:BMC-AD-Ansible:Adapter:AdapterName</configuration>
                    </input>
                    <output>
                      <to>adapter name</to>
                    </output>
                  </assignment>
                  <meta>
                    <documentation />
                    <checkpoint>false</checkpoint>
                  </meta>
                  <location>:spawn[1]:sequence[2]:switch[1]:sequence[2]:assign[1]</location>
                </assign>
              </sequence>
            </case>
            <location>:spawn[1]:sequence[2]:switch[1]</location>
          </switch>
        </sequence>
        <location>:spawn[1]</location>
      </spawn>
      <spawn>
        <meta>
          <documentation />
          <run-mode-handling>
            <run-mode>OCP</run-mode>
            <allow-step-into>true</allow-step-into>
          </run-mode-handling>
          <checkpoint>false</checkpoint>
        </meta>
        <sequence>
          <utility>
            <string>
              <lowercase>
                <input>
                  <from>password encryption type</from>
                </input>
              </lowercase>
            </string>
            <output global="false">
              <to>password encryption type</to>
            </output>
            <meta>
              <documentation />
              <checkpoint>false</checkpoint>
            </meta>
            <location>:spawn[2]:sequence[1]:utility[1]</location>
          </utility>
        </sequence>
        <sequence>
          <utility>
            <string>
              <lowercase>
                <input>
                  <from>pass phrase encryption type</from>
                </input>
              </lowercase>
            </string>
            <output global="false">
              <to>pass phrase encryption type</to>
            </output>
            <meta>
              <documentation />
              <checkpoint>false</checkpoint>
            </meta>
            <location>:spawn[2]:sequence[2]:utility[1]</location>
          </utility>
        </sequence>
        <location>:spawn[2]</location>
      </spawn>
      <assign>
        <assignment>
          <document>
            <input>
              <from>command timeout</from>
            </input>
          </document>
          <result>
            <output>
              <to>command timeout</to>
            </output>
          </result>
          <xslt-stylesheet>
            <stylesheet-replacement-tokens />
            <stylesheet><![CDATA[<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="1.0">
  <xsl:output indent="no" />
  <xsl:template match="/">
    <value>
      <xsl:choose>
        <xsl:when test="number(.)&gt;0">
          <xsl:value-of select="." disable-output-escaping="no" />
        </xsl:when>
        <xsl:otherwise>
          <xsl:text disable-output-escaping="no">60</xsl:text>
        </xsl:otherwise>
      </xsl:choose>
    </value>
  </xsl:template>
</xsl:stylesheet>]]></stylesheet>
          </xslt-stylesheet>
        </assignment>
        <assignment>
          <document>
            <input>
              <from>password</from>
            </input>
          </document>
          <result>
            <output>
              <to>output</to>
            </output>
          </result>
          <xslt-stylesheet>
            <stylesheet-replacement-tokens>
              <replacement-token name="password">
                <input global="false">
                  <from>password</from>
                </input>
              </replacement-token>
            </stylesheet-replacement-tokens>
            <stylesheet><![CDATA[<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="1.0">
  <xsl:output indent="no" />
  <xsl:template match="/">
    <value>
      <xsl:text disable-output-escaping="no">&lt;![CDATA[$[password]]]&gt;</xsl:text>
    </value>
  </xsl:template>
</xsl:stylesheet>]]></stylesheet>
          </xslt-stylesheet>
        </assignment>
        <assignment>
          <output>
            <to>operation name</to>
            <value>ansible-command</value>
          </output>
        </assignment>
        <meta>
          <documentation />
          <checkpoint>false</checkpoint>
        </meta>
        <location>:assign[1]</location>
      </assign>
      <switch>
        <meta>
          <documentation />
          <run-mode-handling>
            <run-mode>OCP</run-mode>
            <allow-step-into>true</allow-step-into>
          </run-mode-handling>
          <checkpoint>false</checkpoint>
        </meta>
        <execute-all-applicable-cases>false</execute-all-applicable-cases>
        <default>
          <sequence>
            <assign>
              <assignment>
                <document>
                  <input>
                    <from>command</from>
                  </input>
                </document>
                <result>
                  <output>
                    <to>adapter request</to>
                  </output>
                </result>
                <xslt-stylesheet>
                  <stylesheet-replacement-tokens>
                    <replacement-token name="host name">
                      <input global="false">
                        <from>host name</from>
                      </input>
                    </replacement-token>
                    <replacement-token name="port">
                      <input global="false">
                        <from>port</from>
                      </input>
                    </replacement-token>
                    <replacement-token name="user name">
                      <input global="false">
                        <from>user name</from>
                      </input>
                    </replacement-token>
                    <replacement-token name="password">
                      <input global="false">
                        <from>password</from>
                      </input>
                    </replacement-token>
                    <replacement-token name="command timeout">
                      <input global="false">
                        <from>command timeout</from>
                      </input>
                    </replacement-token>
                    <replacement-token name="password encryption type">
                      <input global="false">
                        <from>password encryption type</from>
                      </input>
                    </replacement-token>
                    <replacement-token name="known hosts config">
                      <input global="false">
                        <from>known hosts config</from>
                      </input>
                    </replacement-token>
                    <replacement-token name="allow unknown hosts">
                      <input global="false">
                        <from>allow unknown hosts</from>
                      </input>
                    </replacement-token>
                    <replacement-token name="preferred pk algorithm">
                      <input global="false">
                        <from>preferred PK algorithm</from>
                      </input>
                    </replacement-token>
                    <replacement-token name="command">
                      <input global="false">
                        <from>command</from>
                      </input>
                    </replacement-token>
                    <replacement-token name="charSet">
                      <input global="false">
                        <from>character set</from>
                      </input>
                    </replacement-token>
                    <replacement-token name="private key file">
                      <input global="false">
                        <from>private key file</from>
                      </input>
                    </replacement-token>
                    <replacement-token name="pass phrase">
                      <input global="false">
                        <from>pass phrase</from>
                      </input>
                    </replacement-token>
                    <replacement-token name="pass phrase encryption type">
                      <input global="false">
                        <from>pass phrase encryption type</from>
                      </input>
                    </replacement-token>
                    <replacement-token name="private key data">
                      <input global="false">
                        <from>private key data</from>
                      </input>
                    </replacement-token>
                    <replacement-token name="operation name">
                      <input global="false">
                        <from>operation name</from>
                      </input>
                    </replacement-token>
                    <replacement-token name="inventory file path">
                      <input global="false">
                        <from>inventory file path</from>
                      </input>
                    </replacement-token>
                    <replacement-token name="inventory group">
                      <input global="false">
                        <from>inventory group</from>
                      </input>
                    </replacement-token>
                    <replacement-token name="command module">
                      <input global="false">
                        <from>command module</from>
                      </input>
                    </replacement-token>
                    <replacement-token name="cli options">
                      <input global="false">
                        <from>cli options</from>
                      </input>
                    </replacement-token>
                  </stylesheet-replacement-tokens>
                  <stylesheet><![CDATA[<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="1.0">
  <xsl:output indent="no" cdata-section-elements="command " />
  <xsl:template match="/">
    <request-data>
      <ansible-request>
        <operation-name>
          <xsl:text disable-output-escaping="no">${operation name}</xsl:text>
        </operation-name>
        <xsl:if test="string-length('${host name}')!=0">
          <!-- Dynamic target specification -->
          <target name="">
            <host>
              <xsl:text disable-output-escaping="no">${host name}</xsl:text>
            </host>
            <xsl:if test="string-length('${port}')=0">
              <port>
                <xsl:text>22</xsl:text>
              </port>
            </xsl:if>
            <xsl:if test="string-length('${port}')!=0">
              <port>
                <xsl:text>${port}</xsl:text>
              </port>
            </xsl:if>
            <userName>${user name}</userName>
            <xsl:if test="string-length('${private key file}')!=0">
              <private-key-file>
                <xsl:text disable-output-escaping="no">${private key file}</xsl:text>
              </private-key-file>
            </xsl:if>
            <xsl:if test="string-length('${private key data}')!=0">
              <private-key-data>
                <xsl:text disable-output-escaping="no">${private key data}</xsl:text>
              </private-key-data>
            </xsl:if>
            <xsl:if test="string-length('${pass phrase}')!=0">
              <pass-phrase>
                <xsl:choose>
                  <xsl:when test="'${pass phrase encryption type}'='base64'">
                    <xsl:attribute name="encryption-type">
                      <xsl:text disable-output-escaping="no">${pass phrase encryption type}</xsl:text>
                    </xsl:attribute>
                    <xsl:text disable-output-escaping="no">$[pass phrase]</xsl:text>
                  </xsl:when>
                  <xsl:when test="'${pass phrase encryption type}'='plain'">
                    <xsl:attribute name="encryption-type">
                      <xsl:text disable-output-escaping="no">${pass phrase encryption type}</xsl:text>
                    </xsl:attribute>
                    <xsl:text disable-output-escaping="no">$[pass phrase]</xsl:text>
                  </xsl:when>
                  <xsl:otherwise>${pass phrase}</xsl:otherwise>
                </xsl:choose>
              </pass-phrase>
            </xsl:if>
            <password>
              <xsl:choose>
                <xsl:when test="'${password encryption type}'='base64'">
                  <xsl:attribute name="encryption-type">
                    <xsl:text disable-output-escaping="no">${password encryption type}</xsl:text>
                  </xsl:attribute>
                  <xsl:text disable-output-escaping="no">$[password]</xsl:text>
                </xsl:when>
                <xsl:when test="'${password encryption type}'='plain'">
                  <xsl:attribute name="encryption-type">
                    <xsl:text disable-output-escaping="no">${password encryption type}</xsl:text>
                  </xsl:attribute>
                  <xsl:text disable-output-escaping="no">$[password]</xsl:text>
                </xsl:when>
                <xsl:otherwise>${password}</xsl:otherwise>
              </xsl:choose>
            </password>
            <xsl:if test="string-length('${command timeout}')!=0">
              <timeout-secs>
                <xsl:text disable-output-escaping="no">${command timeout}</xsl:text>
              </timeout-secs>
            </xsl:if>
            <xsl:if test="string-length('${known hosts config}')!=0">
              <known-hosts-config>
                <xsl:text disable-output-escaping="no">${known hosts config}</xsl:text>
              </known-hosts-config>
            </xsl:if>
            <xsl:if test="string-length('${allow unknown hosts}')!=0">
              <xsl:choose>
                <xsl:when test="'${allow unknown hosts}'='true'">
                  <allow-unknown-hosts>
                    <xsl:text>${allow unknown hosts}</xsl:text>
                  </allow-unknown-hosts>
                </xsl:when>
                <xsl:when test="'${allow unknown hosts}'='false'">
                  <allow-unknown-hosts>
                    <xsl:text>${allow unknown hosts}</xsl:text>
                  </allow-unknown-hosts>
                </xsl:when>
                <xsl:otherwise>
                  <allow-unknown-hosts>
                    <xsl:text>false</xsl:text>
                  </allow-unknown-hosts>
                </xsl:otherwise>
              </xsl:choose>
            </xsl:if>
            <xsl:if test="string-length('${preferred pk algorithm}')!=0">
              <xsl:choose>
                <xsl:when test="'${preferred pk algorithm}'='ssh-dss'">
                  <preferred-pk-algorithm>
                    <xsl:text>${preferred pk algorithm}</xsl:text>
                  </preferred-pk-algorithm>
                </xsl:when>
                <xsl:when test="'${preferred pk algorithm}'='ssh-rsa'">
                  <preferred-pk-algorithm>
                    <xsl:text>${preferred pk algorithm}</xsl:text>
                  </preferred-pk-algorithm>
                </xsl:when>
                <xsl:otherwise>
                  <preferred-pk-algorithm>
                    <xsl:text>ssh-rsa</xsl:text>
                  </preferred-pk-algorithm>
                </xsl:otherwise>
              </xsl:choose>
            </xsl:if>
            <xsl:if test="string-length('$[charSet]')&gt;0">
              <character-set>
                <xsl:text disable-output-escaping="no">${charSet}</xsl:text>
              </character-set>
            </xsl:if>
          </target>
        </xsl:if>
        <inventory-file-path>
          <xsl:text disable-output-escaping="no">${inventory file path}</xsl:text>
        </inventory-file-path>
        <inventory-group>
          <xsl:text disable-output-escaping="no">${inventory group}</xsl:text>
        </inventory-group>
        ${cli options}
        <commands>
          <command encryption-type="plain">
            <xsl:attribute name="timeout-secs">
              <xsl:if test="string-length('${command timeout}')=0">
                <xsl:text disable-output-escaping="no">60</xsl:text>
              </xsl:if>
              <xsl:text disable-output-escaping="no">${command timeout}</xsl:text>
            </xsl:attribute>
            <xsl:value-of select="." disable-output-escaping="no" />
          </command>
        </commands>
        <command-module>
          <xsl:text disable-output-escaping="no">${command module}</xsl:text>
        </command-module>
      </ansible-request>
    </request-data>
  </xsl:template>
</xsl:stylesheet>]]></stylesheet>
                </xslt-stylesheet>
              </assignment>
              <meta>
                <documentation />
                <checkpoint>false</checkpoint>
              </meta>
              <after-execution>
                <log>
                  <level>debug</level>
                  <parameters>
                    <input>
                      <value>private key data</value>
                    </input>
                    <input>
                      <from>private key file</from>
                    </input>
                  </parameters>
                </log>
              </after-execution>
              <location>:switch[1]:sequence[1]:assign[1]</location>
            </assign>
          </sequence>
        </default>
        <case applies-if-any-condition-true="false">
          <condition>
            <document>
              <input>
                <from>output</from>
              </input>
            </document>
            <xpath-expression>
              <xpath-replacement-tokens />
              <xpath><![CDATA[not(contains(., "EncryptedData"))]]></xpath>
            </xpath-expression>
          </condition>
          <condition>
            <document>
              <input>
                <from>password</from>
              </input>
            </document>
            <xpath-expression>
              <xpath-replacement-tokens />
              <xpath><![CDATA[string-length(.)=0]]></xpath>
            </xpath-expression>
          </condition>
          <sequence>
            <assign>
              <assignment>
                <document>
                  <input>
                    <from>command</from>
                  </input>
                </document>
                <result>
                  <output>
                    <to>adapter request</to>
                  </output>
                </result>
                <xslt-stylesheet>
                  <stylesheet-replacement-tokens>
                    <replacement-token name="host name">
                      <input global="false">
                        <from>host name</from>
                      </input>
                    </replacement-token>
                    <replacement-token name="port">
                      <input global="false">
                        <from>port</from>
                      </input>
                    </replacement-token>
                    <replacement-token name="user name">
                      <input global="false">
                        <from>user name</from>
                      </input>
                    </replacement-token>
                    <replacement-token name="password">
                      <input global="false">
                        <from>password</from>
                      </input>
                    </replacement-token>
                    <replacement-token name="command timeout">
                      <input global="false">
                        <from>command timeout</from>
                      </input>
                    </replacement-token>
                    <replacement-token name="password encryption type">
                      <input global="false">
                        <from>password encryption type</from>
                      </input>
                    </replacement-token>
                    <replacement-token name="known hosts config">
                      <input global="false">
                        <from>known hosts config</from>
                      </input>
                    </replacement-token>
                    <replacement-token name="allow unknown hosts">
                      <input global="false">
                        <from>allow unknown hosts</from>
                      </input>
                    </replacement-token>
                    <replacement-token name="preferred pk algorithm">
                      <input global="false">
                        <from>preferred PK algorithm</from>
                      </input>
                    </replacement-token>
                    <replacement-token name="command">
                      <input global="false">
                        <from>command</from>
                      </input>
                    </replacement-token>
                    <replacement-token name="charSet">
                      <input global="false">
                        <from>character set</from>
                      </input>
                    </replacement-token>
                    <replacement-token name="private key file">
                      <input global="false">
                        <from>private key file</from>
                      </input>
                    </replacement-token>
                    <replacement-token name="pass phrase">
                      <input global="false">
                        <from>pass phrase</from>
                      </input>
                    </replacement-token>
                    <replacement-token name="pass phrase encryption type">
                      <input global="false">
                        <from>pass phrase encryption type</from>
                      </input>
                    </replacement-token>
                    <replacement-token name="private key data">
                      <input global="false">
                        <from>private key data</from>
                      </input>
                    </replacement-token>
                    <replacement-token name="operation name">
                      <input global="false">
                        <from>operation name</from>
                      </input>
                    </replacement-token>
                    <replacement-token name="inventory file path">
                      <input global="false">
                        <from>inventory file path</from>
                      </input>
                    </replacement-token>
                    <replacement-token name="inventory group">
                      <input global="false">
                        <from>inventory group</from>
                      </input>
                    </replacement-token>
                    <replacement-token name="command module">
                      <input global="false">
                        <from>command module</from>
                      </input>
                    </replacement-token>
                    <replacement-token name="cli options">
                      <input global="false">
                        <from>cli options</from>
                      </input>
                    </replacement-token>
                  </stylesheet-replacement-tokens>
                  <stylesheet><![CDATA[<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="1.0">
  <xsl:output indent="no" cdata-section-elements="command " />
  <xsl:template match="/">
    <request-data>
      <ansible-request>
        <operation-name>
          <xsl:text disable-output-escaping="no">${operation name}</xsl:text>
        </operation-name>
        <xsl:if test="string-length('${host name}')!=0">
          <!-- Dynamic target specification -->
          <target name="">
            <host>
              <xsl:text disable-output-escaping="no">${host name}</xsl:text>
            </host>
            <xsl:if test="string-length('${port}')=0">
              <port>
                <xsl:text>22</xsl:text>
              </port>
            </xsl:if>
            <xsl:if test="string-length('${port}')!=0">
              <port>
                <xsl:text>${port}</xsl:text>
              </port>
            </xsl:if>
            <userName>${user name}</userName>
            <xsl:if test="string-length('${private key file}')!=0">
              <private-key-file>
                <xsl:text disable-output-escaping="no">${private key file}</xsl:text>
              </private-key-file>
            </xsl:if>
            <xsl:if test="string-length('${private key data}')!=0">
              <private-key-data>
                <xsl:text disable-output-escaping="no">${private key data}</xsl:text>
              </private-key-data>
            </xsl:if>
            <xsl:if test="string-length('${pass phrase}')!=0">
              <pass-phrase>
                <xsl:choose>
                  <xsl:when test="'${pass phrase encryption type}'='base64'">
                    <xsl:attribute name="encryption-type">
                      <xsl:text disable-output-escaping="no">${pass phrase encryption type}</xsl:text>
                    </xsl:attribute>
                    <xsl:text disable-output-escaping="no">$[pass phrase]</xsl:text>
                  </xsl:when>
                  <xsl:when test="'${pass phrase encryption type}'='plain'">
                    <xsl:attribute name="encryption-type">
                      <xsl:text disable-output-escaping="no">${pass phrase encryption type}</xsl:text>
                    </xsl:attribute>
                    <xsl:text disable-output-escaping="no">$[pass phrase]</xsl:text>
                  </xsl:when>
                  <xsl:otherwise>${pass phrase}</xsl:otherwise>
                </xsl:choose>
              </pass-phrase>
            </xsl:if>
            <xsl:if test="string-length('${command timeout}')!=0">
              <timeout-secs>
                <xsl:text disable-output-escaping="no">${command timeout}</xsl:text>
              </timeout-secs>
            </xsl:if>
            <xsl:if test="string-length('${known hosts config}')!=0">
              <known-hosts-config>
                <xsl:text disable-output-escaping="no">${known hosts config}</xsl:text>
              </known-hosts-config>
            </xsl:if>
            <xsl:if test="string-length('${allow unknown hosts}')!=0">
              <xsl:choose>
                <xsl:when test="'${allow unknown hosts}'='true'">
                  <allow-unknown-hosts>
                    <xsl:text>${allow unknown hosts}</xsl:text>
                  </allow-unknown-hosts>
                </xsl:when>
                <xsl:when test="'${allow unknown hosts}'='false'">
                  <allow-unknown-hosts>
                    <xsl:text>${allow unknown hosts}</xsl:text>
                  </allow-unknown-hosts>
                </xsl:when>
                <xsl:otherwise>
                  <allow-unknown-hosts>
                    <xsl:text>false</xsl:text>
                  </allow-unknown-hosts>
                </xsl:otherwise>
              </xsl:choose>
            </xsl:if>
            <xsl:if test="string-length('${preferred pk algorithm}')!=0">
              <xsl:choose>
                <xsl:when test="'${preferred pk algorithm}'='ssh-dss'">
                  <preferred-pk-algorithm>
                    <xsl:text>${preferred pk algorithm}</xsl:text>
                  </preferred-pk-algorithm>
                </xsl:when>
                <xsl:when test="'${preferred pk algorithm}'='ssh-rsa'">
                  <preferred-pk-algorithm>
                    <xsl:text>${preferred pk algorithm}</xsl:text>
                  </preferred-pk-algorithm>
                </xsl:when>
                <xsl:otherwise>
                  <preferred-pk-algorithm>
                    <xsl:text>ssh-rsa</xsl:text>
                  </preferred-pk-algorithm>
                </xsl:otherwise>
              </xsl:choose>
            </xsl:if>
            <xsl:if test="string-length('$[charSet]')&gt;0">
              <character-set>
                <xsl:text disable-output-escaping="no">${charSet}</xsl:text>
              </character-set>
            </xsl:if>
          </target>
        </xsl:if>
        <inventory-file-path>
          <xsl:text disable-output-escaping="no">${inventory file path}</xsl:text>
        </inventory-file-path>
        <inventory-group>
          <xsl:text disable-output-escaping="no">${inventory group}</xsl:text>
        </inventory-group>
        ${cli options}
        <commands>
          <command encryption-type="plain">
            <xsl:attribute name="timeout-secs">
              <xsl:if test="string-length('${command timeout}')=0">
                <xsl:text disable-output-escaping="no">60</xsl:text>
              </xsl:if>
              <xsl:text disable-output-escaping="no">${command timeout}</xsl:text>
            </xsl:attribute>
            <xsl:value-of select="." disable-output-escaping="no" />
          </command>
        </commands>
        <command-module>
          <xsl:text disable-output-escaping="no">${command module}</xsl:text>
        </command-module>
      </ansible-request>
    </request-data>
  </xsl:template>
</xsl:stylesheet>]]></stylesheet>
                </xslt-stylesheet>
              </assignment>
              <meta>
                <documentation />
                <checkpoint>false</checkpoint>
              </meta>
              <location>:switch[1]:sequence[2]:assign[1]</location>
            </assign>
          </sequence>
        </case>
        <location>:switch[1]</location>
      </switch>
      <call-adapter>
        <use-system-adapter>false</use-system-adapter>
        <parameters>
          <input global="false">
            <from>adapter name</from>
          </input>
          <input>
            <value>
              <adapter-request>
                <peer-location>
                  <location>any</location>
                </peer-location>
              </adapter-request>
            </value>
          </input>
          <input global="false">
            <from>adapter request</from>
          </input>
          <input global="false">
            <from>adapter request</from>
          </input>
          <output global="false">
            <to>adapter response</to>
          </output>
        </parameters>
        <meta>
          <documentation />
          <checkpoint>false</checkpoint>
        </meta>
        <before-execution>
          <log>
            <level>debug</level>
            <parameters>
              <input>
                <value>---------------------adapter request-------------------------</value>
              </input>
              <input>
                <from>adapter request</from>
              </input>
            </parameters>
          </log>
        </before-execution>
        <after-execution>
          <log>
            <level>debug</level>
            <parameters>
              <input>
                <value>------------adapter response----------------</value>
              </input>
              <input>
                <from>adapter response</from>
              </input>
            </parameters>
          </log>
        </after-execution>
        <location>:call-adapter[1]</location>
      </call-adapter>
      <assign>
        <assignment>
          <document>
            <input>
              <from>adapter response</from>
            </input>
          </document>
          <result>
            <output>
              <to>script results</to>
            </output>
          </result>
          <xslt-stylesheet>
            <stylesheet-replacement-tokens />
            <stylesheet><![CDATA[<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="1.0">
  <xsl:output indent="yes" />
  <xsl:template match="/">
    <response>
      <ansible-response>
        <xsl:copy-of select="//metadata/text()" />
      </ansible-response>
      <xsl:copy-of select="//command-output" />
      <xsl:copy-of select="//target-output/metadata" />
    </response>
  </xsl:template>
</xsl:stylesheet>]]></stylesheet>
          </xslt-stylesheet>
        </assignment>
        <meta>
          <documentation />
          <checkpoint>false</checkpoint>
        </meta>
        <after-execution>
          <log>
            <level>debug</level>
            <parameters>
              <input>
                <value>-------------script---------------------</value>
              </input>
              <input>
                <from>script results</from>
              </input>
            </parameters>
          </log>
        </after-execution>
        <location>:assign[2]</location>
      </assign>
      <assign>
        <assignment>
          <document>
            <input>
              <from>script results</from>
            </input>
          </document>
          <result>
            <output>
              <to>success</to>
            </output>
          </result>
          <xslt-stylesheet>
            <stylesheet-replacement-tokens />
            <stylesheet><![CDATA[<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="1.0">
  <xsl:output indent="no" />
  <xsl:template match="/">
    <value>
      <xsl:choose>
        <xsl:when test="//command-output/metadata/status/text()='success'">
          <xsl:text disable-output-escaping="no">true</xsl:text>
        </xsl:when>
        <xsl:otherwise>
          <xsl:text disable-output-escaping="no">false</xsl:text>
        </xsl:otherwise>
      </xsl:choose>
    </value>
  </xsl:template>
</xsl:stylesheet>]]></stylesheet>
          </xslt-stylesheet>
        </assignment>
        <assignment>
          <document>
            <input>
              <from>script results</from>
            </input>
          </document>
          <result>
            <output>
              <to>exit code</to>
            </output>
          </result>
          <xpath-expression>
            <xpath-replacement-tokens />
            <xpath><![CDATA[//command-output/metadata/exit-code/text()]]></xpath>
          </xpath-expression>
        </assignment>
        <assignment>
          <document>
            <input>
              <from>script results</from>
            </input>
          </document>
          <result>
            <output>
              <to>error</to>
            </output>
          </result>
          <xslt-stylesheet>
            <stylesheet-replacement-tokens>
              <replacement-token name="success">
                <input global="false">
                  <from>success</from>
                </input>
              </replacement-token>
            </stylesheet-replacement-tokens>
            <stylesheet><![CDATA[<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="1.0">
  <xsl:output indent="no" />
  <xsl:template match="/">
    <xsl:choose>
      <xsl:when test="'${success}'='false'">
        <xsl:copy-of select="//error" />
      </xsl:when>
      <xsl:otherwise>
        <error />
      </xsl:otherwise>
    </xsl:choose>
  </xsl:template>
</xsl:stylesheet>]]></stylesheet>
          </xslt-stylesheet>
        </assignment>
        <assignment>
          <document>
            <input>
              <from>script results</from>
            </input>
          </document>
          <result>
            <output>
              <to>output</to>
            </output>
          </result>
          <xpath-expression>
            <xpath-replacement-tokens />
            <xpath><![CDATA[//command-output/output]]></xpath>
          </xpath-expression>
        </assignment>
        <meta>
          <documentation />
          <checkpoint>false</checkpoint>
        </meta>
        <location>:assign[3]</location>
      </assign>
    </sequence>
    <meta>
      <expose-to>
        <consumer>RULE</consumer>
        <consumer>SCHEDULE</consumer>
      </expose-to>
      <documentation>
        <description></description>
        <version></version>
      </documentation>
      <logging-options>
        <is-enabled>false</is-enabled>
        <log-file-name></log-file-name>
      </logging-options>
      <peer-location>
        <location>any</location>
      </peer-location>
      <record-metrics>false</record-metrics>
      <process-id>ae740cc2-b679-4c08-b5af-12ef1239f5e0</process-id>
      <author>aoadmin</author>
      <category></category>
      <status></status>
      <keywords></keywords>
      <systems></systems>
      <last-modified-by>aoadmin</last-modified-by>
      <last-modified>1596122450366</last-modified>
    </meta>
  </process-def>
</process>